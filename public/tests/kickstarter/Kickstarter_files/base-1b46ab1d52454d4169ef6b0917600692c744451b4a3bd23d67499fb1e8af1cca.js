function showGrowlSection(){$growl_section.fadeIn("fast")}function hideGrowlSection(){$growl_section.fadeOut("fast")}function growl(e,t){$.each(e,function(e,n){"undefined"==typeof t&&(t={}),"error"===e&&(t.sticky=!0,$growl_section.addClass("sticky")),$growl_section.jGrowl(n,$.extend(t,{theme:e,closeTemplate:'<div class="jGrowl-close-x"><span class="ksr-icon__close" aria-hidden="true"></span></div>',beforeOpen:function(){showGrowlSection()},close:function(){hideGrowlSection()}}))})}instrument_function(function(){window.benchmark&&window.performance.mark("begin_base.js_eval")})(this),function(){var e=this,t=e._,n={},i=Array.prototype,r=Object.prototype,o=Function.prototype,a=i.push,s=i.slice,c=i.concat,l=r.toString,u=r.hasOwnProperty,d=i.forEach,f=i.map,h=i.reduce,p=i.reduceRight,m=i.filter,g=i.every,v=i.some,_=i.indexOf,y=i.lastIndexOf,b=Array.isArray,w=Object.keys,$=o.bind,k=function(e){return e instanceof k?e:this instanceof k?void(this._wrapped=e):new k(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):e._=k,k.VERSION="1.5.2";var x=k.each=k.forEach=function(e,t,i){if(null!=e)if(d&&e.forEach===d)e.forEach(t,i);else if(e.length===+e.length){for(var r=0,o=e.length;o>r;r++)if(t.call(i,e[r],r,e)===n)return}else for(var a=k.keys(e),r=0,o=a.length;o>r;r++)if(t.call(i,e[a[r]],a[r],e)===n)return};k.map=k.collect=function(e,t,n){var i=[];return null==e?i:f&&e.map===f?e.map(t,n):(x(e,function(e,r,o){i.push(t.call(n,e,r,o))}),i)};var j="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),h&&e.reduce===h)return i&&(t=k.bind(t,i)),r?e.reduce(t,n):e.reduce(t);if(x(e,function(e,o,a){r?n=t.call(i,n,e,o,a):(n=e,r=!0)}),!r)throw new TypeError(j);return n},k.reduceRight=k.foldr=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),p&&e.reduceRight===p)return i&&(t=k.bind(t,i)),r?e.reduceRight(t,n):e.reduceRight(t);var o=e.length;if(o!==+o){var a=k.keys(e);o=a.length}if(x(e,function(s,c,l){c=a?a[--o]:--o,r?n=t.call(i,n,e[c],c,l):(n=e[c],r=!0)}),!r)throw new TypeError(j);return n},k.find=k.detect=function(e,t,n){var i;return C(e,function(e,r,o){return t.call(n,e,r,o)?(i=e,!0):void 0}),i},k.filter=k.select=function(e,t,n){var i=[];return null==e?i:m&&e.filter===m?e.filter(t,n):(x(e,function(e,r,o){t.call(n,e,r,o)&&i.push(e)}),i)},k.reject=function(e,t,n){return k.filter(e,function(e,i,r){return!t.call(n,e,i,r)},n)},k.every=k.all=function(e,t,i){t||(t=k.identity);var r=!0;return null==e?r:g&&e.every===g?e.every(t,i):(x(e,function(e,o,a){return(r=r&&t.call(i,e,o,a))?void 0:n}),!!r)};var C=k.some=k.any=function(e,t,i){t||(t=k.identity);var r=!1;return null==e?r:v&&e.some===v?e.some(t,i):(x(e,function(e,o,a){return r||(r=t.call(i,e,o,a))?n:void 0}),!!r)};k.contains=k.include=function(e,t){return null==e?!1:_&&e.indexOf===_?-1!=e.indexOf(t):C(e,function(e){return e===t})},k.invoke=function(e,t){var n=s.call(arguments,2),i=k.isFunction(t);return k.map(e,function(e){return(i?t:e[t]).apply(e,n)})},k.pluck=function(e,t){return k.map(e,function(e){return e[t]})},k.where=function(e,t,n){return k.isEmpty(t)?n?void 0:[]:k[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},k.findWhere=function(e,t){return k.where(e,t,!0)},k.max=function(e,t,n){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&k.isEmpty(e))return-1/0;var i={computed:-1/0,value:-1/0};return x(e,function(e,r,o){var a=t?t.call(n,e,r,o):e;a>i.computed&&(i={value:e,computed:a})}),i.value},k.min=function(e,t,n){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&k.isEmpty(e))return 1/0;var i={computed:1/0,value:1/0};return x(e,function(e,r,o){var a=t?t.call(n,e,r,o):e;a<i.computed&&(i={value:e,computed:a})}),i.value},k.shuffle=function(e){var t,n=0,i=[];return x(e,function(e){t=k.random(n++),i[n-1]=i[t],i[t]=e}),i},k.sample=function(e,t,n){return arguments.length<2||n?e[k.random(e.length-1)]:k.shuffle(e).slice(0,Math.max(0,t))};var S=function(e){return k.isFunction(e)?e:function(t){return t[e]}};k.sortBy=function(e,t,n){var i=S(t);return k.pluck(k.map(e,function(e,t,r){return{value:e,index:t,criteria:i.call(n,e,t,r)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var T=function(e){return function(t,n,i){var r={},o=null==n?k.identity:S(n);return x(t,function(n,a){var s=o.call(i,n,a,t);e(r,s,n)}),r}};k.groupBy=T(function(e,t,n){(k.has(e,t)?e[t]:e[t]=[]).push(n)}),k.indexBy=T(function(e,t,n){e[t]=n}),k.countBy=T(function(e,t){k.has(e,t)?e[t]++:e[t]=1}),k.sortedIndex=function(e,t,n,i){n=null==n?k.identity:S(n);for(var r=n.call(i,t),o=0,a=e.length;a>o;){var s=o+a>>>1;n.call(i,e[s])<r?o=s+1:a=s}return o},k.toArray=function(e){return e?k.isArray(e)?s.call(e):e.length===+e.length?k.map(e,k.identity):k.values(e):[]},k.size=function(e){return null==e?0:e.length===+e.length?e.length:k.keys(e).length},k.first=k.head=k.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:s.call(e,0,t)},k.initial=function(e,t,n){return s.call(e,0,e.length-(null==t||n?1:t))},k.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},k.rest=k.tail=k.drop=function(e,t,n){return s.call(e,null==t||n?1:t)},k.compact=function(e){return k.filter(e,k.identity)};var I=function(e,t,n){return t&&k.every(e,k.isArray)?c.apply(n,e):(x(e,function(e){k.isArray(e)||k.isArguments(e)?t?a.apply(n,e):I(e,t,n):n.push(e)}),n)};k.flatten=function(e,t){return I(e,t,[])},k.without=function(e){return k.difference(e,s.call(arguments,1))},k.uniq=k.unique=function(e,t,n,i){k.isFunction(t)&&(i=n,n=t,t=!1);var r=n?k.map(e,n,i):e,o=[],a=[];return x(r,function(n,i){(t?i&&a[a.length-1]===n:k.contains(a,n))||(a.push(n),o.push(e[i]))}),o},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(e){var t=s.call(arguments,1);return k.filter(k.uniq(e),function(e){return k.every(t,function(t){return k.indexOf(t,e)>=0})})},k.difference=function(e){var t=c.apply(i,s.call(arguments,1));return k.filter(e,function(e){return!k.contains(t,e)})},k.zip=function(){for(var e=k.max(k.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=k.pluck(arguments,""+n);return t},k.object=function(e,t){if(null==e)return{};for(var n={},i=0,r=e.length;r>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},k.indexOf=function(e,t,n){if(null==e)return-1;var i=0,r=e.length;if(n){if("number"!=typeof n)return i=k.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,r+n):n}if(_&&e.indexOf===_)return e.indexOf(t,n);for(;r>i;i++)if(e[i]===t)return i;return-1},k.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(y&&e.lastIndexOf===y)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var r=i?n:e.length;r--;)if(e[r]===t)return r;return-1},k.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=0,o=new Array(i);i>r;)o[r++]=e,e+=n;return o};var D=function(){};k.bind=function(e,t){var n,i;if($&&e.bind===$)return $.apply(e,s.call(arguments,1));if(!k.isFunction(e))throw new TypeError;return n=s.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(s.call(arguments)));D.prototype=e.prototype;var r=new D;D.prototype=null;var o=e.apply(r,n.concat(s.call(arguments)));return Object(o)===o?o:r}},k.partial=function(e){var t=s.call(arguments,1);return function(){return e.apply(this,t.concat(s.call(arguments)))}},k.bindAll=function(e){var t=s.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return x(t,function(t){e[t]=k.bind(e[t],e)}),e},k.memoize=function(e,t){var n={};return t||(t=k.identity),function(){var i=t.apply(this,arguments);return k.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},k.delay=function(e,t){var n=s.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},k.defer=function(e){return k.delay.apply(k,[e,1].concat(s.call(arguments,1)))},k.throttle=function(e,t,n){var i,r,o,a=null,s=0;n||(n={});var c=function(){s=n.leading===!1?0:new Date,a=null,o=e.apply(i,r)};return function(){var l=new Date;s||n.leading!==!1||(s=l);var u=t-(l-s);return i=this,r=arguments,0>=u?(clearTimeout(a),a=null,s=l,o=e.apply(i,r)):a||n.trailing===!1||(a=setTimeout(c,u)),o}},k.debounce=function(e,t,n){var i,r,o,a,s;return function(){o=this,r=arguments,a=new Date;var c=function(){var l=new Date-a;t>l?i=setTimeout(c,t-l):(i=null,n||(s=e.apply(o,r)))},l=n&&!i;return i||(i=setTimeout(c,t)),l&&(s=e.apply(o,r)),s}},k.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},k.wrap=function(e,t){return function(){var n=[e];return a.apply(n,arguments),t.apply(this,n)}},k.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},k.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},k.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)k.has(e,n)&&t.push(n);return t},k.values=function(e){for(var t=k.keys(e),n=t.length,i=new Array(n),r=0;n>r;r++)i[r]=e[t[r]];return i},k.pairs=function(e){for(var t=k.keys(e),n=t.length,i=new Array(n),r=0;n>r;r++)i[r]=[t[r],e[t[r]]];return i},k.invert=function(e){for(var t={},n=k.keys(e),i=0,r=n.length;r>i;i++)t[e[n[i]]]=n[i];return t},k.functions=k.methods=function(e){var t=[];for(var n in e)k.isFunction(e[n])&&t.push(n);return t.sort()},k.extend=function(e){return x(s.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},k.pick=function(e){var t={},n=c.apply(i,s.call(arguments,1));return x(n,function(n){n in e&&(t[n]=e[n])}),t},k.omit=function(e){var t={},n=c.apply(i,s.call(arguments,1));for(var r in e)k.contains(n,r)||(t[r]=e[r]);return t},k.defaults=function(e){return x(s.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e};var E=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof k&&(e=e._wrapped),t instanceof k&&(t=t._wrapped);var r=l.call(e);if(r!=l.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]==e)return i[o]==t;var a=e.constructor,s=t.constructor;if(a!==s&&!(k.isFunction(a)&&a instanceof a&&k.isFunction(s)&&s instanceof s))return!1;n.push(e),i.push(t);var c=0,u=!0;if("[object Array]"==r){if(c=e.length,u=c==t.length)for(;c--&&(u=E(e[c],t[c],n,i)););}else{for(var d in e)if(k.has(e,d)&&(c++,!(u=k.has(t,d)&&E(e[d],t[d],n,i))))break;if(u){for(d in t)if(k.has(t,d)&&!c--)break;u=!c}}return n.pop(),i.pop(),u};k.isEqual=function(e,t){return E(e,t,[],[])},k.isEmpty=function(e){if(null==e)return!0;if(k.isArray(e)||k.isString(e))return 0===e.length;for(var t in e)if(k.has(e,t))return!1;return!0},k.isElement=function(e){return!(!e||1!==e.nodeType)},k.isArray=b||function(e){return"[object Array]"==l.call(e)},k.isObject=function(e){return e===Object(e)},x(["Arguments","Function","String","Number","Date","RegExp"],function(e){k["is"+e]=function(t){return l.call(t)=="[object "+e+"]"}}),k.isArguments(arguments)||(k.isArguments=function(e){return!(!e||!k.has(e,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(e){return"function"==typeof e}),k.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},k.isNaN=function(e){return k.isNumber(e)&&e!=+e},k.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==l.call(e)},k.isNull=function(e){return null===e},k.isUndefined=function(e){return void 0===e},k.has=function(e,t){return u.call(e,t)},k.noConflict=function(){return e._=t,this},k.identity=function(e){return e},k.times=function(e,t,n){for(var i=Array(Math.max(0,e)),r=0;e>r;r++)i[r]=t.call(n,r);return i},k.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var A={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};A.unescape=k.invert(A.escape),k.each(A.escape,function(e,t){var n=e.replace(/\#x([0-9a-f]+)/i,function(e,t){return e?"#"+parseInt(t,16):void 0});n!==e&&(A.unescape[n]=t)});var P={escape:new RegExp("["+k.keys(A.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(A.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(e){k[e]=function(t){return null==t?"":(""+t).replace(P[e],function(t){return A[e][t]})}}),k.result=function(e,t){if(null==e)return void 0;var n=e[t];return k.isFunction(n)?n.call(e):n},k.mixin=function(e){x(k.functions(e),function(t){var n=k[t]=e[t];k.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),F.call(this,n.apply(k,e))}})};var N=0;k.uniqueId=function(e){var t=++N+"";return e?e+t:t},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(e,t,n){var i;n=k.defaults({},n,k.templateSettings);var r=new RegExp([(n.escape||M).source,(n.interpolate||M).source,(n.evaluate||M).source].join("|")+"|$","g"),o=0,a="__p+='";e.replace(r,function(t,n,i,r,s){return a+=e.slice(o,s).replace(L,function(e){return"\\"+O[e]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(a+="';\n"+r+"\n__p+='"),o=s+t.length,t}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(n.variable||"obj","_",a)}catch(s){throw s.source=a,s}if(t)return i(t,k);var c=function(e){return i.call(this,e,k)};return c.source="function("+(n.variable||"obj")+"){\n"+a+"}",c},k.chain=function(e){return k(e).chain()};var F=function(e){return this._chain?k(e).chain():e};k.mixin(k),x(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];k.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],F.call(this,n)}}),x(["concat","join","slice"],function(e){var t=i[e];k.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){function e(e,t){return _.reduce(e.split("."),function(e,t){return _.isObject(e)?e[t]:e},t)}function t(e,t){var n,i=parseInt(t.count,10);return _.isNumber(i)&&!_.isNaN(i)&&(n=_.filter(_.keys(o),function(e){return-1!==o[e].indexOf(i)?e:void 0}),_.isEmpty(n)&&(n="other")),e[n]}function n(e,t){return e.replace(/\{\{(\w+)\}\}/g,function(e,n){return t[n]||e})}function i(e){var t=e.split("."),n=t[t.length-1];return n=n.replace(/_/g," "),n=n.replace(/(\w+)/g,function(e){return e.charAt(0).toUpperCase()+e.slice(1)})}function r(r,o){o=o||{};var a=e(r,I18n.translations)||o["default"];return _.isObject(a)&&(a=t(a,o)),_.isString(a)&&(a=n(a,o)),_.isUndefined(a)&&(a=i(r),window.I18n.debug&&window.console.log("I18n key is missing: ",r)),a}window.I18n=window.I18n||{};var o={zero:[0],one:[1],two:[2],few:[3],many:[],other:[]};window.localStorage&&(window.I18n.debug=1===parseInt(localStorage.getItem("i18n_debug"),10)),window.I18n.t=r}(),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=rt.type(e);return"function"===n||rt.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(rt.isFunction(t))return rt.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return rt.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(ft.test(t))return rt.filter(t,e,n);t=rt.filter(t,e)}return rt.grep(e,function(e){return rt.inArray(e,t)>=0!==n})}function r(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function o(e){var t=bt[e]={};return rt.each(e.match(yt)||[],function(e,n){t[n]=!0}),t}function a(){pt.addEventListener?(pt.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1)):(pt.detachEvent("onreadystatechange",s),e.detachEvent("onload",s))}function s(){(pt.addEventListener||"load"===event.type||"complete"===pt.readyState)&&(a(),rt.ready())}function c(e,t,n){if(void 0===n&&1===e.nodeType){var i="data-"+t.replace(jt,"-$1").toLowerCase();if(n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:xt.test(n)?rt.parseJSON(n):n}catch(r){}rt.data(e,t,n)}else n=void 0}return n}function l(e){var t;for(t in e)if(("data"!==t||!rt.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function u(e,t,n,i){if(rt.acceptData(e)){var r,o,a=rt.expando,s=e.nodeType,c=s?rt.cache:e,l=s?e[a]:e[a]&&a;if(l&&c[l]&&(i||c[l].data)||void 0!==n||"string"!=typeof t)return l||(l=s?e[a]=G.pop()||rt.guid++:a),c[l]||(c[l]=s?{}:{toJSON:rt.noop}),("object"==typeof t||"function"==typeof t)&&(i?c[l]=rt.extend(c[l],t):c[l].data=rt.extend(c[l].data,t)),o=c[l],i||(o.data||(o.data={}),o=o.data),void 0!==n&&(o[rt.camelCase(t)]=n),"string"==typeof t?(r=o[t],null==r&&(r=o[rt.camelCase(t)])):r=o,r}}function d(e,t,n){if(rt.acceptData(e)){var i,r,o=e.nodeType,a=o?rt.cache:e,s=o?e[rt.expando]:rt.expando;if(a[s]){if(t&&(i=n?a[s]:a[s].data)){rt.isArray(t)?t=t.concat(rt.map(t,rt.camelCase)):t in i?t=[t]:(t=rt.camelCase(t),t=t in i?[t]:t.split(" ")),r=t.length;for(;r--;)delete i[t[r]];if(n?!l(i):!rt.isEmptyObject(i))return}(n||(delete a[s].data,l(a[s])))&&(o?rt.cleanData([e],!0):nt.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function f(){return!0}function h(){return!1}function p(){try{return pt.activeElement}catch(e){}}function m(e){var t=Ot.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function g(e,t){var n,i,r=0,o=typeof e.getElementsByTagName!==kt?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==kt?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],n=e.childNodes||e;null!=(i=n[r]);r++)!t||rt.nodeName(i,t)?o.push(i):rt.merge(o,g(i,t));return void 0===t||t&&rt.nodeName(e,t)?rt.merge([e],o):o}function v(e){Dt.test(e.type)&&(e.defaultChecked=e.checked)}function _(e,t){return rt.nodeName(e,"table")&&rt.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function y(e){return e.type=(null!==rt.find.attr(e,"type"))+"/"+e.type,e}function b(e){var t=Qt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function w(e,t){for(var n,i=0;null!=(n=e[i]);i++)rt._data(n,"globalEval",!t||rt._data(t[i],"globalEval"))}function $(e,t){if(1===t.nodeType&&rt.hasData(e)){var n,i,r,o=rt._data(e),a=rt._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(i=0,r=s[n].length;r>i;i++)rt.event.add(t,n,s[n][i])}a.data&&(a.data=rt.extend({},a.data))}}function k(e,t){var n,i,r;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!nt.noCloneEvent&&t[rt.expando]){r=rt._data(t);for(i in r.events)rt.removeEvent(t,i,r.handle);t.removeAttribute(rt.expando)}"script"===n&&t.text!==e.text?(y(t).text=e.text,b(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),nt.html5Clone&&e.innerHTML&&!rt.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Dt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function x(t,n){var i,r=rt(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(r[0]))?i.display:rt.css(r[0],"display");return r.detach(),o}function j(e){var t=pt,n=Zt[e];return n||(n=x(e,t),"none"!==n&&n||(Xt=(Xt||rt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Xt[0].contentWindow||Xt[0].contentDocument).document,t.write(),t.close(),n=x(e,t),Xt.detach()),Zt[e]=n),n}function C(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}function S(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=hn.length;r--;)if(t=hn[r]+n,t in e)return t;return i}function T(e,t){for(var n,i,r,o=[],a=0,s=e.length;s>a;a++)i=e[a],i.style&&(o[a]=rt._data(i,"olddisplay"),n=i.style.display,t?(o[a]||"none"!==n||(i.style.display=""),""===i.style.display&&Tt(i)&&(o[a]=rt._data(i,"olddisplay",j(i.nodeName)))):(r=Tt(i),(n&&"none"!==n||!r)&&rt._data(i,"olddisplay",r?n:rt.css(i,"display"))));for(a=0;s>a;a++)i=e[a],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[a]||"":"none"));return e}function I(e,t,n){var i=ln.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function D(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=rt.css(e,n+St[o],!0,r)),i?("content"===n&&(a-=rt.css(e,"padding"+St[o],!0,r)),"margin"!==n&&(a-=rt.css(e,"border"+St[o]+"Width",!0,r))):(a+=rt.css(e,"padding"+St[o],!0,r),"padding"!==n&&(a+=rt.css(e,"border"+St[o]+"Width",!0,r)));return a}function E(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=en(e),a=nt.boxSizing&&"border-box"===rt.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=tn(e,t,o),(0>r||null==r)&&(r=e.style[t]),rn.test(r))return r;i=a&&(nt.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+D(e,t,n||(a?"border":"content"),i,o)+"px"}function A(e,t,n,i,r){return new A.prototype.init(e,t,n,i,r)}function P(){return setTimeout(function(){pn=void 0}),pn=rt.now()}function N(e,t){var n,i={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)n=St[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function M(e,t,n){for(var i,r=(bn[t]||[]).concat(bn["*"]),o=0,a=r.length;a>o;o++)if(i=r[o].call(n,t,e))return i}function O(e,t,n){var i,r,o,a,s,c,l,u,d=this,f={},h=e.style,p=e.nodeType&&Tt(e),m=rt._data(e,"fxshow");n.queue||(s=rt._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,c=s.empty.fire,s.empty.fire=function(){s.unqueued||c()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,rt.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],l=rt.css(e,"display"),u="none"===l?rt._data(e,"olddisplay")||j(e.nodeName):l,"inline"===u&&"none"===rt.css(e,"float")&&(nt.inlineBlockNeedsLayout&&"inline"!==j(e.nodeName)?h.zoom=1:h.display="inline-block")),n.overflow&&(h.overflow="hidden",nt.shrinkWrapBlocks()||d.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],gn.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;p=!0}f[i]=m&&m[i]||rt.style(e,i)}else l=void 0;if(rt.isEmptyObject(f))"inline"===("none"===l?j(e.nodeName):l)&&(h.display=l);else{m?"hidden"in m&&(p=m.hidden):m=rt._data(e,"fxshow",{}),o&&(m.hidden=!p),p?rt(e).show():d.done(function(){rt(e).hide()}),d.done(function(){var t;rt._removeData(e,"fxshow");for(t in f)rt.style(e,t,f[t])});for(i in f)a=M(p?m[i]:0,i,d),i in m||(m[i]=a.start,p&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function L(e,t){var n,i,r,o,a;for(n in e)if(i=rt.camelCase(n),r=t[i],o=e[n],rt.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),a=rt.cssHooks[i],a&&"expand"in a){o=a.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function F(e,t,n){var i,r,o=0,a=yn.length,s=rt.Deferred().always(function(){delete c.elem}),c=function(){if(r)return!1;for(var t=pn||P(),n=Math.max(0,l.startTime+l.duration-t),i=n/l.duration||0,o=1-i,a=0,c=l.tweens.length;c>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&c?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:rt.extend({},t),opts:rt.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:pn||P(),duration:n.duration,tweens:[],createTween:function(t,n){var i=rt.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,i=t?l.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),u=l.props;for(L(u,l.opts.specialEasing);a>o;o++)if(i=yn[o].call(l,e,u,l.opts))return i;return rt.map(u,M,l),rt.isFunction(l.opts.start)&&l.opts.start.call(e,l),rt.fx.timer(rt.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function z(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(yt)||[];if(rt.isFunction(n))for(;i=o[r++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function R(e,t,n,i){function r(s){var c;return o[s]=!0,rt.each(e[s]||[],function(e,s){var l=s(t,n,i);return"string"!=typeof l||a||o[l]?a?!(c=l):void 0:(t.dataTypes.unshift(l),r(l),!1)}),c}var o={},a=e===Bn;return r(t.dataTypes[0])||!o["*"]&&r("*")}function q(e,t){var n,i,r=rt.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&rt.extend(!0,e,n),e}function H(e,t,n){for(var i,r,o,a,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){c.unshift(a);break}if(c[0]in n)o=c[0];else{for(a in n){if(!c[0]||e.converters[a+" "+c[0]]){o=a;break}i||(i=a)}o=o||i}return o?(o!==c[0]&&c.unshift(o),n[o]):void 0}function Y(e,t,n,i){var r,o,a,s,c,l={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!c&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=u.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(a=l[c+" "+o]||l["* "+o],!a)for(r in l)if(s=r.split(" "),s[1]===o&&(a=l[c+" "+s[0]]||l["* "+s[0]])){a===!0?a=l[r]:l[r]!==!0&&(o=s[0],u.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}function B(e,t,n,i){var r;if(rt.isArray(t))rt.each(t,function(t,r){n||Gn.test(e)?i(e,r):B(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==rt.type(t))i(e,t);else for(r in t)B(e+"["+r+"]",t[r],n,i)}function W(){try{return new e.XMLHttpRequest}catch(t){}}function U(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Q(e){return rt.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var G=[],J=G.slice,V=G.concat,K=G.push,X=G.indexOf,Z={},et=Z.toString,tt=Z.hasOwnProperty,nt={},it="1.11.1",rt=function(e,t){return new rt.fn.init(e,t)},ot=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,at=/^-ms-/,st=/-([\da-z])/gi,ct=function(e,t){return t.toUpperCase()};rt.fn=rt.prototype={jquery:it,constructor:rt,selector:"",length:0,toArray:function(){return J.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:J.call(this)},pushStack:function(e){var t=rt.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return rt.each(this,e,t)},map:function(e){return this.pushStack(rt.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(J.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:K,sort:G.sort,splice:G.splice},rt.extend=rt.fn.extend=function(){var e,t,n,i,r,o,a=arguments[0]||{},s=1,c=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||rt.isFunction(a)||(a={}),s===c&&(a=this,s--);c>s;s++)if(null!=(r=arguments[s]))for(i in r)e=a[i],n=r[i],a!==n&&(l&&n&&(rt.isPlainObject(n)||(t=rt.isArray(n)))?(t?(t=!1,o=e&&rt.isArray(e)?e:[]):o=e&&rt.isPlainObject(e)?e:{},a[i]=rt.extend(l,o,n)):void 0!==n&&(a[i]=n));return a},rt.extend({expando:"jQuery"+(it+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===rt.type(e)},isArray:Array.isArray||function(e){return"array"===rt.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!rt.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==rt.type(e)||e.nodeType||rt.isWindow(e))return!1;try{if(e.constructor&&!tt.call(e,"constructor")&&!tt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(nt.ownLast)for(t in e)return tt.call(e,t);for(t in e);return void 0===t||tt.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Z[et.call(e)]||"object":typeof e},globalEval:function(t){t&&rt.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(at,"ms-").replace(st,ct)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r,o=0,a=e.length,s=n(e);if(i){if(s)for(;a>o&&(r=t.apply(e[o],i),r!==!1);o++);else for(o in e)if(r=t.apply(e[o],i),r===!1)break}else if(s)for(;a>o&&(r=t.call(e[o],o,e[o]),r!==!1);o++);else for(o in e)if(r=t.call(e[o],o,e[o]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ot,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?rt.merge(i,"string"==typeof e?[e]:e):K.call(i,e)),i},inArray:function(e,t,n){var i;if(t){if(X)return X.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;)e[r++]=t[i++];if(n!==n)for(;void 0!==t[i];)e[r++]=t[i++];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],o=0,a=e.length,s=!n;a>o;o++)i=!t(e[o],o),i!==s&&r.push(e[o]);return r},map:function(e,t,i){var r,o=0,a=e.length,s=n(e),c=[];if(s)for(;a>o;o++)r=t(e[o],o,i),null!=r&&c.push(r);else for(o in e)r=t(e[o],o,i),null!=r&&c.push(r);return V.apply([],c)},guid:1,proxy:function(e,t){var n,i,r;return"string"==typeof t&&(r=e[t],t=e,e=r),rt.isFunction(e)?(n=J.call(arguments,2),i=function(){return e.apply(t||this,n.concat(J.call(arguments)))},i.guid=e.guid=e.guid||rt.guid++,i):void 0},now:function(){return+new Date},support:nt}),rt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()});var lt=function(e){function t(e,t,n,i){var r,o,a,s,c,l,d,h,p,m;if((t?t.ownerDocument||t:R)!==A&&E(t),t=t||A,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(N&&!i){if(r=_t.exec(e))if(a=r[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&F(t,o)&&o.id===a)return n.push(o),n}else{if(r[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((a=r[3])&&w.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(a)),n}if(w.qsa&&(!M||!M.test(e))){if(h=d=z,p=t,m=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=j(e),(d=t.getAttribute("id"))?h=d.replace(bt,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",c=l.length;c--;)l[c]=h+f(l[c]);p=yt.test(e)&&u(t.parentNode)||t,m=l.join(",")}if(m)try{return Z.apply(n,p.querySelectorAll(m)),n}catch(g){}finally{d||t.removeAttribute("id")}}}return S(e.replace(ct,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>$.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[z]=!0,e}function r(e){var t=A.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=e.length;i--;)$.attrHandle[n[i]]=t}function a(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||G)-(~e.sourceIndex||G);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();
return"input"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function u(e){return e&&typeof e.getElementsByTagName!==Q&&e}function d(){}function f(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function h(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=H++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,a){var s,c,l=[q,o];if(a){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(c=t[z]||(t[z]={}),(s=c[i])&&s[0]===q&&s[1]===o)return l[2]=s[2];if(c[i]=l,l[2]=e(t,n,a))return!0}}}function p(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var r=0,o=n.length;o>r;r++)t(e,n[r],i);return i}function g(e,t,n,i,r){for(var o,a=[],s=0,c=e.length,l=null!=t;c>s;s++)(o=e[s])&&(!n||n(o,i,r))&&(a.push(o),l&&t.push(s));return a}function v(e,t,n,r,o,a){return r&&!r[z]&&(r=v(r)),o&&!o[z]&&(o=v(o,a)),i(function(i,a,s,c){var l,u,d,f=[],h=[],p=a.length,v=i||m(t||"*",s.nodeType?[s]:s,[]),_=!e||!i&&t?v:g(v,f,e,s,c),y=n?o||(i?e:p||r)?[]:a:_;if(n&&n(_,y,s,c),r)for(l=g(y,h),r(l,[],s,c),u=l.length;u--;)(d=l[u])&&(y[h[u]]=!(_[h[u]]=d));if(i){if(o||e){if(o){for(l=[],u=y.length;u--;)(d=y[u])&&l.push(_[u]=d);o(null,y=[],l,c)}for(u=y.length;u--;)(d=y[u])&&(l=o?tt.call(i,d):f[u])>-1&&(i[l]=!(a[l]=d))}}else y=g(y===a?y.splice(p,y.length):y),o?o(null,a,y,c):Z.apply(a,y)})}function _(e){for(var t,n,i,r=e.length,o=$.relative[e[0].type],a=o||$.relative[" "],s=o?1:0,c=h(function(e){return e===t},a,!0),l=h(function(e){return tt.call(t,e)>-1},a,!0),u=[function(e,n,i){return!o&&(i||n!==T)||((t=n).nodeType?c(e,n,i):l(e,n,i))}];r>s;s++)if(n=$.relative[e[s].type])u=[h(p(u),n)];else{if(n=$.filter[e[s].type].apply(null,e[s].matches),n[z]){for(i=++s;r>i&&!$.relative[e[i].type];i++);return v(s>1&&p(u),s>1&&f(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ct,"$1"),n,i>s&&_(e.slice(s,i)),r>i&&_(e=e.slice(i)),r>i&&f(e))}u.push(n)}return p(u)}function y(e,n){var r=n.length>0,o=e.length>0,a=function(i,a,s,c,l){var u,d,f,h=0,p="0",m=i&&[],v=[],_=T,y=i||o&&$.find.TAG("*",l),b=q+=null==_?1:Math.random()||.1,w=y.length;for(l&&(T=a!==A&&a);p!==w&&null!=(u=y[p]);p++){if(o&&u){for(d=0;f=e[d++];)if(f(u,a,s)){c.push(u);break}l&&(q=b)}r&&((u=!f&&u)&&h--,i&&m.push(u))}if(h+=p,r&&p!==h){for(d=0;f=n[d++];)f(m,v,a,s);if(i){if(h>0)for(;p--;)m[p]||v[p]||(v[p]=K.call(c));v=g(v)}Z.apply(c,v),l&&!i&&v.length>0&&h+n.length>1&&t.uniqueSort(c)}return l&&(q=b,T=_),m};return r?i(a):a}var b,w,$,k,x,j,C,S,T,I,D,E,A,P,N,M,O,L,F,z="sizzle"+-new Date,R=e.document,q=0,H=0,Y=n(),B=n(),W=n(),U=function(e,t){return e===t&&(D=!0),0},Q="undefined",G=1<<31,J={}.hasOwnProperty,V=[],K=V.pop,X=V.push,Z=V.push,et=V.slice,tt=V.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot=rt.replace("w","w#"),at="\\["+it+"*("+rt+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ot+"))|)"+it+"*\\]",st=":("+rt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+at+")*)|.*)\\)|)",ct=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),lt=new RegExp("^"+it+"*,"+it+"*"),ut=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),dt=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),ft=new RegExp(st),ht=new RegExp("^"+ot+"$"),pt={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt.replace("w","w*")+")"),ATTR:new RegExp("^"+at),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+nt+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,_t=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,bt=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),$t=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Z.apply(V=et.call(R.childNodes),R.childNodes),V[R.childNodes.length].nodeType}catch(kt){Z={apply:V.length?function(e,t){X.apply(e,et.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}w=t.support={},x=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},E=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:R,i=n.defaultView;return n!==A&&9===n.nodeType&&n.documentElement?(A=n,P=n.documentElement,N=!x(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){E()},!1):i.attachEvent&&i.attachEvent("onunload",function(){E()})),w.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=r(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=vt.test(n.getElementsByClassName)&&r(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),w.getById=r(function(e){return P.appendChild(e).id=z,!n.getElementsByName||!n.getElementsByName(z).length}),w.getById?($.find.ID=function(e,t){if(typeof t.getElementById!==Q&&N){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},$.filter.ID=function(e){var t=e.replace(wt,$t);return function(e){return e.getAttribute("id")===t}}):(delete $.find.ID,$.filter.ID=function(e){var t=e.replace(wt,$t);return function(e){var n=typeof e.getAttributeNode!==Q&&e.getAttributeNode("id");return n&&n.value===t}}),$.find.TAG=w.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==Q?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},$.find.CLASS=w.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==Q&&N?t.getElementsByClassName(e):void 0},O=[],M=[],(w.qsa=vt.test(n.querySelectorAll))&&(r(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&M.push("[*^$]="+it+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\["+it+"*(?:value|"+nt+")"),e.querySelectorAll(":checked").length||M.push(":checked")}),r(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name"+it+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(w.matchesSelector=vt.test(L=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&r(function(e){w.disconnectedMatch=L.call(e,"div"),L.call(e,"[s!='']:x"),O.push("!=",st)}),M=M.length&&new RegExp(M.join("|")),O=O.length&&new RegExp(O.join("|")),t=vt.test(P.compareDocumentPosition),F=t||vt.test(P.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=t?function(e,t){if(e===t)return D=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!w.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===R&&F(R,e)?-1:t===n||t.ownerDocument===R&&F(R,t)?1:I?tt.call(I,e)-tt.call(I,t):0:4&i?-1:1)}:function(e,t){if(e===t)return D=!0,0;var i,r=0,o=e.parentNode,s=t.parentNode,c=[e],l=[t];if(!o||!s)return e===n?-1:t===n?1:o?-1:s?1:I?tt.call(I,e)-tt.call(I,t):0;if(o===s)return a(e,t);for(i=e;i=i.parentNode;)c.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;c[r]===l[r];)r++;return r?a(c[r],l[r]):c[r]===R?-1:l[r]===R?1:0},n):A},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==A&&E(e),n=n.replace(dt,"='$1']"),!(!w.matchesSelector||!N||O&&O.test(n)||M&&M.test(n)))try{var i=L.call(e,n);if(i||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,A,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==A&&E(e),F(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==A&&E(e);var n=$.attrHandle[t.toLowerCase()],i=n&&J.call($.attrHandle,t.toLowerCase())?n(e,t,!N):void 0;return void 0!==i?i:w.attributes||!N?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(D=!w.detectDuplicates,I=!w.sortStable&&e.slice(0),e.sort(U),D){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return I=null,e},k=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=k(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=k(t);return n},$=t.selectors={cacheLength:50,createPseudo:i,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(wt,$t),e[3]=(e[3]||e[4]||e[5]||"").replace(wt,$t),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ft.test(n)&&(t=j(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(wt,$t).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=Y[e+" "];return t||(t=new RegExp("(^|"+it+")"+e+"("+it+"|$)"))&&Y(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Q&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var o=t.attr(r,e);return null==o?"!="===n:n?(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o+" ").indexOf(i)>-1:"|="===n?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,c){var l,u,d,f,h,p,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),_=!c&&!s;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&_){for(u=g[z]||(g[z]={}),l=u[e]||[],h=l[0]===q&&l[1],f=l[0]===q&&l[2],d=h&&g.childNodes[h];d=++h&&d&&d[m]||(f=h=0)||p.pop();)if(1===d.nodeType&&++f&&d===t){u[e]=[q,h,f];break}}else if(_&&(l=(t[z]||(t[z]={}))[e])&&l[0]===q)f=l[1];else for(;(d=++h&&d&&d[m]||(f=h=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(_&&((d[z]||(d[z]={}))[e]=[q,f]),d!==t)););return f-=r,f===i||f%i===0&&f/i>=0}}},PSEUDO:function(e,n){var r,o=$.pseudos[e]||$.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[z]?o(n):o.length>1?(r=[e,e,"",n],$.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),a=r.length;a--;)i=tt.call(e,r[a]),e[i]=!(t[i]=r[a])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=C(e.replace(ct,"$1"));return r[z]?i(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:i(function(e){return ht.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(wt,$t).toLowerCase(),function(t){var n;do if(n=N?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===P},focus:function(e){return e===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!$.pseudos.empty(e)},header:function(e){return gt.test(e.nodeName)},input:function(e){return mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:l(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},$.pseudos.nth=$.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})$.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})$.pseudos[b]=c(b);return d.prototype=$.filters=$.pseudos,$.setFilters=new d,j=t.tokenize=function(e,n){var i,r,o,a,s,c,l,u=B[e+" "];if(u)return n?0:u.slice(0);for(s=e,c=[],l=$.preFilter;s;){(!i||(r=lt.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),c.push(o=[])),i=!1,(r=ut.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(ct," ")}),s=s.slice(i.length));for(a in $.filter)!(r=pt[a].exec(s))||l[a]&&!(r=l[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):B(e,c).slice(0)},C=t.compile=function(e,t){var n,i=[],r=[],o=W[e+" "];if(!o){for(t||(t=j(e)),n=t.length;n--;)o=_(t[n]),o[z]?i.push(o):r.push(o);o=W(e,y(r,i)),o.selector=e}return o},S=t.select=function(e,t,n,i){var r,o,a,s,c,l="function"==typeof e&&e,d=!i&&j(e=l.selector||e);if(n=n||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&w.getById&&9===t.nodeType&&N&&$.relative[o[1].type]){if(t=($.find.ID(a.matches[0].replace(wt,$t),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=pt.needsContext.test(e)?0:o.length;r--&&(a=o[r],!$.relative[s=a.type]);)if((c=$.find[s])&&(i=c(a.matches[0].replace(wt,$t),yt.test(o[0].type)&&u(t.parentNode)||t))){if(o.splice(r,1),e=i.length&&f(o),!e)return Z.apply(n,i),n;break}}return(l||C(e,d))(i,t,!N,n,yt.test(e)&&u(t.parentNode)||t),n},w.sortStable=z.split("").sort(U).join("")===z,w.detectDuplicates=!!D,E(),w.sortDetached=r(function(e){return 1&e.compareDocumentPosition(A.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(nt,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);rt.find=lt,rt.expr=lt.selectors,rt.expr[":"]=rt.expr.pseudos,rt.unique=lt.uniqueSort,rt.text=lt.getText,rt.isXMLDoc=lt.isXML,rt.contains=lt.contains;var ut=rt.expr.match.needsContext,dt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ft=/^.[^:#\[\.,]*$/;rt.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?rt.find.matchesSelector(i,e)?[i]:[]:rt.find.matches(e,rt.grep(t,function(e){return 1===e.nodeType}))},rt.fn.extend({find:function(e){var t,n=[],i=this,r=i.length;if("string"!=typeof e)return this.pushStack(rt(e).filter(function(){for(t=0;r>t;t++)if(rt.contains(i[t],this))return!0}));for(t=0;r>t;t++)rt.find(e,i[t],n);return n=this.pushStack(r>1?rt.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&ut.test(e)?rt(e):e||[],!1).length}});var ht,pt=e.document,mt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,gt=rt.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:mt.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||ht).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof rt?t[0]:t,rt.merge(this,rt.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:pt,!0)),dt.test(n[1])&&rt.isPlainObject(t))for(n in t)rt.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(i=pt.getElementById(n[2]),i&&i.parentNode){if(i.id!==n[2])return ht.find(e);this.length=1,this[0]=i}return this.context=pt,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):rt.isFunction(e)?"undefined"!=typeof ht.ready?ht.ready(e):e(rt):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),rt.makeArray(e,this))};gt.prototype=rt.fn,ht=rt(pt);var vt=/^(?:parents|prev(?:Until|All))/,_t={children:!0,contents:!0,next:!0,prev:!0};rt.extend({dir:function(e,t,n){for(var i=[],r=e[t];r&&9!==r.nodeType&&(void 0===n||1!==r.nodeType||!rt(r).is(n));)1===r.nodeType&&i.push(r),r=r[t];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),rt.fn.extend({has:function(e){var t,n=rt(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(rt.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,o=[],a=ut.test(e)||"string"!=typeof e?rt(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&rt.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?rt.unique(o):o)},index:function(e){return e?"string"==typeof e?rt.inArray(this[0],rt(e)):rt.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(rt.unique(rt.merge(this.get(),rt(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),rt.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return rt.dir(e,"parentNode")},parentsUntil:function(e,t,n){return rt.dir(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return rt.dir(e,"nextSibling")},prevAll:function(e){return rt.dir(e,"previousSibling")},nextUntil:function(e,t,n){return rt.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return rt.dir(e,"previousSibling",n)},siblings:function(e){return rt.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return rt.sibling(e.firstChild)},contents:function(e){return rt.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:rt.merge([],e.childNodes)}},function(e,t){rt.fn[e]=function(n,i){var r=rt.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=rt.filter(i,r)),this.length>1&&(_t[e]||(r=rt.unique(r)),vt.test(e)&&(r=r.reverse())),this.pushStack(r)}});var yt=/\S+/g,bt={};rt.Callbacks=function(e){e="string"==typeof e?bt[e]||o(e):rt.extend({},e);var t,n,i,r,a,s,c=[],l=!e.once&&[],u=function(o){for(n=e.memory&&o,i=!0,a=s||0,s=0,r=c.length,t=!0;c&&r>a;a++)if(c[a].apply(o[0],o[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,c&&(l?l.length&&u(l.shift()):n?c=[]:d.disable())},d={add:function(){if(c){var i=c.length;!function o(t){rt.each(t,function(t,n){var i=rt.type(n);"function"===i?e.unique&&d.has(n)||c.push(n):n&&n.length&&"string"!==i&&o(n)})}(arguments),t?r=c.length:n&&(s=i,u(n))}return this},remove:function(){return c&&rt.each(arguments,function(e,n){for(var i;(i=rt.inArray(n,c,i))>-1;)c.splice(i,1),t&&(r>=i&&r--,a>=i&&a--)}),this},has:function(e){return e?rt.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],r=0,this},disable:function(){return c=l=n=void 0,this},disabled:function(){return!c},lock:function(){return l=void 0,n||d.disable(),this},locked:function(){return!l},fireWith:function(e,n){return!c||i&&!l||(n=n||[],n=[e,n.slice?n.slice():n],t?l.push(n):u(n)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d},rt.extend({Deferred:function(e){var t=[["resolve","done",rt.Callbacks("once memory"),"resolved"],["reject","fail",rt.Callbacks("once memory"),"rejected"],["notify","progress",rt.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return rt.Deferred(function(n){rt.each(t,function(t,o){var a=rt.isFunction(e[t])&&e[t];r[o[1]](function(){var e=a&&a.apply(this,arguments);e&&rt.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===i?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?rt.extend(e,i):i}},r={};return i.pipe=i.then,rt.each(t,function(e,o){var a=o[2],s=o[3];i[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=a.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=J.call(arguments),a=o.length,s=1!==a||e&&rt.isFunction(e.promise)?a:0,c=1===s?e:rt.Deferred(),l=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?J.call(arguments):r,i===t?c.notifyWith(n,i):--s||c.resolveWith(n,i)}};if(a>1)for(t=new Array(a),n=new Array(a),i=new Array(a);a>r;r++)o[r]&&rt.isFunction(o[r].promise)?o[r].promise().done(l(r,i,o)).fail(c.reject).progress(l(r,n,t)):--s;return s||c.resolveWith(i,o),c.promise()}});var wt;rt.fn.ready=function(e){return rt.ready.promise().done(e),this},rt.extend({isReady:!1,readyWait:1,holdReady:function(e){e?rt.readyWait++:rt.ready(!0)},ready:function(e){if(e===!0?!--rt.readyWait:!rt.isReady){if(!pt.body)return setTimeout(rt.ready);rt.isReady=!0,e!==!0&&--rt.readyWait>0||(wt.resolveWith(pt,[rt]),rt.fn.triggerHandler&&(rt(pt).triggerHandler("ready"),rt(pt).off("ready")))}}}),rt.ready.promise=function(t){if(!wt)if(wt=rt.Deferred(),"complete"===pt.readyState)setTimeout(rt.ready);else if(pt.addEventListener)pt.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1);else{pt.attachEvent("onreadystatechange",s),e.attachEvent("onload",s);var n=!1;try{n=null==e.frameElement&&pt.documentElement}catch(i){}n&&n.doScroll&&!function r(){if(!rt.isReady){try{n.doScroll("left")}catch(e){return setTimeout(r,50)}a(),rt.ready()}}()}return wt.promise(t)};var $t,kt="undefined";for($t in rt(nt))break;nt.ownLast="0"!==$t,nt.inlineBlockNeedsLayout=!1,rt(function(){var e,t,n,i;n=pt.getElementsByTagName("body")[0],n&&n.style&&(t=pt.createElement("div"),i=pt.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==kt&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",nt.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(i))}),function(){var e=pt.createElement("div");if(null==nt.deleteExpando){nt.deleteExpando=!0;try{delete e.test}catch(t){nt.deleteExpando=!1}}e=null}(),rt.acceptData=function(e){var t=rt.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t};var xt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,jt=/([A-Z])/g;rt.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?rt.cache[e[rt.expando]]:e[rt.expando],!!e&&!l(e)},data:function(e,t,n){return u(e,t,n)},removeData:function(e,t){return d(e,t)},_data:function(e,t,n){return u(e,t,n,!0)},_removeData:function(e,t){return d(e,t,!0)}}),rt.fn.extend({data:function(e,t){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=rt.data(o),1===o.nodeType&&!rt._data(o,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=rt.camelCase(i.slice(5)),c(o,i,r[i])));rt._data(o,"parsedAttrs",!0)}return r}return"object"==typeof e?this.each(function(){rt.data(this,e)}):arguments.length>1?this.each(function(){rt.data(this,e,t)}):o?c(o,e,rt.data(o,e)):void 0},removeData:function(e){return this.each(function(){rt.removeData(this,e)})}}),rt.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=rt._data(e,t),n&&(!i||rt.isArray(n)?i=rt._data(e,t,rt.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=rt.queue(e,t),i=n.length,r=n.shift(),o=rt._queueHooks(e,t),a=function(){rt.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return rt._data(e,n)||rt._data(e,n,{empty:rt.Callbacks("once memory").add(function(){rt._removeData(e,t+"queue"),rt._removeData(e,n)})})}}),rt.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?rt.queue(this[0],e):void 0===t?this:this.each(function(){var n=rt.queue(this,e,t);rt._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&rt.dequeue(this,e)})},dequeue:function(e){return this.each(function(){rt.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=rt.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=rt._data(o[a],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}});var Ct=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,St=["Top","Right","Bottom","Left"],Tt=function(e,t){return e=t||e,"none"===rt.css(e,"display")||!rt.contains(e.ownerDocument,e)},It=rt.access=function(e,t,n,i,r,o,a){var s=0,c=e.length,l=null==n;if("object"===rt.type(n)){r=!0;for(s in n)rt.access(e,t,s,n[s],!0,o,a)}else if(void 0!==i&&(r=!0,rt.isFunction(i)||(a=!0),l&&(a?(t.call(e,i),t=null):(l=t,t=function(e,t,n){return l.call(rt(e),n)})),t))for(;c>s;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return r?e:l?t.call(e):c?t(e[0],n):o},Dt=/^(?:checkbox|radio)$/i;!function(){var e=pt.createElement("input"),t=pt.createElement("div"),n=pt.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",nt.leadingWhitespace=3===t.firstChild.nodeType,nt.tbody=!t.getElementsByTagName("tbody").length,nt.htmlSerialize=!!t.getElementsByTagName("link").length,nt.html5Clone="<:nav></:nav>"!==pt.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),nt.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",nt.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",nt.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,nt.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){nt.noCloneEvent=!1}),t.cloneNode(!0).click()),null==nt.deleteExpando){nt.deleteExpando=!0;try{delete t.test}catch(i){nt.deleteExpando=!1}}}(),function(){var t,n,i=pt.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(nt[t+"Bubbles"]=n in e)||(i.setAttribute(n,"t"),nt[t+"Bubbles"]=i.attributes[n].expando===!1);i=null}();var Et=/^(?:input|select|textarea)$/i,At=/^key/,Pt=/^(?:mouse|pointer|contextmenu)|click/,Nt=/^(?:focusinfocus|focusoutblur)$/,Mt=/^([^.]*)(?:\.(.+)|)$/;rt.event={global:{},add:function(e,t,n,i,r){var o,a,s,c,l,u,d,f,h,p,m,g=rt._data(e);if(g){for(n.handler&&(c=n,n=c.handler,r=c.selector),n.guid||(n.guid=rt.guid++),(a=g.events)||(a=g.events={}),(u=g.handle)||(u=g.handle=function(e){return typeof rt===kt||e&&rt.event.triggered===e.type?void 0:rt.event.dispatch.apply(u.elem,arguments)},u.elem=e),t=(t||"").match(yt)||[""],s=t.length;s--;)o=Mt.exec(t[s])||[],h=m=o[1],p=(o[2]||"").split(".").sort(),h&&(l=rt.event.special[h]||{},h=(r?l.delegateType:l.bindType)||h,l=rt.event.special[h]||{},d=rt.extend({type:h,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&rt.expr.match.needsContext.test(r),namespace:p.join(".")},c),(f=a[h])||(f=a[h]=[],f.delegateCount=0,l.setup&&l.setup.call(e,i,p,u)!==!1||(e.addEventListener?e.addEventListener(h,u,!1):e.attachEvent&&e.attachEvent("on"+h,u))),l.add&&(l.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),r?f.splice(f.delegateCount++,0,d):f.push(d),rt.event.global[h]=!0);e=null}},remove:function(e,t,n,i,r){var o,a,s,c,l,u,d,f,h,p,m,g=rt.hasData(e)&&rt._data(e);if(g&&(u=g.events)){for(t=(t||"").match(yt)||[""],l=t.length;l--;)if(s=Mt.exec(t[l])||[],h=m=s[1],p=(s[2]||"").split(".").sort(),h){for(d=rt.event.special[h]||{},h=(i?d.delegateType:d.bindType)||h,f=u[h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),c=o=f.length;o--;)a=f[o],!r&&m!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||i&&i!==a.selector&&("**"!==i||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,d.remove&&d.remove.call(e,a));c&&!f.length&&(d.teardown&&d.teardown.call(e,p,g.handle)!==!1||rt.removeEvent(e,h,g.handle),delete u[h])}else for(h in u)rt.event.remove(e,h+t[l],n,i,!0);rt.isEmptyObject(u)&&(delete g.handle,rt._removeData(e,"events"))}},trigger:function(t,n,i,r){var o,a,s,c,l,u,d,f=[i||pt],h=tt.call(t,"type")?t.type:t,p=tt.call(t,"namespace")?t.namespace.split("."):[];if(s=u=i=i||pt,3!==i.nodeType&&8!==i.nodeType&&!Nt.test(h+rt.event.triggered)&&(h.indexOf(".")>=0&&(p=h.split("."),h=p.shift(),p.sort()),a=h.indexOf(":")<0&&"on"+h,t=t[rt.expando]?t:new rt.Event(h,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=p.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:rt.makeArray(n,[t]),l=rt.event.special[h]||{},r||!l.trigger||l.trigger.apply(i,n)!==!1)){if(!r&&!l.noBubble&&!rt.isWindow(i)){for(c=l.delegateType||h,Nt.test(c+h)||(s=s.parentNode);s;s=s.parentNode)f.push(s),u=s;u===(i.ownerDocument||pt)&&f.push(u.defaultView||u.parentWindow||e)}for(d=0;(s=f[d++])&&!t.isPropagationStopped();)t.type=d>1?c:l.bindType||h,o=(rt._data(s,"events")||{})[t.type]&&rt._data(s,"handle"),o&&o.apply(s,n),o=a&&s[a],o&&o.apply&&rt.acceptData(s)&&(t.result=o.apply(s,n),t.result===!1&&t.preventDefault());if(t.type=h,!r&&!t.isDefaultPrevented()&&(!l._default||l._default.apply(f.pop(),n)===!1)&&rt.acceptData(i)&&a&&i[h]&&!rt.isWindow(i)){u=i[a],u&&(i[a]=null),rt.event.triggered=h;try{i[h]()}catch(m){}rt.event.triggered=void 0,u&&(i[a]=u)}return t.result}},dispatch:function(e){e=rt.event.fix(e);var t,n,i,r,o,a=[],s=J.call(arguments),c=(rt._data(this,"events")||{})[e.type]||[],l=rt.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(a=rt.event.handlers.call(this,e,c),t=0;(r=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,o=0;(i=r.handlers[o++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,n=((rt.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,s),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result
}},handlers:function(e,t){var n,i,r,o,a=[],s=t.delegateCount,c=e.target;if(s&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(r=[],o=0;s>o;o++)i=t[o],n=i.selector+" ",void 0===r[n]&&(r[n]=i.needsContext?rt(n,this).index(c)>=0:rt.find(n,this,null,[c]).length),r[n]&&r.push(i);r.length&&a.push({elem:c,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},fix:function(e){if(e[rt.expando])return e;var t,n,i,r=e.type,o=e,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=Pt.test(r)?this.mouseHooks:At.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new rt.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=o.srcElement||pt),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,o=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||pt,r=i.documentElement,n=i.body,e.pageX=t.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return rt.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return rt.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=rt.extend(new rt.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?rt.event.trigger(r,null,t):rt.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},rt.removeEvent=pt.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===kt&&(e[i]=null),e.detachEvent(i,n))},rt.Event=function(e,t){return this instanceof rt.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?f:h):this.type=e,t&&rt.extend(this,t),this.timeStamp=e&&e.timeStamp||rt.now(),void(this[rt.expando]=!0)):new rt.Event(e,t)},rt.Event.prototype={isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=f,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=f,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=f,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},rt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){rt.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return(!r||r!==i&&!rt.contains(i,r))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),nt.submitBubbles||(rt.event.special.submit={setup:function(){return rt.nodeName(this,"form")?!1:void rt.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=rt.nodeName(t,"input")||rt.nodeName(t,"button")?t.form:void 0;n&&!rt._data(n,"submitBubbles")&&(rt.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),rt._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&rt.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return rt.nodeName(this,"form")?!1:void rt.event.remove(this,"._submit")}}),nt.changeBubbles||(rt.event.special.change={setup:function(){return Et.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(rt.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),rt.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),rt.event.simulate("change",this,e,!0)})),!1):void rt.event.add(this,"beforeactivate._change",function(e){var t=e.target;Et.test(t.nodeName)&&!rt._data(t,"changeBubbles")&&(rt.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||rt.event.simulate("change",this.parentNode,e,!0)}),rt._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return rt.event.remove(this,"._change"),!Et.test(this.nodeName)}}),nt.focusinBubbles||rt.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){rt.event.simulate(t,e.target,rt.event.fix(e),!0)};rt.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=rt._data(i,t);r||i.addEventListener(e,n,!0),rt._data(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=rt._data(i,t)-1;r?rt._data(i,t,r):(i.removeEventListener(e,n,!0),rt._removeData(i,t))}}}),rt.fn.extend({on:function(e,t,n,i,r){var o,a;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(o in e)this.on(o,t,n,e[o],r);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),i===!1)i=h;else if(!i)return this;return 1===r&&(a=i,i=function(e){return rt().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=rt.guid++)),this.each(function(){rt.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,rt(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=h),this.each(function(){rt.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){rt.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?rt.event.trigger(e,t,n,!0):void 0}});var Ot="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Lt=/ jQuery\d+="(?:null|\d+)"/g,Ft=new RegExp("<(?:"+Ot+")[\\s/>]","i"),zt=/^\s+/,Rt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,qt=/<([\w:]+)/,Ht=/<tbody/i,Yt=/<|&#?\w+;/,Bt=/<(?:script|style|link)/i,Wt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ut=/^$|\/(?:java|ecma)script/i,Qt=/^true\/(.*)/,Gt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Jt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:nt.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Vt=m(pt),Kt=Vt.appendChild(pt.createElement("div"));Jt.optgroup=Jt.option,Jt.tbody=Jt.tfoot=Jt.colgroup=Jt.caption=Jt.thead,Jt.th=Jt.td,rt.extend({clone:function(e,t,n){var i,r,o,a,s,c=rt.contains(e.ownerDocument,e);if(nt.html5Clone||rt.isXMLDoc(e)||!Ft.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Kt.innerHTML=e.outerHTML,Kt.removeChild(o=Kt.firstChild)),!(nt.noCloneEvent&&nt.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||rt.isXMLDoc(e)))for(i=g(o),s=g(e),a=0;null!=(r=s[a]);++a)i[a]&&k(r,i[a]);if(t)if(n)for(s=s||g(e),i=i||g(o),a=0;null!=(r=s[a]);a++)$(r,i[a]);else $(e,o);return i=g(o,"script"),i.length>0&&w(i,!c&&g(e,"script")),i=s=r=null,o},buildFragment:function(e,t,n,i){for(var r,o,a,s,c,l,u,d=e.length,f=m(t),h=[],p=0;d>p;p++)if(o=e[p],o||0===o)if("object"===rt.type(o))rt.merge(h,o.nodeType?[o]:o);else if(Yt.test(o)){for(s=s||f.appendChild(t.createElement("div")),c=(qt.exec(o)||["",""])[1].toLowerCase(),u=Jt[c]||Jt._default,s.innerHTML=u[1]+o.replace(Rt,"<$1></$2>")+u[2],r=u[0];r--;)s=s.lastChild;if(!nt.leadingWhitespace&&zt.test(o)&&h.push(t.createTextNode(zt.exec(o)[0])),!nt.tbody)for(o="table"!==c||Ht.test(o)?"<table>"!==u[1]||Ht.test(o)?0:s:s.firstChild,r=o&&o.childNodes.length;r--;)rt.nodeName(l=o.childNodes[r],"tbody")&&!l.childNodes.length&&o.removeChild(l);for(rt.merge(h,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else h.push(t.createTextNode(o));for(s&&f.removeChild(s),nt.appendChecked||rt.grep(g(h,"input"),v),p=0;o=h[p++];)if((!i||-1===rt.inArray(o,i))&&(a=rt.contains(o.ownerDocument,o),s=g(f.appendChild(o),"script"),a&&w(s),n))for(r=0;o=s[r++];)Ut.test(o.type||"")&&n.push(o);return s=null,f},cleanData:function(e,t){for(var n,i,r,o,a=0,s=rt.expando,c=rt.cache,l=nt.deleteExpando,u=rt.event.special;null!=(n=e[a]);a++)if((t||rt.acceptData(n))&&(r=n[s],o=r&&c[r])){if(o.events)for(i in o.events)u[i]?rt.event.remove(n,i):rt.removeEvent(n,i,o.handle);c[r]&&(delete c[r],l?delete n[s]:typeof n.removeAttribute!==kt?n.removeAttribute(s):n[s]=null,G.push(r))}}}),rt.fn.extend({text:function(e){return It(this,function(e){return void 0===e?rt.text(this):this.empty().append((this[0]&&this[0].ownerDocument||pt).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=_(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=_(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?rt.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||rt.cleanData(g(n)),n.parentNode&&(t&&rt.contains(n.ownerDocument,n)&&w(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&rt.cleanData(g(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&rt.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return rt.clone(this,e,t)})},html:function(e){return It(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Lt,""):void 0;if(!("string"!=typeof e||Bt.test(e)||!nt.htmlSerialize&&Ft.test(e)||!nt.leadingWhitespace&&zt.test(e)||Jt[(qt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Rt,"<$1></$2>");try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(rt.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,rt.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=V.apply([],e);var n,i,r,o,a,s,c=0,l=this.length,u=this,d=l-1,f=e[0],h=rt.isFunction(f);if(h||l>1&&"string"==typeof f&&!nt.checkClone&&Wt.test(f))return this.each(function(n){var i=u.eq(n);h&&(e[0]=f.call(this,n,i.html())),i.domManip(e,t)});if(l&&(s=rt.buildFragment(e,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(o=rt.map(g(s,"script"),y),r=o.length;l>c;c++)i=s,c!==d&&(i=rt.clone(i,!0,!0),r&&rt.merge(o,g(i,"script"))),t.call(this[c],i,c);if(r)for(a=o[o.length-1].ownerDocument,rt.map(o,b),c=0;r>c;c++)i=o[c],Ut.test(i.type||"")&&!rt._data(i,"globalEval")&&rt.contains(a,i)&&(i.src?rt._evalUrl&&rt._evalUrl(i.src):rt.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Gt,"")));s=n=null}return this}}),rt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){rt.fn[e]=function(e){for(var n,i=0,r=[],o=rt(e),a=o.length-1;a>=i;i++)n=i===a?this:this.clone(!0),rt(o[i])[t](n),K.apply(r,n.get());return this.pushStack(r)}});var Xt,Zt={};!function(){var e;nt.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,i;return n=pt.getElementsByTagName("body")[0],n&&n.style?(t=pt.createElement("div"),i=pt.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==kt&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(pt.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(i),e):void 0}}();var en,tn,nn=/^margin/,rn=new RegExp("^("+Ct+")(?!px)[a-z%]+$","i"),on=/^(top|right|bottom|left)$/;e.getComputedStyle?(en=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},tn=function(e,t,n){var i,r,o,a,s=e.style;return n=n||en(e),a=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==a||rt.contains(e.ownerDocument,e)||(a=rt.style(e,t)),rn.test(a)&&nn.test(t)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0===a?a:a+""}):pt.documentElement.currentStyle&&(en=function(e){return e.currentStyle},tn=function(e,t,n){var i,r,o,a,s=e.style;return n=n||en(e),a=n?n[t]:void 0,null==a&&s&&s[t]&&(a=s[t]),rn.test(a)&&!on.test(t)&&(i=s.left,r=e.runtimeStyle,o=r&&r.left,o&&(r.left=e.currentStyle.left),s.left="fontSize"===t?"1em":a,a=s.pixelLeft+"px",s.left=i,o&&(r.left=o)),void 0===a?a:a+""||"auto"}),function(){function t(){var t,n,i,r;n=pt.getElementsByTagName("body")[0],n&&n.style&&(t=pt.createElement("div"),i=pt.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=a=!1,c=!0,e.getComputedStyle&&(o="1%"!==(e.getComputedStyle(t,null)||{}).top,a="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,r=t.appendChild(pt.createElement("div")),r.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",r.style.marginRight=r.style.width="0",t.style.width="1px",c=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=t.getElementsByTagName("td"),r[0].style.cssText="margin:0;border:0;padding:0;display:none",s=0===r[0].offsetHeight,s&&(r[0].style.display="",r[1].style.display="none",s=0===r[0].offsetHeight),n.removeChild(i))}var n,i,r,o,a,s,c;n=pt.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=n.getElementsByTagName("a")[0],i=r&&r.style,i&&(i.cssText="float:left;opacity:.5",nt.opacity="0.5"===i.opacity,nt.cssFloat=!!i.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",nt.clearCloneStyle="content-box"===n.style.backgroundClip,nt.boxSizing=""===i.boxSizing||""===i.MozBoxSizing||""===i.WebkitBoxSizing,rt.extend(nt,{reliableHiddenOffsets:function(){return null==s&&t(),s},boxSizingReliable:function(){return null==a&&t(),a},pixelPosition:function(){return null==o&&t(),o},reliableMarginRight:function(){return null==c&&t(),c}}))}(),rt.swap=function(e,t,n,i){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=a[o];return r};var an=/alpha\([^)]*\)/i,sn=/opacity\s*=\s*([^)]*)/,cn=/^(none|table(?!-c[ea]).+)/,ln=new RegExp("^("+Ct+")(.*)$","i"),un=new RegExp("^([+-])=("+Ct+")","i"),dn={position:"absolute",visibility:"hidden",display:"block"},fn={letterSpacing:"0",fontWeight:"400"},hn=["Webkit","O","Moz","ms"];rt.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=tn(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":nt.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=rt.camelCase(t),c=e.style;if(t=rt.cssProps[s]||(rt.cssProps[s]=S(c,s)),a=rt.cssHooks[t]||rt.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:c[t];if(o=typeof n,"string"===o&&(r=un.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(rt.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||rt.cssNumber[s]||(n+="px"),nt.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(e,n,i)))))try{c[t]=n}catch(l){}}},css:function(e,t,n,i){var r,o,a,s=rt.camelCase(t);return t=rt.cssProps[s]||(rt.cssProps[s]=S(e.style,s)),a=rt.cssHooks[t]||rt.cssHooks[s],a&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=tn(e,t,i)),"normal"===o&&t in fn&&(o=fn[t]),""===n||n?(r=parseFloat(o),n===!0||rt.isNumeric(r)?r||0:o):o}}),rt.each(["height","width"],function(e,t){rt.cssHooks[t]={get:function(e,n,i){return n?cn.test(rt.css(e,"display"))&&0===e.offsetWidth?rt.swap(e,dn,function(){return E(e,t,i)}):E(e,t,i):void 0},set:function(e,n,i){var r=i&&en(e);return I(e,n,i?D(e,t,i,nt.boxSizing&&"border-box"===rt.css(e,"boxSizing",!1,r),r):0)}}}),nt.opacity||(rt.cssHooks.opacity={get:function(e,t){return sn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,r=rt.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===rt.trim(o.replace(an,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=an.test(o)?o.replace(an,r):o+" "+r)}}),rt.cssHooks.marginRight=C(nt.reliableMarginRight,function(e,t){return t?rt.swap(e,{display:"inline-block"},tn,[e,"marginRight"]):void 0}),rt.each({margin:"",padding:"",border:"Width"},function(e,t){rt.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+St[i]+t]=o[i]||o[i-2]||o[0];return r}},nn.test(e)||(rt.cssHooks[e+t].set=I)}),rt.fn.extend({css:function(e,t){return It(this,function(e,t,n){var i,r,o={},a=0;if(rt.isArray(t)){for(i=en(e),r=t.length;r>a;a++)o[t[a]]=rt.css(e,t[a],!1,i);return o}return void 0!==n?rt.style(e,t,n):rt.css(e,t)},e,t,arguments.length>1)},show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Tt(this)?rt(this).show():rt(this).hide()})}}),rt.Tween=A,A.prototype={constructor:A,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(rt.cssNumber[n]?"":"px")},cur:function(){var e=A.propHooks[this.prop];return e&&e.get?e.get(this):A.propHooks._default.get(this)},run:function(e){var t,n=A.propHooks[this.prop];return this.pos=t=this.options.duration?rt.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):A.propHooks._default.set(this),this}},A.prototype.init.prototype=A.prototype,A.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=rt.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){rt.fx.step[e.prop]?rt.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[rt.cssProps[e.prop]]||rt.cssHooks[e.prop])?rt.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},A.propHooks.scrollTop=A.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},rt.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},rt.fx=A.prototype.init,rt.fx.step={};var pn,mn,gn=/^(?:toggle|show|hide)$/,vn=new RegExp("^(?:([+-])=|)("+Ct+")([a-z%]*)$","i"),_n=/queueHooks$/,yn=[O],bn={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=vn.exec(t),o=r&&r[3]||(rt.cssNumber[e]?"":"px"),a=(rt.cssNumber[e]||"px"!==o&&+i)&&vn.exec(rt.css(n.elem,e)),s=1,c=20;if(a&&a[3]!==o){o=o||a[3],r=r||[],a=+i||1;do s=s||".5",a/=s,rt.style(n.elem,e,a+o);while(s!==(s=n.cur()/i)&&1!==s&&--c)}return r&&(a=n.start=+a||+i||0,n.unit=o,n.end=r[1]?a+(r[1]+1)*r[2]:+r[2]),n}]};rt.Animation=rt.extend(F,{tweener:function(e,t){rt.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],bn[n]=bn[n]||[],bn[n].unshift(t)},prefilter:function(e,t){t?yn.unshift(e):yn.push(e)}}),rt.speed=function(e,t,n){var i=e&&"object"==typeof e?rt.extend({},e):{complete:n||!n&&t||rt.isFunction(e)&&e,duration:e,easing:n&&t||t&&!rt.isFunction(t)&&t};return i.duration=rt.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in rt.fx.speeds?rt.fx.speeds[i.duration]:rt.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){rt.isFunction(i.old)&&i.old.call(this),i.queue&&rt.dequeue(this,i.queue)},i},rt.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Tt).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=rt.isEmptyObject(e),o=rt.speed(t,n,i),a=function(){var t=F(this,rt.extend({},e),o);(r||rt._data(this,"finish"))&&t.stop(!0)};return a.finish=a,r||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=rt.timers,a=rt._data(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&_n.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));(t||!n)&&rt.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=rt._data(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=rt.timers,a=i?i.length:0;for(n.finish=!0,rt.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),rt.each(["toggle","show","hide"],function(e,t){var n=rt.fn[t];rt.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(N(t,!0),e,i,r)}}),rt.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){rt.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),rt.timers=[],rt.fx.tick=function(){var e,t=rt.timers,n=0;for(pn=rt.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||rt.fx.stop(),pn=void 0},rt.fx.timer=function(e){rt.timers.push(e),e()?rt.fx.start():rt.timers.pop()},rt.fx.interval=13,rt.fx.start=function(){mn||(mn=setInterval(rt.fx.tick,rt.fx.interval))},rt.fx.stop=function(){clearInterval(mn),mn=null},rt.fx.speeds={slow:600,fast:200,_default:400},rt.fn.delay=function(e,t){return e=rt.fx?rt.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e,t,n,i,r;t=pt.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=t.getElementsByTagName("a")[0],n=pt.createElement("select"),r=n.appendChild(pt.createElement("option")),e=t.getElementsByTagName("input")[0],i.style.cssText="top:1px",nt.getSetAttribute="t"!==t.className,nt.style=/top/.test(i.getAttribute("style")),nt.hrefNormalized="/a"===i.getAttribute("href"),nt.checkOn=!!e.value,nt.optSelected=r.selected,nt.enctype=!!pt.createElement("form").enctype,n.disabled=!0,nt.optDisabled=!r.disabled,e=pt.createElement("input"),e.setAttribute("value",""),nt.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),nt.radioValue="t"===e.value}();var wn=/\r/g;rt.fn.extend({val:function(e){var t,n,i,r=this[0];{if(arguments.length)return i=rt.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,rt(this).val()):e,null==r?r="":"number"==typeof r?r+="":rt.isArray(r)&&(r=rt.map(r,function(e){return null==e?"":e+""})),t=rt.valHooks[this.type]||rt.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=rt.valHooks[r.type]||rt.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(wn,""):null==n?"":n)}}}),rt.extend({valHooks:{option:{get:function(e){var t=rt.find.attr(e,"value");return null!=t?t:rt.trim(rt.text(e))}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,a=o?null:[],s=o?r+1:i.length,c=0>r?s:o?r:0;s>c;c++)if(n=i[c],!(!n.selected&&c!==r||(nt.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&rt.nodeName(n.parentNode,"optgroup"))){if(t=rt(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,o=rt.makeArray(t),a=r.length;a--;)if(i=r[a],rt.inArray(rt.valHooks.option.get(i),o)>=0)try{i.selected=n=!0}catch(s){i.scrollHeight}else i.selected=!1;return n||(e.selectedIndex=-1),r}}}}),rt.each(["radio","checkbox"],function(){rt.valHooks[this]={set:function(e,t){return rt.isArray(t)?e.checked=rt.inArray(rt(e).val(),t)>=0:void 0}},nt.checkOn||(rt.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var $n,kn,xn=rt.expr.attrHandle,jn=/^(?:checked|selected)$/i,Cn=nt.getSetAttribute,Sn=nt.input;rt.fn.extend({attr:function(e,t){return It(this,rt.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){rt.removeAttr(this,e)})}}),rt.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===kt?rt.prop(e,t,n):(1===o&&rt.isXMLDoc(e)||(t=t.toLowerCase(),i=rt.attrHooks[t]||(rt.expr.match.bool.test(t)?kn:$n)),void 0===n?i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=rt.find.attr(e,t),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):void rt.removeAttr(e,t))},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(yt);if(o&&1===e.nodeType)for(;n=o[r++];)i=rt.propFix[n]||n,rt.expr.match.bool.test(n)?Sn&&Cn||!jn.test(n)?e[i]=!1:e[rt.camelCase("default-"+n)]=e[i]=!1:rt.attr(e,n,""),e.removeAttribute(Cn?n:i)},attrHooks:{type:{set:function(e,t){if(!nt.radioValue&&"radio"===t&&rt.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),kn={set:function(e,t,n){return t===!1?rt.removeAttr(e,n):Sn&&Cn||!jn.test(n)?e.setAttribute(!Cn&&rt.propFix[n]||n,n):e[rt.camelCase("default-"+n)]=e[n]=!0,n}},rt.each(rt.expr.match.bool.source.match(/\w+/g),function(e,t){var n=xn[t]||rt.find.attr;xn[t]=Sn&&Cn||!jn.test(t)?function(e,t,i){var r,o;return i||(o=xn[t],xn[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,xn[t]=o),r}:function(e,t,n){return n?void 0:e[rt.camelCase("default-"+t)]?t.toLowerCase():null}}),Sn&&Cn||(rt.attrHooks.value={set:function(e,t,n){return rt.nodeName(e,"input")?void(e.defaultValue=t):$n&&$n.set(e,t,n)}}),Cn||($n={set:function(e,t,n){var i=e.getAttributeNode(n);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(n)),i.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},xn.id=xn.name=xn.coords=function(e,t,n){var i;return n?void 0:(i=e.getAttributeNode(t))&&""!==i.value?i.value:null},rt.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:$n.set},rt.attrHooks.contenteditable={set:function(e,t,n){$n.set(e,""===t?!1:t,n)}},rt.each(["width","height"],function(e,t){rt.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),nt.style||(rt.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Tn=/^(?:input|select|textarea|button|object)$/i,In=/^(?:a|area)$/i;rt.fn.extend({prop:function(e,t){return It(this,rt.prop,e,t,arguments.length>1)},removeProp:function(e){return e=rt.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),rt.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var i,r,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return o=1!==a||!rt.isXMLDoc(e),o&&(t=rt.propFix[t]||t,r=rt.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=rt.find.attr(e,"tabindex");return t?parseInt(t,10):Tn.test(e.nodeName)||In.test(e.nodeName)&&e.href?0:-1}}}}),nt.hrefNormalized||rt.each(["href","src"],function(e,t){rt.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),nt.optSelected||(rt.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),rt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){rt.propFix[this.toLowerCase()]=this}),nt.enctype||(rt.propFix.enctype="encoding");var Dn=/[\t\r\n\f]/g;rt.fn.extend({addClass:function(e){var t,n,i,r,o,a,s=0,c=this.length,l="string"==typeof e&&e;if(rt.isFunction(e))return this.each(function(t){rt(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(yt)||[];c>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Dn," "):" ")){for(o=0;r=t[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a=rt.trim(i),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,i,r,o,a,s=0,c=this.length,l=0===arguments.length||"string"==typeof e&&e;if(rt.isFunction(e))return this.each(function(t){rt(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(yt)||[];c>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Dn," "):"")){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");a=e?rt.trim(i):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(rt.isFunction(e)?function(n){rt(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,r=rt(this),o=e.match(yt)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===kt||"boolean"===n)&&(this.className&&rt._data(this,"__className__",this.className),this.className=this.className||e===!1?"":rt._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Dn," ").indexOf(t)>=0)return!0;return!1}}),rt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){rt.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),rt.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var En=rt.now(),An=/\?/,Pn=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;rt.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,i=null,r=rt.trim(t+"");return r&&!rt.trim(r.replace(Pn,function(e,t,r,o){return n&&t&&(i=0),0===i?e:(n=r||t,i+=!o-!r,"")
}))?Function("return "+r)():rt.error("Invalid JSON: "+t)},rt.parseXML=function(t){var n,i;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(i=new DOMParser,n=i.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(r){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||rt.error("Invalid XML: "+t),n};var Nn,Mn,On=/#.*$/,Ln=/([?&])_=[^&]*/,Fn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,zn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Rn=/^(?:GET|HEAD)$/,qn=/^\/\//,Hn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Yn={},Bn={},Wn="*/".concat("*");try{Mn=location.href}catch(Un){Mn=pt.createElement("a"),Mn.href="",Mn=Mn.href}Nn=Hn.exec(Mn.toLowerCase())||[],rt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Mn,type:"GET",isLocal:zn.test(Nn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":rt.parseJSON,"text xml":rt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?q(q(e,rt.ajaxSettings),t):q(rt.ajaxSettings,e)},ajaxPrefilter:z(Yn),ajaxTransport:z(Bn),ajax:function(e,t){function n(e,t,n,i){var r,u,v,_,b,$=t;2!==y&&(y=2,s&&clearTimeout(s),l=void 0,a=i||"",w.readyState=e>0?4:0,r=e>=200&&300>e||304===e,n&&(_=H(d,w,n)),_=Y(d,_,w,r),r?(d.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(rt.lastModified[o]=b),b=w.getResponseHeader("etag"),b&&(rt.etag[o]=b)),204===e||"HEAD"===d.type?$="nocontent":304===e?$="notmodified":($=_.state,u=_.data,v=_.error,r=!v)):(v=$,(e||!$)&&($="error",0>e&&(e=0))),w.status=e,w.statusText=(t||$)+"",r?p.resolveWith(f,[u,$,w]):p.rejectWith(f,[w,$,v]),w.statusCode(g),g=void 0,c&&h.trigger(r?"ajaxSuccess":"ajaxError",[w,d,r?u:v]),m.fireWith(f,[w,$]),c&&(h.trigger("ajaxComplete",[w,d]),--rt.active||rt.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,r,o,a,s,c,l,u,d=rt.ajaxSetup({},t),f=d.context||d,h=d.context&&(f.nodeType||f.jquery)?rt(f):rt.event,p=rt.Deferred(),m=rt.Callbacks("once memory"),g=d.statusCode||{},v={},_={},y=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!u)for(u={};t=Fn.exec(a);)u[t[1].toLowerCase()]=t[2];t=u[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=_[n]=_[n]||e,v[e]=t),this},overrideMimeType:function(e){return y||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>y)for(t in e)g[t]=[g[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return l&&l.abort(t),n(0,t),this}};if(p.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,d.url=((e||d.url||Mn)+"").replace(On,"").replace(qn,Nn[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=rt.trim(d.dataType||"*").toLowerCase().match(yt)||[""],null==d.crossDomain&&(i=Hn.exec(d.url.toLowerCase()),d.crossDomain=!(!i||i[1]===Nn[1]&&i[2]===Nn[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Nn[3]||("http:"===Nn[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=rt.param(d.data,d.traditional)),R(Yn,d,t,w),2===y)return w;c=d.global,c&&0===rt.active++&&rt.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Rn.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=(An.test(o)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Ln.test(o)?o.replace(Ln,"$1_="+En++):o+(An.test(o)?"&":"?")+"_="+En++)),d.ifModified&&(rt.lastModified[o]&&w.setRequestHeader("If-Modified-Since",rt.lastModified[o]),rt.etag[o]&&w.setRequestHeader("If-None-Match",rt.etag[o])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Wn+"; q=0.01":""):d.accepts["*"]);for(r in d.headers)w.setRequestHeader(r,d.headers[r]);if(d.beforeSend&&(d.beforeSend.call(f,w,d)===!1||2===y))return w.abort();b="abort";for(r in{success:1,error:1,complete:1})w[r](d[r]);if(l=R(Bn,d,t,w)){w.readyState=1,c&&h.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},d.timeout));try{y=1,l.send(v,n)}catch($){if(!(2>y))throw $;n(-1,$)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return rt.get(e,t,n,"json")},getScript:function(e,t){return rt.get(e,void 0,t,"script")}}),rt.each(["get","post"],function(e,t){rt[t]=function(e,n,i,r){return rt.isFunction(n)&&(r=r||i,i=n,n=void 0),rt.ajax({url:e,type:t,dataType:r,data:n,success:i})}}),rt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){rt.fn[t]=function(e){return this.on(t,e)}}),rt._evalUrl=function(e){return rt.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},rt.fn.extend({wrapAll:function(e){if(rt.isFunction(e))return this.each(function(t){rt(this).wrapAll(e.call(this,t))});if(this[0]){var t=rt(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(rt.isFunction(e)?function(t){rt(this).wrapInner(e.call(this,t))}:function(){var t=rt(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=rt.isFunction(e);return this.each(function(n){rt(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){rt.nodeName(this,"body")||rt(this).replaceWith(this.childNodes)}).end()}}),rt.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!nt.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||rt.css(e,"display"))},rt.expr.filters.visible=function(e){return!rt.expr.filters.hidden(e)};var Qn=/%20/g,Gn=/\[\]$/,Jn=/\r?\n/g,Vn=/^(?:submit|button|image|reset|file)$/i,Kn=/^(?:input|select|textarea|keygen)/i;rt.param=function(e,t){var n,i=[],r=function(e,t){t=rt.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=rt.ajaxSettings&&rt.ajaxSettings.traditional),rt.isArray(e)||e.jquery&&!rt.isPlainObject(e))rt.each(e,function(){r(this.name,this.value)});else for(n in e)B(n,e[n],t,r);return i.join("&").replace(Qn,"+")},rt.fn.extend({serialize:function(){return rt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=rt.prop(this,"elements");return e?rt.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!rt(this).is(":disabled")&&Kn.test(this.nodeName)&&!Vn.test(e)&&(this.checked||!Dt.test(e))}).map(function(e,t){var n=rt(this).val();return null==n?null:rt.isArray(n)?rt.map(n,function(e){return{name:t.name,value:e.replace(Jn,"\r\n")}}):{name:t.name,value:n.replace(Jn,"\r\n")}}).get()}}),rt.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&W()||U()}:W;var Xn=0,Zn={},ei=rt.ajaxSettings.xhr();e.ActiveXObject&&rt(e).on("unload",function(){for(var e in Zn)Zn[e](void 0,!0)}),nt.cors=!!ei&&"withCredentials"in ei,ei=nt.ajax=!!ei,ei&&rt.ajaxTransport(function(e){if(!e.crossDomain||nt.cors){var t;return{send:function(n,i){var r,o=e.xhr(),a=++Xn;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)o[r]=e.xhrFields[r];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)void 0!==n[r]&&o.setRequestHeader(r,n[r]+"");o.send(e.hasContent&&e.data||null),t=function(n,r){var s,c,l;if(t&&(r||4===o.readyState))if(delete Zn[a],t=void 0,o.onreadystatechange=rt.noop,r)4!==o.readyState&&o.abort();else{l={},s=o.status,"string"==typeof o.responseText&&(l.text=o.responseText);try{c=o.statusText}catch(u){c=""}s||!e.isLocal||e.crossDomain?1223===s&&(s=204):s=l.text?200:404}l&&i(s,c,l,o.getAllResponseHeaders())},e.async?4===o.readyState?setTimeout(t):o.onreadystatechange=Zn[a]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),rt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return rt.globalEval(e),e}}}),rt.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),rt.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=pt.head||rt("head")[0]||pt.documentElement;return{send:function(i,r){t=pt.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||r(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var ti=[],ni=/(=)\?(?=&|$)|\?\?/;rt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ti.pop()||rt.expando+"_"+En++;return this[e]=!0,e}}),rt.ajaxPrefilter("json jsonp",function(t,n,i){var r,o,a,s=t.jsonp!==!1&&(ni.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ni.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=rt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(ni,"$1"+r):t.jsonp!==!1&&(t.url+=(An.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||rt.error(r+" was not called"),a[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){a=arguments},i.always(function(){e[r]=o,t[r]&&(t.jsonpCallback=n.jsonpCallback,ti.push(r)),a&&rt.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),rt.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||pt;var i=dt.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=rt.buildFragment([e],t,r),r&&r.length&&rt(r).remove(),rt.merge([],i.childNodes))};var ii=rt.fn.load;rt.fn.load=function(e,t,n){if("string"!=typeof e&&ii)return ii.apply(this,arguments);var i,r,o,a=this,s=e.indexOf(" ");return s>=0&&(i=rt.trim(e.slice(s,e.length)),e=e.slice(0,s)),rt.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&rt.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){r=arguments,a.html(i?rt("<div>").append(rt.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){a.each(n,r||[e.responseText,t,e])}),this},rt.expr.filters.animated=function(e){return rt.grep(rt.timers,function(t){return e===t.elem}).length};var ri=e.document.documentElement;rt.offset={setOffset:function(e,t,n){var i,r,o,a,s,c,l,u=rt.css(e,"position"),d=rt(e),f={};"static"===u&&(e.style.position="relative"),s=d.offset(),o=rt.css(e,"top"),c=rt.css(e,"left"),l=("absolute"===u||"fixed"===u)&&rt.inArray("auto",[o,c])>-1,l?(i=d.position(),a=i.top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(c)||0),rt.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+r),"using"in t?t.using.call(e,f):d.css(f)}},rt.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){rt.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},r=this[0],o=r&&r.ownerDocument;if(o)return t=o.documentElement,rt.contains(t,r)?(typeof r.getBoundingClientRect!==kt&&(i=r.getBoundingClientRect()),n=Q(o),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i},position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===rt.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),rt.nodeName(e[0],"html")||(n=e.offset()),n.top+=rt.css(e[0],"borderTopWidth",!0),n.left+=rt.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-rt.css(i,"marginTop",!0),left:t.left-n.left-rt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||ri;e&&!rt.nodeName(e,"html")&&"static"===rt.css(e,"position");)e=e.offsetParent;return e||ri})}}),rt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);rt.fn[e]=function(i){return It(this,function(e,i,r){var o=Q(e);return void 0===r?o?t in o?o[t]:o.document.documentElement[i]:e[i]:void(o?o.scrollTo(n?rt(o).scrollLeft():r,n?r:rt(o).scrollTop()):e[i]=r)},e,i,arguments.length,null)}}),rt.each(["top","left"],function(e,t){rt.cssHooks[t]=C(nt.pixelPosition,function(e,n){return n?(n=tn(e,t),rn.test(n)?rt(e).position()[t]+"px":n):void 0})}),rt.each({Height:"height",Width:"width"},function(e,t){rt.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){rt.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||r===!0?"margin":"border");return It(this,function(t,n,i){var r;return rt.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?rt.css(t,n,a):rt.style(t,n,i,a)},t,o?i:void 0,o,null)}})}),rt.fn.size=function(){return this.length},rt.fn.andSelf=rt.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return rt});var oi=e.jQuery,ai=e.$;return rt.noConflict=function(t){return e.$===rt&&(e.$=ai),t&&e.jQuery===rt&&(e.jQuery=oi),rt},typeof t===kt&&(e.jQuery=e.$=rt),rt}),function(){$(document).ready(function(){if("undefined"!=typeof ga){ga("create",analytics_vars.google_analytics_id,"auto"),$("#project_category").length&&ga("set","dimension1",$("#project_category").attr("data-project-category")),ga("set","dimension2",analytics_vars.logged_in),ga("set","dimension3",analytics_vars.social_user),$("#projects_show").length&&ga("set","dimension4",$("#about").attr("data-project-state")),ga("set","dimension5",I18n.browser_language),ga("set","dimension6",I18n.chosen_language),ga("set","dimension7",I18n.calculated_language),ga("set","dimension8",I18n.display_language);try{ga("send","pageview")}catch(e){}}})}(),instrument_function(function(e){!function(t){t.support.JSON=function(){return"undefined"!=typeof e.JSON}}(jQuery)})(this),instrument_function(function(e){!function(t){t.support.localStorage=function(){var t="storagetest",n=e.localStorage;try{return n.setItem(t,"1"),n.removeItem(t),!0}catch(i){return!1}}}(jQuery)})(this),function(){$(window).load(function(){function e(e){return window.performance.getEntriesByName(e,"mark")[0].startTime}function t(t){return e("end_"+t)-e("begin_"+t)}function n(e,n){var i;return(i=_.find(window.performance.getEntriesByType("resource"),function(t){return t.name.match(n||e)}))?{fetch:i.duration,eval:t(e+"_eval"),block:t(e+"_tag")}:void 0}"object"==typeof window.performance&&"function"==typeof window.performance.getEntriesByName&&$.support.JSON()&&(!(Math.random()>.1)||$.support.localStorage()&&localStorage.getItem("benchmarks"))&&$.ajax({type:"POST",url:"/timings",contentType:"application/json",data:JSON.stringify({data:{"base.js":n("base.js",/\/base(-[a-z0-9]*)?.js/)}})})})}(),instrument_function(function(e){this.root=window,this.packages=e,this.requires=function(){}})(this),function(){$(function(){$("body").hasClass("admin")||(root._sf_async_config={uid:5536,domain:window.location.hostname.replace("www.","")},root._sf_endpt=(new Date).getTime(),$.getScript("//a248.e.akamai.net/chartbeat.download.akamai.com/102508/js/chartbeat.js"))})}();var swfobject=function(){function e(){if(!W&&document.getElementsByTagName("body")[0]){try{var e,t=v("span");t.style.display="none",e=F.getElementsByTagName("body")[0].appendChild(t),e.parentNode.removeChild(e),e=null,t=null}catch(n){return}W=!0;for(var i=q.length,r=0;i>r;r++)q[r]()}}function t(e){W?e():q[q.length]=e}function n(e){if(typeof L.addEventListener!=D)L.addEventListener("load",e,!1);else if(typeof F.addEventListener!=D)F.addEventListener("load",e,!1);else if(typeof L.attachEvent!=D)y(L,"onload",e);else if("function"==typeof L.onload){var t=L.onload;L.onload=function(){t(),e()}}else L.onload=e}function i(){var e=F.getElementsByTagName("body")[0],t=v(E);t.setAttribute("style","visibility: hidden;"),t.setAttribute("type",N);var n=e.appendChild(t);if(n){var i=0;!function o(){if(typeof n.GetVariable!=D)try{var a=n.GetVariable("$version");a&&(a=a.split(" ")[1].split(","),J.pv=[_(a[0]),_(a[1]),_(a[2])])}catch(s){J.pv=[8,0,0]}else if(10>i)return i++,void setTimeout(o,10);e.removeChild(t),n=null,r()}()}else r()}function r(){var e=H.length;if(e>0)for(var t=0;e>t;t++){var n=H[t].id,i=H[t].callbackFn,r={success:!1,id:n};if(J.pv[0]>0){var l=g(n);if(l)if(!b(H[t].swfVersion)||J.wk&&J.wk<312)if(H[t].expressInstall&&a()){var u={};u.data=H[t].expressInstall,u.width=l.getAttribute("width")||"0",u.height=l.getAttribute("height")||"0",l.getAttribute("class")&&(u.styleclass=l.getAttribute("class")),l.getAttribute("align")&&(u.align=l.getAttribute("align"));for(var d={},f=l.getElementsByTagName("param"),h=f.length,p=0;h>p;p++)"movie"!=f[p].getAttribute("name").toLowerCase()&&(d[f[p].getAttribute("name")]=f[p].getAttribute("value"));s(u,d,n,i)}else c(l),i&&i(r);else $(n,!0),i&&(r.success=!0,r.ref=o(n),r.id=n,i(r))}else if($(n,!0),i){var m=o(n);m&&typeof m.SetVariable!=D&&(r.success=!0,r.ref=m,r.id=m.id),i(r)}}}function o(e){var t=null,n=g(e);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(t=typeof n.SetVariable!==D?n:n.getElementsByTagName(E)[0]||n),t}function a(){return!U&&b("6.0.65")&&(J.win||J.mac)&&!(J.wk&&J.wk<312)}function s(e,t,n,i){var r=g(n);if(n=m(n),U=!0,C=i||null,S={success:!1,id:n},r){"OBJECT"==r.nodeName.toUpperCase()?(x=l(r),j=null):(x=r,j=n),e.id=M,(typeof e.width==D||!/%$/.test(e.width)&&_(e.width)<310)&&(e.width="310"),(typeof e.height==D||!/%$/.test(e.height)&&_(e.height)<137)&&(e.height="137");var o=J.ie?"ActiveX":"PlugIn",a="MMredirectURL="+encodeURIComponent(L.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+o+"&MMdoctitle="+encodeURIComponent(F.title.slice(0,47)+" - Flash Player Installation");if(typeof t.flashvars!=D?t.flashvars+="&"+a:t.flashvars=a,J.ie&&4!=r.readyState){var s=v("div");n+="SWFObjectNew",s.setAttribute("id",n),r.parentNode.insertBefore(s,r),r.style.display="none",h(r)}d(e,t,n)}}function c(e){if(J.ie&&4!=e.readyState){e.style.display="none";var t=v("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(l(e),t),h(e)}else e.parentNode.replaceChild(l(e),e)}function l(e){var t=v("div");if(J.win&&J.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(E)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,o=0;r>o;o++)1==i[o].nodeType&&"PARAM"==i[o].nodeName||8==i[o].nodeType||t.appendChild(i[o].cloneNode(!0))}}return t}function u(e,t){var n=v("div");return n.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+e+"'>"+t+"</object>",n.firstChild}function d(e,t,n){var i,r=g(n);if(n=m(n),J.wk&&J.wk<312)return i;if(r){var o,a,s,c=v(J.ie?"div":E);typeof e.id==D&&(e.id=n);for(s in t)t.hasOwnProperty(s)&&"movie"!==s.toLowerCase()&&f(c,s,t[s]);J.ie&&(c=u(e.data,c.innerHTML));for(o in e)e.hasOwnProperty(o)&&(a=o.toLowerCase(),"styleclass"===a?c.setAttribute("class",e[o]):"classid"!==a&&"data"!==a&&c.setAttribute(o,e[o]));J.ie?Y[Y.length]=e.id:(c.setAttribute("type",N),c.setAttribute("data",e.data)),r.parentNode.replaceChild(c,r),i=c}return i}function f(e,t,n){var i=v("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function h(e){var t=g(e);t&&"OBJECT"==t.nodeName.toUpperCase()&&(J.ie?(t.style.display="none",function n(){if(4==t.readyState){for(var e in t)"function"==typeof t[e]&&(t[e]=null);t.parentNode.removeChild(t)}else setTimeout(n,10)}()):t.parentNode.removeChild(t))}function p(e){return e&&e.nodeType&&1===e.nodeType}function m(e){return p(e)?e.id:e}function g(e){if(p(e))return e;var t=null;try{t=F.getElementById(e)}catch(n){}return t}function v(e){return F.createElement(e)}function _(e){return parseInt(e,10)}function y(e,t,n){e.attachEvent(t,n),B[B.length]=[e,t,n]}function b(e){e+="";var t=J.pv,n=e.split(".");return n[0]=_(n[0]),n[1]=_(n[1])||0,n[2]=_(n[2])||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function w(e,t,n,i){var r=F.getElementsByTagName("head")[0];if(r){var o="string"==typeof n?n:"screen";if(i&&(T=null,I=null),!T||I!=o){var a=v("style");a.setAttribute("type","text/css"),a.setAttribute("media",o),T=r.appendChild(a),J.ie&&typeof F.styleSheets!=D&&F.styleSheets.length>0&&(T=F.styleSheets[F.styleSheets.length-1]),I=o}T&&(typeof T.addRule!=D?T.addRule(e,t):typeof F.createTextNode!=D&&T.appendChild(F.createTextNode(e+" {"+t+"}")))}}function $(e,t){if(Q){var n=t?"visible":"hidden",i=g(e);W&&i?i.style.visibility=n:"string"==typeof e&&w("#"+e,"visibility:"+n)}}function k(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=D?encodeURIComponent(e):e}{var x,j,C,S,T,I,D="undefined",E="object",A="Shockwave Flash",P="ShockwaveFlash.ShockwaveFlash",N="application/x-shockwave-flash",M="SWFObjectExprInst",O="onreadystatechange",L=window,F=document,z=navigator,R=!1,q=[],H=[],Y=[],B=[],W=!1,U=!1,Q=!0,G=!1,J=function(){var e=typeof F.getElementById!=D&&typeof F.getElementsByTagName!=D&&typeof F.createElement!=D,t=z.userAgent.toLowerCase(),n=z.platform.toLowerCase(),i=/win/.test(n?n:t),r=/mac/.test(n?n:t),o=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,a="Microsoft Internet Explorer"===z.appName,s=[0,0,0],c=null;if(typeof z.plugins!=D&&typeof z.plugins[A]==E)c=z.plugins[A].description,c&&typeof z.mimeTypes!=D&&z.mimeTypes[N]&&z.mimeTypes[N].enabledPlugin&&(R=!0,a=!1,c=c.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=_(c.replace(/^(.*)\..*$/,"$1")),s[1]=_(c.replace(/^.*\.(.*)\s.*$/,"$1")),s[2]=/[a-zA-Z]/.test(c)?_(c.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof L.ActiveXObject!=D)try{var l=new ActiveXObject(P);l&&(c=l.GetVariable("$version"),c&&(a=!0,c=c.split(" ")[1].split(","),s=[_(c[0]),_(c[1]),_(c[2])]))}catch(u){}return{w3:e,pv:s,wk:o,ie:a,win:i,mac:r}}();!function(){J.w3&&((typeof F.readyState!=D&&("complete"===F.readyState||"interactive"===F.readyState)||typeof F.readyState==D&&(F.getElementsByTagName("body")[0]||F.body))&&e(),W||(typeof F.addEventListener!=D&&F.addEventListener("DOMContentLoaded",e,!1),J.ie&&(F.attachEvent(O,function t(){"complete"==F.readyState&&(F.detachEvent(O,t),e())}),L==top&&!function n(){if(!W){try{F.documentElement.doScroll("left")}catch(t){return void setTimeout(n,0)}e()}}()),J.wk&&!function i(){return W?void 0:/loaded|complete/.test(F.readyState)?void e():void setTimeout(i,0)}()))}()}q[0]=function(){R?i():r()};!function(){J.ie&&window.attachEvent("onunload",function(){for(var e=B.length,t=0;e>t;t++)B[t][0].detachEvent(B[t][1],B[t][2]);for(var n=Y.length,i=0;n>i;i++)h(Y[i]);for(var r in J)J[r]=null;J=null;for(var o in swfobject)swfobject[o]=null;swfobject=null})}();return{registerObject:function(e,t,n,i){if(J.w3&&e&&t){var r={};r.id=e,r.swfVersion=t,r.expressInstall=n,r.callbackFn=i,H[H.length]=r,$(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){return J.w3?o(e):void 0},embedSWF:function(e,n,i,r,o,c,l,u,f,h){var p=m(n),g={success:!1,id:p};J.w3&&!(J.wk&&J.wk<312)&&e&&n&&i&&r&&o?($(p,!1),t(function(){i+="",r+="";var t={};if(f&&typeof f===E)for(var m in f)t[m]=f[m];t.data=e,t.width=i,t.height=r;var v={};if(u&&typeof u===E)for(var _ in u)v[_]=u[_];if(l&&typeof l===E)for(var y in l)if(l.hasOwnProperty(y)){var w=G?encodeURIComponent(y):y,k=G?encodeURIComponent(l[y]):l[y];typeof v.flashvars!=D?v.flashvars+="&"+w+"="+k:v.flashvars=w+"="+k}if(b(o)){var x=d(t,v,n);t.id==p&&$(p,!0),g.success=!0,g.ref=x,g.id=x.id}else{if(c&&a())return t.data=c,void s(t,v,n,h);$(p,!0)}h&&h(g)})):h&&h(g)},switchOffAutoHideShow:function(){Q=!1},enableUriEncoding:function(e){G=typeof e===D?!0:e},ua:J,getFlashPlayerVersion:function(){return{major:J.pv[0],minor:J.pv[1],release:J.pv[2]}},hasFlashPlayerVersion:b,createSWF:function(e,t,n){return J.w3?d(e,t,n):void 0},showExpressInstall:function(e,t,n,i){J.w3&&a()&&s(e,t,n,i)},removeSWF:function(e){J.w3&&h(e)},createCSS:function(e,t,n,i){J.w3&&w(e,t,n,i)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=F.location.search||F.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return k(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==e)return k(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(U){var e=g(M);e&&x&&(e.parentNode.replaceChild(x,e),j&&($(j,!0),J.ie&&(x.style.display="block")),C&&C(S)),U=!1}},version:"2.3"}}();!function(){function e(){var e={language:navigator.language,mime_types:_.map(navigator.mimeTypes,function(e){return e.type}).join(","),plugins:_.map(navigator.plugins,function(e){return e.name+"|"+e.filename+"|"+e.description}).join("\n"),fonts:n().join(","),screen_resolution:screen.availWidth+"x"+screen.availHeight+"x"+screen.colorDepth,time_zone:(new Date).getTimezoneOffset(),user_agent:navigator.userAgent};return e}function t(){var e="/assets/FontList.swf",t="font-detect-swf",n=function(e){$(document).trigger("fontsDetected",[e])},i={onReady:String(n),swfObjectId:t},r={allowScriptAccess:"always",menu:"false"},o={id:t,name:t},a=document.createElement("div");a.id=t,document.body.appendChild(a),swfobject.embedSWF(e,t,"1","1","9.0.0",!1,i,r,o)}function n(){try{return _.pluck(document.getElementById("font-detect-swf").fonts(),"fontName")}catch(e){return[]}}root.log_device=function(){var n=swfobject.hasFlashPlayerVersion("9.0.0"),i=function(){$.post("/devices",{device:e()})};n?($(document).on("fontsDetected",i),t()):i.call()}}(),function(){$(document).on("click","a.facebook_login, a.facebook-link",function(e){var t=$(this);e.preventDefault(),FB.login(function(e){e.authResponse&&$.post(t.attr("href"),{fbsr:e.authResponse.signedRequest}).done(function(e){url_equals(e.data,window.location.href)?window.location.reload(!0):window.location=e.data})},{scope:"email,user_friends,public_profile"})})}(),function(){root.Honeybadger&&root.honeybadger_configuration&&Honeybadger.configure(honeybadger_configuration)}(),function(e,t){"object"==typeof exports?module.exports=t(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],t):e.URI=t(e.punycode,e.IPv6,e.SecondLevelDomains,e)}(this,function(e,t,n,i){"use strict";function r(e,t){return this instanceof r?(void 0===e&&(e="undefined"!=typeof location?location.href+"":""),this.href(e),void 0!==t?this.absoluteTo(t):this):new r(e,t)}function o(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function a(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function s(e){return"Array"===a(e)}function c(e,t){var n,i,r={};if(s(t))for(n=0,i=t.length;i>n;n++)r[t[n]]=!0;else r[t]=!0;for(n=0,i=e.length;i>n;n++)void 0!==r[e[n]]&&(e.splice(n,1),i--,n--);return e}function l(e,t){var n,i;if(s(t)){for(n=0,i=t.length;i>n;n++)if(!l(e,t[n]))return!1;return!0}var r=a(t);for(n=0,i=e.length;i>n;n++)if("RegExp"===r){if("string"==typeof e[n]&&e[n].match(t))return!0}else if(e[n]===t)return!0;return!1}function u(e,t){if(!s(e)||!s(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var n=0,i=e.length;i>n;n++)if(e[n]!==t[n])return!1;return!0}function d(e){return escape(e)}function f(e){return encodeURIComponent(e).replace(/[!'()*]/g,d).replace(/\*/g,"%2A")}var h=i&&i.URI;r.version="1.12.0";var p=r.prototype,m=Object.prototype.hasOwnProperty;r._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:r.duplicateQueryParameters,escapeQuerySpace:r.escapeQuerySpace}},r.duplicateQueryParameters=!1,r.escapeQuerySpace=!0,r.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,r.idn_expression=/[^a-z0-9\.-]/i,r.punycode_expression=/(xn--)/i,r.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,r.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))/gi,r.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u201e\u2018\u2019]+$/},r.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},r.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,r.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"},r.getDomAttribute=function(e){if(!e||!e.nodeName)return void 0;var t=e.nodeName.toLowerCase();return"input"===t&&"image"!==e.type?void 0:r.domAttributes[t]},r.encode=f,r.decode=decodeURIComponent,r.iso8859=function(){r.encode=escape,r.decode=unescape},r.unicode=function(){r.encode=f,r.decode=decodeURIComponent},r.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},r.encodeQuery=function(e,t){var n=r.encode(e+"");return t?n.replace(/%20/g,"+"):n},r.decodeQuery=function(e,t){e+="";try{return r.decode(t?e.replace(/\+/g,"%20"):e)}catch(n){return e}},r.recodePath=function(e){for(var t=(e+"").split("/"),n=0,i=t.length;i>n;n++)t[n]=r.encodePathSegment(r.decode(t[n]));return t.join("/")},r.decodePath=function(e){for(var t=(e+"").split("/"),n=0,i=t.length;i>n;n++)t[n]=r.decodePathSegment(t[n]);return t.join("/")};var g,v={encode:"encode",decode:"decode"},_=function(e,t){return function(n){return r[t](n+"").replace(r.characters[e][t].expression,function(n){return r.characters[e][t].map[n]})}};for(g in v)r[g+"PathSegment"]=_("pathname",v[g]);r.encodeReserved=_("reserved","encode"),r.parse=function(e,t){var n;return t||(t={}),n=e.indexOf("#"),n>-1&&(t.fragment=e.substring(n+1)||null,e=e.substring(0,n)),n=e.indexOf("?"),n>-1&&(t.query=e.substring(n+1)||null,e=e.substring(0,n)),"//"===e.substring(0,2)?(t.protocol=null,e=e.substring(2),e=r.parseAuthority(e,t)):(n=e.indexOf(":"),n>-1&&(t.protocol=e.substring(0,n)||null,t.protocol&&!t.protocol.match(r.protocol_expression)?t.protocol=void 0:"file"===t.protocol?e=e.substring(n+3):"//"===e.substring(n+1,n+3)?(e=e.substring(n+3),e=r.parseAuthority(e,t)):(e=e.substring(n+1),t.urn=!0))),t.path=e,t},r.parseHost=function(e,t){var n,i,r=e.indexOf("/");return-1===r&&(r=e.length),"["===e.charAt(0)?(n=e.indexOf("]"),t.hostname=e.substring(1,n)||null,t.port=e.substring(n+2,r)||null):e.indexOf(":")!==e.lastIndexOf(":")?(t.hostname=e.substring(0,r)||null,t.port=null):(i=e.substring(0,r).split(":"),t.hostname=i[0]||null,t.port=i[1]||null),t.hostname&&"/"!==e.substring(r).charAt(0)&&(r++,e="/"+e),e.substring(r)||"/"},r.parseAuthority=function(e,t){return e=r.parseUserinfo(e,t),r.parseHost(e,t)},r.parseUserinfo=function(e,t){var n,i=e.indexOf("/"),o=i>-1?e.lastIndexOf("@",i):e.indexOf("@");
return o>-1&&(-1===i||i>o)?(n=e.substring(0,o).split(":"),t.username=n[0]?r.decode(n[0]):null,n.shift(),t.password=n[0]?r.decode(n.join(":")):null,e=e.substring(o+1)):(t.username=null,t.password=null),e},r.parseQuery=function(e,t){if(!e)return{};if(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!e)return{};for(var n,i,o,a={},s=e.split("&"),c=s.length,l=0;c>l;l++)n=s[l].split("="),i=r.decodeQuery(n.shift(),t),o=n.length?r.decodeQuery(n.join("="),t):null,a[i]?("string"==typeof a[i]&&(a[i]=[a[i]]),a[i].push(o)):a[i]=o;return a},r.build=function(e){var t="";return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//"),t+=r.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&"string"==typeof e.hostname&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},r.buildHost=function(e){var t="";return e.hostname?(r.ip6_expression.test(e.hostname)?t+=e.port?"["+e.hostname+"]:"+e.port:e.hostname:(t+=e.hostname,e.port&&(t+=":"+e.port)),t):""},r.buildAuthority=function(e){return r.buildUserinfo(e)+r.buildHost(e)},r.buildUserinfo=function(e){var t="";return e.username&&(t+=r.encode(e.username),e.password&&(t+=":"+r.encode(e.password)),t+="@"),t},r.buildQuery=function(e,t,n){var i,o,a,c,l="";for(o in e)if(m.call(e,o)&&o)if(s(e[o]))for(i={},a=0,c=e[o].length;c>a;a++)void 0!==e[o][a]&&void 0===i[e[o][a]+""]&&(l+="&"+r.buildQueryParameter(o,e[o][a],n),t!==!0&&(i[e[o][a]+""]=!0));else void 0!==e[o]&&(l+="&"+r.buildQueryParameter(o,e[o],n));return l.substring(1)},r.buildQueryParameter=function(e,t,n){return r.encodeQuery(e,n)+(null!==t?"="+r.encodeQuery(t,n):"")},r.addQuery=function(e,t,n){if("object"==typeof t)for(var i in t)m.call(t,i)&&r.addQuery(e,i,t[i]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return void(e[t]=n);"string"==typeof e[t]&&(e[t]=[e[t]]),s(n)||(n=[n]),e[t]=e[t].concat(n)}},r.removeQuery=function(e,t,n){var i,o,a;if(s(t))for(i=0,o=t.length;o>i;i++)e[t[i]]=void 0;else if("object"==typeof t)for(a in t)m.call(t,a)&&r.removeQuery(e,a,t[a]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");void 0!==n?e[t]===n?e[t]=void 0:s(e[t])&&(e[t]=c(e[t],n)):e[t]=void 0}},r.hasQuery=function(e,t,n,i){if("object"==typeof t){for(var o in t)if(m.call(t,o)&&!r.hasQuery(e,o,t[o]))return!1;return!0}if("string"!=typeof t)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(a(n)){case"Undefined":return t in e;case"Boolean":var c=Boolean(s(e[t])?e[t].length:e[t]);return n===c;case"Function":return!!n(e[t],t,e);case"Array":if(!s(e[t]))return!1;var d=i?l:u;return d(e[t],n);case"RegExp":return s(e[t])?i?l(e[t],n):!1:Boolean(e[t]&&e[t].match(n));case"Number":n=String(n);case"String":return s(e[t])?i?l(e[t],n):!1:e[t]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},r.commonPath=function(e,t){var n,i=Math.min(e.length,t.length);for(n=0;i>n;n++)if(e.charAt(n)!==t.charAt(n)){n--;break}return 1>n?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":(("/"!==e.charAt(n)||"/"!==t.charAt(n))&&(n=e.substring(0,n).lastIndexOf("/")),e.substring(0,n+1))},r.withinString=function(e,t,n){n||(n={});var i=n.start||r.findUri.start,o=n.end||r.findUri.end,a=n.trim||r.findUri.trim,s=/[a-z0-9-]=["']?$/i;for(i.lastIndex=0;;){var c=i.exec(e);if(!c)break;var l=c.index;if(n.ignoreHtml){var u=e.slice(Math.max(l-3,0),l);if(u&&s.test(u))continue}var d=l+e.slice(l).search(o),f=e.slice(l,d).replace(a,"");if(!n.ignore||!n.ignore.test(f)){d=l+f.length;var h=t(f,l,d,e);e=e.slice(0,l)+h+e.slice(d),i.lastIndex=l+h.length}}return i.lastIndex=0,e},r.ensureValidHostname=function(t){if(t.match(r.invalid_hostname_characters)){if(!e)throw new TypeError("Hostname '"+t+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(e.toASCII(t).match(r.invalid_hostname_characters))throw new TypeError("Hostname '"+t+"' contains characters other than [A-Z0-9.-]")}},r.noConflict=function(e){if(e){var n={URI:this.noConflict()};return URITemplate&&"function"==typeof URITemplate.noConflict&&(n.URITemplate=URITemplate.noConflict()),t&&"function"==typeof t.noConflict&&(n.IPv6=t.noConflict()),SecondLevelDomains&&"function"==typeof SecondLevelDomains.noConflict&&(n.SecondLevelDomains=SecondLevelDomains.noConflict()),n}return i.URI===this&&(i.URI=h),this},p.build=function(e){return e===!0?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=r.build(this._parts),this._deferred_build=!1),this},p.clone=function(){return new r(this)},p.valueOf=p.toString=function(){return this.build(!1)._string},v={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},_=function(e){return function(t,n){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!n),this)}};for(g in v)p[g]=_(v[g]);v={query:"?",fragment:"#"},_=function(e,t){return function(n,i){return void 0===n?this._parts[e]||"":(null!==n&&(n+="",n.charAt(0)===t&&(n=n.substring(1))),this._parts[e]=n,this.build(!i),this)}};for(g in v)p[g]=_(g,v[g]);v={search:["?","query"],hash:["#","fragment"]},_=function(e,t){return function(n,i){var r=this[e](n,i);return"string"==typeof r&&r.length?t+r:r}};for(g in v)p[g]=_(v[g][1],v[g][0]);p.pathname=function(e,t){if(void 0===e||e===!0){var n=this._parts.path||(this._parts.hostname?"/":"");return e?r.decodePath(n):n}return this._parts.path=e?r.recodePath(e):"/",this.build(!t),this},p.path=p.pathname,p.href=function(e,t){var n;if(void 0===e)return this.toString();this._string="",this._parts=r._parts();var i=e instanceof r,o="object"==typeof e&&(e.hostname||e.path||e.pathname);if(e.nodeName){var a=r.getDomAttribute(e);e=e[a]||"",o=!1}if(!i&&o&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e)this._parts=r.parse(e,this._parts);else{if(!i&&!o)throw new TypeError("invalid input");var s=i?e._parts:e;for(n in s)m.call(this._parts,n)&&(this._parts[n]=s[n])}return this.build(!t),this},p.is=function(e){var t=!1,i=!1,o=!1,a=!1,s=!1,c=!1,l=!1,u=!this._parts.urn;switch(this._parts.hostname&&(u=!1,i=r.ip4_expression.test(this._parts.hostname),o=r.ip6_expression.test(this._parts.hostname),t=i||o,a=!t,s=a&&n&&n.has(this._parts.hostname),c=a&&r.idn_expression.test(this._parts.hostname),l=a&&r.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return u;case"absolute":return!u;case"domain":case"name":return a;case"sld":return s;case"ip":return t;case"ip4":case"ipv4":case"inet4":return i;case"ip6":case"ipv6":case"inet6":return o;case"idn":return c;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return l}return null};var y=p.protocol,b=p.port,w=p.hostname;p.protocol=function(e,t){if(void 0!==e&&e&&(e=e.replace(/:(\/\/)?$/,""),!e.match(r.protocol_expression)))throw new TypeError("Protocol '"+e+"' contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return y.call(this,e,t)},p.scheme=p.protocol,p.port=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e&&(0===e&&(e=null),e&&(e+="",":"===e.charAt(0)&&(e=e.substring(1)),e.match(/[^0-9]/))))throw new TypeError("Port '"+e+"' contains characters other than [0-9]");return b.call(this,e,t)},p.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var n={};r.parseHost(e,n),e=n.hostname}return w.call(this,e,t)},p.host=function(e,t){return this._parts.urn?void 0===e?"":this:void 0===e?this._parts.hostname?r.buildHost(this._parts):"":(r.parseHost(e,this._parts),this.build(!t),this)},p.authority=function(e,t){return this._parts.urn?void 0===e?"":this:void 0===e?this._parts.hostname?r.buildAuthority(this._parts):"":(r.parseAuthority(e,this._parts),this.build(!t),this)},p.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.username)return"";var n=r.buildUserinfo(this._parts);return n.substring(0,n.length-1)}return"@"!==e[e.length-1]&&(e+="@"),r.parseUserinfo(e,this._parts),this.build(!t),this},p.resource=function(e,t){var n;return void 0===e?this.path()+this.search()+this.hash():(n=r.parse(e),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!t),this)},p.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}var i=this._parts.hostname.length-this.domain().length,a=this._parts.hostname.substring(0,i),s=new RegExp("^"+o(a));return e&&"."!==e.charAt(e.length-1)&&(e+="."),e&&r.ensureValidHostname(e),this._parts.hostname=this._parts.hostname.replace(s,e),this.build(!t),this},p.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);if(n&&n.length<2)return this._parts.hostname;var i=this._parts.hostname.length-this.tld(t).length-1;return i=this._parts.hostname.lastIndexOf(".",i-1)+1,this._parts.hostname.substring(i)||""}if(!e)throw new TypeError("cannot set domain empty");if(r.ensureValidHostname(e),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var a=new RegExp(o(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(a,e)}return this.build(!t),this},p.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.lastIndexOf("."),r=this._parts.hostname.substring(i+1);return t!==!0&&n&&n.list[r.toLowerCase()]?n.get(this._parts.hostname)||r:r}var a;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(e))throw new TypeError("TLD '"+e+"' contains characters other than [A-Z0-9]");a=new RegExp(o(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(a,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");a=new RegExp(o(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(a,e)}return this.build(!t),this},p.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var n=this._parts.path.length-this.filename().length-1,i=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return e?r.decodePath(i):i}var a=this._parts.path.length-this.filename().length,s=this._parts.path.substring(0,a),c=new RegExp("^"+o(s));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=r.recodePath(e),this._parts.path=this._parts.path.replace(c,e),this.build(!t),this},p.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),i=this._parts.path.substring(n+1);return e?r.decodePathSegment(i):i}var a=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(a=!0);var s=new RegExp(o(this.filename())+"$");return e=r.recodePath(e),this._parts.path=this._parts.path.replace(s,e),a?this.normalizePath(t):this.build(!t),this},p.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path||"/"===this._parts.path)return"";var n,i,a=this.filename(),s=a.lastIndexOf(".");return-1===s?"":(n=a.substring(s+1),i=/^[a-z0-9%]+$/i.test(n)?n:"",e?r.decodePathSegment(i):i)}"."===e.charAt(0)&&(e=e.substring(1));var c,l=this.suffix();if(l)c=new RegExp(e?o(l)+"$":o("."+l)+"$");else{if(!e)return this;this._parts.path+="."+r.recodePath(e)}return c&&(e=r.recodePath(e),this._parts.path=this._parts.path.replace(c,e)),this.build(!t),this},p.segment=function(e,t,n){var i=this._parts.urn?":":"/",r=this.path(),o="/"===r.substring(0,1),a=r.split(i);if(void 0!==e&&"number"!=typeof e&&(n=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw new Error("Bad segment '"+e+"', must be 0-based integer");if(o&&a.shift(),0>e&&(e=Math.max(a.length+e,0)),void 0===t)return void 0===e?a:a[e];if(null===e||void 0===a[e])if(s(t)){a=[];for(var c=0,l=t.length;l>c;c++)(t[c].length||a.length&&a[a.length-1].length)&&(a.length&&!a[a.length-1].length&&a.pop(),a.push(t[c]))}else(t||"string"==typeof t)&&(""===a[a.length-1]?a[a.length-1]=t:a.push(t));else t||"string"==typeof t&&t.length?a[e]=t:a.splice(e,1);return o&&a.unshift(""),this.path(a.join(i),n)},p.segmentCoded=function(e,t,n){var i,o,a;if("number"!=typeof e&&(n=t,t=e,e=void 0),void 0===t){if(i=this.segment(e,t,n),s(i))for(o=0,a=i.length;a>o;o++)i[o]=r.decode(i[o]);else i=void 0!==i?r.decode(i):void 0;return i}if(s(t))for(o=0,a=t.length;a>o;o++)t[o]=r.decode(t[o]);else t="string"==typeof t?r.encode(t):t;return this.segment(e,t,n)};var $=p.query;return p.query=function(e,t){if(e===!0)return r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof e){var n=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace),i=e.call(this,n);return this._parts.query=r.buildQuery(i||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=r.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):$.call(this,e,t)},p.setQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("object"==typeof e)for(var o in e)m.call(e,o)&&(i[o]=e[o]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");i[e]=void 0!==t?t:null}return this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},p.addQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.addQuery(i,e,void 0===t?null:t),this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},p.removeQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.removeQuery(i,e,t),this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},p.hasQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.hasQuery(i,e,t,n)},p.setSearch=p.setQuery,p.addSearch=p.addQuery,p.removeSearch=p.removeQuery,p.hasSearch=p.hasQuery,p.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},p.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},p.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this},p.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===r.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},p.normalizePath=function(e){if(this._parts.urn)return this;if(!this._parts.path||"/"===this._parts.path)return this;var t,n,i,o=this._parts.path,a="";for("/"!==o.charAt(0)&&(t=!0,o="/"+o),o=o.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(a=o.substring(1).match(/^(\.\.\/)+/)||"",a&&(a=a[0]));;){if(n=o.indexOf("/.."),-1===n)break;0!==n?(i=o.substring(0,n).lastIndexOf("/"),-1===i&&(i=n),o=o.substring(0,i)+o.substring(n+3)):o=o.substring(3)}return t&&this.is("relative")&&(o=a+o.substring(1)),o=r.recodePath(o),this._parts.path=o,this.build(!e),this},p.normalizePathname=p.normalizePath,p.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(r.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},p.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},p.normalizeSearch=p.normalizeQuery,p.normalizeHash=p.normalizeFragment,p.iso8859=function(){var e=r.encode,t=r.decode;return r.encode=escape,r.decode=decodeURIComponent,this.normalize(),r.encode=e,r.decode=t,this},p.unicode=function(){var e=r.encode,t=r.decode;return r.encode=f,r.decode=unescape,this.normalize(),r.encode=e,r.decode=t,this},p.readable=function(){var t=this.clone();t.username("").password("").normalize();var n="";if(t._parts.protocol&&(n+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(n+=e.toUnicode(t._parts.hostname),t._parts.port&&(n+=":"+t._parts.port)):n+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(n+="/"),n+=t.path(!0),t._parts.query){for(var i="",o=0,a=t._parts.query.split("&"),s=a.length;s>o;o++){var c=(a[o]||"").split("=");i+="&"+r.decodeQuery(c[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==c[1]&&(i+="="+r.decodeQuery(c[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+i.substring(1)}return n+=r.decodeQuery(t.hash(),!0)},p.absoluteTo=function(e){var t,n,i,o=this.clone(),a=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof r||(e=new r(e)),o._parts.protocol||(o._parts.protocol=e._parts.protocol),this._parts.hostname)return o;for(n=0;i=a[n];n++)o._parts[i]=e._parts[i];return o._parts.path?".."===o._parts.path.substring(-2)&&(o._parts.path+="/"):(o._parts.path=e._parts.path,o._parts.query||(o._parts.query=e._parts.query)),"/"!==o.path().charAt(0)&&(t=e.directory(),o._parts.path=(t?t+"/":"")+o._parts.path,o.normalizePath()),o.build(),o},p.relativeTo=function(e){var t,n,i,o,a,s=this.clone().normalize();if(s._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new r(e).normalize(),t=s._parts,n=e._parts,o=s.path(),a=e.path(),"/"!==o.charAt(0))throw new Error("URI is already relative");if("/"!==a.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(t.protocol===n.protocol&&(t.protocol=null),t.username!==n.username||t.password!==n.password)return s.build();if(null!==t.protocol||null!==t.username||null!==t.password)return s.build();if(t.hostname!==n.hostname||t.port!==n.port)return s.build();if(t.hostname=null,t.port=null,o===a)return t.path="",s.build();if(i=r.commonPath(s.path(),e.path()),!i)return s.build();var c=n.path.substring(i.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return t.path=c+t.path.substring(i.length),s.build()},p.equals=function(e){var t,n,i,o=this.clone(),a=new r(e),c={},l={},d={};if(o.normalize(),a.normalize(),o.toString()===a.toString())return!0;if(t=o.query(),n=a.query(),o.query(""),a.query(""),o.toString()!==a.toString())return!1;if(t.length!==n.length)return!1;c=r.parseQuery(t,this._parts.escapeQuerySpace),l=r.parseQuery(n,this._parts.escapeQuerySpace);for(i in c)if(m.call(c,i)){if(s(c[i])){if(!u(c[i],l[i]))return!1}else if(c[i]!==l[i])return!1;d[i]=!0}for(i in l)if(m.call(l,i)&&!d[i])return!1;return!0},p.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},p.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},r}),function(e,t){window.mixpanel=t;var n,i,r,o;n=e.createElement("script"),n.type="text/javascript",n.async=!0,n.src=("https:"===e.location.protocol?"https:":"http:")+"//cdn.mxpnl.com/libs/mixpanel-2.2.min.js",i=e.getElementsByTagName("script")[0],i.parentNode.insertBefore(n,i),t._i=[],t.init=function(e,n,i){function a(e,t){var n=t.split(".");2==n.length&&(e=e[n[0]],t=n[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}var s=t;for("undefined"!=typeof i?s=t[i]=[]:i="mixpanel",s.people=s.people||[],r=["disable","track","track_pageview","track_links","track_forms","register","register_once","unregister","identify","alias","name_tag","set_config","people.set","people.set_once","people.increment","people.track_charge","people.append"],o=0;o<r.length;o++)a(s,r[o]);t._i.push([e,n,i])},t.__SV=1.2}(document,window.mixpanel||[]),function(e){e.extend(e.fn,{livequery:function(t,n,i){var r,o=this;return e.isFunction(t)&&(i=n,n=t,t=void 0),e.each(e.livequery.queries,function(e,a){return o.selector!=a.selector||o.context!=a.context||t!=a.type||n&&n.$lqguid!=a.fn.$lqguid||i&&i.$lqguid!=a.fn2.$lqguid?void 0:(r=a)&&!1}),r=r||new e.livequery(this.selector,this.context,t,n,i),r.stopped=!1,r.run(),this},expire:function(t,n,i){var r=this;return e.isFunction(t)&&(i=n,n=t,t=void 0),e.each(e.livequery.queries,function(o,a){r.selector!=a.selector||r.context!=a.context||t&&t!=a.type||n&&n.$lqguid!=a.fn.$lqguid||i&&i.$lqguid!=a.fn2.$lqguid||this.stopped||e.livequery.stop(a.id)}),this}}),e.livequery=function(t,n,i,r,o){return this.selector=t,this.context=n,this.type=i,this.fn=r,this.fn2=o,this.elements=[],this.stopped=!1,this.id=e.livequery.queries.push(this)-1,r.$lqguid=r.$lqguid||e.livequery.guid++,o&&(o.$lqguid=o.$lqguid||e.livequery.guid++),this},e.livequery.prototype={stop:function(){var e=this;this.type?this.elements.unbind(this.type,this.fn):this.fn2&&this.elements.each(function(t,n){e.fn2.apply(n)}),this.elements=[],this.stopped=!0},run:function(){if(!this.stopped){var t=this,n=this.elements,i=e(this.selector,this.context),r=i.not(n);this.elements=i,this.type?(r.bind(this.type,this.fn),n.length>0&&e.each(n,function(n,r){e.inArray(r,i)<0&&e.event.remove(r,t.type,t.fn)})):(r.each(function(){t.fn.apply(this)}),this.fn2&&n.length>0&&e.each(n,function(n,r){e.inArray(r,i)<0&&t.fn2.apply(r)}))}}},e.extend(e.livequery,{guid:0,queries:[],queue:[],running:!1,timeout:null,checkQueue:function(){if(e.livequery.running&&e.livequery.queue.length)for(var t=e.livequery.queue.length;t--;)e.livequery.queries[e.livequery.queue.shift()].run()},pause:function(){e.livequery.running=!1},play:function(){e.livequery.running=!0,e.livequery.run()},registerPlugin:function(){e.each(arguments,function(t,n){if(e.fn[n]){var i=e.fn[n];e.fn[n]=function(){var t=i.apply(this,arguments);return e.livequery.run(),t}}})},run:function(t){void 0!=t?e.inArray(t,e.livequery.queue)<0&&e.livequery.queue.push(t):e.each(e.livequery.queries,function(t){e.inArray(t,e.livequery.queue)<0&&e.livequery.queue.push(t)}),e.livequery.timeout&&clearTimeout(e.livequery.timeout),e.livequery.timeout=setTimeout(e.livequery.checkQueue,20)},stop:function(t){void 0!=t?e.livequery.queries[t].stop():e.each(e.livequery.queries,function(t){e.livequery.queries[t].stop()})}}),e.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html"),e(function(){e.livequery.play()})}(jQuery),function(e){function t(e,t){return function(n){return c(e.call(this,n),t)}}function n(e,t){return function(n){return this.lang().ordinal(e.call(this,n),t)}}function i(){}function r(e){b(e),a(this,e)}function o(e){var t=p(e),n=t.year||0,i=t.month||0,r=t.week||0,o=t.day||0,a=t.hour||0,s=t.minute||0,c=t.second||0,l=t.millisecond||0;this._milliseconds=+l+1e3*c+6e4*s+36e5*a,this._days=+o+7*r,this._months=+i+12*n,this._data={},this._bubble()}function a(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function s(e){return 0>e?Math.ceil(e):Math.floor(e)}function c(e,t,n){for(var i=Math.abs(e)+"",r=e>=0;i.length<t;)i="0"+i;return(r?n?"+":"":"-")+i}function l(e,t,n,i){var r,o,a=t._milliseconds,s=t._days,c=t._months;a&&e._d.setTime(+e._d+a*n),(s||c)&&(r=e.minute(),o=e.hour()),s&&e.date(e.date()+s*n),c&&e.month(e.month()+c*n),a&&!i&&nt.updateOffset(e),(s||c)&&(e.minute(r),e.hour(o))}function u(e){return"[object Array]"===Object.prototype.toString.call(e)}function d(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function f(e,t,n){var i,r=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(i=0;r>i;i++)(n&&e[i]!==t[i]||!n&&g(e[i])!==g(t[i]))&&a++;return a+o}function h(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=Ht[e]||Yt[t]||t}return e}function p(e){var t,n,i={};for(n in e)e.hasOwnProperty(n)&&(t=h(n),t&&(i[t]=e[n]));return i}function m(t){var n,i;if(0===t.indexOf("week"))n=7,i="day";else{if(0!==t.indexOf("month"))return;n=12,i="month"}nt[t]=function(r,o){var a,s,c=nt.fn._lang[t],l=[];if("number"==typeof r&&(o=r,r=e),s=function(e){var t=nt().utc().set(i,e);return c.call(nt.fn._lang,t,r||"")},null!=o)return s(o);for(a=0;n>a;a++)l.push(s(a));return l}}function g(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function v(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function _(e){return y(e)?366:365}function y(e){return e%4===0&&e%100!==0||e%400===0}function b(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[ct]<0||e._a[ct]>11?ct:e._a[lt]<1||e._a[lt]>v(e._a[st],e._a[ct])?lt:e._a[ut]<0||e._a[ut]>23?ut:e._a[dt]<0||e._a[dt]>59?dt:e._a[ft]<0||e._a[ft]>59?ft:e._a[ht]<0||e._a[ht]>999?ht:-1,e._pf._overflowDayOfYear&&(st>t||t>lt)&&(t=lt),e._pf.overflow=t)}function w(e){e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function $(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function k(e){return e?e.toLowerCase().replace("_","-"):e}function x(e,t){return t._isUTC?nt(e).zone(t._offset||0):nt(e).local()}function j(e,t){return t.abbr=e,pt[e]||(pt[e]=new i),pt[e].set(t),pt[e]}function C(e){delete pt[e]}function S(e){var t,n,i,r,o=0,a=function(e){if(!pt[e]&&mt)try{require("./lang/"+e)}catch(t){}return pt[e]};if(!e)return nt.fn._lang;if(!u(e)){if(n=a(e))return n;e=[e]}for(;o<e.length;){for(r=k(e[o]).split("-"),t=r.length,i=k(e[o+1]),i=i?i.split("-"):null;t>0;){if(n=a(r.slice(0,t).join("-")))return n;if(i&&i.length>=t&&f(r,i,!0)>=t-1)break;t--}o++}return nt.fn._lang}function T(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function I(e){var t,n,i=e.match(yt);for(t=0,n=i.length;n>t;t++)i[t]=Qt[i[t]]?Qt[i[t]]:T(i[t]);return function(r){var o="";for(t=0;n>t;t++)o+=i[t]instanceof Function?i[t].call(r,e):i[t];return o}}function D(e,t){return e.isValid()?(t=E(t,e.lang()),Bt[t]||(Bt[t]=I(t)),Bt[t](e)):e.lang().invalidDate()}function E(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(bt.lastIndex=0;i>=0&&bt.test(e);)e=e.replace(bt,n),bt.lastIndex=0,i-=1;return e}function A(e,t){var n,i=t._strict;switch(e){case"DDDD":return At;case"YYYY":case"GGGG":case"gggg":return i?Pt:kt;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?Nt:xt;case"S":if(i)return Dt;case"SS":if(i)return Et;case"SSS":case"DDD":return i?At:$t;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ct;case"a":case"A":return S(t._l)._meridiemParse;case"X":return It;case"Z":case"ZZ":return St;case"T":return Tt;case"SSSS":return jt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?Et:wt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return i?Dt:wt;default:return n=new RegExp(R(z(e.replace("\\","")),"i"))}}function P(e){e=e||"";var t=e.match(St)||[],n=t[t.length-1]||[],i=(n+"").match(zt)||["-",0,0],r=+(60*i[1])+g(i[2]);return"+"===i[0]?-r:r}function N(e,t,n){var i,r=n._a;switch(e){case"M":case"MM":null!=t&&(r[ct]=g(t)-1);break;case"MMM":case"MMMM":i=S(n._l).monthsParse(t),null!=i?r[ct]=i:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(r[lt]=g(t));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=g(t));break;case"YY":r[st]=g(t)+(g(t)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":r[st]=g(t);break;case"a":case"A":n._isPm=S(n._l).isPM(t);break;case"H":case"HH":case"h":case"hh":r[ut]=g(t);break;case"m":case"mm":r[dt]=g(t);break;case"s":case"ss":r[ft]=g(t);break;case"S":case"SS":case"SSS":case"SSSS":r[ht]=g(1e3*("0."+t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=P(t);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":e=e.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=t)}}function M(e){var t,n,i,r,o,a,s,c,l,u,d=[];if(!e._d){for(i=L(e),e._w&&null==e._a[lt]&&null==e._a[ct]&&(o=function(t){var n=parseInt(t,10);return t?t.length<3?n>68?1900+n:2e3+n:n:null==e._a[st]?nt().weekYear():e._a[st]},a=e._w,null!=a.GG||null!=a.W||null!=a.E?s=V(o(a.GG),a.W||1,a.E,4,1):(c=S(e._l),l=null!=a.d?U(a.d,c):null!=a.e?parseInt(a.e,10)+c._week.dow:0,u=parseInt(a.w,10)||1,null!=a.d&&l<c._week.dow&&u++,s=V(o(a.gg),u,l,c._week.doy,c._week.dow)),e._a[st]=s.year,e._dayOfYear=s.dayOfYear),e._dayOfYear&&(r=null==e._a[st]?i[st]:e._a[st],e._dayOfYear>_(r)&&(e._pf._overflowDayOfYear=!0),n=W(r,0,e._dayOfYear),e._a[ct]=n.getUTCMonth(),e._a[lt]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=d[t]=i[t];for(;7>t;t++)e._a[t]=d[t]=null==e._a[t]?2===t?1:0:e._a[t];d[ut]+=g((e._tzm||0)/60),d[dt]+=g((e._tzm||0)%60),e._d=(e._useUTC?W:B).apply(null,d)}}function O(e){var t;e._d||(t=p(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],M(e))}function L(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function F(e){e._a=[],e._pf.empty=!0;var t,n,i,r,o,a=S(e._l),s=""+e._i,c=s.length,l=0;for(i=E(e._f,a).match(yt)||[],t=0;t<i.length;t++)r=i[t],n=(s.match(A(r,e))||[])[0],n&&(o=s.substr(0,s.indexOf(n)),o.length>0&&e._pf.unusedInput.push(o),s=s.slice(s.indexOf(n)+n.length),l+=n.length),Qt[r]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(r),N(r,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(r);e._pf.charsLeftOver=c-l,s.length>0&&e._pf.unusedInput.push(s),e._isPm&&e._a[ut]<12&&(e._a[ut]+=12),e._isPm===!1&&12===e._a[ut]&&(e._a[ut]=0),M(e),b(e)}function z(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r})}function R(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function q(e){var t,n,i,r,o;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(r=0;r<e._f.length;r++)o=0,t=a({},e),w(t),t._f=e._f[r],F(t),$(t)&&(o+=t._pf.charsLeftOver,o+=10*t._pf.unusedTokens.length,t._pf.score=o,(null==i||i>o)&&(i=o,n=t));a(e,n||t)}function H(e){var t,n=e._i,i=Mt.exec(n);if(i){for(e._pf.iso=!0,t=4;t>0;t--)if(i[t]){e._f=Lt[t-1]+(i[6]||" ");break}for(t=0;4>t;t++)if(Ft[t][1].exec(n)){e._f+=Ft[t][0];break}n.match(St)&&(e._f+="Z"),F(e)}else e._d=new Date(n)}function Y(t){var n=t._i,i=gt.exec(n);n===e?t._d=new Date:i?t._d=new Date(+i[1]):"string"==typeof n?H(t):u(n)?(t._a=n.slice(0),M(t)):d(n)?t._d=new Date(+n):"object"==typeof n?O(t):t._d=new Date(n)}function B(e,t,n,i,r,o,a){var s=new Date(e,t,n,i,r,o,a);return 1970>e&&s.setFullYear(e),s}function W(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function U(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function Q(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function G(e,t,n){var i=at(Math.abs(e)/1e3),r=at(i/60),o=at(r/60),a=at(o/24),s=at(a/365),c=45>i&&["s",i]||1===r&&["m"]||45>r&&["mm",r]||1===o&&["h"]||22>o&&["hh",o]||1===a&&["d"]||25>=a&&["dd",a]||45>=a&&["M"]||345>a&&["MM",at(a/30)]||1===s&&["y"]||["yy",s];return c[2]=t,c[3]=e>0,c[4]=n,Q.apply({},c)}function J(e,t,n){var i,r=n-t,o=n-e.day();return o>r&&(o-=7),r-7>o&&(o+=7),i=nt(e).add("d",o),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function V(e,t,n,i,r){var o,a,s=new Date(c(e,6,!0)+"-01-01").getUTCDay();return n=null!=n?n:r,o=r-s+(s>i?7:0),a=7*(t-1)+(n-r)+o+1,{year:a>0?e:e-1,dayOfYear:a>0?a:_(e-1)+a}}function K(e){var t=e._i,n=e._f;return"undefined"==typeof e._pf&&w(e),null===t?nt.invalid({nullInput:!0}):("string"==typeof t&&(e._i=t=S().preparse(t)),nt.isMoment(t)?(e=a({},t),e._d=new Date(+t._d)):n?u(n)?q(e):F(e):Y(e),new r(e))
}function X(e,t){nt.fn[e]=nt.fn[e+"s"]=function(e){var n=this._isUTC?"UTC":"";return null!=e?(this._d["set"+n+t](e),nt.updateOffset(this),this):this._d["get"+n+t]()}}function Z(e){nt.duration.fn[e]=function(){return this._data[e]}}function et(e,t){nt.duration.fn["as"+e]=function(){return+this/t}}function tt(e){var t=!1,n=nt;"undefined"==typeof ender&&(e?(ot.moment=function(){return!t&&console&&console.warn&&(t=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),n.apply(null,arguments)},a(ot.moment,n)):ot.moment=nt)}for(var nt,it,rt="2.5.0",ot=this,at=Math.round,st=0,ct=1,lt=2,ut=3,dt=4,ft=5,ht=6,pt={},mt="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,gt=/^\/?Date\((\-?\d+)/i,vt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,_t=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,yt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,bt=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,wt=/\d\d?/,$t=/\d{1,3}/,kt=/\d{1,4}/,xt=/[+\-]?\d{1,6}/,jt=/\d+/,Ct=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,St=/Z|[\+\-]\d\d:?\d\d/gi,Tt=/T/i,It=/[\+\-]?\d+(\.\d{1,3})?/,Dt=/\d/,Et=/\d\d/,At=/\d{3}/,Pt=/\d{4}/,Nt=/[+\-]?\d{6}/,Mt=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ot="YYYY-MM-DDTHH:mm:ssZ",Lt=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],Ft=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],zt=/([\+\-]|\d\d)/gi,Rt="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),qt={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Ht={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Yt={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Bt={},Wt="DDD w W M D d".split(" "),Ut="M D H h m s w W".split(" "),Qt={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return c(this.year()%100,2)},YYYY:function(){return c(this.year(),4)},YYYYY:function(){return c(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+c(Math.abs(e),6)},gg:function(){return c(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return c(this.weekYear(),5)},GG:function(){return c(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return c(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return g(this.milliseconds()/100)},SS:function(){return c(g(this.milliseconds()/10),2)},SSS:function(){return c(this.milliseconds(),3)},SSSS:function(){return c(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+c(g(e/60),2)+":"+c(g(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+c(g(e/60),2)+c(g(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Gt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Wt.length;)it=Wt.pop(),Qt[it+"o"]=n(Qt[it],it);for(;Ut.length;)it=Ut.pop(),Qt[it+it]=t(Qt[it],2);for(Qt.DDDD=t(Qt.DDD,3),a(i.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,i;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(n=nt.utc([2e3,t]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=new RegExp(i.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=nt([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(e,t,n,i):r.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return J(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),nt=function(t,n,i,r){return"boolean"==typeof i&&(r=i,i=e),K({_i:t,_f:n,_l:i,_strict:r,_isUTC:!1})},nt.utc=function(t,n,i,r){var o;return"boolean"==typeof i&&(r=i,i=e),o=K({_useUTC:!0,_isUTC:!0,_l:i,_i:t,_f:n,_strict:r}).utc()},nt.unix=function(e){return nt(1e3*e)},nt.duration=function(e,t){var n,i,r,a=e,s=null;return nt.isDuration(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(a={},t?a[t]=e:a.milliseconds=e):(s=vt.exec(e))?(n="-"===s[1]?-1:1,a={y:0,d:g(s[lt])*n,h:g(s[ut])*n,m:g(s[dt])*n,s:g(s[ft])*n,ms:g(s[ht])*n}):(s=_t.exec(e))&&(n="-"===s[1]?-1:1,r=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n},a={y:r(s[2]),M:r(s[3]),d:r(s[4]),h:r(s[5]),m:r(s[6]),s:r(s[7]),w:r(s[8])}),i=new o(a),nt.isDuration(e)&&e.hasOwnProperty("_lang")&&(i._lang=e._lang),i},nt.version=rt,nt.defaultFormat=Ot,nt.updateOffset=function(){},nt.lang=function(e,t){var n;return e?(t?j(k(e),t):null===t?(C(e),e="en"):pt[e]||S(e),n=nt.duration.fn._lang=nt.fn._lang=S(e),n._abbr):nt.fn._lang._abbr},nt.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),S(e)},nt.isMoment=function(e){return e instanceof r},nt.isDuration=function(e){return e instanceof o},it=Gt.length-1;it>=0;--it)m(Gt[it]);for(nt.normalizeUnits=function(e){return h(e)},nt.invalid=function(e){var t=nt.utc(0/0);return null!=e?a(t._pf,e):t._pf.userInvalidated=!0,t},nt.parseZone=function(e){return nt(e).parseZone()},a(nt.fn=r.prototype,{clone:function(){return nt(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=nt(this).utc();return 0<e.year()&&e.year()<=9999?D(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):D(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return $(this)},isDSTShifted:function(){return this._a?this.isValid()&&f(this._a,(this._isUTC?nt.utc(this._a):nt(this._a)).toArray())>0:!1},parsingFlags:function(){return a({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var t=D(this,e||nt.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var n;return n="string"==typeof e?nt.duration(+t,e):nt.duration(e,t),l(this,n,1),this},subtract:function(e,t){var n;return n="string"==typeof e?nt.duration(+t,e):nt.duration(e,t),l(this,n,-1),this},diff:function(e,t,n){var i,r,o=x(e,this),a=6e4*(this.zone()-o.zone());return t=h(t),"year"===t||"month"===t?(i=432e5*(this.daysInMonth()+o.daysInMonth()),r=12*(this.year()-o.year())+(this.month()-o.month()),r+=(this-nt(this).startOf("month")-(o-nt(o).startOf("month")))/i,r-=6e4*(this.zone()-nt(this).startOf("month").zone()-(o.zone()-nt(o).startOf("month").zone()))/i,"year"===t&&(r/=12)):(i=this-o,r="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-a)/864e5:"week"===t?(i-a)/6048e5:i),n?r:s(r)},from:function(e,t){return nt.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(nt(),e)},calendar:function(){var e=x(nt(),this).startOf("day"),t=this.diff(e,"days",!0),n=-6>t?"sameElse":-1>t?"lastWeek":0>t?"lastDay":1>t?"sameDay":2>t?"nextDay":7>t?"nextWeek":"sameElse";return this.format(this.lang().calendar(n,this))},isLeapYear:function(){return y(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=U(e,this.lang()),this.add({d:e-t})):t},month:function(e){var t,n=this._isUTC?"UTC":"";return null!=e?"string"==typeof e&&(e=this.lang().monthsParse(e),"number"!=typeof e)?this:(t=this.date(),this.date(1),this._d["set"+n+"Month"](e),this.date(Math.min(t,this.daysInMonth())),nt.updateOffset(this),this):this._d["get"+n+"Month"]()},startOf:function(e){switch(e=h(e)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),this},endOf:function(e){return e=h(e),this.startOf(e).add("isoWeek"===e?"week":e,1).subtract("ms",1)},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+nt(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+nt(e).startOf(t)},isSame:function(e,t){return t=t||"ms",+this.clone().startOf(t)===+x(e,this).startOf(t)},min:function(e){return e=nt.apply(null,arguments),this>e?this:e},max:function(e){return e=nt.apply(null,arguments),e>this?this:e},zone:function(e){var t=this._offset||0;return null==e?this._isUTC?t:this._d.getTimezoneOffset():("string"==typeof e&&(e=P(e)),Math.abs(e)<16&&(e=60*e),this._offset=e,this._isUTC=!0,t!==e&&l(this,nt.duration(t-e,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?nt(e).zone():0,(this.zone()-e)%60===0},daysInMonth:function(){return v(this.year(),this.month())},dayOfYear:function(e){var t=at((nt(this).startOf("day")-nt(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(e){var t=J(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},isoWeekYear:function(e){var t=J(this,1,4).year;return null==e?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},isoWeek:function(e){var t=J(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},weekday:function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},get:function(e){return e=h(e),this[e]()},set:function(e,t){return e=h(e),"function"==typeof this[e]&&this[e](t),this},lang:function(t){return t===e?this._lang:(this._lang=S(t),this)}}),it=0;it<Rt.length;it++)X(Rt[it].toLowerCase().replace(/s$/,""),Rt[it]);X("year","FullYear"),nt.fn.days=nt.fn.day,nt.fn.months=nt.fn.month,nt.fn.weeks=nt.fn.week,nt.fn.isoWeeks=nt.fn.isoWeek,nt.fn.toJSON=nt.fn.toISOString,a(nt.duration.fn=o.prototype,{_bubble:function(){var e,t,n,i,r=this._milliseconds,o=this._days,a=this._months,c=this._data;c.milliseconds=r%1e3,e=s(r/1e3),c.seconds=e%60,t=s(e/60),c.minutes=t%60,n=s(t/60),c.hours=n%24,o+=s(n/24),c.days=o%30,a+=s(o/30),c.months=a%12,i=s(a/12),c.years=i},weeks:function(){return s(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*g(this._months/12)},humanize:function(e){var t=+this,n=G(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},add:function(e,t){var n=nt.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=nt.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=h(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=h(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:nt.fn.lang,toIsoString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),r=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||r||o?"T":"")+(i?i+"H":"")+(r?r+"M":"")+(o?o+"S":""):"P0D"}});for(it in qt)qt.hasOwnProperty(it)&&(et(it,qt[it]),Z(it.toLowerCase()));et("Weeks",6048e5),nt.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},nt.lang("en",{ordinal:function(e){var t=e%10,n=1===g(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),mt?(module.exports=nt,tt(!0)):"function"==typeof define&&define.amd?define("moment",function(t,n,i){return i.config&&i.config()&&i.config().noGlobal!==!0&&tt(i.config().noGlobal===e),nt}):tt()}.call(this),function(){function e(){var e=/\(([a-z]{3,4})\)/i,t=(new Date).toString(),n=t.match(e);return n?n[1].toUpperCase():void 0}function t(){var e=moment(),t=e.format("Z"),i=e.isDST()?"T":"F";return n[t+i]}var n={"+02:00T":"CEST","+01:00F":"CET","+01:00T":"BST","-00:00F":"GMT","-03:00T":"ADT","-04:00F":"AST","-04:00T":"EDT","-05:00F":"EST","-05:00T":"CDT","-06:00F":"CST","-06:00T":"MDT","-07:00F":"MST","-07:00T":"PDT","-08:00F":"PST","-08:00T":"AKDT","-09:00F":"AKST","-09:00T":"HADT","-10:00F":"HAST","+11:00T":"AEDT","+10:00F":"AEST","+10:30T":"ACDT","+09:30F":"ACST","+09:00T":"AWDT","+08:00F":"AWST"};moment.fn.zoneAbbr=function(){return e()||t()||this.format("Z")}}(),moment.lang("en",{longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",ll:"MMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"}}),$(".js-adjust-time").livequery(function(){var e=$(this),t=moment(e.attr("datetime"));e.text(t.format(e.data("format"))),e.removeClass("invisible-if-js")}),instrument_function(function(e){!function(){function t(e){var t,n=document.cookie.split(/; */);for(e+="=",t=0;t<n.length;t+=1)if(0===n[t].indexOf(e))return decodeURIComponent(n[t].substr(e.length));return null}function n(e,t,n,i){var r=e+"="+encodeURIComponent(t),o="";i=i||"/","number"==typeof n&&(n=new Date(n)),n&&(o+="; expires="+n.toGMTString()),o+="; path="+i,document.cookie=r+o}function i(e,t){n(e,null,0,t)}e.read_cookie=t,e.destroy_cookie=i,e.write_cookie=n}()})(this),instrument_function(function(){$.parseEscapedJSON=function(e){return e=e.replace(/[\u2028\u2029]/g," ").replace(/&#39;/g,"'"),$.parseJSON(_.unescape(e))}})(this),function(){function e(){}e.extend=function(e){function t(){this.constructor=n}var n=function(){this.initialize.apply(this,arguments)};for(var i in this)this.hasOwnProperty(i)&&(n[i]=_.isFunction(this[i])?this[i]:_.clone(this[i]));return t.prototype=this.prototype,n.prototype=new t,n.__super__=this.prototype,e&&(n.prototype.initialize=e),n},e.prototype.initialize=function(){},window.Class=e}(),function(){var e=Class.extend(function(e){var t=this,n=arguments;this.data={},e&&this.set(e),_.each(this.constructor.initializers,function(e){e.apply(t,n)}),this.data.id&&(this.constructor.records[this.data.id]=this),this.constructor._broadcast({"new":this.data})});e._computed_values={},_.extend(e,{listen:function(e,t){var n=this;return _.isObject(e)&&_.each(e,function(e,t){n.listen(t,e)}),"undefined"==typeof this.listeners&&(this.listeners={}),"undefined"==typeof this.listeners._global&&(this.listeners._global=[]),"function"==typeof e?void this.listeners._global.push(e):("undefined"==typeof this.listeners[e]&&(this.listeners[e]=[]),this.listeners[e].push(t),this)},_broadcast:function(e,t,n){"undefined"==typeof this.listeners&&(this.listeners={}),"undefined"==typeof this.listeners._global&&(this.listeners._global=[]);var i,r=this;if(t=t||"",_.each(_.keys(e),function(i){"object"!=typeof e[i]||null===e[i]||_.isArray(e[i])||r._broadcast(e[i],t+i+".",n),"undefined"!=typeof r.listeners[t+i]&&_.each(r.listeners[t+i],function(t){t.call(r,e,n)})}),!t)for(i=0;i<this.listeners._global.length;i+=1)this.listeners._global[i].call(this,e,n)},on_initialize:function(e){"undefined"==typeof this.initializers&&(this.initializers=[]),this.initializers.push(e)},get_computed_values:function(){return this._computed_values},set_computed_value:function(e,t,n){var i=this;this._computed_values[e]=t,n&&_.isArray(n.changes_on)&&_.each(n.changes_on,function(t){i.prototype.on_change(t,function(){var t={};t[e]=this.get(e),this._broadcast(t)})})}}),e.prototype.on_change=e.prototype.listen=e.listen,e.prototype.change=function(){this._broadcast({})},e.prototype._broadcast=e._broadcast,e.prototype.set=function(e,t,n){function i(e,t){var n={};for(var r in t)t.hasOwnProperty(r)&&("object"==typeof t[r]&&null!==t[r]?n[r]=e?i(e[r],t[r]):t[r]:e&&e[r]===t[r]||(n[r]=t[r]));return n}function r(e,t){var n={},i=e.shift();return n[i]=e.length?r(e,t):t,n}var o,a;return"object"==typeof e?(o=e,n=t):o="string"==typeof e?r(e.split("."),t):{},n||(n={}),a=i(this.data,o),this.data=n.overwrite?_.extend(this.data,o):jQuery.extend(!0,this.data,o),"undefined"!=typeof n.silent&&n.silent||this._broadcast(a,void 0,n),this},e.prototype.replace=function(e,t,n){return n=n||{},n.silent=!0,this.set(e,null,n),delete n.silent,this.set(e,t,n)},e.prototype.get=function(e){if("string"==typeof e){if("function"==typeof this.constructor.get_computed_values()[e])return this.constructor.get_computed_values()[e].call(this.data);var t=e.split("."),n=this.data;return _.each(t,function(e){n=n[e]}),_.clone(n)}return jQuery.extend(!0,{},this.data,this.compute_values())},e.prototype.compute_values=function(){var e=this.data,t={};return _.each(this.constructor.get_computed_values(),function(n,i){t[i]=n.call(e)}),t},window.Model=e}(),instrument_function(function(e){!function(){function t(e,t){var n,i;return n=_(e).map(function(e,n){var r=!1;return n.match(/^\!/)&&(r=!0,n=n.replace(/^\!/,"")),_.isArray(e)||(e=[e]),e=_(e).map(function(e){return e+""}),i=_(e).include(t[n]+""),r?!i:i}),_(n).inject(function(e,t){return e||t},n[0])}function n(e,n){if(_.isArray(e)){var i=_(e).map(function(e){return t(e,n)});return _(i).inject(function(e,t){return e&&t},i[0])}}function i(t,i){var o,a,s="",c=$(t),l=c.data("conditions"),u=c.attr("itemprop");"undefined"!=typeof u?s=u.match(/\[(\w*)\]/)[1]:c.data("attr")&&(s=c.data("attr")),"undefined"!=typeof l?("string"==typeof l&&(l=JSON.parse(l)),a=n(l,i),o=a?JSON.parse(c.data("render")):"",c.data("evaluation")!==a&&(c.html(o),c.data("evaluation",a),o.length&&r(c,"Project",i))):"undefined"!=typeof s&&"undefined"!=typeof i[s]&&(c.data("value",i[s]),c.attr("data-value",i[s]),e.refresh_node(c))}function r(e,t,n){$(e).find("."+t+n.id).each(function(e,t){i(t,n)})}function o(e){this.template=e,this.conditions=[]}function a(e){var t;return"string"==typeof e&&(t={},t[e]=!0,e=t),e}var s,c={};e.Schwamm=c,s={money:function(e){"undefined"==typeof e.precision&&(e.precision=0);var t=formatters.currency_symbol_mappings[e.currency],n=t+this.number(e);return!e.without_code&&formatters.currency_trailing_code_mappings[e.currency]&&(n+=" "+e.currency),n},shorter_money:function(e){return e.value<100?e.precision=2:(e.precision=0,e.value=Math.floor(e.value)),this.money(e)},number:function(e){var t=e.precision||0;return formatters.format_number(e.value,t)},pluralize:function(e){return formatters.pluralize(e.word,e.value)},percent:function(e){return e.value=parseFloat(e.value)/parseFloat(e.of)*100,this.number(e)+"%"},time_ago_in_words:function(e){if(!e.value)return"?";("number"==typeof e.value||"string"==typeof e.value&&e.value.match(/^\d+$/))&&(e.value=parseInt(1e3*e.value,10));var t,n,i,r=moment(e.value),o=Math.floor(moment().diff(r)/1e3);return $.each(formatters.distance_date_intervals,function(e,n){return t=n,t.min>o?!1:void 0}),n={m:Math.round(o/60),h:Math.round(o/3600),d:Math.round(o/86400),t:r.format("MMMM D"),y:r.format("LL")},i=I18n.t(t.i18n_key,{count:n[t.count_key]}),i.match(/NaN|undefined/)?"":i},distance_date:function(e){return this.time_ago_in_words(e)}},e.refresh_node=function(e){var t,n=e.data("format");n=e.data("format"),t=n&&"function"==typeof s[n]?s[n](e.data()):e.data("value"),e.html(t)},e.update_record=function(e,t){var n=["state","ended","is_starred"],i=$("."+e+t.id+"_cxt");i.each(function(r,o){_.each(n,function(n){var r,a,s;r=new RegExp(e+"-"+n+"\\S+\\s?","g"),a=$(o).attr("class").match(r).join(" "),s=e+"-"+n+"-"+t[n],i.removeClass(a),i.addClass(s)})}),r(document,e,t)},c.FormattingHelpers=s,c.presenter=function(e,t,n){var i=new Schnurrbart(e,t),r={},o={};if($.isArray(n))$.each(n,function(e,t){r[t]=t});else{if("object"!=typeof n)return;r=n}return $.each(r,function(e,t){var n;$.isArray(t)||(t=[t]),n=i.hasOwnProperty(e)?e:"tag",o[e]=i[n].apply(i,t)}),o},Schnurrbart=function(e,t){this.model_name=e,this.proxy=t,this.class_name=e+this.proxy.id,this.constructor.schnurrbarts[this.class_name]=this},"undefined"!=typeof exports&&(exports.Schnurrbart=Schnurrbart),Schnurrbart.schnurrbarts={},Schnurrbart.prototype.tag=function(e,t){t||(t={});var n;return t.format?this.format(e,t):(n=this.proxy[e],this.render_tag(e,n,t))},Schnurrbart.prototype.pluralize=function(e,t){return this.format_on(t,{format:"pluralize",word:e})},Schnurrbart.prototype.format_on=function(e,t){return t||(t={}),t.attr=e,this.format(null,t)},Schnurrbart.prototype.format=function(e,t){var n,i=e||t.attr;return i&&(t=$.extend({value:this.proxy[i]},t)),$.inArray(t.format,formatters.currency_formats)>=0&&(t.currency=this.proxy.currency),n=this.formatting_helper(t),this.render_tag(e,n,t)},Schnurrbart.prototype.render_tag=function(e,t,n,i){n||(n={});var r,o=this.base_html_options(e,n);return r=$("<data>"),r.attr(o),r.html(t),i?r:r[0].outerHTML},Schnurrbart.prototype.base_html_options=function(e,t){t||(t={});var n={"class":this.class_name};return $.extend(n,this.data_attributes(t)),e&&(n.itemprop=this.itemprop(e)),n},Schnurrbart.prototype.itemprop=function(e){return this.model_name+"["+e+"]"},Schnurrbart.prototype.data_attributes=function(e){e||(e={});var t={};return $.each(e,function(e,n){t["data-"+e]=n}),t},Schnurrbart.prototype.formatting_helper=function(e){return c.FormattingHelpers[e.format](e)},Schnurrbart.prototype["if"]=function(e){var t=new o(this);return t["if"](e)},Schnurrbart.prototype.if_not=function(e){var t=new o(this);return t.if_not(e)},Schnurrbart.context_methods={Project:{state:["live","started","submitted","canceled","suspended","successful","failed","purged"],is_starred:[!0],ended:[!0]}},Schnurrbart.prototype.context_classes=function(){var e=this.constructor.context_methods[this.model_name],t=[],n=this;return t.push(this.class_name+"_cxt"),_.each(e,function(e,i){t.push(n.model_name+"-"+i.replace(/\W/g,"")+"-"+n.proxy[i])}),t.join(" ")},o.prototype["if"]=function(e){return this.condition("and",!0,e),this},o.prototype.and=o.prototype["if"],o.prototype.if_not=function(e){return this.condition("and",!1,e),this},o.prototype.unless=o.prototype.if_not,o.prototype.and_not=o.prototype.if_not,o.prototype.or=function(e){return this.condition("or",!0,e),this},o.prototype.or_not=function(e){return this.condition("or",!1,e),this},o.prototype.then=function(){var e=this;return function(){return function(t,n){return e.value=n(t),e.html()}}},o.prototype.condition=function(e,t,n){var i;_.isObject(n)||(i={},i[n]=!0,n=i),t===!1&&_.each(_(n).keys(),function(e){n["!"+e]=n[e],delete n[e]});var r;return"or"===e?(r=a(this.conditions[this.conditions.length-1]),n=a(n),this.conditions[this.conditions.length-1]=$.extend(!0,r,n)):"and"===e&&this.conditions.push(n),this},o.prototype.evaluation=function(){return"undefined"==typeof this.cached_evaluation&&(this.cached_evaluation=n(this.conditions,this.template.proxy)),this.cached_evaluation},o.prototype.content=function(){return this.evaluation()?this.value:""},o.prototype.html=function(){var e=$("<data>");return e.attr(this.html_options()),e.html(this.content()),e[0].outerHTML},o.prototype.html_options=function(){return{"class":this.template.class_name,"data-conditions":JSON.stringify(this.conditions),"data-render":JSON.stringify(this.value),"data-evaluation":n}}}()})(this),ApplicationModel=Model.extend(),ApplicationModel.on_initialize(function(){this.data.id&&(this.constructor.records[this.data.id]=this)}),_.extend(ApplicationModel,{records:{},find:function(e){var t=this;return _.isArray(e)?_.compact(_.map(e,function(e){return t.records[e]})):this.records[e]},every:function(e){_.each(this.records,e),this.listen("new",function(t){e.call(this,t["new"])})},has:function(e,t){function n(e){return"object"!=typeof e?e=[e]:e.get&&(e=[e.get("id")]),e}if("undefined"==typeof this.prototype["has_"+e]){var i=t.through;this.prototype[e]=[],this.on_initialize(function(){this.on_change(e+"_fetched",function(t){var n=t[e+"_fetched"]||[],r=this[e],o=_.compact(_.map(n,function(e){if(e&&e.id&&!_.include(r,e.id)){var t=new root[i](e);return t.get("id")}}));this["set_"+e](_.union(r,o))})}),this.prototype["get_"+e]=function(){return root[i].find(this[e])},this.prototype["has_"+e]=function(t){return t=n(t),t.length&&0===_(this[e]).difference(t).length},this.prototype["add_"+e]=function(t){t=n(t),t=_(t).difference(this[e]),t.length&&this["set_"+e](_.union(this[e],t))},this.prototype["remove_"+e]=function(t){t=n(t),t=_(t).intersection(this[e]),t.length&&this["set_"+e](_(this[e]).difference(t))},this.prototype["set_"+e]=function(t){if(t=n(t),!_.isEqual(_.clone(t).sort(),_.clone(this[e]).sort())){this[e]=t;var i={};i[e]=t,this._broadcast(i)}}}}});var app_models=["Backing","Checkout","Comment","Post","Project","User","ZendeskUser"];_.each(app_models,function(e){root[e]=ApplicationModel.extend()}),Project.on_initialize(function(){"function"==typeof update_record&&this.on_change(function(){update_record("Project",this.get())})}),Project.has("creator",{through:"User"}),Project.has("backers",{through:"User"}),User.has("created_projects",{through:"Project"}),User.has("backed_projects",{through:"Project"}),User.has("backings",{through:"Backing"}),User.prototype.api_url=function(e,t){var n=this.get("urls").api.user;if(n)return"string"==typeof e&&(n=n.replace(/([^\?]*)(.*)/,function(t,n,i){return n+"/"+e+i})),(t||"undefined"==typeof t&&e===!0)&&api_oauth_token&&(n=oauth_url(n).replace(/http:/,"https:")),n},Comment.on_initialize(function(){"function"==typeof update_record&&this.on_change(function(){update_record("Comment",this.get())})}),Post.set_computed_value("post_likes",function(){return this.likes_count<=0?"":this.likes_count+" "+formatters.pluralize("like",this.likes_count)},{changes_on:["likes_count","has_liked"]}),Post.set_computed_value("post_likes_namepile",function(){var e,t;return this.likes_count<=0?"":(e=[],e=_.map(this.likers,function(e){return'<a href="'+e.urls.web.user+'" title="'+e.name+'">'+e.name+"</a>"}),this.has_liked&&e.unshift("undefined"==typeof current_user?I18n.t("library.app.You"):'<a href="'+current_user.data.urls.web.user+'" title="'+I18n.t("library.app.You")+">"+I18n.t("library.app.You")+"</a>"),t=parseInt(this.likes_count,10)-e.length,t>0&&e.push(this.urls&&this.urls.web&&this.urls.web.likes?'<a href="'+this.urls.web.likes+'" title="see names" id="full_namepile">'+t+(e.length>0?" more ":" ")+formatters.pluralize("person",t)+"</a>":t+" "+(e.length>0?"more ":"")+formatters.pluralize("person",t)),formatters.to_sentence(e)+" like"+(1!==this.likes_count||this.has_liked?"":"s")+" this update.")},{changes_on:["likes_count","likers","has_liked"]}),Post.on_initialize(function(){"function"==typeof update_record&&this.on_change(function(){update_record("Post",this.get())})}),function(){$(function(){"string"==typeof current_user&&(root.current_user=new User($.parseEscapedJSON(current_user)))})}(),instrument_function(function(e){!function(){"string"==typeof current_project&&(e.current_project=new Project($.parseEscapedJSON(current_project)))}()})(this),instrument_function(function(e){!function(){"string"==typeof current_location&&(e.current_location=new Project($.parseEscapedJSON(current_location)))}()})(this),function(){var e={};$(function(){function t(e){return/Windows/i.test(e)?/Phone/i.test(e)?"Windows Mobile":"Windows":/(iPhone|iPad|iPod)/.test(e)?"iOS":/Android/.test(e)?"Android":/(Blackberry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Mac/i.test(e)?"Mac OS X":/Linux/.test(e)?"Linux":""}function n(e,t){return-1!==e.indexOf(t)}function i(e,t,i){return t=t||"",i?n(e,"Mini")?"Opera Mini":"Opera":/(Blackberry|PlayBook|BB10)/i.test(e)?"BlackBerry":n(e,"FBIOS")?"Facebook Mobile":n(e,"Chrome")?"Chrome":n(e,"CriOS")?"Chrome iOS":n(t,"Apple")?n(e,"Mobile")?"Mobile Safari":"Safari":n(e,"Android")?"Android Mobile":n(e,"Konqueror")?"Konqueror":n(e,"Firefox")?"Firefox":n(e,"MSIE")||n(e,"Trident/")?"Internet Explorer":n(e,"Gecko")?"Mozilla":""}function r(e){var t=e.split("/");return t.legth>=3?t[2]:""}function o(e){return/iPad/.test(e)?"iPad":/iPod/i.test(e)?"iPod Touch":/iPhone/i.test(e)?"iPhone":/(Blackberry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Windows Phone/i.test(e)?"Windows Phone":/Android/i.test(e)?"Android":""}function a(e){var t={};return _.each(e,function(e,n){_.isString(e)&&e.length>0&&(t[n]=e)}),t}function s(){var e=navigator.userAgent;return _.extend(a({$os:t(e),$browser:i(e,navigator.vendor,window.opera),$referrer:document.referrer,$referring_domain:r(document.referrer),$device:o(e)}),{$screen_height:screen.height,$screen_width:screen.width})}function c(e,t){var n=_.extend({},s(),{distinct_id:root.visitor_id},t),i={event:e,properties:n},r=JSON.stringify(i);root.koala_debug&&(window.console.log("KOALA REQUEST:"),window.console.log(i)),$.ajax({type:"POST",url:koala_endpoint,data:r,contentType:"text/plain; charset=UTF-8"})}$.support.localStorage&&$.support.localStorage()&&"true"===localStorage.koala_debug&&(root.koala_debug=!0),e.track=c,root.koala=e})}(),function(){var e=[];root.track=function(){e.push(arguments)
},$(function(){function t(e,t){var n={};return _.each(_.keys(t),function(i){n[e+"_"+i]=t[i]}),n}function n(e){var n="function"==typeof e.get?e.get():e,i=_.pick(n,["backers_count","country","currency","deadline","goal","last_update_published_at","launched_at","name","pledged","state","updates_count"]),r=moment.unix(n.deadline);return i.pid=n.id,n.category&&(i.category_name=n.category.name,i.parent_category=n.category.parent?n.category.parent.name:n.category.name),n.location&&(i.location=n.location.name),i.hours_remaining=_.max([r.diff(moment(),"hours",!0),0]),i.duration=r.diff(moment.unix(n.launched_at),"days",!0),i.percent_raised=n.pledged/n.goal,n.rewards&&(i.rewards_count=n.rewards.count),i.has_video=null!==n.video,i=t("project",i),i.user_is_backer=n.is_backing,i.user_has_starred=n.is_starred,i.user_is_project_creator="undefined"!=typeof current_user&&current_user.get("id")===n.creator.id,i}function i(e){var n="function"==typeof e.get?e.get():e,i=_.pick(n,["amount","shipping_amount","location_id"]),r=n.reward?_.pick(n.reward,["estimated_delivery_on","id","minimum","reward","shipping_preference","shipping_enabled"]):{};return r=t("reward",r),_.extend(i,r),i=t("checkout",i)}function r(e,t){var r=_.extend({page_id:$("body").attr("id"),ref_tag:URI().query(!0).ref},_.contains(["undefined","string"],typeof current_project)?{}:n(current_project),!_.contains(["undefined","string"],typeof current_checkout)&&current_checkout.get("amount")&&current_checkout.get("reward")?i(current_checkout):{},_.contains(["undefined","string"],typeof current_variants)?{}:{current_variants:current_variants},a,t);mixpanel.track(e,r),koala.track(e,r)}function o(e,t,i){window.setTimeout(function(){mixpanel.track_links(e,t,function(e){var t=$(e);return _.extend({selected_link:t.attr("data-original_text")?t.data("original_text"):$.trim(t.text()),page_id:$("body").attr("id")},_.contains(["undefined","string"],typeof current_project)?{}:n(current_project),i)})},1)}var a,s,c;"undefined"!=typeof mixpanel_id&&($.support.localStorage&&$.support.localStorage()&&"true"===localStorage.mixpanel_debug&&(root.mixpanel_debug=!0),mixpanel.init(mixpanel_id,{debug:mixpanel_debug}),c=read_cookie("ios_mp_distinct_id"),root.visitor_id=c?c:read_cookie("vis"),mixpanel.identify(root.visitor_id),mixpanel.track_pageview(),a={client_type:$("body.native-app-request").length?"native":"web",client_platform:$("body.ios").length?"ios":$("body.android").length?"android":void 0,device_format:$("body.phone").length?"phone":$("body.tablet").length?"tablet":"desktop",apple_pay_capable:$("body.apple-pay-capable").length>0,ip_address:current_ip,ip_datacenter:current_ip_datacenter,window_inner_width:window.innerWidth,window_inner_height:window.innerHeight,screen_width:screen.width,screen_height:screen.height,screen_avail_width:screen.availWidth,screen_avail_height:screen.availHeight,user_logged_in:"undefined"!=typeof current_user,user_country:"undefined"!=typeof current_location?current_location.get("country"):void 0,iphone_uuid:"undefined"!=typeof ios_app_uuid?ios_app_uuid:void 0,enabled_features:_.keys(enabled_features),browser_language:I18n.browser_language,chosen_language:I18n.chosen_language,calculated_language:I18n.calculated_language,display_language:I18n.display_language},s=read_cookie("user_analytics_properties"),null!==s&&(_.extend(a,$.parseJSON(s)),mixpanel.name_tag(a.user_uid)),_.each(e,function(e){r.apply(this,e)}),root.track=r,root.track_links=o,root.mixpanel_project=n,root.mixpanel_checkout=i,root.namespace_keys=t)})}(),function(){var e;jQuery(document).on("livesearch:results",function(t,n){var i,r=$(t.target).val();i=n.projects?n.projects.length:n.length,e=$(t.target).attr("data-tracker-name"),"undefined"!=typeof ga&&ga("send","event",e,"Term",r,parseInt(i,10))});var t;jQuery(document).on("livesearch:searching",function(){t=!0}),jQuery(document).on("livesearch:cancel",function(){t&&("undefined"!=typeof ga&&ga("send","event",e,"Cancels"),t=!1)}),jQuery(document).ready(function(){$(".home-editorial-title").on("click",function(){var e=$(this).html();"undefined"!=typeof ga&&ga("send","event","Faux-Category on Homepage Clicks",e)})}),jQuery(document).ready(function(){$(".export").find("a").on("click",function(){"undefined"!=typeof ga&&ga("send","event","Export Reward Report","Download Click")})}),jQuery(document).ready(function(){$("#results_properties").livequery(function(){var e=$(this).children("#number_of_results").text(),t=$(this).children("#term").text();"undefined"!=typeof ga&&ga("send","event","Search Results","Term",t,parseInt(e,10))})}),jQuery(document).ready(function(){$("#pledges_login_or_signup #growl_section .error").livequery(function(){var e=$(this).children(".message").html(),t=$(document).attr("URL");"undefined"!=typeof ga&&ga("send","event","Checkout Login Errors",e,t)}),$("#checkout-signup .fieldset-errors").livequery(function(){var e=$(this).children("ul").children(),t=$(document).attr("URL");$.each(e,function(e,n){n=n.innerHTML,"undefined"!=typeof ga&&ga("send","event","Checkout Signup Errors",n,t)})}),$("#sessions_new #growl_section .error").livequery(function(){var e=$(this).children(".message").html(),t=$(document).attr("URL");"undefined"!=typeof ga&&ga("send","event","Regular Login Errors",e,t)}),$("#new_user .fieldset-errors").livequery(function(){var e=$(this).children("ul").children(),t=$(document).attr("URL");$.each(e,function(e,n){n=n.innerHTML,"undefined"!=typeof ga&&ga("send","event","Regular Signup Errors",n,t)})})}),jQuery(document).ready(function(){$(".share-box").on("click","a",function(){var e=$(this).attr("data-tracker-name");"undefined"!=typeof ga&&ga("send","event","Sharing",e)}),$("#checkout-project-share").on("click","a",function(){var e=$(this).attr("data-tracker-name");"undefined"!=typeof ga&&ga("send","event","Sharing",e)}),$(document).on("zeroclipboard:click",function(){"undefined"!=typeof ga&&ga("send","event","Sharing","Copied Link")}),$(document).on("fb:loaded",function(){FB.Event.subscribe("edge.create",function(){"undefined"!=typeof ga&&ga("send","event","Sharing","Facebook Like")})})}),$(function(){function e(e){e.addModelListener("TIME","timeStats"),e.addModelListener("STATE","getState")}var t,n,i,r,o,a=0,s=0,c=0;$("#video-section object").livequery(function(){t=$(this)[0],$("#projects_show").size>0&&(o=$("#button-back-this-proj").attr("href")),i=$(document).attr("URL")}),$(document).on("click","#video-section",function(){o=$("#button-back-this-proj").attr("href"),i=$(document).attr("URL"),0===a&&t&&(r="Project Page Video",e(t))}),$(window).on("beforeunload",function(){"undefined"!=typeof n&&"PLAYING"===n.newstate&&0===c&&(c=1,"undefined"!=typeof ga&&ga("send","event",r,"Abandoned Play",i,s))})}),jQuery(document).on("modal_dialog:opened",function(e){var t=$(e.target),n=t.find(".modal_dialog_head h4").text();"undefined"!=typeof ga&&ga("send","event","Modal Dialog","Opened",n)}),jQuery(document).ready(function(){$(".faq-question a").click(function(){var e=$("body[id]").length?$("body").attr("id"):"No ID",t=$(this).closest(".faq"),n=$(this).find(".question").text();"undefined"==typeof ga||t.hasClass("expanded")||ga("send","event","FAQ","Expanded - "+e,n)})}),jQuery(document).ready(function(){$(document).on("click","a#edit_survey_response",function(){"undefined"!=typeof ga&&ga("send","event","Surveys","Click","Edit Survey Response")})}),jQuery(document).ready(function(){$(document).on("click","ul#admin-menu > li > a",function(){"undefined"!=typeof ga&&ga("send","event","Admin","Nav Click",$(this).text())})}),jQuery(document).ready(function(){var e=0;$(".scissors").on("click",function(){2>e?("undefined"!=typeof ga&&ga("send","event","Scissors","Clicks"),e+=1):"undefined"!=typeof ga&&ga("send","event","Scissors","Chops")})}),jQuery(document).ready(function(){var e=1;$(document).on("infinite_scroll:scrolled_to",function(t,n){if(n>e){var i=window.location.pathname+window.location.search+window.location.hash;"undefined"!=typeof ga&&ga("send","pageview",i),e=n}})})}(),function(e){var t=function(){return!1===e.support.boxModel&&e.support.objectAll&&$support.leadingWhitespace}();e.jGrowl=function(t,n){0==e("#jGrowl").size()&&e('<div id="jGrowl"></div>').addClass(n&&n.position?n.position:e.jGrowl.defaults.position).appendTo("body"),e("#jGrowl").jGrowl(t,n)},e.fn.jGrowl=function(t,n){if(e.isFunction(this.each)){var i=arguments;return this.each(function(){void 0==e(this).data("jGrowl.instance")&&(e(this).data("jGrowl.instance",e.extend(new e.fn.jGrowl,{notifications:[],element:null,interval:null})),e(this).data("jGrowl.instance").startup(this)),e.isFunction(e(this).data("jGrowl.instance")[t])?e(this).data("jGrowl.instance")[t].apply(e(this).data("jGrowl.instance"),e.makeArray(i).slice(1)):e(this).data("jGrowl.instance").create(t,n)})}},e.extend(e.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:!1,position:"top-right",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3e3,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:!0,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]</div>",log:function(){},beforeOpen:function(){},afterOpen:function(){},open:function(){},beforeClose:function(){},close:function(){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(t,n){var n=e.extend({},this.defaults,n);"undefined"!=typeof n.speed&&(n.openDuration=n.speed,n.closeDuration=n.speed),this.notifications.push({message:t,options:n}),n.log.apply(this.element,[this.element,t,n])},render:function(t){var n=this,i=t.message,r=t.options;r.themeState=""==r.themeState?"":"ui-state-"+r.themeState;var t=e('<div class="jGrowl-notification '+r.themeState+" ui-corner-all"+(void 0!=r.group&&""!=r.group?" "+r.group:"")+'"><div class="jGrowl-close">'+r.closeTemplate+'</div><div class="jGrowl-header">'+r.header+'</div><div class="jGrowl-message">'+i+"</div></div>").data("jGrowl",r).addClass(r.theme).children("div.jGrowl-close").bind("click.jGrowl",function(){e(this).parent().trigger("jGrowl.beforeClose")}).parent();e(t).bind("mouseover.jGrowl",function(){e("div.jGrowl-notification",n.element).data("jGrowl.pause",!0)}).bind("mouseout.jGrowl",function(){e("div.jGrowl-notification",n.element).data("jGrowl.pause",!1)}).bind("jGrowl.beforeOpen",function(){0!=r.beforeOpen.apply(t,[t,i,r,n.element])&&e(this).trigger("jGrowl.open")}).bind("jGrowl.open",function(){0!=r.open.apply(t,[t,i,r,n.element])&&("after"==r.glue?e("div.jGrowl-notification:last",n.element).after(t):e("div.jGrowl-notification:first",n.element).before(t),e(this).animate(r.animateOpen,r.openDuration,r.easing,function(){e.support.opacity===!1&&this.style.removeAttribute("filter"),null!=e(this).data("jGrowl")&&(e(this).data("jGrowl").created=new Date),e(this).trigger("jGrowl.afterOpen")}))}).bind("jGrowl.afterOpen",function(){r.afterOpen.apply(t,[t,i,r,n.element])}).bind("jGrowl.beforeClose",function(){0!=r.beforeClose.apply(t,[t,i,r,n.element])&&e(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){e(this).data("jGrowl.pause",!0),e(this).animate(r.animateClose,r.closeDuration,r.easing,function(){e.isFunction(r.close)?r.close.apply(t,[t,i,r,n.element])!==!1&&e(this).remove():e(this).remove()})}).trigger("jGrowl.beforeOpen"),""!=r.corners&&void 0!=e.fn.corner&&e(t).corner(r.corners),e("div.jGrowl-notification:parent",n.element).size()>1&&0==e("div.jGrowl-closer",n.element).size()&&0!=this.defaults.closer&&e(this.defaults.closerTemplate).addClass("jGrowl-closer "+this.defaults.themeState+" ui-corner-all").addClass(this.defaults.theme).appendTo(n.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){e(this).siblings().trigger("jGrowl.beforeClose"),e.isFunction(n.defaults.closer)&&n.defaults.closer.apply(e(this).parent()[0],[e(this).parent()[0]])})},update:function(){e(this.element).find("div.jGrowl-notification:parent").each(function(){void 0!=e(this).data("jGrowl")&&void 0!=e(this).data("jGrowl").created&&e(this).data("jGrowl").created.getTime()+parseInt(e(this).data("jGrowl").life)<(new Date).getTime()&&1!=e(this).data("jGrowl").sticky&&(void 0==e(this).data("jGrowl.pause")||1!=e(this).data("jGrowl.pause"))&&e(this).trigger("jGrowl.beforeClose")}),this.notifications.length>0&&(0==this.defaults.pool||e(this.element).find("div.jGrowl-notification:parent").size()<this.defaults.pool)&&this.render(this.notifications.shift()),e(this.element).find("div.jGrowl-notification:parent").size()<2&&e(this.element).find("div.jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){e(this).remove()})},startup:function(n){this.element=e(n).addClass("jGrowl").append('<div class="jGrowl-notification"></div>'),this.interval=setInterval(function(){e(n).data("jGrowl.instance").update()},parseInt(this.defaults.check)),t&&e(this.element).addClass("ie6")},shutdown:function(){e(this.element).removeClass("jGrowl").find("div.jGrowl-notification").remove(),clearInterval(this.interval)},close:function(){e(this.element).find("div.jGrowl-notification").each(function(){e(this).trigger("jGrowl.beforeClose")})}}),e.jGrowl.defaults=e.fn.jGrowl.prototype.defaults}(jQuery),instrument_function(function(e){!function(){var t={J:74,K:75,UP:38,DOWN:40,LEFT:37,RIGHT:39,DEL:46,TAB:9,ENTER:13,SPACE:32,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8,SHIFT:16,CTRL:17,ALT:18,CMD_LEFT:91,CMD_RIGHT:93,WINDOWS_LEFT:91,WINDOWS_RIGHT:92,WINDOWS:93};t.NOT_INPUT=[t.UP,t.DOWN,t.RIGHT,t.LEFT,t.TAB,t.ENTER,t.ESC,t.SHIFT,t.CTRL,t.ALT,t.CMD_LEFT,t.CMD_RIGHT,t.WINDOWS_LEFT,t.WINDOWS_RIGHT,t.WINDOWS,224,17],e.KEY=t}()})(this);var $growl_section=$("#growl_section");$growl_section.on("click",function(e){var t;$(e.target).is($(this))&&(t=$(this),t.fadeOut("fast"),t.removeClass("sticky"),t.find("div.jGrowl-notification:parent").each(function(){$(this).data("jGrowl").sticky=!1}))}),$(document).on("keydown",function(e){e.which===KEY.ESC&&$growl_section.is(":visible")&&hideGrowlSection()}),root.growl=growl,function(e,t){function n(t,n){var r,o,a,s=t.nodeName.toLowerCase();return"area"===s?(r=t.parentNode,o=r.name,t.href&&o&&"map"===r.nodeName.toLowerCase()?(a=e("img[usemap=#"+o+"]")[0],!!a&&i(a)):!1):(/input|select|textarea|button|object/.test(s)?!t.disabled:"a"===s?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var r=0,o=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,i){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),i&&i.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,r,o=e(this[0]);o.length&&o[0]!==document;){if(i=o.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(r=parseInt(o.css("zIndex"),10),!isNaN(r)&&0!==r))return r;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),r=isNaN(i);return(r||i>=0)&&n(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,i){function r(t,n,i,r){return e.each(o,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var o="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?s["inner"+i].call(this):this.each(function(){e(this).css(a,r(this,n)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?s["outer"+i].call(this,t):this.each(function(){e(this).css(a,r(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var r,o=e.ui[t].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(e,t,n){var i,r=e.plugins[t];if(r&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;i<r.length;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return t[i]>0?!0:(t[i]=1,r=t[i]>0,t[i]=0,r)}})}(jQuery),function(e,t){var n=0,i=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(o){}r(t)},e.widget=function(t,n,i){var r,o,a,s,c={},l=t.split(".")[0];t=t.split(".")[1],r=l+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[l]=e[l]||{},o=e[l][t],a=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),s=new n,s.options=e.widget.extend({},s.options),e.each(i,function(t,i){return e.isFunction(i)?void(c[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}()):void(c[t]=i)}),a.prototype=e.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix:t},c,{constructor:a,namespace:l,widgetName:t,widgetFullName:r}),o?(e.each(o._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete o._childConstructors):n._childConstructors.push(a),e.widget.bridge(t,a)},e.widget.extend=function(n){for(var r,o,a=i.call(arguments,1),s=0,c=a.length;c>s;s++)for(r in a[s])o=a[s][r],a[s].hasOwnProperty(r)&&o!==t&&(n[r]=e.isPlainObject(o)?e.isPlainObject(n[r])?e.widget.extend({},n[r],o):e.widget.extend({},o):o);return n},e.widget.bridge=function(n,r){var o=r.prototype.widgetFullName||n;e.fn[n]=function(a){var s="string"==typeof a,c=i.call(arguments,1),l=this;return a=!s&&c.length?e.widget.extend.apply(null,[a].concat(c)):a,this.each(s?function(){var i,r=e.data(this,o);return r?e.isFunction(r[a])&&"_"!==a.charAt(0)?(i=r[a].apply(r,c),i!==r&&i!==t?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+a+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+a+"'")}:function(){var t=e.data(this,o);t?t.option(a||{})._init():e.data(this,o,new r(a,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var r,o,a,s=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(s={},r=n.split("."),n=r.shift(),r.length){for(o=s[n]=e.widget.extend({},this.options[n]),a=0;a<r.length-1;a++)o[r[a]]=o[r[a]]||{},o=o[r[a]];if(n=r.pop(),i===t)return o[n]===t?null:o[n];o[n]=i}else{if(i===t)return this.options[n]===t?null:this.options[n];s[n]=i}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var r,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(i,a){function s(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var c=i.match(/^(\w+)\s*(.*)$/),l=c[1]+o.eventNamespace,u=c[2];u?r.delegate(u,l,s):n.bind(l,s)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var r,o,a=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){"string"==typeof r&&(r={effect:r});var a,s=r?r===!0||"number"==typeof r?n:r.effect||n:t;r=r||{},"number"==typeof r&&(r={duration:r}),a=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&e.effects&&e.effects.effect[s]?i[t](r):s!==t&&i[s]?i[s](r.duration,r.easing,o):i.queue(function(n){e(this)[t](),o&&o.call(i[0]),n()})}})}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1===n.which,o="string"==typeof this.options.cancel&&n.target.nodeName?e(n.target).closest(this.options.cancel).length:!1;return r&&!o&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){function t(e,t,n){return e>t&&t+n>e}function n(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||n(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var i=null,r=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,o.widgetName+"-item")===o?(i=e(this),!1):void 0}),e.data(t.target,o.widgetName+"-item")===o&&(i=e(t.target)),i&&(!this.options.handle||n||(e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(r=!0)}),r))?(this.currentItem=i,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,n,i){var r,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=e("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,i,r,o,a=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+a.scrollSpeed:t.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+a.scrollSpeed:t.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(t.pageY-e(document).scrollTop()<a.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-a.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<a.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+a.scrollSpeed)),t.pageX-e(document).scrollLeft()<a.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-a.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<a.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+a.scrollSpeed))),s!==!1&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],r=i.item[0],o=this._intersectsWithPointer(i),o&&i.instance===this.currentContainer&&r!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==r&&!e.contains(this.placeholder[0],r)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],r):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;
this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,r=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,o=e.left,a=o+e.width,s=e.top,c=s+e.height,l=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||i+l>s&&c>i+l,f="y"===this.options.axis||t+u>o&&a>t+u,h=d&&f;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?h:o<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<a&&s<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<c},_intersectsWithPointer:function(e){var n="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=n&&i,o=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return r?this.floating?a&&"right"===a||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(e){var n=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:r&&("down"===r&&n||"up"===r&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,i,r,o,a=[],s=[],c=this._connectWith();if(c&&t)for(n=c.length-1;n>=0;n--)for(r=e(c[n]),i=r.length-1;i>=0;i--)o=e.data(r[i],this.widgetFullName),o&&o!==this&&!o.options.disabled&&s.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(s.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=s.length-1;n>=0;n--)s[n][0].each(function(){a.push(this)});return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,i,r,o,a,s,c,l,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(n=f.length-1;n>=0;n--)for(r=e(f[n]),i=r.length-1;i>=0;i--)o=e.data(r[i],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(d.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(n=d.length-1;n>=0;n--)for(a=d[n][1],s=d[n][0],i=0,l=s.length;l>i;i++)c=e(s[i]),c.data(this.widgetName+"-item",a),u.push({item:c,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,r,o;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=r.outerWidth(),i.height=r.outerHeight()),o=r.offset(),i.left=o.left,i.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)o=this.containers[n].element.offset(),this.containers[n].containerCache.left=o.left,this.containers[n].containerCache.top=o.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),r=e("<"+i+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===i?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(r)}):"img"===i&&r.attr("src",t.currentItem.attr("src")),n||r.css("visibility","hidden"),r},update:function(e,r){(!n||i.forcePlaceholderSize)&&(r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(i){var r,o,a,s,c,l,u,d,f,h,p=null,m=null;for(r=this.containers.length-1;r>=0;r--)if(!e.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(p&&e.contains(this.containers[r].element[0],p.element[0]))continue;p=this.containers[r],m=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",i,this._uiHash(this)),this.containers[r].containerCache.over=0);if(p)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",i,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(a=1e4,s=null,h=p.floating||n(this.currentItem),c=h?"left":"top",l=h?"width":"height",u=this.positionAbs[c]+this.offset.click[c],o=this.items.length-1;o>=0;o--)e.contains(this.containers[m].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!h||t(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(d=this.items[o].item.offset()[c],f=!1,Math.abs(d-u)>Math.abs(d+this.items[o][l]-u)&&(f=!0,d+=this.items[o][l]),Math.abs(d-u)<a&&(a=Math.abs(d-u),s=this.items[o],this.direction=f?"up":"down"));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;s?this._rearrange(i,s,null,!0):this._rearrange(i,null,this.containers[m].element,!0),this._trigger("change",i,this._uiHash()),this.containers[m]._trigger("change",i,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",i,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),("document"===r.containment||"window"===r.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(t=e(r.containment)[0],n=e(r.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*i}},_generatePosition:function(t){var n,i,r=this.options,o=t.pageX,a=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,c=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),r.grid&&(n=this.originalPageY+Math.round((a-this.originalPageY)/r.grid[1])*r.grid[1],a=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-r.grid[1]:n+r.grid[1]:n,i=this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0],o=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-r.grid[0]:i+r.grid[0]:i)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():c?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():c?0:s.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){this.reverting=!1;var n,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),n=0;n<i.length;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(n=0;n<i.length;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),function(e){function t(t,n){this.$elem=t,this.$form=t.closest("form"),this.options=e.extend({delay:400,minimum_characters:3,serialize:this.$form,client_side_cache:!0,process_data:!1,dataType:"json"},n),this.url=this.options.url||this.$form.attr("action"),this.ajax_url=this.options.file_extension?this.ensure_file_extension(this.options.file_extension):this.url,this.last_search=!1,this.search_xhr=!1,this.cache=this.options.client_side_cache?{}:!1,this.active=!0,this._attach()}var n;e.fn.livesearch=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("livesearch");i||(i=new t(e(this),n),e(this).data("livesearch",i))})},e.extend(t.prototype,{_attach:function(){var e=this;this.$elem.attr("autocomplete","off"),this.$elem.on("keypress cut paste input",function(){e.active&&(clearTimeout(n),n=setTimeout(function(){e.search()},e.options.delay))}),this.options.process_data||this.options.serialize.on("change",function(){e.search()}),this.$elem.on("livesearch:suspend",function(){e.active=!1}),this.$elem.on("livesearch:activate",function(){e.active=!0}),this.$elem.on("livesearch:cancel",function(){e.search_xhr&&e.search_xhr.abort(),e.last_search=!1})},ensure_file_extension:function(e){var t=window.location.host.replace(/[^\w\d]/g,function(e){return"\\"+e}),n=new RegExp("((?:"+t+")?[^\\.$#\\?]+)(\\.\\w*|)($|#|\\?)");return this.url.replace(n,function(t,n,i,r){return n+"."+e+r})},suspend_while:function(e){this.active=!1,e();var t=this;setTimeout(function(){t.active=!0},100)},search:function(){var t=this,n=this.options.serialize.serialize();this.options.process_data&&(n=this.options.process_data.apply(this,[n]),"object"==typeof n&&(n=e.param(n))),n!==this.last_search&&(this.$elem.val().length<this.options.minimum_characters||(this.search_xhr&&this.search_xhr.abort(),this.cache&&this.cache[n]&&"function"!=typeof this.cache[n]?this.$elem.trigger("livesearch:results",[this.cache[n]]):(this.$elem.trigger("livesearch:searching"),this.$elem.addClass("searching"),this.search_xhr=e.ajax({type:"get",url:this.ajax_url,dataType:this.options.dataType,data:n,global:!1,success:function(e){null!==e&&(t.$elem.trigger("livesearch:results",[e]),t.$elem.removeClass("searching"),t.cache&&(t.cache[n]=e))},error:function(){t.$elem.trigger("livesearch:ajax_error"),t.$elem.removeClass("searching")},statusCode:{304:function(){}}})),this.last_search=n))}})}(jQuery),function(e){function t(t,n){this.$elem=t,this.options=e.extend({update_input:!0,no_results_html:"Sorry, we couldn't find anything.",ignore_history:!0,process_results:function(e){return e}},n);var i=this.$elem.closest(".field_with_icon"),r=e([]);r=i.length?i.siblings(".results"):this.$elem.siblings(".results"),r.length?(this.$results=r,this.$results.find("div.no_results").remove()):(this.$results=e('<div class="results"></div>'),i.length?i.after(this.$results):this.$elem.after(this.$results)),this.$results.find("ul.result_list").length||this.$results.append('<ul class="result_list"></ul>'),this.$no_results=e('<div class="no_results">'+this.options.no_results_html+"</div>"),this.$no_results.hide(),this.$results.append(this.$no_results),this.handle_optional_content(),this.livesearch=t.livesearch(this.options).data("livesearch"),this._attach()}var n={UP:38,DOWN:40,DEL:46,TAB:9,ENTER:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};e.fn.livesearch_input_dropdown=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("livesearch.input_dropdown");i||(i=new t(e(this),n),e(this).data("livesearch.input_dropdown",i))})},e.extend(t.prototype,{_attach:function(){var e=this;this.$elem.on("livesearch:results",function(t,n){e.options.process_results&&(n=e.options.process_results(n)),e.show_results(n),e.push_history(n)}),this.bind_results(),this.bind_popstate(),this.$elem.on("keydown.autocomplete",function(t){var i,r,o,a=!!e.$results.find(".selected").length;switch(t.keyCode){case n.UP:a?(i=e.$results.find(".selected").prev(":not(.not_result)"),i.length||(i=e.$results.find("li:not(.not_result)").last()),e.select(i,!1)):e.select(e.$results.find("li:not(.not_result)").last(),!1),t.preventDefault();break;case n.DOWN:a?(r=e.$results.find(".selected").next(":not(.not_result)"),r.length||(r=e.$results.find("li:not(.not_result)").first()),e.select(r,!1)):e.select(e.$results.find("li:not(.not_result)").first(),!1),t.preventDefault();break;case n.ENTER:o=e.$results.find(".selected"),e.input_can_submit()||t.preventDefault(),o.length&&(t.preventDefault(),e.select(o,!0))}})},history_api_supported:function(){return window.history&&window.history.pushState},bind_popstate:function(){if(this.history_api_supported()&&!this.options.ignore_history){var e=this;this.replacing_history_state=!1,window.onpopstate=function(t){t.state&&t.state.livesearch?(e.show_results(t.state.livesearch.results),e.livesearch.suspend_while(function(){e.$elem.val(t.state.livesearch.input_value).trigger("input")})):e.reset(!0)}}},input_can_submit:function(){var e=this.livesearch.search_xhr.readyState,t=e>0&&4>e;return this.options.input_can_submit_on_enter&&!t&&this.$elem.is(":focus")},bind_results:function(){var t=this;this.$results.find("li").on("click",function(n){t.select(e(this),!0),n.preventDefault()}),this.$results.find("li").on("mouseover",function(){t.select(e(this)),t.unselect_on_mouseout=!0}),this.$results.on("mouseout",function(){t.unselect_on_mouseout&&t.unselect_currently_selected()}),this.$elem.on("livesearch:reveal_results",function(){t.reveal_results()})},build_result_names_list:function(t){var n=[],i=this;return e.each(t,function(e,t){i.options.return_name_from_result?t=i.options.return_name_from_result(t):"string"!=typeof t&&(t=t[0]),n.push(t)}),n},show_results:function(t){var n,i,r,o=this.$results.children("ul"),a=e([]);t.results&&(r=t,t=t.results),this.unselect_currently_selected(),o.empty(),t.length?(this.$no_results.hide(),o.show()):(this.$no_results.show(),o.hide()),n=this.build_result_names_list(t),e.each(n,function(n,i){var r=e("<li>"+i+"</li>");r.data("livesearch_result",t[n]),o.append(r)}),r&&r.count>t.length&&(i="see all "+r.count+" results",a=e("<a>").attr({href:this.livesearch.url+"?"+this.livesearch.last_search,title:i,"class":"see_all not_result"}).html(i).wrap("<li>"),o.append(a)),this.bind_results(),this.reveal_results()},push_history:function(e){if(this.history_api_supported()&&!this.options.ignore_history){"string"==typeof e&&(e=JSON.parse(e));var t={livesearch:{input_value:this.$elem.val(),results:e}};this.replacing_history_state?(history.replaceState(t),this.replacing_history_state=!1):history.pushState(t,"","?"+this.livesearch.last_search)}},reveal_results:function(){var t=this;this.$results.slideDown(function(){e(window).resize(),t.$results.trigger("sticky_bar:fix_to_bottom"),t.$results.trigger("shifted"),t.$results.trigger("livesearch:revealed_results")})},reset:function(e){this.$results.hide(),this.$elem.val(""),e&&this.$results.children("ul.result_list").html("")},unselect_currently_selected:function(){var e=this.$results.children("ul"),t=e.children("li.selected");t.trigger("livesearch:unselect"),t.removeClass("selected"),this.unselect_on_mouseout=!1},select:function(e,t){var n=this;e.is(".not_result")||(this.unselect_currently_selected(),e.addClass("selected"),this.options.update_input&&this.livesearch.suspend_while(function(){n.$elem.val(e.text()),n.$elem.focus()}),e.trigger("livesearch:soft_select"),t&&e.trigger("livesearch:selected",[e.data("livesearch_result")]))},handle_optional_content:function(){this.options.prepend&&this.$results.prepend(this.options.prepend)}})}(jQuery),function(e){e.fn.livesearch_pretty_input_dropdown=function(t){return t=t||{},e(this).each(function(){function n(){this.value?s.show():s.hide()}function i(){a.val(""),a.trigger("livesearch:cancel").trigger("livesearch:close_results")}var r,o=e(this),a=o.find("input[type=text]"),s=o.find(".ss-delete"),c=a.siblings(".ss-search");a.livesearch_input_dropdown(e.extend(t,{update_input:!1})),r=a.data("livesearch.input_dropdown"),n.call(a[0]),a.on("keypress cut paste input livesearch:close_results blur",n),a.on("livesearch:searching",function(){c.removeClass("ss-search").addClass("icon-loading-small")}),a.on("livesearch:results livesearch:ajax_error",function(){c.removeClass("icon-loading-small").addClass("ss-search")}),a.on("livesearch:results",function(){if(!t.input_can_submit_on_enter){var e=a.siblings(".results");r.select(e.find("li:first"))}}),s.on("click",function(){a.focus(),i()}),a.on("livesearch:close_results",function(){a.siblings(".results").slideUp(function(){e(window).resize(),e(this).trigger("sticky_bar:fix_to_bottom")})}),a.on("blur",function(){a.val().length<3&&i()})})}}(jQuery),function(e){e.fn.livesearch_navigator=function(t){return t=t||{},e(this).each(function(){var n=e(this);n.livesearch_pretty_input_dropdown(t),n.on("livesearch:selected",function(e,t){t&&(window.location=t[1])})})}}(jQuery),function(e){e.fn.livesearch_selector=function(t){return t=e.extend({url:!1,cancel_copy:"Cancel",target_input:!1},t),e(this).each(function(){function n(){o.hide(),o.attr("disabled","disabled"),o.siblings(".ss-delete, .ss-search").hide();var n=e('<div class="field-selected"><span class="value">'+o.val()+'</span><a class="ss-icon ss-delete cancel-link" href="#">'+t.cancel_copy+"</a></div>");o.siblings("div.field-selected").remove(),o.after(n),o.siblings(".results").slideUp(),o.trigger("livesearch_selector:select",[o.val()]),n.find("a.cancel-link").click(function(e){e.preventDefault(),o.val(""),n.remove(),o.removeAttr("disabled"),o.siblings(".ss-delete, .ss-search").show(),o.show(),o.focus(),a.val(""),o.trigger("dirty"),o.trigger("livesearch_selector:unselect")})}var i,r=e(this),o=r.find('input[type="text"]'),a=t.target_input||r.find('input[type="hidden"]'),s=o.siblings(".ss-search");r.addClass("search"),a.val()&&o.val()&&n(),t.url=t.url||r.closest("form").attr("action"),r.livesearch_pretty_input_dropdown(t),i=o.data("livesearch.input_dropdown"),o.on("livesearch:searching",function(){s.removeClass("ss-search").addClass("icon-loading-small")}),o.on("livesearch:results livesearch:ajax_error",function(){s.removeClass("icon-loading-small").addClass("ss-search")}),o.on("livesearch:results",function(){var e=o.siblings(".results");i.select(e.find("li:first"))}),r.on("livesearch:selected",function(e,t){t&&(o.val(t[0]),a.val(t[1]),n())})})}}(jQuery),function(e){e.fn.livesearch_multi_selector=function(t){return t=e.extend({url:!1,cancel_copy:"Remove",sortable:!1,update_input:!1},t),e(this).each(function(){function n(n){var i=e('<a class="ss-icon ss-delete cancel-link" href="#">'+t.cancel_copy+"</a>");n.append(i)}function i(){s.val(""),a.siblings(".results").slideUp(),s.trigger("livesearch:cancel")}var r,o=e(this),a=o.find(".field_with_icon"),s=a.find("input.text"),c=o.find("ol.search-selected,ul.search-selected"),l=s.siblings(".ss-search"),u=o.find(".template"),d=t;d.url=t.url||o.closest("form").attr("action"),r=s.livesearch_input_dropdown(d),t.sortable&&c.sortable({containment:"document",axis:"y",update:function(){c.find("input.position").each(function(t){e(this).val(t)})}}),o.addClass("search"),c.find("li").each(function(){n(e(this))}),o.on("click","a.cancel-link",function(t){var n=e(this).closest("li"),i=n.find(".destroy");t.preventDefault(),n.fadeOut(function(){i.length?i.val("1"):n.remove()})}),s.on("livesearch:searching",function(){l.removeClass("ss-search").addClass("icon-loading-small")}),s.on("livesearch:results livesearch:ajax_error",function(){l.removeClass("icon-loading-small").addClass("ss-search")}),o.on("livesearch:selected",function(n,r){if(r){var o=u.clone_form_template();o.find("input.destroy").val(!1),o.find(".name").html(r[0]),o.find(".value").val(r[1]),c.append(o),t.sortable&&c.find("input.position").each(function(t){e(this).val(t)}),i()}})})}}(jQuery),instrument_function(function(){!function(e){function t(t,n){this.$field=t,this.options=e.extend({on_invalid:null},n),this._value=this._current_time_from_field(),this._attach()}e.fn.time_field=function(n){return e(this).each(function(){new t(e(this),n)})},e.extend(t.prototype,{_attach:function(){var e=this;e.$field.bind("blur",function(){e._handle_edit()}),this.$field.bind("time_field:set_time",function(t,n){e.set_time(n)})},_s_to_time:function(e){if("object"==typeof Date.Parsing){var t=Date.parse(e);return t?t.toString("HH:mm"):this.options.on_invalid}var n,i=/^\s*(\d\d?)(:(\d\d))?\s*([ap]m?)?\s*$/i,r=e.match(i),o=!r;if(!o){var a=+r[1]%12,s=+r[3]||0,c=(r[4]||"").match(/p/i);r[4]||(c=+r[1]>=12),+r[1]>23&&(o=!0),+r[1]>12&&r[4]&&(o=!0),s>59&&(o=!0),+r[1]<1&&r[4]&&(o=!0);var l=""+(a+(c?12:0));1===l.length&&(l="0"+l);var u=""+s;1===u.length&&(u="0"+u),n=l+":"+u}return o?this.options.on_invalid:n},_time_to_s:function(e){if("object"==typeof Date.Parsing){var t=Date.parse(e);return t?t.toString("h:mm tt"):this.options.on_invalid}var n=e&&e.match(/(\d\d):(\d\d)/);if(n){var i=+n[1],r=+n[2],o=i>=12?"pm":"am",a=""+(i%12?i%12:12),s=""+r;return 1===s.length&&(s="0"+s),a+":"+s+o}return""},_current_time_from_field:function(){return this._s_to_time(this.$field.val())},_reset_field_value:function(){this._value!==this._current_time_from_field()&&this.$field.val(this._time_to_s(this._value))},set_time:function(e){e!==this._value&&(this._value=e,this.$field.trigger("time_field:time_changed",this._value)),this._reset_field_value()},_handle_edit:function(){var e=this._current_time_from_field();this.set_time(e)}})}(jQuery)})(this),function(e){function t(t,n){this.$div=t,this.options=e.extend({previous_month_text:"< Prev",next_month_text:"Next >",month_texts:[I18n.t("library.calendar_date_picker.January"),I18n.t("library.calendar_date_picker.February"),I18n.t("library.calendar_date_picker.March"),I18n.t("library.calendar_date_picker.April"),I18n.t("library.calendar_date_picker.May"),I18n.t("library.calendar_date_picker.June"),I18n.t("library.calendar_date_picker.July"),I18n.t("library.calendar_date_picker.August"),I18n.t("library.calendar_date_picker.September"),I18n.t("library.calendar_date_picker.October"),I18n.t("library.calendar_date_picker.November"),I18n.t("library.calendar_date_picker.December")],day_of_week_texts:[I18n.t("library.calendar_date_picker.Sunday_short"),I18n.t("library.calendar_date_picker.Monday_short"),I18n.t("library.calendar_date_picker.Tuesday_short"),I18n.t("library.calendar_date_picker.Wednesday_short"),I18n.t("library.calendar_date_picker.Thursday_short"),I18n.t("library.calendar_date_picker.Friday_short"),I18n.t("library.calendar_date_picker.Saturday_short")]},n),this._extract_options(),this._attach(),this._redraw()}function n(e){return i?i.firstChild.nodeValue=e:(i=document.createElement("div"),i.appendChild(document.createTextNode(e))),i.innerHTML
}e.fn.calendar_date_picker=function(n){return this.each(function(){var i=e(this),r=new t(i,n);e(this).data("calendar_date_picker",r)})},e.extend(t.prototype,{_copy_date:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},_copy_date_with_time:function(e,t){if(!e)return e;var n=this._copy_date(e),i=(t||"").split(":");return n.setHours(+i[0]||0),n.setMinutes(+i[1]||0),n},_copy_time:function(e){if(!e)return null;var t=""+e.getHours();1===t.length&&(t="0"+t);var n=""+e.getMinutes();return 1===n.length&&(n="0"+n),t+":"+n},_copy_month:function(e){return new Date(e.getFullYear(),e.getMonth(),1)},_next_month:function(e){return new Date(e.getFullYear(),e.getMonth()+1,1)},_previous_month:function(e){return new Date(e.getFullYear(),e.getMonth()-1,1)},_next_date:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,e.getHours(),e.getMinutes())},_previous_date:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()-1,e.getHours(),e.getMinutes())},_same_year:function(e,t){return e.getFullYear()===t.getFullYear()},_same_month:function(e,t){return this._same_year(e,t)&&e.getMonth()===t.getMonth()},_last_date_of_month:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0)},_selected_date_date_in_focus_month:function(){return this.selected_date&&this._same_month(this.selected_date,this.focus_date)?this.selected_date.getDate():void 0},_extract_options:function(){this.today_date=this._copy_date(this.options.today_date||new Date),this.options.selected_date&&(this.selected_date=this._copy_date(this.options.selected_date)),this.focus_date=this._copy_month(this.options.focus_date||this.selected_date||this.today_date),this.time=this._does_datetime()?this._copy_time(this.options.selected_date||this.options.today_date||new Date):!1},_refresh_calendar_table_classes:function(e){var t="selected",n=this._selected_date_date_in_focus_month(),i=e.children("tbody"),r=i.find("a.selected");r.removeClass(t),r.parent().removeClass(t);var o=i.find("a:eq("+(n-1)+")");o.addClass(t),o.parent().addClass(t)},_attach:function(){var e=this;this.$div.bind("calendar_date_picker:select_date",function(t,n){e.select_date(n)})},_bind_dom_table_events:function(){var t=this,n=this.$div.children().children("table"),i=n.children(":eq(0)"),r=i.children().children(),o=r.children("a.previous_month");o.text(this.options.previous_month_text),o.click(function(e){e.preventDefault(),t._on_previous_month_clicked()});var a=r.children("a.next_month");a.text(this.options.next_month_text),a.click(function(e){e.preventDefault(),t._on_next_month_clicked()}),r.children(".month, .year").on("click",function(){t.focus_date=new Date,t._refresh_calendar()});var s=n.children("tbody");s.click(function(n){var i;i=e.browser.msie?n.srcElement:n.target;var r=e(i);if(r[0]&&"A"===r[0].nodeName){n.preventDefault();var o=t._copy_date_with_time(t.focus_date,t.time);o.setDate(+r.text());var a=t._copy_date_with_time(t.selected_date,t.time);t.select_date(t.options.allow_deselect&&a&&o-a===0?void 0:o)}})},_bind_dom_time_events:function(){if(this._does_datetime()){var e=this,t=this.$div.children().children("div.time").find("input");t.time_field(),t.trigger("time_field:set_time",this.time),t.bind("time_field:time_changed",function(t,n){e.selected_date||(e.selected_date=new Date);var i=e._copy_date_with_time(e.selected_date,n);e.select_date(i)})}},_does_datetime:function(){return void 0!==this.options.time_text},_on_previous_month_clicked:function(){this.focus_date=this._previous_month(this.focus_date),this._refresh_calendar()},_on_next_month_clicked:function(){this.focus_date=this._next_month(this.focus_date),this._refresh_calendar()},_redraw:function(){this.$div.empty(),this.$div.append('<div class="calendar_date_picker">'+this._table_html()+this._time_div_html()+"</div>"),this._bind_dom_table_events(),this._bind_dom_time_events()},_refresh_calendar:function(){this.$div.children().children("table").replaceWith(this._table_html()),this._bind_dom_table_events()},select_date:function(e,t){var n=e?this._copy_date(e):void 0,i=t?t:e?this._copy_time(e):void 0,r=this.selected_date?this.selected_date.valueOf():void 0,o=n?n.valueOf():void 0;(r!==o||i!==this.time)&&(this.selected_date=n,this._does_datetime()&&(this.time=i,i&&this.$div.find("input").trigger("time_field:set_time",i)),this.$div.trigger("calendar_date_picker:date_selected",[this._copy_date_with_time(this.selected_date,this.time)]),this.focus_date=this._copy_month(this.selected_date||this.today_date),this._refresh_calendar(),this._refresh_calendar_table_classes(this.$div.find("table")))},_table_html:function(){return"<table>"+this._thead_month_html()+this._thead_days_of_week_html()+this._tbody_html()+"</table>"},_thead_month_html:function(){return'<thead class="month"><tr><th colspan="7"><a class="previous_month ss-icon ss-navigateleft grey-dark" href="#"></a><a class="next_month ss-icon ss-navigateright grey-dark" href="#"></a><span class="month">'+n(this.options.month_texts[this.focus_date.getMonth()])+'</span> <span class="year">'+this.focus_date.getFullYear()+"</span></th></tr></thead>"},_thead_days_of_week_html:function(){return'<thead class="days_of_week"><tr><th>'+this._days_of_week_ths().join("</th><th>")+"</th></tr></thead>"},_tbody_html:function(){var e=this._copy_month(this.focus_date).getDay(),t=1,n=this._last_date_of_month(this.focus_date).getDate(),i=this._selected_date_date_in_focus_month(),r=this._same_month(this.focus_date,this.today_date)&&this.today_date.getDate(),o=[];for(o.push(this._date_tds(e,i,r,t,n)),t=8-e;n>=t;t+=7)o.push(this._date_tds(0,i,r,t,n));return"<tbody><tr>"+o.join("</tr><tr>")+"</tr></tbody>"},_date_tds:function(e,t,n,i,r){for(var o=[],a="<td></td>",s=0;e>s;s+=1)o.push(a);for(var c=i;o.length<7&&r>=c;c+=1){var l=[];c===t&&l.push("selected"),c===n&&l.push("today");var u;u=l.length?' class="'+l.join(" ")+'"':"";var d="<td"+u+'><a href="#"'+u+">"+c+"</a></td>";o.push(d)}for(var f=r+1;i+7>f;f+=1)o.push(a);return o.join("")},_days_of_week_ths:function(){var t=e.map(this.options.day_of_week_texts,n);return t},_time_div_html:function(){return this._does_datetime()?'<div class="time"><label>'+n(this.options.time_text)+'<input type="text" /></label></div>':""}});var i}(jQuery),function(e){function t(t,n){this.$field=t,this.$calendar=void 0,this.options=e.extend({calendar:{},position:"right"},n),this._in_manual_edit=!1,this._blurs_to_ignore=-1,this._attach()}e.fn.datetime_picker_field=function(n){return this.each(function(){new t(e(this),n)})},e.extend(t.prototype,{_attach:function(){var e=this;this.$field.focus(function(){e._in_time_field=!1,e._ensure_calendar()}),this.$field.blur(function(){e._hide_calendar_or_refocus(),e._blurs_to_ignore-=1}),e.$field.bind("keypress cut paste input",function(){e._handle_edit()})},_ensure_calendar:function(){if(this.$calendar)return this.$calendar;var t=this,n=e("<div></div>"),i=e.extend({selected_date:this.get_selected_datetime()},this.options.calendar);return this.options.class_name?n.addClass(this.options.class_name):(n.css("position","absolute"),n.css("z-index",1e3)),"bottom"===this.options.position?(n.css("left",this.$field.offset().left),n.css("top",this.$field.offset().top+this.$field.outerHeight()+20)):(n.css("left",this.$field.offset().left+this.$field.width()+20),n.css("top",this.$field.offset().top)),n.hide(),this._get_surrounding_element().append(n),n.calendar_date_picker(i),n.mousedown(function(){t._in_time_field=!1,t._blurs_to_ignore+=1}),n.find("label").mousedown(function(e){t._in_time_field=!0,t._blurs_to_ignore+=1,e.stopPropagation()}),n.find("input").blur(function(){t._hide_calendar_or_refocus(),t._blurs_to_ignore-=1}),t._blurs_to_ignore=0,n.bind("calendar_date_picker:date_selected",function(e,n){if(!t._in_manual_edit){var i=t.options.format_callback(n);i!==t.$field.val()&&(t.$field.val(i),t.$field.trigger("input"),t.options.calendar.time_text||(t._hide_calendar(),t._focus_next()))}}),n.find(".time input").bind("keydown",function(n){13===n.keyCode&&(e(this).blur(),t._hide_calendar())}),this.$calendar=n,n.fadeIn(),this.options.open_calendar_callback&&this.options.open_calendar_callback(),this.$calendar},_hide_calendar:function(){this.$calendar&&(this.$calendar.fadeOut(function(){e(this).remove()}),this.$calendar=void 0,this.options.close_calendar_callback&&this.options.close_calendar_callback())},_focus_next:function(){var e=this.$field.parents("form:eq(0)").find(":input"),t=e.index(this.$field);t>-1&&t+1<e.length&&e.eq(t+1).focus()},_reformat_value:function(){this.$field.val(this.options.format_callback(this.get_selected_datetime()))},_hide_calendar_or_refocus:function(){var e=this;this._blurs_to_ignore<=0?(this._hide_calendar(),this._reformat_value()):window.setTimeout(function(){e._in_time_field?e.$calendar&&e.$calendar.length&&e.$calendar.find("input").focus():e.$field.focus()})},_handle_edit:function(){this._in_manual_edit=!0,this.$calendar&&this.$calendar.trigger("calendar_date_picker:select_date",this.get_selected_datetime()),this._in_manual_edit=!1},get_selected_datetime:function(){var e=this.$field.val();return this.options.parse_callback(e)},_get_surrounding_element:function(){return e(this.options.surrounding_element?this.options.surrounding_element:"body")}})}(jQuery),function(){$(".field.search.location-search").livequery(function(){var e=$(this);e.on("livesearch_selector:select",function(){$(this).siblings("span.input-tip").hide(),$(this).parent().siblings("span.input-tip").hide(),$(this).trigger("shifted")}),e.on("livesearch_selector:unselect",function(){$(this).siblings("span.input-tip").show(),$(this).parent().siblings("span.input-tip").show(),$(this).trigger("shifted")}),e.livesearch_selector({url:e.data("searchUrl"),cancel_copy:"",process_data:function(){return{term:this.$elem.val()}},process_results:function(e){return _.map(e.locations,function(e){return[e.short_name,e.id]})}})}),$("input.date").livequery(function(){var e=$(this);e.datetime_picker_field({calendar:{allow_deselect:!1,previous_month_text:"<",next_month_text:">"},class_name:"absolute z_top",parse_callback:function(e){return""===e?void 0:e?moment(e,"MM/D/YYYY hh:mm a").toDate():new Date},format_callback:function(e){return e?moment(e).format("MM/D/YYYY hh:mm a"):""}})}),$("input.datetime").livequery(function(){var e=$(this),t=e.data("options")||{};e.datetime_picker_field($.extend(!0,{calendar:{allow_deselect:!1,previous_month_text:"<",next_month_text:">",time_text:I18n.t("onloads.initializers.forms.Time")},class_name:"absolute z_top",position:e.is(".position_calendar_below")?"bottom":"right",parse_callback:function(e){return""===e?void 0:e?moment(e,"MM/D/YYYY hh:mm a").toDate():new Date},format_callback:function(e){return e?moment(e).format("MM/D/YYYY hh:mm a"):""}},t))}),$(".js-calendar-picker").livequery(function(){var e,t=$(this),n=t.find('input[type="hidden"]'),i=t.find(".calendar"),r=i.data("options")||{};i.on("calendar_date_picker:date_selected",function(e,t){n.val(t?moment(t).format("YYYY-MM-DD HH:mm:ss Z"):""),n.trigger("change")}),""!==n.val()&&(e=moment(n.val(),"YYYY-MM-DD HH:mm:ss Z").toDate()),i.calendar_date_picker(_.extend({allow_deselect:!1,previous_month_text:"<",next_month_text:">",time_text:I18n.t("onloads.initializers.forms.Time"),selected_date:e},r)).data("calendar_date_picker")}),function(){var e=$("form ul.js-sortable, form ol.js-sortable, form tbody.js-sortable"),t=!1;e.find(".move").length&&(t=".move"),e.find(".move").click(function(e){e.preventDefault()}),e.sortable({containment:"document",axis:"y",handle:t,update:function(){e.find("input.position").each(function(e){$(this).val(e+1)})}}),e.each(function(){var e=$(this);e.closest("form").submit(function(){e.find("input.position").each(function(e){$(this).val(e+1)})})})}()}(),function(){$(function(){$(document).on("mouseover","li.menu-dropdown",function(){$(this).find(".menu-submenu").show()}),$(document).on("mouseout","li.menu-dropdown",function(){$(this).find(".menu-submenu").hide()}),$(document).on("click",".hit-list li",function(){var e=$(this).find("a.target");e.length&&(window.location=e.attr("href"))})})}(),function(){$(function(){function e(e){var t=new URI(e).domain();return""===t||t===new URI(window.location.href).domain()}$(document).ajaxSend(function(t,n,i){"GET"!==i.type&&e(i.url)&&n.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))}),$("form[data-ksrjson]").livequery(function(){var e=$([]);$(this).attr("data-target")?e=$($(this).attr("data-target")):$(this).closest(".ajax-container").length?e=$(this).closest(".ajax-container"):$(this).closest(".modal_dialog").length>0&&(e=$(this)),e.length>0&&KsrJSON.enable_form($(this),e)}),$(document).on("click","a[data-ksrjson]",function(e){var t=$(this),n=$(t.attr("data-target"));return e.preventDefault(),0===n.length&&(n=t.closest(".ajax-container")),0===n.length?!0:KsrJSON.get(t.attr("href"),t.attr("data-ksrmethod"),n,this)})})}(),function(e,t){"object"==typeof exports&&exports?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Mustache={})}(this,function(e){function t(e){return"function"==typeof e}function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e,t){return p.call(e,t)}function r(e){return!i(m,e)}function o(e){return String(e).replace(/[&<>"'\/]/g,function(e){return g[e]})}function a(t,i){function o(){if($&&!k)for(;g.length;)delete m[g.pop()];else g=[];$=!1,k=!1}function a(e){if("string"==typeof e&&(e=e.split(_,2)),!h(e)||2!==e.length)throw new Error("Invalid tags: "+e);u=new RegExp(n(e[0])+"\\s*"),d=new RegExp("\\s*"+n(e[1])),f=new RegExp("\\s*"+n("}"+e[1]))}if(!t)return[];var u,d,f,p=[],m=[],g=[],$=!1,k=!1;a(i||e.tags);for(var x,j,C,S,T,I,D=new l(t);!D.eos();){if(x=D.pos,C=D.scanUntil(u))for(var E=0,A=C.length;A>E;++E)S=C.charAt(E),r(S)?g.push(m.length):k=!0,m.push(["text",S,x,x+1]),x+=1,"\n"===S&&o();if(!D.scan(u))break;if($=!0,j=D.scan(w)||"name",D.scan(v),"="===j?(C=D.scanUntil(y),D.scan(y),D.scanUntil(d)):"{"===j?(C=D.scanUntil(f),D.scan(b),D.scanUntil(d),j="&"):C=D.scanUntil(d),!D.scan(d))throw new Error("Unclosed tag at "+D.pos);if(T=[j,C,x,D.pos],m.push(T),"#"===j||"^"===j)p.push(T);else if("/"===j){if(I=p.pop(),!I)throw new Error('Unopened section "'+C+'" at '+x);if(I[1]!==C)throw new Error('Unclosed section "'+I[1]+'" at '+x)}else"name"===j||"{"===j||"&"===j?k=!0:"="===j&&a(C)}if(I=p.pop())throw new Error('Unclosed section "'+I[1]+'" at '+D.pos);return c(s(m))}function s(e){for(var t,n,i=[],r=0,o=e.length;o>r;++r)t=e[r],t&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(i.push(t),n=t));return i}function c(e){for(var t,n,i=[],r=i,o=[],a=0,s=e.length;s>a;++a)switch(t=e[a],t[0]){case"#":case"^":r.push(t),o.push(t),r=t[4]=[];break;case"/":n=o.pop(),n[5]=t[2],r=o.length>0?o[o.length-1][4]:i;break;default:r.push(t)}return i}function l(e){this.string=e,this.tail=e,this.pos=0}function u(e,t){this.view=null==e?{}:e,this.cache={".":this.view},this.parent=t}function d(){this.cache={}}var f=Object.prototype.toString,h=Array.isArray||function(e){return"[object Array]"===f.call(e)},p=RegExp.prototype.test,m=/\S/,g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},v=/\s*/,_=/\s+/,y=/\s*=/,b=/\s*\}/,w=/#|\^|\/|>|\{|&|=|!/;l.prototype.eos=function(){return""===this.tail},l.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},l.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},u.prototype.push=function(e){return new u(e,this)},u.prototype.lookup=function(e){var n,i=this.cache;if(e in i)n=i[e];else{for(var r,o,a=this;a;){if(e.indexOf(".")>0)for(n=a.view,r=e.split("."),o=0;null!=n&&o<r.length;)n=n[r[o++]];else"object"==typeof a.view&&(n=a.view[e]);if(null!=n)break;a=a.parent}i[e]=n}return t(n)&&(n=n.call(this.view)),n},d.prototype.clearCache=function(){this.cache={}},d.prototype.parse=function(e,t){var n=this.cache,i=n[e];return null==i&&(i=n[e]=a(e,t)),i},d.prototype.render=function(e,t,n){var i=this.parse(e),r=t instanceof u?t:new u(t);return this.renderTokens(i,r,n,e)},d.prototype.renderTokens=function(n,i,r,o){function a(e){return u.render(e,i,r)}for(var s,c,l="",u=this,d=0,f=n.length;f>d;++d)switch(s=n[d],s[0]){case"#":if(c=i.lookup(s[1]),!c)continue;if(h(c))for(var p=0,m=c.length;m>p;++p)l+=this.renderTokens(s[4],i.push(c[p]),r,o);else if("object"==typeof c||"string"==typeof c)l+=this.renderTokens(s[4],i.push(c),r,o);else if(t(c)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");c=c.call(i.view,o.slice(s[3],s[5]),a),null!=c&&(l+=c)}else l+=this.renderTokens(s[4],i,r,o);break;case"^":c=i.lookup(s[1]),(!c||h(c)&&0===c.length)&&(l+=this.renderTokens(s[4],i,r,o));break;case">":if(!r)continue;c=t(r)?r(s[1]):r[s[1]],null!=c&&(l+=this.renderTokens(this.parse(c),i,r,c));break;case"&":c=i.lookup(s[1]),null!=c&&(l+=c);break;case"name":c=i.lookup(s[1]),null!=c&&(l+=e.escape(c));break;case"text":l+=s[1]}return l},e.name="mustache.js",e.version="1.0.0",e.tags=["{{","}}"];var $=new d;e.clearCache=function(){return $.clearCache()},e.parse=function(e,t){return $.parse(e,t)},e.render=function(e,t,n){return $.render(e,t,n)},e.to_html=function(n,i,r,o){var a=e.render(n,i,r);return t(o)?void o(a):a},e.escape=o,e.Scanner=l,e.Context=u,e.Writer=d}),function(){function e(e){var t=$("#template-"+e.replace(/\//g,"_"));if(!t.length)throw"Could not find template: "+e;return $.trim(t.html())}function t(t){var n={};return _.isString(t)&&(t=[t]),_.isArray(t)?(_.each(t,function(t){n[t]=e(t)}),n):void 0}function n(){return function(e,t){return t(I18n.t(e,this))}}function i(i,o,a){var s=r[i]||function(e){return e},c=e(i),l=t(a);return Mustache.render(c,$.extend({t:n},s(o)),l)}var r={};root.render=i,root.presenters=r}(),function(){$(function(){$(".render_mustache").livequery(function(){var e=$(this),t=_.extend(e.data("data"),e.data("extend")),n=t,i=e.data("partials")?e.data("partials").split(","):void 0,r=e.data("template");e.append(render(r,n,i))})})}(),instrument_function(function(){!function(e){e.support.fontFace=function(){var e,t,n=document,i=n.head||n.getElementsByTagName("head")[0]||docElement,r=n.createElement("style"),o=n.implementation||{hasFeature:function(){return!1}};return r.type="text/css",i.insertBefore(r,i.firstChild),e=r.sheet||r.styleSheet,(t=o.hasFeature("CSS2","")?function(t){if(!e||!t)return!1;var n=!1;try{e.insertRule(t,0),n=!/unknown/i.test(e.cssRules[0].cssText),e.deleteRule(e.cssRules.length-1)}catch(i){}return n}:function(t){return e&&t?(e.cssText=t,0!==e.cssText.length&&!/unknown/i.test(e.cssText)&&0===e.cssText.replace(/\r+|\n+/g,"").indexOf(t.split(" ")[0])):!1})('@font-face { font-family: "font"; src: "font.ttf"; }')}}(jQuery)})(this),function(){$(function(){var e=$(document).children();$.support.fontFace()||e.removeClass("fontface")})}(),$(function(){$.fn.aria_set_visible=function(){return $(this).attr("aria-expanded","true").attr("aria-hidden","false"),this},$.fn.aria_set_hidden=function(){return $(this).attr("aria-expanded","false").attr("aria-hidden","true"),this},$.fn.aria_find_focusable_items=function(){return $(this).find(":focusable")},$.fn.aria_focus_first_element=function(){var e,t=$(this).aria_find_focusable_items();return t.length&&(e=t[0],e.focus()),this},$.fn.aria_activate_keyboard_tabindex=function(){var e=$(this),t=e.aria_find_focusable_items();return t.length&&e.on("keydown.aria_keyboard",function(n){e.aria_focus_next(n,t)}),this},$.fn.aria_deactivate_keyboard_tabindex=function(){return $(this).unbind("keydown.aria_keyboard"),this},$.fn.aria_focus_next=function(e,t){var n=e.keyCode,i=n===KEY.UP||n===KEY.DOWN,r=$(":focus")[0],o=$.inArray(r,t);if(-1!==o&&("textarea"!==r.tagName.toLowerCase()||!i)){if(n===KEY.TAB||i){e.preventDefault();var a;a=$(e.shiftKey||n===KEY.UP?t[o-1]:t[o+1]),"undefined"!=typeof a&&a.focus()}return this}}}),function(){$(function(){function e(){var e=$("#admin_wrap");a.trigger("opened"),a.slideDown(function(){o.height(e.height())})}function t(){0===a.offsetParent().scrollTop()?a.is(":hidden")?e():a.slideUp():a.offsetParent().animate({scrollTop:0},"slow","easeInOutQuad",function(){a.is(":hidden")&&e()})}var n=$(".NS_layouts__admin_navigation"),i=$("a.open_panel",n),r=$("#admin_panel"),o=$("#admin-nav-prop"),a=$("#admin_panel_wrap");n.length&&(i.click(function(e){t(),e.preventDefault()}),$(window).on("keydown",function(e){if(e.which===KEY.SPACE&&!$(e.target).is(":input")&&!$(e.target).is("[contenteditable]"))if(a.is(":visible")){var n,i=r.find("details[open]").add("#running-board-wrap"),s=0;i.each(function(e){window.scrollY>=this.offsetTop-o.height()&&(s=e)}),n=i.get(s===i.length-1?0:s+1),n&&window.scrollTo(0,n.offsetTop-o.height()),e.preventDefault()}else t()}),"#admin_panel"===window.location.hash&&($.fx.off=!0,t("local"),$.fx.off=!1))})}(),function(){$(function(){var e=$(".js-mega-footer");e.length&&!function(){function t(e){e>9||(s.removeClass(o[a]),a+=1,a===o.length&&(a=0),s.addClass(o[a]),setTimeout(function(){t(e+1)},100))}var n=3,i=0,r=$(".js-mega-footer__content").width()/n,o=["icon-scissors-1","icon-scissors-2","icon-scissors-3"],a=0,s=$("span.scissors",e);s.click(function(){i+=1,t(0),s.animate({marginLeft:r*i},1e3,function(){i===n&&(s.hide(),e.height(e.height()),e.addClass("gone"),$("html").addClass("gone"),$(".js-mini-footer").hide(),e.find(".js-mega-footer__content").animate({marginTop:[e.height(),"easeInOutExpo"],opacity:0},1e3,function(){$(".js-mega-footer__newsletter-signup").fadeIn()}))})}),$(document).on("change",".js-change-language",function(){$(this).submit()})}()})}(),function(e){var t=".serialScroll",n=e.serialScroll=function(t){return e(window).serialScroll(t)};n.defaults={duration:1e3,axis:"x",event:"click",start:0,step:1,lock:!0,cycle:!0,constant:!0},e.fn.serialScroll=function(i){return this.each(function(){function r(e){e.data+=b,o(e,this)}function o(e,t){isNaN(t)&&(t=e.data);var n,i=e.type,r=f.exclude?c().slice(0,-f.exclude):c(),o=r.length-1,u=r[t],h=f.duration;if(i&&e.preventDefault(),w&&(s(),d=setTimeout(a,f.interval)),!u){if(n=0>t?0:o,b!==n)t=n;else{if(!f.cycle)return;t=o-n}u=r[t]}!u||f.lock&&v._scrollable().is(":animated")||i&&f.onBefore&&f.onBefore(e,u,v,c(),t)===!1||(f.stop&&v._scrollable().stop(!0),f.constant&&(h=Math.abs(h/p*(b-t))),v.scrollTo(u,h,f),l("notify",t))}function a(){l("next")}function s(){clearTimeout(d)}function c(){return e(y,_)}function l(e){v.trigger(e+t,[].slice.call(arguments,1))}function u(e){if(!isNaN(e))return e;for(var t,n=c();-1===(t=n.index(e))&&e!==_;)e=e.parentNode;return t}var d,f=e.extend({},n.defaults,i),h=f.event,p=f.step,m=f.lazy,g=f.target?this:document,v=e(f.target||this,g),_=v[0],y=f.items,b=f.start,w=f.interval,$=f.navigation;_&&(m||(y=c()),(f.force||w)&&o({},b),e(f.prev||[],g).bind(h,-p,r),e(f.next||[],g).bind(h,p,r),_.ssbound||v.bind("prev"+t,-p,r).bind("next"+t,p,r).bind("goto"+t,o),w&&v.bind("start"+t,function(){w||(s(),w=!0,a())}).bind("stop"+t,function(){s(),w=!1}),v.bind("notify"+t,function(e,t){var n=u(t);n>-1&&(b=n)}),_.ssbound=!0,f.jump&&(m?v:c()).bind(h,function(e){o(e,u(e.target))}),$&&($=e($,g).bind(h,function(e){e.data=Math.round(c().length/$.length)*$.index(this),o(e,this)})))})}}(jQuery),function(){$(function(){$("#learn_more_panel").livequery(function(){function e(){$("#learn_more_dialog_content").removeClass("page0 page1 page2 page3").addClass("page"+i)}function t(e,t){"undefined"!=typeof ga&&ga("send","event","Homepage Events",e,t)}var n=$(this),i=0;n.closest(".modal_dialog").attr("id","learn_more_modal"),n.serialScroll({items:".panel",lazy:!0,lock:!1,step:1,cycle:!1,duration:500,easing:"easeOutExpo"}),e(),n.on("click",".next",function(){n.trigger("next"),i+=1,t("Learn more modal next"),e()}),n.on("click",".prev",function(){n.trigger("prev"),i-=1,t("Learn more modal previous"),e()}),n.closest(".modal_dialog").on("modal_dialog:opened",function(){$.fx.off=!0,n.trigger("goto",[i]),$.fx.off=!1})})})}(),instrument_function(function(e){!function(){function t(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}}var n,i={};n=t(navigator.userAgent),n.browser&&(i[n.browser]=!0,i.version=n.version),i.chrome?i.webkit=!0:i.webkit&&(i.safari=!0),e.browser=i,"function"==typeof jQuery&&(jQuery.browser=i)}()})(this),function(e,t){var n="ui-effects-";e.effects={effect:{}},function(e,t){function n(e,t,n){var i=d[t.type]||{};return null==e?n||!t.def?null:t.def:(e=i.floor?~~e:parseFloat(e),isNaN(e)?t.def:i.mod?(e+i.mod)%i.mod:0>e?0:i.max<e?i.max:e)}function i(t){var n=l(),i=n._rgba=[];return t=t.toLowerCase(),p(c,function(e,r){var o,a=r.re.exec(t),s=a&&r.parse(a),c=r.space||"rgba";return s?(o=n[c](s),n[u[c].cache]=o[u[c].cache],i=n._rgba=o._rgba,!1):void 0}),i.length?("0,0,0,0"===i.join()&&e.extend(i,o.transparent),n):o[t]}function r(e,t,n){return n=(n+1)%1,1>6*n?e+(t-e)*n*6:1>2*n?t:2>3*n?e+(t-e)*(2/3-n)*6:e}var o,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",s=/^([\-+])=\s*(\d+\.?\d*)/,c=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,n,i,r){return new e.Color.fn.parse(t,n,i,r)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},f=l.support={},h=e("<p>")[0],p=e.each;h.style.cssText="background-color:rgba(1,1,1,.5)",f.rgba=h.style.backgroundColor.indexOf("rgba")>-1,p(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(r,a,s,c){if(r===t)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=e(r).css(a),a=t);var d=this,f=e.type(r),h=this._rgba=[];return a!==t&&(r=[r,a,s,c],f="array"),"string"===f?this.parse(i(r)||o._default):"array"===f?(p(u.rgba.props,function(e,t){h[t.idx]=n(r[t.idx],t)}),this):"object"===f?(r instanceof l?p(u,function(e,t){r[t.cache]&&(d[t.cache]=r[t.cache].slice())}):p(u,function(t,i){var o=i.cache;p(i.props,function(e,t){if(!d[o]&&i.to){if("alpha"===e||null==r[e])return;d[o]=i.to(d._rgba)}d[o][t.idx]=n(r[e],t,!0)}),d[o]&&e.inArray(null,d[o].slice(0,3))<0&&(d[o][3]=1,i.from&&(d._rgba=i.from(d[o])))}),this):void 0},is:function(e){var t=l(e),n=!0,i=this;return p(u,function(e,r){var o,a=t[r.cache];return a&&(o=i[r.cache]||r.to&&r.to(i._rgba)||[],p(r.props,function(e,t){return null!=a[t.idx]?n=a[t.idx]===o[t.idx]:void 0})),n}),n},_space:function(){var e=[],t=this;return p(u,function(n,i){t[i.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var i=l(e),r=i._space(),o=u[r],a=0===this.alpha()?l("transparent"):this,s=a[o.cache]||o.to(a._rgba),c=s.slice();return i=i[o.cache],p(o.props,function(e,r){var o=r.idx,a=s[o],l=i[o],u=d[r.type]||{};null!==l&&(null===a?c[o]=l:(u.mod&&(l-a>u.mod/2?a+=u.mod:a-l>u.mod/2&&(a-=u.mod)),c[o]=n((l-a)*t+a,r)))}),this[r](c)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),r=l(t)._rgba;return l(e.map(n,function(e,t){return(1-i)*r[t]+i*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),i=n.pop();return t&&n.push(~~(255*i)),"#"+e.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,i=e[0]/255,r=e[1]/255,o=e[2]/255,a=e[3],s=Math.max(i,r,o),c=Math.min(i,r,o),l=s-c,u=s+c,d=.5*u;return t=c===s?0:i===s?60*(r-o)/l+360:r===s?60*(o-i)/l+120:60*(i-r)/l+240,n=0===l?0:.5>=d?l/u:l/(2-u),[Math.round(t)%360,n,d,null==a?1:a]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],i=e[2],o=e[3],a=.5>=i?i*(1+n):i+n-i*n,s=2*i-a;return[Math.round(255*r(s,a,t+1/3)),Math.round(255*r(s,a,t)),Math.round(255*r(s,a,t-1/3)),o]},p(u,function(i,r){var o=r.props,a=r.cache,c=r.to,u=r.from;l.fn[i]=function(i){if(c&&!this[a]&&(this[a]=c(this._rgba)),i===t)return this[a].slice();var r,s=e.type(i),d="array"===s||"object"===s?i:arguments,f=this[a].slice();return p(o,function(e,t){var i=d["object"===s?e:t.idx];null==i&&(i=f[t.idx]),f[t.idx]=n(i,t)}),u?(r=l(u(f)),r[a]=f,r):l(f)},p(o,function(t,n){l.fn[t]||(l.fn[t]=function(r){var o,a=e.type(r),c="alpha"===t?this._hsla?"hsla":"rgba":i,l=this[c](),u=l[n.idx];return"undefined"===a?u:("function"===a&&(r=r.call(this,u),a=e.type(r)),null==r&&n.empty?this:("string"===a&&(o=s.exec(r),o&&(r=u+parseFloat(o[2])*("+"===o[1]?1:-1))),l[n.idx]=r,this[c](l)))})})}),l.hook=function(t){var n=t.split(" ");p(n,function(t,n){e.cssHooks[n]={set:function(t,r){var o,a,s="";if("transparent"!==r&&("string"!==e.type(r)||(o=i(r)))){if(r=l(o||r),!f.rgba&&1!==r._rgba[3]){for(a="backgroundColor"===n?t.parentNode:t;(""===s||"transparent"===s)&&a&&a.style;)try{s=e.css(a,"backgroundColor"),a=a.parentNode}catch(c){}r=r.blend(s&&"transparent"!==s?s:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(c){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=l(t.elem,n),t.end=l(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook(a),e.cssHooks.borderColor={expand:function(e){var t={};return p(["Top","Right","Bottom","Left"],function(n,i){t["border"+i+"Color"]=e}),t}},o=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function n(t){var n,i,r=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,o={};if(r&&r.length&&r[0]&&r[r[0]])for(i=r.length;i--;)n=r[i],"string"==typeof r[n]&&(o[e.camelCase(n)]=r[n]);else for(n in r)"string"==typeof r[n]&&(o[n]=r[n]);return o}function i(t,n){var i,r,a={};for(i in n)r=n[i],t[i]!==r&&(o[i]||(e.fx.step[i]||!isNaN(parseFloat(r)))&&(a[i]=r));return a}var r=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,n,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,o,a,s){var c=e.speed(o,a,s);return this.queue(function(){var o,a=e(this),s=a.attr("class")||"",l=c.children?a.find("*").addBack():a;l=l.map(function(){var t=e(this);return{el:t,start:n(this)}}),o=function(){e.each(r,function(e,n){t[n]&&a[n+"Class"](t[n])})},o(),l=l.map(function(){return this.end=n(this.el[0]),this.diff=i(this.start,this.end),this}),a.attr("class",s),l=l.map(function(){var t=this,n=e.Deferred(),i=e.extend({},c,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,i),n.promise()}),e.when.apply(e,l.get()).done(function(){o(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")
})}),c.complete.call(a[0])})})},e.fn.extend({addClass:function(t){return function(n,i,r,o){return i?e.effects.animateClass.call(this,{add:n},i,r,o):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,i,r,o){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},i,r,o):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(n){return function(i,r,o,a,s){return"boolean"==typeof r||r===t?o?e.effects.animateClass.call(this,r?{add:i}:{remove:i},o,a,s):n.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},r,o,a)}}(e.fn.toggleClass),switchClass:function(t,n,i,r,o){return e.effects.animateClass.call(this,{add:n,remove:t},i,r,o)}})}(),function(){function i(t,n,i,r){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(r=n,i=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(r=i,i=n,n={}),e.isFunction(i)&&(r=i,i=null),n&&e.extend(t,n),i=i||n.duration,t.duration=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,t.complete=r||n.complete,t}function r(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.10.3",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data(n+t[i],e[0].style[t[i]])},restore:function(e,i){var r,o;for(o=0;o<i.length;o++)null!==i[o]&&(r=e.data(n+i[o]),r===t&&(r=""),e.css(i[o],r))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(a){o=document.body}return t.wrap(i),(t[0]===o||e.contains(t[0],o))&&e(o).focus(),i=t.parent(),"static"===t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(r),i.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,i,r){return r=r||{},e.each(n,function(e,n){var o=t.cssUnit(n);o[0]>0&&(r[n]=o[0]*i+o[1])}),r}}),e.fn.extend({effect:function(){function t(t){function i(){e.isFunction(o)&&o.call(r[0]),e.isFunction(t)&&t()}var r=e(this),o=n.complete,s=n.mode;(r.is(":hidden")?"hide"===s:"show"===s)?(r[s](),i()):a.call(r[0],n,i)}var n=i.apply(this,arguments),r=n.mode,o=n.queue,a=e.effects.effect[n.effect];return e.fx.off||!a?r?this[r](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):o===!1?this.each(t):this.queue(o||"fx",t)},show:function(e){return function(t){if(r(t))return e.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(t){if(r(t))return e.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(t){if(r(t)||"boolean"==typeof t)return e.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])}),i}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:1-n(-2*e+2)/2}})}()}(jQuery),function(e){function t(e){return"object"==typeof e?e:{top:e,left:e}}var n=e.scrollTo=function(t,n,i){return e(window).scrollTo(t,n,i)};n.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1,limit:!0},n.window=function(){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,n=!t.nodeName||-1!=e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!n)return t;var i=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||"BackCompat"==i.compatMode?i.body:i.documentElement})},e.fn.scrollTo=function(i,r,o){return"object"==typeof r&&(o=r,r=0),"function"==typeof o&&(o={onAfter:o}),"max"==i&&(i=9e9),o=e.extend({},n.defaults,o),r=r||o.duration,o.queue=o.queue&&o.axis.length>1,o.queue&&(r/=2),o.offset=t(o.offset),o.over=t(o.over),this._scrollable().each(function(){function a(e){l.animate(d,r,o.easing,e&&function(){e.call(this,u,o)})}if(null!=i){var s,c=this,l=e(c),u=i,d={},f=l.is("html,body");switch(typeof u){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(u)){u=t(u);break}if(u=e(u,this),!u.length)return;case"object":(u.is||u.style)&&(s=(u=e(u)).offset())}e.each(o.axis.split(""),function(e,t){var i="x"==t?"Left":"Top",r=i.toLowerCase(),h="scroll"+i,p=c[h],m=n.max(c,t);if(s)d[h]=s[r]+(f?0:p-l.offset()[r]),o.margin&&(d[h]-=parseInt(u.css("margin"+i))||0,d[h]-=parseInt(u.css("border"+i+"Width"))||0),d[h]+=o.offset[r]||0,o.over[r]&&(d[h]+=u["x"==t?"width":"height"]()*o.over[r]);else{var g=u[r];d[h]=g.slice&&"%"==g.slice(-1)?parseFloat(g)/100*m:g}o.limit&&/^\d+$/.test(d[h])&&(d[h]=d[h]<=0?0:Math.min(d[h],m)),!e&&o.queue&&(p!=d[h]&&a(o.onAfterFirst),delete d[h])}),a(o.onAfter)}}).end()},n.max=function(t,n){var i="x"==n?"Width":"Height",r="scroll"+i;if(!e(t).is("html,body"))return t[r]-e(t)[i.toLowerCase()]();var o="client"+i,a=t.ownerDocument.documentElement,s=t.ownerDocument.body;return Math.max(a[r],s[r])-Math.min(a[o],s[o])}}(jQuery),function(){$(function(){function e(e,t,n,i){e.which===KEY.DOWN&&n.is(".selected")?(i.find(":tabbable:first").focus(),e.preventDefault()):e.which!==KEY.DOWN||n.is(".selected")?e.which===KEY.UP&&n.is(".selected")?(t.click(),e.preventDefault()):e.which===KEY.SPACE&&(t.click(),e.preventDefault()):(t.click(),e.preventDefault())}function t(e,t,n){var i,r,o=$(e.target),a=n.find(":tabbable"),s=a.length,c=a.index(o);e.which===KEY.LEFT||e.which===KEY.RIGHT?(r=e.which===KEY.LEFT?-1:1,i=n.find(".js-dropdown_group"),c=i.index(o.closest(i)),i.length>0&&-1!==c&&c+r>=0&&c+r<i.length&&(c+=r,i.eq(c).find(":tabbable:first").focus()),e.preventDefault()):e.which===KEY.UP&&0===c?(t.focus(),e.preventDefault()):e.which===KEY.DOWN&&c===s-1?e.preventDefault():(e.which===KEY.DOWN||e.which===KEY.UP)&&(r=e.which===KEY.DOWN?1:-1,a.eq(c+r).focus(),e.preventDefault())}function n(e){p=e,p?h.addClass("selecting"):(h.removeClass("selecting"),f.find(".js-livesearch-result").removeClass("selected"))}function i(){u.trigger("livesearch:cancel"),u.val(""),b.hide(),v.hide(),l.slideUp(function(){h.empty(),g.empty(),v.empty()}),$("body").removeClass("searching")}function r(){f.find(".js-livesearch-result").length<4?l.find(".arrow").addClass("disabled"):(l.find(".arrow").removeClass("disabled"),0===f.data("cur_page")&&f.find(".js-prev").addClass("disabled"),f.data("cur_page")===f.data("last_page")&&f.find(".js-next").addClass("disabled"))}function o(e){e.preventDefault(),c.removeClass("submitting-non-ajax")}function a(e){e?c.off("submit",o):c.on("submit",o)}if("undefined"!=typeof current_user&&current_user.on_change("name",function(e){$(".js-user-menu .user_context strong").text(e.name)}),$.support.localStorage()&&(localStorage.banner_country_projects_hide||($(".country_tout").removeClass("hidden"),localStorage.banner_country_projects_animated?($(".country_tout").css({"margin-top":"0px"}),$(".country_tout").addClass("expanded")):$(".country_tout").delay(1200).animate({marginTop:"0px"},400,"easeOutExpo",function(){$(this).addClass("expanded"),localStorage.banner_country_projects_animated=!0})),$(".country_tout .close").click(function(){try{localStorage.banner_country_projects_hide=!0}catch(e){}$(".country_tout").animate({"margin-top":"-40px"},400,"easeOutExpo"),$(".country_tout").removeClass("expanded"),$(".country_tout").addClass("hidden")}),$(".country_tout a").on("click",function(){try{localStorage.banner_country_projects_hide=!0}catch(e){}})),$("#js-user_menu_dropdown").attr("aria-expanded","false").attr("aria-hidden","true"),$("#js-user_nav_select").attr("aria-haspopup","true").attr("aria-expanded","false"),$(".js-tab-expand").click(function(e){e.preventDefault();var t=$(this),n=t.closest(".user-menu-tab"),i=!0;n.is("#menu-sub-me")?n.trigger("user_dropdown:open"):n.addClass("selected"),t.focus(),$("#js-user_menu_dropdown").attr("aria-expanded","true").attr("aria-hidden","false"),$("#js-user_nav_select").attr("aria-expanded","true"),n.find("span.count").remove(),$(document).on("click."+n.attr("id"),function(e){if(i)return void(i=!1);var t=$(e.target);t.parents(".dropdown-child").length||($(document).off("click."+n.attr("id")),n.removeClass("selected"),$("#js-user_menu_dropdown").attr("aria-expanded","false").attr("aria-hidden","true"),$("#js-user_nav_select").attr("aria-expanded","false"))})}),$(".js-user-menu > .dropdown").on("keydown",function(n){var i=$(n.target),r=$(n.currentTarget),o=$("#js-user_nav_select"),a=$("#js-user_menu_dropdown");n.which===KEY.ESC?(o.click(),n.preventDefault()):i.is(o)?e(n,o,r,a):i.closest(a).length&&t(n,o,a)}),!($.browser.msie&&$.browser.version<=6||$("body.touchable").length)){var s,c=$(".js-header-livesearch"),l=$(".js-livesearch-wrap"),u=c.find(".js-search-term"),d=".js-livesearch-container",f=$(d),h=$(".js-livesearch-results"),p=!1,m=u.siblings(".ksr-icon__search"),g=f.find(".header"),v=f.find("p.footer"),y=f.find(".js-close"),b=c.find(".ksr-icon__close");h.serialScroll({items:".js-livesearch-result",lazy:!0,lock:!1,step:4,cycle:!1,duration:500,easing:"easeOutExpo"}),l.on("click",".js-next:not(.disabled)",function(){h.trigger("next"),f.data("cur_page",f.data("cur_page")+1),r(),p&&n(!1)}),l.on("click",".js-prev:not(.disabled)",function(){h.trigger("prev"),f.data("cur_page",f.data("cur_page")-1),r(),p&&n(!1)}),s=u.livesearch({file_extension:"json",process_data:function(){return{term:$.trim(u.val()),ref:"nav_search"}}}).data("livesearch"),u.on("livesearch:searching",function(){m.removeClass("ksr-icon__search").addClass("loader-small"),$("body").addClass("searching"),a(!1)}),u.on("keypress cut paste input",function(e){13!==e.keyCode&&a(!1)}),u.on("livesearch:results livesearch:ajax_error",function(){m.removeClass("loader-small").addClass("ksr-icon__search"),a(!0)}),u.on("livesearch:results",function(e,t){if(!t.projects||!t.projects.length)return void $("body").removeClass("searching");var i=$("<ul></ul>");i.addClass("livesearch-list"),g.html(t.header),t.footer?(v.html(t.footer),v.show()):(v.empty(),v.hide()),_.each(t.projects,function(e){e.url_ref="nav_search",i.append('<li class="livesearch-result js-livesearch-result">'+render("projects/_baseball_card_tall",e)+"</li>")}),t.see_more&&i.append('<li class="livesearch-result livesearch-result-see-more js-livesearch-result js-see-more"><a href="'+t.see_more+'" class="js-see-more-link">'+I18n.t("onloads.views.layouts.navigation.See_all_results")+"</a></li>"),h.html(i),h.trigger("goto",[0]),f.data("cur_page",0),f.data("last_page",Math.floor((i.children().length-1)/4)),r(),n(!1),l.slideDown("fast"),$("body").addClass("searching")}),$(window).on("scroll",function(){l.is(":visible")&&$(window).scrollTop()>f.offset().top+f.height()&&i()}),$(document).click(function(e){$(e.target).closest(".js-livesearch-wrap").length||i()}),u.on("keypress cut paste input",function(){this.value?b.show():(b.hide(),i())}),b.on("click",function(){i(),u.focus()}),y.on("click",i),$(document).on("select",d+" .js-livesearch-result",function(){var e=$(this),t=f.find(".js-livesearch-result.selected").removeClass("selected");e.addClass("selected"),n(!0),e.index()>t.index()&&e.index()%4===0?h.trigger("goto",[e.index()]):e.index()<t.index()&&t.index()%4===0&&h.trigger("goto",[t.index()-4]),f.data("cur_page",Math.floor(e.index()/4)),r()}),u.on("keydown",function(e){var t,i=f.find("li.selected"),r=!!i.length;switch(e.keyCode){case KEY.UP:n(!1),e.preventDefault();break;case KEY.DOWN:r||f.find(".js-livesearch-result:first").trigger("select"),n(!0),e.preventDefault();break;case KEY.LEFT:if(!p)break;r?i.prev("li").trigger("select"):f.find(".js-livesearch-result:first").trigger("select"),e.preventDefault();break;case KEY.RIGHT:if(!p)break;r?i.next("li").trigger("select"):f.find(".js-livesearch-result:last").trigger("select"),e.preventDefault();break;case KEY.ENTER:if(!p)break;if(t=i.find("h2 strong a").attr("href"),i.is(".js-see-more")&&(t=i.find("a.js-see-more-link").attr("href")),!t)break;window.location=t,e.preventDefault();break;case KEY.ESC:n(!1),e.preventDefault()}})}})}(),function(){$(function(){function e(){r.find("#menu-me-backed").length&&r.find(".user-dropdown").addClass("backer"),r.find("#menu-me-created").length&&r.find(".user-dropdown").addClass("creator")}function t(t){var n=r.find("#menu-me-children");if($.support.localStorage())try{localStorage.user_dropdown_backer_creator_columns_html=t}catch(i){}n.children(".NS_layouts__user_dropdown_backer_creator_columns").remove(),n.append(t),e()}function n(){if($.support.localStorage()){var e=localStorage.user_dropdown_backer_creator_columns_html;e&&(t(e),o=!0)}}function i(e){a||(a=$.ajax({url:r.data("user_dropdown_backer_creator_columns_path"),type:"get",dataType:"html",beforeSend:function(e){e.setRequestHeader("Accept","text/javascript, */*")},success:function(e){t(e),o=!0},complete:function(){e&&e(),a=!1}}))}var r=$(".NS_layouts__user_dropdown"),o=!1,a=!1;n(),e(),$(".js-user-menu-tab").on("user_dropdown:open",function(){var e=$(this);o?e.addClass("selected"):i(function(){e.addClass("selected")})}),$(".js-user-menu-tab > a").one("click",function(){track("Account Menu Dropdown",{new_indicator_visible:$(this).find(".indicator").is(":visible")}),i()}),$(document).on("user_dropdown:refresh_from_remote",function(){i()}),$("body").is(".just_logged_out")&&localStorage&&delete localStorage.user_dropdown_backer_creator_columns_html})}(),function(e,t){e.rails!==t&&e.error("jquery-ujs has already been loaded!");var n,i=e(document);e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},fire:function(t,n,i){var r=e.Event(n);return t.trigger(r,i),r.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(i){var r,o,a,s,c,l,u,d;if(n.fire(i,"ajax:before")){if(s=i.data("cross-domain"),c=s===t?null:s,l=i.data("with-credentials")||null,u=i.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,i.is("form")){r=i.attr("method"),o=i.attr("action"),a=i.serializeArray();var f=i.data("ujs:submit-button");f&&(a.push(f),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(r=i.data("method"),o=i.data("url"),a=i.serialize(),i.data("params")&&(a=a+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(r=i.data("method")||"get",o=i.data("url"),a=i.serialize(),i.data("params")&&(a=a+"&"+i.data("params"))):(r=i.data("method"),o=n.href(i),a=i.data("params")||null);d={type:r||"GET",data:a,dataType:u,beforeSend:function(e,r){return r.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),n.fire(i,"ajax:beforeSend",[e,r])},success:function(e,t,n){i.trigger("ajax:success",[e,t,n])},complete:function(e,t){i.trigger("ajax:complete",[e,t])},error:function(e,t,n){i.trigger("ajax:error",[e,t,n])},crossDomain:c},l&&(d.xhrFields={withCredentials:l}),o&&(d.url=o);var h=n.ajax(d);return i.trigger("ajax:send",h),h}return!1},handleMethod:function(i){var r=n.href(i),o=i.data("method"),a=i.attr("target"),s=e("meta[name=csrf-token]").attr("content"),c=e("meta[name=csrf-param]").attr("content"),l=e('<form method="post" action="'+r+'"></form>'),u='<input name="_method" value="'+o+'" type="hidden" />';c!==t&&s!==t&&(u+='<input name="'+c+'" value="'+s+'" type="hidden" />'),a&&l.attr("target",a),l.hide().append(u).appendTo("body"),l.submit()},disableFormElements:function(t){t.find(n.disableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with",t[n]()),t[n](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(n.enableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[n](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t,i=e.data("confirm"),r=!1;return i?(n.fire(e,"confirm")&&(r=n.confirm(i),t=n.fire(e,"confirm:complete",[r])),r&&t):!0},blankInputs:function(t,n,i){var r,o,a=e(),s=n||"input,textarea",c=t.find(s);return c.each(function(){if(r=e(this),o=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):r.val(),!o==!i){if(r.is("input[type=radio]")&&c.filter('input[type=radio]:checked[name="'+r.attr("name")+'"]').length)return!0;a=a.add(r)}}),a.length?a:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return n.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},n.fire(i,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,i){e.crossDomain||n.CSRFProtection(i)}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),i.delegate(n.linkClickSelector,"click.rails",function(i){var r=e(this),o=r.data("method"),a=r.data("params");if(!n.allowAction(r))return n.stopEverything(i);if(r.is(n.linkDisableSelector)&&n.disableElement(r),r.data("remote")!==t){if(!(!i.metaKey&&!i.ctrlKey||o&&"GET"!==o||a))return!0;var s=n.handleRemote(r);return s===!1?n.enableElement(r):s.error(function(){n.enableElement(r)}),!1}return r.data("method")?(n.handleMethod(r),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(t){var i=e(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(t)}),i.delegate(n.inputChangeSelector,"change.rails",function(t){var i=e(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(t)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var r=e(this),o=r.data("remote")!==t,a=n.blankInputs(r,n.requiredInputSelector),s=n.nonBlankInputs(r,n.fileInputSelector);if(!n.allowAction(r))return n.stopEverything(i);if(a&&r.attr("novalidate")==t&&n.fire(r,"ajax:aborted:required",[a]))return n.stopEverything(i);if(o){if(s){setTimeout(function(){n.disableFormElements(r)},13);var c=n.fire(r,"ajax:aborted:file",[s]);return c||setTimeout(function(){n.enableFormElements(r)},13),c}return n.handleRemote(r),!1}setTimeout(function(){n.disableFormElements(r)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(t){var i=e(this);if(!n.allowAction(i))return n.stopEverything(t);var r=i.attr("name"),o=r?{name:r,value:i.val()}:null;i.closest("form").data("ujs:submit-button",o)}),i.delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&n.disableFormElements(e(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&n.enableFormElements(e(this))}),e(function(){var t=e("meta[name=csrf-token]").attr("content"),n=e("meta[name=csrf-param]").attr("content");e('form input[name="'+n+'"]').val(t)}))}(jQuery),function(e){function t(e,t){return"function"==typeof e?e.call(t):e}function n(e){for(;e=e.parentNode;)if(e==document)return!0;return!1}function i(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName}function r(){return"tipsyuid"+a++}function o(t,n){this.$element=e(t),this.options=n,this.enabled=!0,this.fixTitle()}var a=0;o.prototype={show:function(){if(n(this.$element[0])&&(!i(this.$element)||this.$element.is(":visible"))){var o;if(this.enabled&&(o=this.getTitle())){var a=this.tip();a.find(".tipsy-inner"+this.options.theme)[this.options.html?"html":"text"](o),a[0].className="tipsy"+this.options.theme,this.options.className&&a.addClass(t(this.options.className,this.$element[0])),a.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var s=e.extend({},this.$element.offset());s=this.$element.parents("svg").size()>0?e.extend(s,this.$element[0].getBBox()):e.extend(s,{width:this.$element[0].offsetWidth||0,height:this.$element[0].offsetHeight||0});var c,l=a[0].offsetWidth,u=a[0].offsetHeight,d=t(this.options.gravity,this.$element[0]);switch(d.charAt(0)){case"n":c={top:s.top+s.height+this.options.offset,left:s.left+s.width/2-l/2};break;case"s":c={top:s.top-u-this.options.offset,left:s.left+s.width/2-l/2};break;case"e":c={top:s.top+s.height/2-u/2,left:s.left-l-this.options.offset};break;case"w":c={top:s.top+s.height/2-u/2,left:s.left+s.width+this.options.offset}}if(2==d.length&&(c.left="w"==d.charAt(1)?s.left+s.width/2-15:s.left+s.width/2-l+15),a.css(c).addClass("tipsy-"+d+this.options.theme),a.find(".tipsy-arrow"+this.options.theme)[0].className="tipsy-arrow"+this.options.theme+" tipsy-arrow-"+d.charAt(0)+this.options.theme,this.options.fade?(this.options.shadow&&e(".tipsy-inner").css({"box-shadow":"0px 0px "+this.options.shadowBlur+"px "+this.options.shadowSpread+"px rgba(0, 0, 0, "+this.options.shadowOpacity+")","-webkit-box-shadow":"0px 0px "+this.options.shadowBlur+"px "+this.options.shadowSpread+"px rgba(0, 0, 0, "+this.options.shadowOpacity+")"}),a.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity})):a.css({visibility:"visible",opacity:this.options.opacity}),this.options.aria){var f=r();a.attr("id",f),this.$element.attr("aria-describedby",f)}}}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){e(this).remove()}):this.tip().remove(),this.options.aria&&this.$element.removeAttr("aria-describedby")},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("original-title"))&&e.attr("original-title",e.attr("title")||"").removeAttr("title")},getTitle:function(){var e,t=this.$element,n=this.options;return this.fixTitle(),"string"==typeof n.title?e=t.attr("title"==n.title?"original-title":n.title):"function"==typeof n.title&&(e=n.title.call(t[0])),e=(""+e).replace(/(^\s*|\s*$)/,""),e||n.fallback},tip:function(){return this.$tip||(this.$tip=e('<div class="tipsy'+this.options.theme+'"></div>').html('<div class="tipsy-arrow'+this.options.theme+'"></div><div class="tipsy-inner'+this.options.theme+'"></div>').attr("role","tooltip"),this.$tip.data("tipsy-pointee",this.$element[0])),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},e.fn.tipsy=function(t){function i(n){var i=e.data(n,"tipsy");return i||(i=new o(n,e.fn.tipsy.elementOptions(n,t)),e.data(n,"tipsy",i)),i}function r(){if(e.fn.tipsy.enabled===!0){var r=i(this);r.hoverState="in",0===t.delayIn?r.show():(r.fixTitle(),setTimeout(function(){"in"==r.hoverState&&n(r.$element)&&r.show()},t.delayIn))}}function a(){var e=i(this);e.hoverState="out",0===t.delayOut?e.hide():setTimeout(function(){"out"!=e.hoverState&&e.$element&&e.$element.is(":visible")||e.hide()},t.delayOut)}if(e.fn.tipsy.enable(),t===!0)return this.data("tipsy");if("string"==typeof t){var s=this.data("tipsy");return s&&s[t](),this}if(t=e.extend({},e.fn.tipsy.defaults,t),t.theme=t.theme&&""!==t.theme?"-"+t.theme:"",t.live||this.each(function(){i(this)}),"manual"!=t.trigger){var c="hover"==t.trigger?"mouseenter mouseover":"focus",l="hover"==t.trigger?"mouseleave mouseout":"blur";if(t.live&&t.live!==!0)e(this).on(c,t.live,r),e(this).on(l,t.live,a);else{if(t.live&&!e.live)throw"Since jQuery 1.9, pass selector as live argument. eg. $(document).tipsy({live: 'a.live'});";var u=t.live?"live":"bind";this[u](c,r)[u](l,a)}}return this},e.fn.tipsy.defaults={aria:!1,className:null,delayIn:0,delayOut:0,fade:!1,shadow:!1,shadowBlur:8,shadowOpacity:1,shadowSpread:0,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover",theme:""},e.fn.tipsy.revalidate=function(){e(".tipsy").each(function(){var t=e.data(this,"tipsy-pointee");t&&n(t)||e(this).remove()})},e.fn.tipsy.enable=function(){e.fn.tipsy.enabled=!0},e.fn.tipsy.disable=function(){e.fn.tipsy.enabled=!1},e.fn.tipsy.elementOptions=function(t,n){return e.metadata?e.extend({},n,e(t).metadata()):n},e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n"},e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w"},e.fn.tipsy.autoNWNE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"ne":"nw"},e.fn.tipsy.autoSWSE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"se":"sw"},e.fn.tipsy.autoBounds=function(t,n,i){return function(){var r={ns:i[0],ew:i.length>1?i[1]:!1},o=e(document).scrollTop()+t,a=e(document).scrollLeft()+n,s=e(this);return s.offset().top<o&&(r.ns="n"),s.offset().left<a&&(r.ew="w"),e(window).width()+e(document).scrollLeft()-s.offset().left<n&&(r.ew="e"),e(window).height()+e(document).scrollTop()-s.offset().top<t&&(r.ns="s"),r.ns+(r.ew?r.ew:"")}}}(jQuery),function(e){e.color={},e.color.make=function(t,n,i,r){var o={};return o.r=t||0,o.g=n||0,o.b=i||0,o.a=null!=r?r:1,o.add=function(e,t){for(var n=0;n<e.length;++n)o[e.charAt(n)]+=t;return o.normalize()},o.scale=function(e,t){for(var n=0;n<e.length;++n)o[e.charAt(n)]*=t;return o.normalize()},o.toString=function(){return o.a>=1?"rgb("+[o.r,o.g,o.b].join(",")+")":"rgba("+[o.r,o.g,o.b,o.a].join(",")+")"},o.normalize=function(){function e(e,t,n){return e>t?e:t>n?n:t}return o.r=e(0,parseInt(o.r),255),o.g=e(0,parseInt(o.g),255),o.b=e(0,parseInt(o.b),255),o.a=e(0,o.a,1),o},o.clone=function(){return e.color.make(o.r,o.b,o.g,o.a)},o.normalize()},e.color.extract=function(t,n){var i;do{if(i=t.css(n).toLowerCase(),""!=i&&"transparent"!=i)break;t=t.parent()}while(!e.nodeName(t.get(0),"body"));return"rgba(0, 0, 0, 0)"==i&&(i="transparent"),e.color.parse(i)},e.color.parse=function(n){var i,r=e.color.make;if(i=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(n))return r(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10));if(i=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n))return r(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),parseFloat(i[4]));if(i=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(n))return r(2.55*parseFloat(i[1]),2.55*parseFloat(i[2]),2.55*parseFloat(i[3]));if(i=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n))return r(2.55*parseFloat(i[1]),2.55*parseFloat(i[2]),2.55*parseFloat(i[3]),parseFloat(i[4]));if(i=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(n))return r(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16));if(i=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(n))return r(parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16));var o=e.trim(n).toLowerCase();return"transparent"==o?r(255,255,255,0):(i=t[o]||[0,0,0],r(i[0],i[1],i[2]))};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(e){function t(t,n){var i=n.children("."+t)[0];if(null==i&&(i=document.createElement("canvas"),i.className=t,e(i).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(n),!i.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");i=window.G_vmlCanvasManager.initElement(i)}this.element=i;var r=this.context=i.getContext("2d"),o=window.devicePixelRatio||1,a=r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;this.pixelRatio=o/a,this.resize(n.width(),n.height()),this.textContainer=null,this.text={},this._textCache={}}function n(n,r,o,a){function s(e,t){t=[gt].concat(t);for(var n=0;n<e.length;++n)e[n].apply(this,t)}function c(){for(var n={Canvas:t},i=0;i<a.length;++i){var r=a[i];r.init(gt,n),r.options&&e.extend(!0,rt,r.options)}}function l(t){e.extend(!0,rt,t),t&&t.colors&&(rt.colors=t.colors),null==rt.xaxis.color&&(rt.xaxis.color=e.color.parse(rt.grid.color).scale("a",.22).toString()),null==rt.yaxis.color&&(rt.yaxis.color=e.color.parse(rt.grid.color).scale("a",.22).toString()),null==rt.xaxis.tickColor&&(rt.xaxis.tickColor=rt.grid.tickColor||rt.xaxis.color),null==rt.yaxis.tickColor&&(rt.yaxis.tickColor=rt.grid.tickColor||rt.yaxis.color),null==rt.grid.borderColor&&(rt.grid.borderColor=rt.grid.color),null==rt.grid.tickColor&&(rt.grid.tickColor=e.color.parse(rt.grid.color).scale("a",.22).toString());var i,r,o,a={style:n.css("font-style"),size:Math.round(.8*(+n.css("font-size").replace("px","")||13)),variant:n.css("font-variant"),weight:n.css("font-weight"),family:n.css("font-family")};for(a.lineHeight=1.15*a.size,o=rt.xaxes.length||1,i=0;o>i;++i)r=rt.xaxes[i],r&&!r.tickColor&&(r.tickColor=r.color),r=e.extend(!0,{},rt.xaxis,r),rt.xaxes[i]=r,r.font&&(r.font=e.extend({},a,r.font),r.font.color||(r.font.color=r.color));for(o=rt.yaxes.length||1,i=0;o>i;++i)r=rt.yaxes[i],r&&!r.tickColor&&(r.tickColor=r.color),r=e.extend(!0,{},rt.yaxis,r),rt.yaxes[i]=r,r.font&&(r.font=e.extend({},a,r.font),r.font.color||(r.font.color=r.color));for(rt.xaxis.noTicks&&null==rt.xaxis.ticks&&(rt.xaxis.ticks=rt.xaxis.noTicks),rt.yaxis.noTicks&&null==rt.yaxis.ticks&&(rt.yaxis.ticks=rt.yaxis.noTicks),rt.x2axis&&(rt.xaxes[1]=e.extend(!0,{},rt.xaxis,rt.x2axis),rt.xaxes[1].position="top"),rt.y2axis&&(rt.yaxes[1]=e.extend(!0,{},rt.yaxis,rt.y2axis),rt.yaxes[1].position="right"),rt.grid.coloredAreas&&(rt.grid.markings=rt.grid.coloredAreas),rt.grid.coloredAreasColor&&(rt.grid.markingsColor=rt.grid.coloredAreasColor),rt.lines&&e.extend(!0,rt.series.lines,rt.lines),rt.points&&e.extend(!0,rt.series.points,rt.points),rt.bars&&e.extend(!0,rt.series.bars,rt.bars),null!=rt.shadowSize&&(rt.series.shadowSize=rt.shadowSize),null!=rt.highlightColor&&(rt.series.highlightColor=rt.highlightColor),i=0;i<rt.xaxes.length;++i)g(ut,i+1).options=rt.xaxes[i];
for(i=0;i<rt.yaxes.length;++i)g(dt,i+1).options=rt.yaxes[i];for(var c in mt)rt.hooks[c]&&rt.hooks[c].length&&(mt[c]=mt[c].concat(rt.hooks[c]));s(mt.processOptions,[rt])}function u(e){it=d(e),v(),_()}function d(t){for(var n=[],i=0;i<t.length;++i){var r=e.extend(!0,{},rt.series);null!=t[i].data?(r.data=t[i].data,delete t[i].data,e.extend(!0,r,t[i]),t[i].data=r.data):r.data=t[i],n.push(r)}return n}function f(e,t){var n=e[t+"axis"];return"object"==typeof n&&(n=n.n),"number"!=typeof n&&(n=1),n}function h(){return e.grep(ut.concat(dt),function(e){return e})}function p(e){var t,n,i={};for(t=0;t<ut.length;++t)n=ut[t],n&&n.used&&(i["x"+n.n]=n.c2p(e.left));for(t=0;t<dt.length;++t)n=dt[t],n&&n.used&&(i["y"+n.n]=n.c2p(e.top));return void 0!==i.x1&&(i.x=i.x1),void 0!==i.y1&&(i.y=i.y1),i}function m(e){var t,n,i,r={};for(t=0;t<ut.length;++t)if(n=ut[t],n&&n.used&&(i="x"+n.n,null==e[i]&&1==n.n&&(i="x"),null!=e[i])){r.left=n.p2c(e[i]);break}for(t=0;t<dt.length;++t)if(n=dt[t],n&&n.used&&(i="y"+n.n,null==e[i]&&1==n.n&&(i="y"),null!=e[i])){r.top=n.p2c(e[i]);break}return r}function g(t,n){return t[n-1]||(t[n-1]={n:n,direction:t==ut?"x":"y",options:e.extend(!0,{},t==ut?rt.xaxis:rt.yaxis)}),t[n-1]}function v(){var t,n=it.length,i=-1;for(t=0;t<it.length;++t){var r=it[t].color;null!=r&&(n--,"number"==typeof r&&r>i&&(i=r))}i>=n&&(n=i+1);var o,a=[],s=rt.colors,c=s.length,l=0;for(t=0;n>t;t++)o=e.color.parse(s[t%c]||"#666"),t%c==0&&t&&(l=l>=0?.5>l?-l-.2:0:-l),a[t]=o.scale("rgb",1+l);var u,d=0;for(t=0;t<it.length;++t){if(u=it[t],null==u.color?(u.color=a[d].toString(),++d):"number"==typeof u.color&&(u.color=a[u.color].toString()),null==u.lines.show){var h,p=!0;for(h in u)if(u[h]&&u[h].show){p=!1;break}p&&(u.lines.show=!0)}null==u.lines.zero&&(u.lines.zero=!!u.lines.fill),u.xaxis=g(ut,f(u,"x")),u.yaxis=g(dt,f(u,"y"))}}function _(){function t(e,t,n){t<e.datamin&&t!=-_&&(e.datamin=t),n>e.datamax&&n!=_&&(e.datamax=n)}var n,i,r,o,a,c,l,u,d,f,p,m,g=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,_=Number.MAX_VALUE;for(e.each(h(),function(e,t){t.datamin=g,t.datamax=v,t.used=!1}),n=0;n<it.length;++n)a=it[n],a.datapoints={points:[]},s(mt.processRawData,[a,a.data,a.datapoints]);for(n=0;n<it.length;++n){if(a=it[n],p=a.data,m=a.datapoints.format,!m){if(m=[],m.push({x:!0,number:!0,required:!0}),m.push({y:!0,number:!0,required:!0}),a.bars.show||a.lines.show&&a.lines.fill){var y=!!(a.bars.show&&a.bars.zero||a.lines.show&&a.lines.zero);m.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:y}),a.bars.horizontal&&(delete m[m.length-1].y,m[m.length-1].x=!0)}a.datapoints.format=m}if(null==a.datapoints.pointsize){a.datapoints.pointsize=m.length,l=a.datapoints.pointsize,c=a.datapoints.points;var b=a.lines.show&&a.lines.steps;for(a.xaxis.used=a.yaxis.used=!0,i=r=0;i<p.length;++i,r+=l){f=p[i];var w=null==f;if(!w)for(o=0;l>o;++o)u=f[o],d=m[o],d&&(d.number&&null!=u&&(u=+u,isNaN(u)?u=null:1/0==u?u=_:u==-1/0&&(u=-_)),null==u&&(d.required&&(w=!0),null!=d.defaultValue&&(u=d.defaultValue))),c[r+o]=u;if(w)for(o=0;l>o;++o)u=c[r+o],null!=u&&(d=m[o],d.autoscale&&(d.x&&t(a.xaxis,u,u),d.y&&t(a.yaxis,u,u))),c[r+o]=null;else if(b&&r>0&&null!=c[r-l]&&c[r-l]!=c[r]&&c[r-l+1]!=c[r+1]){for(o=0;l>o;++o)c[r+l+o]=c[r+o];c[r+1]=c[r-l+1],r+=l}}}}for(n=0;n<it.length;++n)a=it[n],s(mt.processDatapoints,[a,a.datapoints]);for(n=0;n<it.length;++n){a=it[n],c=a.datapoints.points,l=a.datapoints.pointsize,m=a.datapoints.format;var $=g,k=g,x=v,j=v;for(i=0;i<c.length;i+=l)if(null!=c[i])for(o=0;l>o;++o)u=c[i+o],d=m[o],d&&d.autoscale!==!1&&u!=_&&u!=-_&&(d.x&&($>u&&($=u),u>x&&(x=u)),d.y&&(k>u&&(k=u),u>j&&(j=u)));if(a.bars.show){var C;switch(a.bars.align){case"left":C=0;break;case"right":C=-a.bars.barWidth;break;case"center":C=-a.bars.barWidth/2;break;default:throw new Error("Invalid bar alignment: "+a.bars.align)}a.bars.horizontal?(k+=C,j+=C+a.bars.barWidth):($+=C,x+=C+a.bars.barWidth)}t(a.xaxis,$,x),t(a.yaxis,k,j)}e.each(h(),function(e,t){t.datamin==g&&(t.datamin=null),t.datamax==v&&(t.datamax=null)})}function y(){n.css("padding",0).children(":not(.flot-base,.flot-overlay)").remove(),"static"==n.css("position")&&n.css("position","relative"),ot=new t("flot-base",n),at=new t("flot-overlay",n),ct=ot.context,lt=at.context,st=e(at.element).unbind();var i=n.data("plot");i&&(i.shutdown(),at.clear()),n.data("plot",gt)}function b(){rt.grid.hoverable&&(st.mousemove(W),st.bind("mouseleave",U)),rt.grid.clickable&&st.click(Q),s(mt.bindEvents,[st])}function w(){_t&&clearTimeout(_t),st.unbind("mousemove",W),st.unbind("mouseleave",U),st.unbind("click",Q),s(mt.shutdown,[st])}function $(e){function t(e){return e}var n,i,r=e.options.transform||t,o=e.options.inverseTransform;"x"==e.direction?(n=e.scale=ht/Math.abs(r(e.max)-r(e.min)),i=Math.min(r(e.max),r(e.min))):(n=e.scale=pt/Math.abs(r(e.max)-r(e.min)),n=-n,i=Math.max(r(e.max),r(e.min))),e.p2c=r==t?function(e){return(e-i)*n}:function(e){return(r(e)-i)*n},e.c2p=o?function(e){return o(i+e/n)}:function(e){return i+e/n}}function k(e){var t=e.options,n=e.ticks||[],i=t.labelWidth||0,r=t.labelHeight||0,o=i||"x"==e.direction?Math.floor(ot.width/(n.length||1)):null;legacyStyles=e.direction+"Axis "+e.direction+e.n+"Axis",layer="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+legacyStyles,font=t.font||"flot-tick-label tickLabel";for(var a=0;a<n.length;++a){var s=n[a];if(s.label){var c=ot.getTextInfo(layer,s.label,font,null,o);i=Math.max(i,c.width),r=Math.max(r,c.height)}}e.labelWidth=t.labelWidth||i,e.labelHeight=t.labelHeight||r}function x(t){var n,i=t.labelWidth,r=t.labelHeight,o=t.options.position,a=t.options.tickLength,s=rt.grid.axisMargin,c=rt.grid.labelMargin,l="x"==t.direction?ut:dt,u=e.grep(l,function(e){return e&&e.options.position==o&&e.reserveSpace});if(e.inArray(t,u)==u.length-1&&(s=0),null==a){var d=e.grep(l,function(e){return e&&e.reserveSpace});n=0==e.inArray(t,d),a=n?"full":5}isNaN(+a)||(c+=+a),"x"==t.direction?(r+=c,"bottom"==o?(ft.bottom+=r+s,t.box={top:ot.height-ft.bottom,height:r}):(t.box={top:ft.top+s,height:r},ft.top+=r+s)):(i+=c,"left"==o?(t.box={left:ft.left+s,width:i},ft.left+=i+s):(ft.right+=i+s,t.box={left:ot.width-ft.right,width:i})),t.position=o,t.tickLength=a,t.box.padding=c,t.innermost=n}function j(e){"x"==e.direction?(e.box.left=ft.left-e.labelWidth/2,e.box.width=ot.width-ft.left-ft.right+e.labelWidth):(e.box.top=ft.top-e.labelHeight/2,e.box.height=ot.height-ft.bottom-ft.top+e.labelHeight)}function C(){var t,n=rt.grid.minBorderMargin,i={x:0,y:0};if(null==n)for(n=0,t=0;t<it.length;++t)n=Math.max(n,2*(it[t].points.radius+it[t].points.lineWidth/2));i.x=i.y=Math.ceil(n),e.each(h(),function(e,t){var n=t.direction;t.reserveSpace&&(i[n]=Math.ceil(Math.max(i[n],("x"==n?t.labelWidth:t.labelHeight)/2)))}),ft.left=Math.max(i.x,ft.left),ft.right=Math.max(i.x,ft.right),ft.top=Math.max(i.y,ft.top),ft.bottom=Math.max(i.y,ft.bottom)}function S(){var t,n=h(),i=rt.grid.show;for(var r in ft){var o=rt.grid.margin||0;ft[r]="number"==typeof o?o:o[r]||0}s(mt.processOffset,[ft]);for(var r in ft)ft[r]+="object"==typeof rt.grid.borderWidth?i?rt.grid.borderWidth[r]:0:i?rt.grid.borderWidth:0;if(e.each(n,function(e,t){t.show=t.options.show,null==t.show&&(t.show=t.used),t.reserveSpace=t.show||t.options.reserveSpace,T(t)}),i){var a=e.grep(n,function(e){return e.reserveSpace});for(e.each(a,function(e,t){I(t),D(t),E(t,t.ticks),k(t)}),t=a.length-1;t>=0;--t)x(a[t]);C(),e.each(a,function(e,t){j(t)})}ht=ot.width-ft.left-ft.right,pt=ot.height-ft.bottom-ft.top,e.each(n,function(e,t){$(t)}),i&&O(),Y()}function T(e){var t=e.options,n=+(null!=t.min?t.min:e.datamin),i=+(null!=t.max?t.max:e.datamax),r=i-n;if(0==r){var o=0==i?1:.01;null==t.min&&(n-=o),(null==t.max||null!=t.min)&&(i+=o)}else{var a=t.autoscaleMargin;null!=a&&(null==t.min&&(n-=r*a,0>n&&null!=e.datamin&&e.datamin>=0&&(n=0)),null==t.max&&(i+=r*a,i>0&&null!=e.datamax&&e.datamax<=0&&(i=0)))}e.min=n,e.max=i}function I(t){var n,r=t.options;n="number"==typeof r.ticks&&r.ticks>0?r.ticks:.3*Math.sqrt("x"==t.direction?ot.width:ot.height);var o=(t.max-t.min)/n,a=-Math.floor(Math.log(o)/Math.LN10),s=r.tickDecimals;null!=s&&a>s&&(a=s);var c,l=Math.pow(10,-a),u=o/l;if(1.5>u?c=1:3>u?(c=2,u>2.25&&(null==s||s>=a+1)&&(c=2.5,++a)):c=7.5>u?5:10,c*=l,null!=r.minTickSize&&c<r.minTickSize&&(c=r.minTickSize),t.delta=o,t.tickDecimals=Math.max(0,null!=s?s:a),t.tickSize=r.tickSize||c,"time"==r.mode&&!t.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(t.tickGenerator||(t.tickGenerator=function(e){var t,n=[],r=i(e.min,e.tickSize),o=0,a=Number.NaN;do t=a,a=r+o*e.tickSize,n.push(a),++o;while(a<e.max&&a!=t);return n},t.tickFormatter=function(e,t){var n=t.tickDecimals?Math.pow(10,t.tickDecimals):1,i=""+Math.round(e*n)/n;if(null!=t.tickDecimals){var r=i.indexOf("."),o=-1==r?0:i.length-r-1;if(o<t.tickDecimals)return(o?i:i+".")+(""+n).substr(1,t.tickDecimals-o)}return i}),e.isFunction(r.tickFormatter)&&(t.tickFormatter=function(e,t){return""+r.tickFormatter(e,t)}),null!=r.alignTicksWithAxis){var d=("x"==t.direction?ut:dt)[r.alignTicksWithAxis-1];if(d&&d.used&&d!=t){var f=t.tickGenerator(t);if(f.length>0&&(null==r.min&&(t.min=Math.min(t.min,f[0])),null==r.max&&f.length>1&&(t.max=Math.max(t.max,f[f.length-1]))),t.tickGenerator=function(e){var t,n,i=[];for(n=0;n<d.ticks.length;++n)t=(d.ticks[n].v-d.min)/(d.max-d.min),t=e.min+t*(e.max-e.min),i.push(t);return i},!t.mode&&null==r.tickDecimals){var h=Math.max(0,-Math.floor(Math.log(t.delta)/Math.LN10)+1),p=t.tickGenerator(t);p.length>1&&/\..*0$/.test((p[1]-p[0]).toFixed(h))||(t.tickDecimals=h)}}}}function D(t){var n=t.options.ticks,i=[];null==n||"number"==typeof n&&n>0?i=t.tickGenerator(t):n&&(i=e.isFunction(n)?n(t):n);var r,o;for(t.ticks=[],r=0;r<i.length;++r){var a=null,s=i[r];"object"==typeof s?(o=+s[0],s.length>1&&(a=s[1])):o=+s,null==a&&(a=t.tickFormatter(o,t)),isNaN(o)||t.ticks.push({v:o,label:a})}}function E(e,t){e.options.autoscaleMargin&&t.length>0&&(null==e.options.min&&(e.min=Math.min(e.min,t[0].v)),null==e.options.max&&t.length>1&&(e.max=Math.max(e.max,t[t.length-1].v)))}function A(){ot.clear(),s(mt.drawBackground,[ct]);var e=rt.grid;e.show&&e.backgroundColor&&N(),e.show&&!e.aboveData&&M();for(var t=0;t<it.length;++t)s(mt.drawSeries,[ct,it[t]]),L(it[t]);s(mt.draw,[ct]),e.show&&e.aboveData&&M(),ot.render(),J()}function P(e,t){for(var n,i,r,o,a=h(),s=0;s<a.length;++s)if(n=a[s],n.direction==t&&(o=t+n.n+"axis",e[o]||1!=n.n||(o=t+"axis"),e[o])){i=e[o].from,r=e[o].to;break}if(e[o]||(n="x"==t?ut[0]:dt[0],i=e[t+"1"],r=e[t+"2"]),null!=i&&null!=r&&i>r){var c=i;i=r,r=c}return{from:i,to:r,axis:n}}function N(){ct.save(),ct.translate(ft.left,ft.top),ct.fillStyle=nt(rt.grid.backgroundColor,pt,0,"rgba(255, 255, 255, 0)"),ct.fillRect(0,0,ht,pt),ct.restore()}function M(){var t,n,i,r;ct.save(),ct.translate(ft.left,ft.top);var o=rt.grid.markings;if(o)for(e.isFunction(o)&&(n=gt.getAxes(),n.xmin=n.xaxis.min,n.xmax=n.xaxis.max,n.ymin=n.yaxis.min,n.ymax=n.yaxis.max,o=o(n)),t=0;t<o.length;++t){var a=o[t],s=P(a,"x"),c=P(a,"y");null==s.from&&(s.from=s.axis.min),null==s.to&&(s.to=s.axis.max),null==c.from&&(c.from=c.axis.min),null==c.to&&(c.to=c.axis.max),s.to<s.axis.min||s.from>s.axis.max||c.to<c.axis.min||c.from>c.axis.max||(s.from=Math.max(s.from,s.axis.min),s.to=Math.min(s.to,s.axis.max),c.from=Math.max(c.from,c.axis.min),c.to=Math.min(c.to,c.axis.max),(s.from!=s.to||c.from!=c.to)&&(s.from=s.axis.p2c(s.from),s.to=s.axis.p2c(s.to),c.from=c.axis.p2c(c.from),c.to=c.axis.p2c(c.to),s.from==s.to||c.from==c.to?(ct.beginPath(),ct.strokeStyle=a.color||rt.grid.markingsColor,ct.lineWidth=a.lineWidth||rt.grid.markingsLineWidth,ct.moveTo(s.from,c.from),ct.lineTo(s.to,c.to),ct.stroke()):(ct.fillStyle=a.color||rt.grid.markingsColor,ct.fillRect(s.from,c.to,s.to-s.from,c.from-c.to))))}n=h(),i=rt.grid.borderWidth;for(var l=0;l<n.length;++l){var u,d,f,p,m=n[l],g=m.box,v=m.tickLength;if(m.show&&0!=m.ticks.length){for(ct.lineWidth=1,"x"==m.direction?(u=0,d="full"==v?"top"==m.position?0:pt:g.top-ft.top+("top"==m.position?g.height:0)):(d=0,u="full"==v?"left"==m.position?0:ht:g.left-ft.left+("left"==m.position?g.width:0)),m.innermost||(ct.strokeStyle=m.options.color,ct.beginPath(),f=p=0,"x"==m.direction?f=ht+1:p=pt+1,1==ct.lineWidth&&("x"==m.direction?d=Math.floor(d)+.5:u=Math.floor(u)+.5),ct.moveTo(u,d),ct.lineTo(u+f,d+p),ct.stroke()),ct.strokeStyle=m.options.tickColor,ct.beginPath(),t=0;t<m.ticks.length;++t){var _=m.ticks[t].v;f=p=0,isNaN(_)||_<m.min||_>m.max||"full"==v&&("object"==typeof i&&i[m.position]>0||i>0)&&(_==m.min||_==m.max)||("x"==m.direction?(u=m.p2c(_),p="full"==v?-pt:v,"top"==m.position&&(p=-p)):(d=m.p2c(_),f="full"==v?-ht:v,"left"==m.position&&(f=-f)),1==ct.lineWidth&&("x"==m.direction?u=Math.floor(u)+.5:d=Math.floor(d)+.5),ct.moveTo(u,d),ct.lineTo(u+f,d+p))}ct.stroke()}}i&&(r=rt.grid.borderColor,"object"==typeof i||"object"==typeof r?("object"!=typeof i&&(i={top:i,right:i,bottom:i,left:i}),"object"!=typeof r&&(r={top:r,right:r,bottom:r,left:r}),i.top>0&&(ct.strokeStyle=r.top,ct.lineWidth=i.top,ct.beginPath(),ct.moveTo(0-i.left,0-i.top/2),ct.lineTo(ht,0-i.top/2),ct.stroke()),i.right>0&&(ct.strokeStyle=r.right,ct.lineWidth=i.right,ct.beginPath(),ct.moveTo(ht+i.right/2,0-i.top),ct.lineTo(ht+i.right/2,pt),ct.stroke()),i.bottom>0&&(ct.strokeStyle=r.bottom,ct.lineWidth=i.bottom,ct.beginPath(),ct.moveTo(ht+i.right,pt+i.bottom/2),ct.lineTo(0,pt+i.bottom/2),ct.stroke()),i.left>0&&(ct.strokeStyle=r.left,ct.lineWidth=i.left,ct.beginPath(),ct.moveTo(0-i.left/2,pt+i.bottom),ct.lineTo(0-i.left/2,0),ct.stroke())):(ct.lineWidth=i,ct.strokeStyle=rt.grid.borderColor,ct.strokeRect(-i/2,-i/2,ht+i,pt+i))),ct.restore()}function O(){e.each(h(),function(e,t){if(t.show&&0!=t.ticks.length){var n,i,r,o,a,s=t.box,c=t.direction+"Axis "+t.direction+t.n+"Axis",l="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+c,u=t.options.font||"flot-tick-label tickLabel";ot.removeText(l);for(var d=0;d<t.ticks.length;++d)n=t.ticks[d],!n.label||n.v<t.min||n.v>t.max||("x"==t.direction?(o="center",i=ft.left+t.p2c(n.v),"bottom"==t.position?r=s.top+s.padding:(r=s.top+s.height-s.padding,a="bottom")):(a="middle",r=ft.top+t.p2c(n.v),"left"==t.position?(i=s.left+s.width-s.padding,o="right"):i=s.left+s.padding),ot.addText(l,i,r,n.label,u,null,null,o,a))}})}function L(e){e.lines.show&&F(e),e.bars.show&&q(e),e.points.show&&z(e)}function F(e){function t(e,t,n,i,r){var o=e.points,a=e.pointsize,s=null,c=null;ct.beginPath();for(var l=a;l<o.length;l+=a){var u=o[l-a],d=o[l-a+1],f=o[l],h=o[l+1];if(null!=u&&null!=f){if(h>=d&&d<r.min){if(h<r.min)continue;u=(r.min-d)/(h-d)*(f-u)+u,d=r.min}else if(d>=h&&h<r.min){if(d<r.min)continue;f=(r.min-d)/(h-d)*(f-u)+u,h=r.min}if(d>=h&&d>r.max){if(h>r.max)continue;u=(r.max-d)/(h-d)*(f-u)+u,d=r.max}else if(h>=d&&h>r.max){if(d>r.max)continue;f=(r.max-d)/(h-d)*(f-u)+u,h=r.max}if(f>=u&&u<i.min){if(f<i.min)continue;d=(i.min-u)/(f-u)*(h-d)+d,u=i.min}else if(u>=f&&f<i.min){if(u<i.min)continue;h=(i.min-u)/(f-u)*(h-d)+d,f=i.min}if(u>=f&&u>i.max){if(f>i.max)continue;d=(i.max-u)/(f-u)*(h-d)+d,u=i.max}else if(f>=u&&f>i.max){if(u>i.max)continue;h=(i.max-u)/(f-u)*(h-d)+d,f=i.max}(u!=s||d!=c)&&ct.moveTo(i.p2c(u)+t,r.p2c(d)+n),s=f,c=h,ct.lineTo(i.p2c(f)+t,r.p2c(h)+n)}}ct.stroke()}function n(e,t,n){for(var i=e.points,r=e.pointsize,o=Math.min(Math.max(0,n.min),n.max),a=0,s=!1,c=1,l=0,u=0;;){if(r>0&&a>i.length+r)break;a+=r;var d=i[a-r],f=i[a-r+c],h=i[a],p=i[a+c];if(s){if(r>0&&null!=d&&null==h){u=a,r=-r,c=2;continue}if(0>r&&a==l+r){ct.fill(),s=!1,r=-r,c=1,a=l=u+r;continue}}if(null!=d&&null!=h){if(h>=d&&d<t.min){if(h<t.min)continue;f=(t.min-d)/(h-d)*(p-f)+f,d=t.min}else if(d>=h&&h<t.min){if(d<t.min)continue;p=(t.min-d)/(h-d)*(p-f)+f,h=t.min}if(d>=h&&d>t.max){if(h>t.max)continue;f=(t.max-d)/(h-d)*(p-f)+f,d=t.max}else if(h>=d&&h>t.max){if(d>t.max)continue;p=(t.max-d)/(h-d)*(p-f)+f,h=t.max}if(s||(ct.beginPath(),ct.moveTo(t.p2c(d),n.p2c(o)),s=!0),f>=n.max&&p>=n.max)ct.lineTo(t.p2c(d),n.p2c(n.max)),ct.lineTo(t.p2c(h),n.p2c(n.max));else if(f<=n.min&&p<=n.min)ct.lineTo(t.p2c(d),n.p2c(n.min)),ct.lineTo(t.p2c(h),n.p2c(n.min));else{var m=d,g=h;p>=f&&f<n.min&&p>=n.min?(d=(n.min-f)/(p-f)*(h-d)+d,f=n.min):f>=p&&p<n.min&&f>=n.min&&(h=(n.min-f)/(p-f)*(h-d)+d,p=n.min),f>=p&&f>n.max&&p<=n.max?(d=(n.max-f)/(p-f)*(h-d)+d,f=n.max):p>=f&&p>n.max&&f<=n.max&&(h=(n.max-f)/(p-f)*(h-d)+d,p=n.max),d!=m&&ct.lineTo(t.p2c(m),n.p2c(f)),ct.lineTo(t.p2c(d),n.p2c(f)),ct.lineTo(t.p2c(h),n.p2c(p)),h!=g&&(ct.lineTo(t.p2c(h),n.p2c(p)),ct.lineTo(t.p2c(g),n.p2c(p)))}}}}ct.save(),ct.translate(ft.left,ft.top),ct.lineJoin="round";var i=e.lines.lineWidth,r=e.shadowSize;if(i>0&&r>0){ct.lineWidth=r,ct.strokeStyle="rgba(0,0,0,0.1)";var o=Math.PI/18;t(e.datapoints,Math.sin(o)*(i/2+r/2),Math.cos(o)*(i/2+r/2),e.xaxis,e.yaxis),ct.lineWidth=r/2,t(e.datapoints,Math.sin(o)*(i/2+r/4),Math.cos(o)*(i/2+r/4),e.xaxis,e.yaxis)}ct.lineWidth=i,ct.strokeStyle=e.color;var a=H(e.lines,e.color,0,pt);a&&(ct.fillStyle=a,n(e.datapoints,e.xaxis,e.yaxis)),i>0&&t(e.datapoints,0,0,e.xaxis,e.yaxis),ct.restore()}function z(e){function t(e,t,n,i,r,o,a,s){for(var c=e.points,l=e.pointsize,u=0;u<c.length;u+=l){var d=c[u],f=c[u+1];null==d||d<o.min||d>o.max||f<a.min||f>a.max||(ct.beginPath(),d=o.p2c(d),f=a.p2c(f)+i,"circle"==s?ct.arc(d,f,t,0,r?Math.PI:2*Math.PI,!1):s(ct,d,f,t,r),ct.closePath(),n&&(ct.fillStyle=n,ct.fill()),ct.stroke())}}ct.save(),ct.translate(ft.left,ft.top);var n=e.points.lineWidth,i=e.shadowSize,r=e.points.radius,o=e.points.symbol;if(0==n&&(n=1e-4),n>0&&i>0){var a=i/2;ct.lineWidth=a,ct.strokeStyle="rgba(0,0,0,0.1)",t(e.datapoints,r,null,a+a/2,!0,e.xaxis,e.yaxis,o),ct.strokeStyle="rgba(0,0,0,0.2)",t(e.datapoints,r,null,a/2,!0,e.xaxis,e.yaxis,o)}ct.lineWidth=n,ct.strokeStyle=e.color,t(e.datapoints,r,H(e.points,e.color),0,!1,e.xaxis,e.yaxis,o),ct.restore()}function R(e,t,n,i,r,o,a,s,c,l,u,d){var f,h,p,m,g,v,_,y,b;u?(y=v=_=!0,g=!1,f=n,h=e,m=t+i,p=t+r,f>h&&(b=h,h=f,f=b,g=!0,v=!1)):(g=v=_=!0,y=!1,f=e+i,h=e+r,p=n,m=t,p>m&&(b=m,m=p,p=b,y=!0,_=!1)),h<s.min||f>s.max||m<c.min||p>c.max||(f<s.min&&(f=s.min,g=!1),h>s.max&&(h=s.max,v=!1),p<c.min&&(p=c.min,y=!1),m>c.max&&(m=c.max,_=!1),f=s.p2c(f),p=c.p2c(p),h=s.p2c(h),m=c.p2c(m),a&&(l.beginPath(),l.moveTo(f,p),l.lineTo(f,m),l.lineTo(h,m),l.lineTo(h,p),l.fillStyle=a(p,m),l.fill()),d>0&&(g||v||_||y)&&(l.beginPath(),l.moveTo(f,p+o),g?l.lineTo(f,m+o):l.moveTo(f,m+o),_?l.lineTo(h,m+o):l.moveTo(h,m+o),v?l.lineTo(h,p+o):l.moveTo(h,p+o),y?l.lineTo(f,p+o):l.moveTo(f,p+o),l.stroke()))}function q(e){function t(t,n,i,r,o,a,s){for(var c=t.points,l=t.pointsize,u=0;u<c.length;u+=l)null!=c[u]&&R(c[u],c[u+1],c[u+2],n,i,r,o,a,s,ct,e.bars.horizontal,e.bars.lineWidth)}ct.save(),ct.translate(ft.left,ft.top),ct.lineWidth=e.bars.lineWidth,ct.strokeStyle=e.color;var n;switch(e.bars.align){case"left":n=0;break;case"right":n=-e.bars.barWidth;break;case"center":n=-e.bars.barWidth/2;break;default:throw new Error("Invalid bar alignment: "+e.bars.align)}var i=e.bars.fill?function(t,n){return H(e.bars,e.color,t,n)}:null;t(e.datapoints,n,n+e.bars.barWidth,0,i,e.xaxis,e.yaxis),ct.restore()}function H(t,n,i,r){var o=t.fill;if(!o)return null;if(t.fillColor)return nt(t.fillColor,i,r,n);var a=e.color.parse(n);return a.a="number"==typeof o?o:.4,a.normalize(),a.toString()}function Y(){if(n.find(".legend").remove(),rt.legend.show){for(var t,i,r=[],o=[],a=!1,s=rt.legend.labelFormatter,c=0;c<it.length;++c)t=it[c],t.label&&(i=s?s(t.label,t):t.label,i&&o.push({label:i,color:t.color}));if(rt.legend.sorted)if(e.isFunction(rt.legend.sorted))o.sort(rt.legend.sorted);else if("reverse"==rt.legend.sorted)o.reverse();else{var l="descending"!=rt.legend.sorted;o.sort(function(e,t){return e.label==t.label?0:e.label<t.label!=l?1:-1})}for(var c=0;c<o.length;++c){var u=o[c];c%rt.legend.noColumns==0&&(a&&r.push("</tr>"),r.push("<tr>"),a=!0),r.push('<td class="legendColorBox"><div style="border:1px solid '+rt.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+u.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+u.label+"</td>")}if(a&&r.push("</tr>"),0!=r.length){var d='<table style="font-size:smaller;color:'+rt.grid.color+'">'+r.join("")+"</table>";if(null!=rt.legend.container)e(rt.legend.container).html(d);else{var f="",h=rt.legend.position,p=rt.legend.margin;null==p[0]&&(p=[p,p]),"n"==h.charAt(0)?f+="top:"+(p[1]+ft.top)+"px;":"s"==h.charAt(0)&&(f+="bottom:"+(p[1]+ft.bottom)+"px;"),"e"==h.charAt(1)?f+="right:"+(p[0]+ft.right)+"px;":"w"==h.charAt(1)&&(f+="left:"+(p[0]+ft.left)+"px;");var m=e('<div class="legend">'+d.replace('style="','style="position:absolute;'+f+";")+"</div>").appendTo(n);if(0!=rt.legend.backgroundOpacity){var g=rt.legend.backgroundColor;null==g&&(g=rt.grid.backgroundColor,g=g&&"string"==typeof g?e.color.parse(g):e.color.extract(m,"background-color"),g.a=1,g=g.toString());var v=m.children();e('<div style="position:absolute;width:'+v.width()+"px;height:"+v.height()+"px;"+f+"background-color:"+g+';"> </div>').prependTo(m).css("opacity",rt.legend.backgroundOpacity)}}}}}function B(e,t,n){var i,r,o,a=rt.grid.mouseActiveRadius,s=a*a+1,c=null;for(i=it.length-1;i>=0;--i)if(n(it[i])){var l=it[i],u=l.xaxis,d=l.yaxis,f=l.datapoints.points,h=u.c2p(e),p=d.c2p(t),m=a/u.scale,g=a/d.scale;if(o=l.datapoints.pointsize,u.options.inverseTransform&&(m=Number.MAX_VALUE),d.options.inverseTransform&&(g=Number.MAX_VALUE),l.lines.show||l.points.show)for(r=0;r<f.length;r+=o){var v=f[r],_=f[r+1];if(null!=v&&!(v-h>m||-m>v-h||_-p>g||-g>_-p)){var y=Math.abs(u.p2c(v)-e),b=Math.abs(d.p2c(_)-t),w=y*y+b*b;s>w&&(s=w,c=[i,r/o])}}if(l.bars.show&&!c){var $="left"==l.bars.align?0:-l.bars.barWidth/2,k=$+l.bars.barWidth;for(r=0;r<f.length;r+=o){var v=f[r],_=f[r+1],x=f[r+2];null!=v&&(it[i].bars.horizontal?h<=Math.max(x,v)&&h>=Math.min(x,v)&&p>=_+$&&_+k>=p:h>=v+$&&v+k>=h&&p>=Math.min(x,_)&&p<=Math.max(x,_))&&(c=[i,r/o])}}}return c?(i=c[0],r=c[1],o=it[i].datapoints.pointsize,{datapoint:it[i].datapoints.points.slice(r*o,(r+1)*o),dataIndex:r,series:it[i],seriesIndex:i}):null}function W(e){rt.grid.hoverable&&G("plothover",e,function(e){return 0!=e.hoverable})}function U(e){rt.grid.hoverable&&G("plothover",e,function(){return!1})}function Q(e){G("plotclick",e,function(e){return 0!=e.clickable})}function G(e,t,i){var r=st.offset(),o=t.pageX-r.left-ft.left,a=t.pageY-r.top-ft.top,s=p({left:o,top:a});s.pageX=t.pageX,s.pageY=t.pageY;var c=B(o,a,i);if(c&&(c.pageX=parseInt(c.series.xaxis.p2c(c.datapoint[0])+r.left+ft.left,10),c.pageY=parseInt(c.series.yaxis.p2c(c.datapoint[1])+r.top+ft.top,10)),rt.grid.autoHighlight){for(var l=0;l<vt.length;++l){var u=vt[l];u.auto!=e||c&&u.series==c.series&&u.point[0]==c.datapoint[0]&&u.point[1]==c.datapoint[1]||X(u.series,u.point)}c&&K(c.series,c.datapoint,e)}n.trigger(e,[s,c])}function J(){var e=rt.interaction.redrawOverlayInterval;return-1==e?void V():void(_t||(_t=setTimeout(V,e)))}function V(){_t=null,lt.save(),at.clear(),lt.translate(ft.left,ft.top);var e,t;for(e=0;e<vt.length;++e)t=vt[e],t.series.bars.show?tt(t.series,t.point):et(t.series,t.point);lt.restore(),s(mt.drawOverlay,[lt])}function K(e,t,n){if("number"==typeof e&&(e=it[e]),"number"==typeof t){var i=e.datapoints.pointsize;t=e.datapoints.points.slice(i*t,i*(t+1))}var r=Z(e,t);-1==r?(vt.push({series:e,point:t,auto:n}),J()):n||(vt[r].auto=!1)}function X(e,t){if(null==e&&null==t)return vt=[],void J();if("number"==typeof e&&(e=it[e]),"number"==typeof t){var n=e.datapoints.pointsize;t=e.datapoints.points.slice(n*t,n*(t+1))}var i=Z(e,t);-1!=i&&(vt.splice(i,1),J())}function Z(e,t){for(var n=0;n<vt.length;++n){var i=vt[n];if(i.series==e&&i.point[0]==t[0]&&i.point[1]==t[1])return n}return-1}function et(t,n){var i=n[0],r=n[1],o=t.xaxis,a=t.yaxis,s="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString();if(!(i<o.min||i>o.max||r<a.min||r>a.max)){var c=t.points.radius+t.points.lineWidth/2;lt.lineWidth=c,lt.strokeStyle=s;var l=1.5*c;i=o.p2c(i),r=a.p2c(r),lt.beginPath(),"circle"==t.points.symbol?lt.arc(i,r,l,0,2*Math.PI,!1):t.points.symbol(lt,i,r,l,!1),lt.closePath(),lt.stroke()}}function tt(t,n){var i="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString(),r=i,o="left"==t.bars.align?0:-t.bars.barWidth/2;lt.lineWidth=t.bars.lineWidth,lt.strokeStyle=i,R(n[0],n[1],n[2]||0,o,o+t.bars.barWidth,0,function(){return r},t.xaxis,t.yaxis,lt,t.bars.horizontal,t.bars.lineWidth)}function nt(t,n,i,r){if("string"==typeof t)return t;for(var o=ct.createLinearGradient(0,i,0,n),a=0,s=t.colors.length;s>a;++a){var c=t.colors[a];if("string"!=typeof c){var l=e.color.parse(r);null!=c.brightness&&(l=l.scale("rgb",c.brightness)),null!=c.opacity&&(l.a*=c.opacity),c=l.toString()}o.addColorStop(a/(s-1),c)}return o}var it=[],rt={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},ot=null,at=null,st=null,ct=null,lt=null,ut=[],dt=[],ft={left:0,right:0,top:0,bottom:0},ht=0,pt=0,mt={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},gt=this;gt.setData=u,gt.setupGrid=S,gt.draw=A,gt.getPlaceholder=function(){return n},gt.getCanvas=function(){return ot.element},gt.getPlotOffset=function(){return ft},gt.width=function(){return ht},gt.height=function(){return pt},gt.offset=function(){var e=st.offset();return e.left+=ft.left,e.top+=ft.top,e},gt.getData=function(){return it},gt.getAxes=function(){var t={};return e.each(ut.concat(dt),function(e,n){n&&(t[n.direction+(1!=n.n?n.n:"")+"axis"]=n)}),t},gt.getXAxes=function(){return ut},gt.getYAxes=function(){return dt},gt.c2p=p,gt.p2c=m,gt.getOptions=function(){return rt},gt.highlight=K,gt.unhighlight=X,gt.triggerRedrawOverlay=J,gt.pointOffset=function(e){return{left:parseInt(ut[f(e,"x")-1].p2c(+e.x)+ft.left,10),top:parseInt(dt[f(e,"y")-1].p2c(+e.y)+ft.top,10)}},gt.shutdown=w,gt.resize=function(){var e=n.width(),t=n.height();ot.resize(e,t),at.resize(e,t)},gt.hooks=mt,c(gt),l(o),y(),u(r),S(),A(),b();var vt=[],_t=null}function i(e,t){return t*Math.floor(e/t)}var r=Object.prototype.hasOwnProperty;t.prototype.resize=function(e,t){if(0>=e||0>=t)throw new Error("Invalid dimensions for plot, width = "+e+", height = "+t);var n=this.element,i=this.context,r=this.pixelRatio;this.width!=e&&(n.width=e*r,n.style.width=e+"px",this.width=e),this.height!=t&&(n.height=t*r,n.style.height=t+"px",this.height=t),i.restore(),i.save(),i.scale(r,r)},t.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},t.prototype.render=function(){var e=this._textCache;for(var t in e)if(r.call(e,t)){var n=this.getTextLayer(t),i=e[t];n.hide();for(var o in i)if(r.call(i,o)){var a=i[o];for(var s in a)if(r.call(a,s)){for(var c,l=a[s].positions,u=0;c=l[u];u++)c.active?c.rendered||(n.append(c.element),c.rendered=!0):(l.splice(u--,1),c.rendered&&c.element.detach());0==l.length&&delete a[s]}}n.show()}},t.prototype.getTextLayer=function(t){var n=this.text[t];return null==n&&(null==this.textContainer&&(this.textContainer=e("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),n=this.text[t]=e("<div></div>").addClass(t).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),n},t.prototype.getTextInfo=function(t,n,i,r,o){var a,s,c,l;if(n=""+n,a="object"==typeof i?i.style+" "+i.variant+" "+i.weight+" "+i.size+"px/"+i.lineHeight+"px "+i.family:i,s=this._textCache[t],null==s&&(s=this._textCache[t]={}),c=s[a],null==c&&(c=s[a]={}),l=c[n],null==l){var u=e("<div></div>").html(n).css({position:"absolute","max-width":o,top:-9999}).appendTo(this.getTextLayer(t));"object"==typeof i?u.css({font:a,color:i.color}):"string"==typeof i&&u.addClass(i),l=c[n]={width:u.outerWidth(!0),height:u.outerHeight(!0),element:u,positions:[]},u.detach()}return l},t.prototype.addText=function(e,t,n,i,r,o,a,s,c){var l=this.getTextInfo(e,i,r,o,a),u=l.positions;"center"==s?t-=l.width/2:"right"==s&&(t-=l.width),"middle"==c?n-=l.height/2:"bottom"==c&&(n-=l.height);for(var d,f=0;d=u[f];f++)if(d.x==t&&d.y==n)return void(d.active=!0);d={active:!0,rendered:!1,element:u.length?l.element.clone():l.element,x:t,y:n},u.push(d),d.element.css({top:Math.round(n),left:Math.round(t),"text-align":s})},t.prototype.removeText=function(e,t,n,i,o,a){if(null==i){var s=this._textCache[e];if(null!=s)for(var c in s)if(r.call(s,c)){var l=s[c];for(var u in l)if(r.call(l,u))for(var d,f=l[u].positions,h=0;d=f[h];h++)d.active=!1}}else for(var d,f=this.getTextInfo(e,i,o,a).positions,h=0;d=f[h];h++)d.x==t&&d.y==n&&(d.active=!1)},e.plot=function(t,i,r){var o=new n(e(t),i,r,e.plot.plugins);return o},e.plot.version="0.8.1",e.plot.plugins=[],e.fn.plot=function(t,n){return this.each(function(){e.plot(this,t,n)})}}(jQuery),function(e){function t(e,t){return t*Math.floor(e/t)}function n(e,t,n,i){if("function"==typeof e.strftime)return e.strftime(t);var r=function(e,t){return e=""+e,t=""+(null==t?"0":t),1==e.length?t+e:e},o=[],a=!1,s=e.getHours(),c=12>s;null==n&&(n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),null==i&&(i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var l;l=s>12?s-12:0==s?12:s;for(var u=0;u<t.length;++u){var d=t.charAt(u);if(a){switch(d){case"a":d=""+i[e.getDay()];break;case"b":d=""+n[e.getMonth()];break;case"d":d=r(e.getDate());break;case"e":d=r(e.getDate()," ");break;case"h":case"H":d=r(s);break;case"I":d=r(l);break;case"l":d=r(l," ");break;case"m":d=r(e.getMonth()+1);break;case"M":d=r(e.getMinutes());break;case"q":d=""+(Math.floor(e.getMonth()/3)+1);break;case"S":d=r(e.getSeconds());break;case"y":d=r(e.getFullYear()%100);break;case"Y":d=""+e.getFullYear();break;case"p":d=c?"am":"pm";break;case"P":d=c?"AM":"PM";break;case"w":d=""+e.getDay()}o.push(d),a=!1}else"%"==d?a=!0:o.push(d)}return o.join("")}function i(e){function t(e,t,n,i){e[t]=function(){return n[i].apply(n,arguments)}}var n={date:e};void 0!=e.strftime&&t(n,"strftime",e,"strftime"),t(n,"getTime",e,"getTime"),t(n,"setTime",e,"setTime");for(var i=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],r=0;r<i.length;r++)t(n,"get"+i[r],e,"getUTC"+i[r]),t(n,"set"+i[r],e,"setUTC"+i[r]);return n}function r(e,t){if("browser"==t.timezone)return new Date(e);if(t.timezone&&"utc"!=t.timezone){if("undefined"!=typeof timezoneJS&&"undefined"!=typeof timezoneJS.Date){var n=new timezoneJS.Date;return n.setTimezone(t.timezone),n.setTime(e),n}return i(new Date(e))}return i(new Date(e))}function o(i){i.hooks.processOptions.push(function(i){e.each(i.getAxes(),function(e,i){var o=i.options;"time"==o.mode&&(i.tickGenerator=function(e){var n=[],i=r(e.min,o),a=0,c=o.tickSize&&"quarter"===o.tickSize[1]||o.minTickSize&&"quarter"===o.minTickSize[1]?u:l;null!=o.minTickSize&&(a="number"==typeof o.tickSize?o.tickSize:o.minTickSize[0]*s[o.minTickSize[1]]);for(var d=0;d<c.length-1&&!(e.delta<(c[d][0]*s[c[d][1]]+c[d+1][0]*s[c[d+1][1]])/2&&c[d][0]*s[c[d][1]]>=a);++d);var f=c[d][0],h=c[d][1];if("year"==h){if(null!=o.minTickSize&&"year"==o.minTickSize[1])f=Math.floor(o.minTickSize[0]);else{var p=Math.pow(10,Math.floor(Math.log(e.delta/s.year)/Math.LN10)),m=e.delta/s.year/p;f=1.5>m?1:3>m?2:7.5>m?5:10,f*=p}1>f&&(f=1)}e.tickSize=o.tickSize||[f,h];var g=e.tickSize[0];h=e.tickSize[1];var v=g*s[h];"second"==h?i.setSeconds(t(i.getSeconds(),g)):"minute"==h?i.setMinutes(t(i.getMinutes(),g)):"hour"==h?i.setHours(t(i.getHours(),g)):"month"==h?i.setMonth(t(i.getMonth(),g)):"quarter"==h?i.setMonth(3*t(i.getMonth()/3,g)):"year"==h&&i.setFullYear(t(i.getFullYear(),g)),i.setMilliseconds(0),v>=s.minute&&i.setSeconds(0),v>=s.hour&&i.setMinutes(0),v>=s.day&&i.setHours(0),v>=4*s.day&&i.setDate(1),v>=2*s.month&&i.setMonth(t(i.getMonth(),3)),v>=2*s.quarter&&i.setMonth(t(i.getMonth(),6)),v>=s.year&&i.setMonth(0);
var _,y=0,b=Number.NaN;do if(_=b,b=i.getTime(),n.push(b),"month"==h||"quarter"==h)if(1>g){i.setDate(1);var w=i.getTime();i.setMonth(i.getMonth()+("quarter"==h?3:1));var $=i.getTime();i.setTime(b+y*s.hour+($-w)*g),y=i.getHours(),i.setHours(0)}else i.setMonth(i.getMonth()+g*("quarter"==h?3:1));else"year"==h?i.setFullYear(i.getFullYear()+g):i.setTime(b+v);while(b<e.max&&b!=_);return n},i.tickFormatter=function(e,t){var i=r(e,t.options);if(null!=o.timeformat)return n(i,o.timeformat,o.monthNames,o.dayNames);var a,c=t.options.tickSize&&"quarter"==t.options.tickSize[1]||t.options.minTickSize&&"quarter"==t.options.minTickSize[1],l=t.tickSize[0]*s[t.tickSize[1]],u=t.max-t.min,d=o.twelveHourClock?" %p":"",f=o.twelveHourClock?"%I":"%H";a=l<s.minute?f+":%M:%S"+d:l<s.day?u<2*s.day?f+":%M"+d:"%b %d "+f+":%M"+d:l<s.month?"%b %d":c&&l<s.quarter||!c&&l<s.year?u<s.year?"%b":"%b %Y":c&&l<s.year?u<s.year?"Q%q":"Q%q %Y":"%Y";var h=n(i,a,o.monthNames,o.dayNames);return h})})})}var a={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},s={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3},c=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],l=c.concat([[3,"month"],[6,"month"],[1,"year"]]),u=c.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);e.plot.plugins.push({init:o,options:a,name:"time",version:"1.0"}),e.plot.formatDate=n}(jQuery),function(e){function t(t){function o(t){k||(k=!0,_=t.getCanvas(),y=e(_).parent(),r=t.getOptions(),t.setData(a(t.getData())))}function a(t){for(var n=0,i=0,o=0,a=r.series.pie.combine.color,s=[],c=0;c<t.length;++c){var l=t[c].data;e.isArray(l)&&1==l.length&&(l=l[0]),e.isArray(l)?l[1]=!isNaN(parseFloat(l[1]))&&isFinite(l[1])?+l[1]:0:l=!isNaN(parseFloat(l))&&isFinite(l)?[1,+l]:[1,0],t[c].data=[l]}for(var c=0;c<t.length;++c)n+=t[c].data[0][1];for(var c=0;c<t.length;++c){var l=t[c].data[0][1];l/n<=r.series.pie.combine.threshold&&(i+=l,o++,a||(a=t[c].color))}for(var c=0;c<t.length;++c){var l=t[c].data[0][1];(2>o||l/n>r.series.pie.combine.threshold)&&s.push({data:[[1,l]],color:t[c].color,label:t[c].label,angle:l*Math.PI*2/n,percent:l/(n/100)})}return o>1&&s.push({data:[[1,i]],color:a,label:r.series.pie.combine.label,angle:i*Math.PI*2/n,percent:i/(n/100)}),s}function s(t,o){function a(){x.clearRect(0,0,u,d),y.children().filter(".pieLabel, .pieLabelBackground").remove()}function s(){var e=r.series.pie.shadow.left,t=r.series.pie.shadow.top,n=10,i=r.series.pie.shadow.alpha,o=r.series.pie.radius>1?r.series.pie.radius:b*r.series.pie.radius;if(!(o>=u/2-e||o*r.series.pie.tilt>=d/2-t||n>=o)){x.save(),x.translate(e,t),x.globalAlpha=i,x.fillStyle="#000",x.translate(w,$),x.scale(1,r.series.pie.tilt);for(var a=1;n>=a;a++)x.beginPath(),x.arc(0,0,o,0,2*Math.PI,!1),x.fill(),o-=a;x.restore()}}function l(){function t(e,t,n){0>=e||isNaN(e)||(n?x.fillStyle=t:(x.strokeStyle=t,x.lineJoin="round"),x.beginPath(),Math.abs(e-2*Math.PI)>1e-9&&x.moveTo(0,0),x.arc(0,0,o,a,a+e/2,!1),x.arc(0,0,o,a+e/2,a+e,!1),x.closePath(),a+=e,n?x.fill():x.stroke())}function n(){function t(t,n,i){if(0==t.data[0][1])return!0;var a,s=r.legend.labelFormatter,c=r.series.pie.label.formatter;a=s?s(t.label,t):t.label,c&&(a=c(a,t));var l=(n+t.angle+n)/2,f=w+Math.round(Math.cos(l)*o),h=$+Math.round(Math.sin(l)*o)*r.series.pie.tilt,p="<span class='pieLabel' id='pieLabel"+i+"' style='position:absolute;top:"+h+"px;left:"+f+"px;'>"+a+"</span>";y.append(p);var m=y.children("#pieLabel"+i),g=h-m.height()/2,v=f-m.width()/2;if(m.css("top",g),m.css("left",v),0-g>0||0-v>0||d-(g+m.height())<0||u-(v+m.width())<0)return!1;if(0!=r.series.pie.label.background.opacity){var _=r.series.pie.label.background.color;null==_&&(_=t.color);var b="top:"+g+"px;left:"+v+"px;";e("<div class='pieLabelBackground' style='position:absolute;width:"+m.width()+"px;height:"+m.height()+"px;"+b+"background-color:"+_+";'></div>").css("opacity",r.series.pie.label.background.opacity).insertBefore(m)}return!0}for(var n=i,o=r.series.pie.label.radius>1?r.series.pie.label.radius:b*r.series.pie.label.radius,a=0;a<h.length;++a){if(h[a].percent>=100*r.series.pie.label.threshold&&!t(h[a],n,a))return!1;n+=h[a].angle}return!0}var i=Math.PI*r.series.pie.startAngle,o=r.series.pie.radius>1?r.series.pie.radius:b*r.series.pie.radius;x.save(),x.translate(w,$),x.scale(1,r.series.pie.tilt),x.save();for(var a=i,s=0;s<h.length;++s)h[s].startAngle=a,t(h[s].angle,h[s].color,!0);if(x.restore(),r.series.pie.stroke.width>0){x.save(),x.lineWidth=r.series.pie.stroke.width,a=i;for(var s=0;s<h.length;++s)t(h[s].angle,r.series.pie.stroke.color,!1);x.restore()}return c(x),x.restore(),r.series.pie.label.show?n():!0}if(y){var u=t.getPlaceholder().width(),d=t.getPlaceholder().height(),f=y.children().filter(".legend").children().width()||0;x=o,k=!1,b=Math.min(u,d/r.series.pie.tilt)/2,$=d/2+r.series.pie.offset.top,w=u/2,"auto"==r.series.pie.offset.left?r.legend.position.match("w")?w+=f/2:w-=f/2:w+=r.series.pie.offset.left,b>w?w=b:w>u-b&&(w=u-b);var h=t.getData(),p=0;do p>0&&(b*=i),p+=1,a(),r.series.pie.tilt<=.8&&s();while(!l()&&n>p);p>=n&&(a(),y.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>")),t.setSeries&&t.insertLegend&&(t.setSeries(h),t.insertLegend())}}function c(e){if(r.series.pie.innerRadius>0){e.save();var t=r.series.pie.innerRadius>1?r.series.pie.innerRadius:b*r.series.pie.innerRadius;e.globalCompositeOperation="destination-out",e.beginPath(),e.fillStyle=r.series.pie.stroke.color,e.arc(0,0,t,0,2*Math.PI,!1),e.fill(),e.closePath(),e.restore(),e.save(),e.beginPath(),e.strokeStyle=r.series.pie.stroke.color,e.arc(0,0,t,0,2*Math.PI,!1),e.stroke(),e.closePath(),e.restore()}}function l(e,t){for(var n=!1,i=-1,r=e.length,o=r-1;++i<r;o=i)(e[i][1]<=t[1]&&t[1]<e[o][1]||e[o][1]<=t[1]&&t[1]<e[i][1])&&t[0]<(e[o][0]-e[i][0])*(t[1]-e[i][1])/(e[o][1]-e[i][1])+e[i][0]&&(n=!n);return n}function u(e,n){for(var i,r,o=t.getData(),a=t.getOptions(),s=a.series.pie.radius>1?a.series.pie.radius:b*a.series.pie.radius,c=0;c<o.length;++c){var u=o[c];if(u.pie.show){if(x.save(),x.beginPath(),x.moveTo(0,0),x.arc(0,0,s,u.startAngle,u.startAngle+u.angle/2,!1),x.arc(0,0,s,u.startAngle+u.angle/2,u.startAngle+u.angle,!1),x.closePath(),i=e-w,r=n-$,x.isPointInPath){if(x.isPointInPath(e-w,n-$))return x.restore(),{datapoint:[u.percent,u.data],dataIndex:0,series:u,seriesIndex:c}}else{var d=s*Math.cos(u.startAngle),f=s*Math.sin(u.startAngle),h=s*Math.cos(u.startAngle+u.angle/4),p=s*Math.sin(u.startAngle+u.angle/4),m=s*Math.cos(u.startAngle+u.angle/2),g=s*Math.sin(u.startAngle+u.angle/2),v=s*Math.cos(u.startAngle+u.angle/1.5),_=s*Math.sin(u.startAngle+u.angle/1.5),y=s*Math.cos(u.startAngle+u.angle),k=s*Math.sin(u.startAngle+u.angle),j=[[0,0],[d,f],[h,p],[m,g],[v,_],[y,k]],C=[i,r];if(l(j,C))return x.restore(),{datapoint:[u.percent,u.data],dataIndex:0,series:u,seriesIndex:c}}x.restore()}}return null}function d(e){h("plothover",e)}function f(e){h("plotclick",e)}function h(e,n){var i=t.offset(),o=parseInt(n.pageX-i.left),a=parseInt(n.pageY-i.top),s=u(o,a);if(r.grid.autoHighlight)for(var c=0;c<j.length;++c){var l=j[c];l.auto!=e||s&&l.series==s.series||m(l.series)}s&&p(s.series,e);var d={pageX:n.pageX,pageY:n.pageY};y.trigger(e,[d,s])}function p(e,n){var i=g(e);-1==i?(j.push({series:e,auto:n}),t.triggerRedrawOverlay()):n||(j[i].auto=!1)}function m(e){null==e&&(j=[],t.triggerRedrawOverlay());var n=g(e);-1!=n&&(j.splice(n,1),t.triggerRedrawOverlay())}function g(e){for(var t=0;t<j.length;++t){var n=j[t];if(n.series==e)return t}return-1}function v(e,t){function n(e){e.angle<=0||isNaN(e.angle)||(t.fillStyle="rgba(255, 255, 255, "+i.series.pie.highlight.opacity+")",t.beginPath(),Math.abs(e.angle-2*Math.PI)>1e-9&&t.moveTo(0,0),t.arc(0,0,r,e.startAngle,e.startAngle+e.angle/2,!1),t.arc(0,0,r,e.startAngle+e.angle/2,e.startAngle+e.angle,!1),t.closePath(),t.fill())}var i=e.getOptions(),r=i.series.pie.radius>1?i.series.pie.radius:b*i.series.pie.radius;t.save(),t.translate(w,$),t.scale(1,i.series.pie.tilt);for(var o=0;o<j.length;++o)n(j[o].series);c(t),t.restore()}var _=null,y=null,b=null,w=null,$=null,k=!1,x=null,j=[];t.hooks.processOptions.push(function(e,t){t.series.pie.show&&(t.grid.show=!1,"auto"==t.series.pie.label.show&&(t.series.pie.label.show=t.legend.show?!1:!0),"auto"==t.series.pie.radius&&(t.series.pie.radius=t.series.pie.label.show?.75:1),t.series.pie.tilt>1?t.series.pie.tilt=1:t.series.pie.tilt<0&&(t.series.pie.tilt=0))}),t.hooks.bindEvents.push(function(e,t){var n=e.getOptions();n.series.pie.show&&(n.grid.hoverable&&t.unbind("mousemove").mousemove(d),n.grid.clickable&&t.unbind("click").click(f))}),t.hooks.processDatapoints.push(function(e,t,n,i){var r=e.getOptions();r.series.pie.show&&o(e,t,n,i)}),t.hooks.drawOverlay.push(function(e,t){var n=e.getOptions();n.series.pie.show&&v(e,t)}),t.hooks.draw.push(function(e,t){var n=e.getOptions();n.series.pie.show&&s(e,t)})}var n=10,i=.95,r={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(e,t){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+t.color+";'>"+e+"<br/>"+Math.round(t.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};e.plot.plugins.push({init:t,options:r,name:"pie",version:"1.1"})}(jQuery),function(e){function t(e){function t(e,t){var n;for(n=0;n<t.length;++n)if(t[n].id===e.fillBetween)return t[n];return"number"==typeof e.fillBetween?e.fillBetween<0||e.fillBetween>=t.length?null:t[e.fillBetween]:null}function n(e,n,i){if(null!=n.fillBetween){var r=t(n,e.getData());if(r){for(var o,a,s,c,l,u,d,f,h=i.pointsize,p=i.points,m=r.datapoints.pointsize,g=r.datapoints.points,v=[],_=n.lines.show,y=h>2&&i.format[2].y,b=_&&n.lines.steps,w=!0,$=0,k=0;;){if($>=p.length)break;if(d=v.length,null==p[$]){for(f=0;h>f;++f)v.push(p[$+f]);$+=h}else if(k>=g.length){if(!_)for(f=0;h>f;++f)v.push(p[$+f]);$+=h}else if(null==g[k]){for(f=0;h>f;++f)v.push(null);w=!0,k+=m}else{if(o=p[$],a=p[$+1],c=g[k],l=g[k+1],u=0,o===c){for(f=0;h>f;++f)v.push(p[$+f]);u=l,$+=h,k+=m}else if(o>c){if(_&&$>0&&null!=p[$-h]){for(s=a+(p[$-h+1]-a)*(c-o)/(p[$-h]-o),v.push(c),v.push(s),f=2;h>f;++f)v.push(p[$+f]);u=l}k+=m}else{if(w&&_){$+=h;continue}for(f=0;h>f;++f)v.push(p[$+f]);_&&k>0&&null!=g[k-m]&&(u=l+(g[k-m+1]-l)*(o-c)/(g[k-m]-c)),$+=h}w=!1,d!==v.length&&y&&(v[d+2]=u)}if(b&&d!==v.length&&d>0&&null!==v[d]&&v[d]!==v[d-h]&&v[d+1]!==v[d-h+1]){for(f=0;h>f;++f)v[d+h+f]=v[d+f];v[d+1]=v[d-h+1]}}i.points=v}}}e.hooks.processDatapoints.push(n)}var n={series:{fillBetween:null}};e.plot.plugins.push({init:t,options:n,name:"fillbetween",version:"1.0"})}(jQuery),!function(e){"use strict";e.extend({tablesorter:new function(){function t(){var e=arguments.length>1?Array.prototype.slice.call(arguments):arguments[0];"undefined"!=typeof console&&"undefined"!=typeof console.log?console.log(e):alert(e)}function n(e,n){t(e+" ("+((new Date).getTime()-n.getTime())+"ms)")}function i(e){for(var t in e)return!1;return!0}function r(t,n,i){if(!n)return"";var r=t.config,o=r.textExtraction,a="";return a="simple"===o?r.supportsTextContent?n.textContent:e(n).text():"function"==typeof o?o(n,t,i):"object"==typeof o&&o.hasOwnProperty(i)?o[i](n,t,i):r.supportsTextContent?n.textContent:e(n).text(),e.trim(a)}function o(e,n,i,o){for(var a,s=k.parsers.length,c=!1,l="",u=!0;""===l&&u;)i++,n[i]?(c=n[i].cells[o],l=r(e,c,o),e.config.debug&&t("Checking if value was empty on row "+i+", column: "+o+': "'+l+'"')):u=!1;for(;--s>=0;)if(a=k.parsers[s],a&&"text"!==a.id&&a.is&&a.is(l,e,c))return a;return k.getParserById("text")}function a(e){var i,r,a,s,c,l,u,d,f=e.config,h=f.$tbodies=f.$table.children("tbody:not(."+f.cssInfoBlock+")"),p="";if(0===h.length)return f.debug?t("*Empty table!* Not building a parser cache"):"";if(f.debug&&(d=new Date,t("Detecting parsers for each column")),i=h[0].rows,i[0])for(r=[],a=i[0].cells.length,s=0;a>s;s++)c=f.$headers.filter(":not([colspan])"),c=c.add(f.$headers.filter('[colspan="1"]')).filter('[data-column="'+s+'"]:last'),l=f.headers[s],u=k.getParserById(k.getData(c,l,"sorter")),f.empties[s]=k.getData(c,l,"empty")||f.emptyTo||(f.emptyToBottom?"bottom":"top"),f.strings[s]=k.getData(c,l,"string")||f.stringTo||"max",u||(u=o(e,i,-1,s)),f.debug&&(p+="column:"+s+"; parser:"+u.id+"; string:"+f.strings[s]+"; empty: "+f.empties[s]+"\n"),r.push(u);f.debug&&(t(p),n("Completed detecting parsers",d)),f.parsers=r}function s(i){var o,a,s,c,l,u,d,f,h,p,m=i.tBodies,g=i.config,v=g.parsers,_=[];if(g.cache={},!v)return g.debug?t("*Empty table!* Not building a cache"):"";for(g.debug&&(p=new Date),g.showProcessing&&k.isProcessing(i,!0),d=0;d<m.length;d++)if(g.cache[d]={row:[],normalized:[]},!e(m[d]).hasClass(g.cssInfoBlock)){for(o=m[d]&&m[d].rows.length||0,a=m[d].rows[0]&&m[d].rows[0].cells.length||0,l=0;o>l;++l)if(f=e(m[d].rows[l]),h=[],f.hasClass(g.cssChildRow))g.cache[d].row[g.cache[d].row.length-1]=g.cache[d].row[g.cache[d].row.length-1].add(f);else{for(g.cache[d].row.push(f),u=0;a>u;++u)s=r(i,f[0].cells[u],u),c=v[u].format(s,i,f[0].cells[u],u),h.push(c),"numeric"===(v[u].type||"").toLowerCase()&&(_[u]=Math.max(Math.abs(c)||0,_[u]||0));h.push(g.cache[d].normalized.length),g.cache[d].normalized.push(h)}g.cache[d].colMax=_}g.showProcessing&&k.isProcessing(i),g.debug&&n("Building cache for "+o+" rows",p)}function c(t,r){var o,a,s,c,l,u,d,f,h,p,m,g,v=t.config,_=v.widgetOptions,y=t.tBodies,b=[],w=v.cache;if(!i(w)){for(v.debug&&(g=new Date),h=0;h<y.length;h++)if(l=e(y[h]),l.length&&!l.hasClass(v.cssInfoBlock)){for(u=k.processTbody(t,l,!0),o=w[h].row,a=w[h].normalized,s=a.length,c=s?a[0].length-1:0,d=0;s>d;d++)if(m=a[d][c],b.push(o[m]),!v.appender||v.pager&&(!v.pager.removeRows||!_.pager_removeRows)&&!v.pager.ajax)for(p=o[m].length,f=0;p>f;f++)u.append(o[m][f]);k.processTbody(t,u,!1)}v.appender&&v.appender(t,b),v.debug&&n("Rebuilt table",g),r||v.appender||k.applyWidget(t),e(t).trigger("sortEnd",t),e(t).trigger("updateComplete",t)}}function l(t){var n,i,r,o,a,s,c,l,u,d,f,h,p=[],m={},g=0,v=e(t).find("thead:eq(0), tfoot").children("tr");for(n=0;n<v.length;n++)for(s=v[n].cells,i=0;i<s.length;i++){for(a=s[i],c=a.parentNode.rowIndex,l=c+"-"+a.cellIndex,u=a.rowSpan||1,d=a.colSpan||1,"undefined"==typeof p[c]&&(p[c]=[]),r=0;r<p[c].length+1;r++)if("undefined"==typeof p[c][r]){f=r;break}for(m[l]=f,g=Math.max(f,g),e(a).attr({"data-column":f}),r=c;c+u>r;r++)for("undefined"==typeof p[r]&&(p[r]=[]),h=p[r],o=f;f+d>o;o++)h[o]="x"}return t.config.columns=g+1,m}function u(e){return/^d/i.test(e)||1===e}function d(i){var r,o,a,s,c,d,f,p=l(i),m=i.config;m.headerList=[],m.headerContent=[],m.debug&&(f=new Date),s=m.cssIcon?'<i class="'+m.cssIcon+" "+k.css.icon+'"></i>':"",m.$headers=e(i).find(m.selectorHeaders).each(function(t){o=e(this),r=m.headers[t],m.headerContent[t]=e(this).html(),c=m.headerTemplate.replace(/\{content\}/g,e(this).html()).replace(/\{icon\}/g,s),m.onRenderTemplate&&(a=m.onRenderTemplate.apply(o,[t,c]),a&&"string"==typeof a&&(c=a)),e(this).html('<div class="tablesorter-header-inner">'+c+"</div>"),m.onRenderHeader&&m.onRenderHeader.apply(o,[t]),this.column=p[this.parentNode.rowIndex+"-"+this.cellIndex],this.order=u(k.getData(o,r,"sortInitialOrder")||m.sortInitialOrder)?[1,0,2]:[0,1,2],this.count=-1,this.lockedOrder=!1,d=k.getData(o,r,"lockedOrder")||!1,"undefined"!=typeof d&&d!==!1&&(this.order=this.lockedOrder=u(d)?[1,1,1]:[0,0,0]),o.addClass(k.css.header+" "+m.cssHeader),m.headerList[t]=this,o.parent().addClass(k.css.headerRow+" "+m.cssHeaderRow),o.attr("tabindex",0)}),h(i),m.debug&&(n("Built headers:",f),t(m.$headers))}function f(e,t,n){var i=e.config;i.$table.find(i.selectorRemove).remove(),a(e),s(e),w(i.$table,t,n)}function h(t){var n,i=t.config;i.$headers.each(function(t,r){n="false"===k.getData(r,i.headers[t],"sorter"),r.sortDisabled=n,e(r)[n?"addClass":"removeClass"]("sorter-false")})}function p(t){var n,i,r,o,a=t.config,s=a.sortList,c=[k.css.sortAsc+" "+a.cssAsc,k.css.sortDesc+" "+a.cssDesc],l=e(t).find("tfoot tr").children().removeClass(c.join(" "));for(a.$headers.removeClass(c.join(" ")),o=s.length,i=0;o>i;i++)if(2!==s[i][1]&&(n=a.$headers.not(".sorter-false").filter('[data-column="'+s[i][0]+'"]'+(1===o?":last":"")),n.length))for(r=0;r<n.length;r++)n[r].sortDisabled||(n.eq(r).addClass(c[s[i][1]]),l.length&&l.filter('[data-column="'+s[i][0]+'"]').eq(r).addClass(c[s[i][1]]))}function m(t){if(t.config.widthFixed&&0===e(t).find("colgroup").length){var n=e("<colgroup>"),i=e(t).width();e(t.tBodies[0]).find("tr:first").children("td:visible").each(function(){n.append(e("<col>").css("width",parseInt(e(this).width()/i*1e3,10)/10+"%"))}),e(t).prepend(n)}}function g(t,n){var i,r,o,a=t.config,s=n||a.sortList;a.sortList=[],e.each(s,function(t,n){i=[parseInt(n[0],10),parseInt(n[1],10)],o=a.$headers[i[0]],o&&(a.sortList.push(i),r=e.inArray(i[1],o.order),o.count=r>=0?r:i[1]%(a.sortReset?3:2))})}function v(e,t){return e&&e[t]?e[t].type||"":""}function _(t,n,i){var r,o,a,s,l,u=t.config,d=!i[u.sortMultiSortKey],f=e(t);if(f.trigger("sortStart",t),n.count=i[u.sortResetKey]?2:(n.count+1)%(u.sortReset?3:2),u.sortRestart&&(o=n,u.$headers.each(function(){this===o||!d&&e(this).is("."+k.css.sortDesc+",."+k.css.sortAsc)||(this.count=-1)})),o=n.column,d){if(u.sortList=[],null!==u.sortForce)for(r=u.sortForce,a=0;a<r.length;a++)r[a][0]!==o&&u.sortList.push(r[a]);if(s=n.order[n.count],2>s&&(u.sortList.push([o,s]),n.colSpan>1))for(a=1;a<n.colSpan;a++)u.sortList.push([o+a,s])}else if(u.sortAppend&&u.sortList.length>1&&k.isValueInArray(u.sortAppend[0][0],u.sortList)&&u.sortList.pop(),k.isValueInArray(o,u.sortList))for(a=0;a<u.sortList.length;a++)l=u.sortList[a],s=u.$headers[l[0]],l[0]===o&&(l[1]=s.order[n.count],2===l[1]&&(u.sortList.splice(a,1),s.count=-1));else if(s=n.order[n.count],2>s&&(u.sortList.push([o,s]),n.colSpan>1))for(a=1;a<n.colSpan;a++)u.sortList.push([o+a,s]);if(null!==u.sortAppend)for(r=u.sortAppend,a=0;a<r.length;a++)r[a][0]!==o&&u.sortList.push(r[a]);f.trigger("sortBegin",t),setTimeout(function(){p(t),y(t),c(t)},1)}function y(e){var t,r,o,a,s,c,l,u,d,f,h,p,m,g,_=0,y=e.config,b=y.textSorter||"",w=y.sortList,$=w.length,x=e.tBodies.length;if(!y.serverSideSorting&&!i(y.cache)){for(y.debug&&(h=new Date),r=0;x>r;r++)c=y.cache[r].colMax,l=y.cache[r].normalized,u=l.length,f=l&&l[0]?l[0].length-1:0,l.sort(function(n,i){for(t=0;$>t;t++){if(s=w[t][0],d=w[t][1],_=0===d,m=_?n:i,g=_?i:n,o=y.string[y.empties[s]||y.emptyTo],""===m[s]&&0!==o)return("boolean"==typeof o?o?-1:1:o||1)*(_?1:-1);if(""===g[s]&&0!==o)return("boolean"==typeof o?o?1:-1:-o||-1)*(_?1:-1);if(a=/n/i.test(v(y.parsers,s)),a&&y.strings[s]?(a="boolean"==typeof y.string[y.strings[s]]?(_?1:-1)*(y.string[y.strings[s]]?-1:1):y.strings[s]?y.string[y.strings[s]]||0:0,p=y.numberSorter?y.numberSorter(m[s],g[s],_,c[s],e):k.sortNumeric(m[s],g[s],a,c[s])):p="function"==typeof b?b(m[s],g[s],_,s,e):"object"==typeof b&&b.hasOwnProperty(s)?b[s](m[s],g[s],_,s,e):k.sortNatural(m[s],g[s]),p)return p}return n[f]-i[f]});y.debug&&n("Sorting on "+w.toString()+" and dir "+d+" time",h)}}function b(e,t){var n=e[0].config;n.pager&&!n.pager.ajax&&e.trigger("updateComplete"),"function"==typeof t&&t(e[0])}function w(e,t,n){t===!1||e[0].isProcessing?b(e,n):e.trigger("sorton",[e[0].config.sortList,function(){b(e,n)}])}function $(t){var n,o,l=t.config,u=l.$table;l.$headers.find(l.selectorSort).add(l.$headers.filter(l.selectorSort)).unbind("mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter").bind("mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter",function(n,r){if(!(1!==(n.which||n.button)&&!/sort|keypress/.test(n.type)||"keypress"===n.type&&13!==n.which||"mouseup"===n.type&&r!==!0&&(new Date).getTime()-o>250)){if("mousedown"===n.type)return o=(new Date).getTime(),"INPUT"===n.target.tagName?"":!l.cancelSelection;l.delayInit&&i(l.cache)&&s(t);var a=/TH|TD/.test(this.tagName)?e(this):e(this).parents("th, td").filter(":first"),c=a[0];c.sortDisabled||_(t,c,n)}}),l.cancelSelection&&l.$headers.attr("unselectable","on").bind("selectstart",!1).css({"user-select":"none",MozUserSelect:"none"}),u.unbind("sortReset update updateRows updateCell updateAll addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave ".split(" ").join(".tablesorter ")).bind("sortReset.tablesorter",function(e){e.stopPropagation(),l.sortList=[],p(t),y(t),c(t)}).bind("updateAll.tablesorter",function(e,n,i){e.stopPropagation(),k.refreshWidgets(t,!0,!0),k.restoreHeaders(t),d(t),$(t),f(t,n,i)}).bind("update.tablesorter updateRows.tablesorter",function(e,n,i){e.stopPropagation(),h(t),f(t,n,i)}).bind("updateCell.tablesorter",function(n,i,o,a){n.stopPropagation(),u.find(l.selectorRemove).remove();var s,c,d,f=u.find("tbody"),h=f.index(e(i).parents("tbody").filter(":first")),p=e(i).parents("tr").filter(":first");i=e(i)[0],f.length&&h>=0&&(c=f.eq(h).find("tr").index(p),d=i.cellIndex,s=l.cache[h].normalized[c].length-1,l.cache[h].row[t.config.cache[h].normalized[c][s]]=p,l.cache[h].normalized[c][d]=l.parsers[d].format(r(t,i,d),t,i,d),w(u,o,a))}).bind("addRows.tablesorter",function(e,i,o,s){e.stopPropagation();var c,d=i.filter("tr").length,f=[],h=i[0].cells.length,p=u.find("tbody").index(i.parents("tbody").filter(":first"));for(l.parsers||a(t),c=0;d>c;c++){for(n=0;h>n;n++)f[n]=l.parsers[n].format(r(t,i[c].cells[n],n),t,i[c].cells[n],n);f.push(l.cache[p].row.length),l.cache[p].row.push([i[c]]),l.cache[p].normalized.push(f),f=[]}w(u,o,s)}).bind("sorton.tablesorter",function(e,n,r,o){var a=t.config;e.stopPropagation(),u.trigger("sortStart",this),g(t,n),p(t),a.delayInit&&i(a.cache)&&s(t),u.trigger("sortBegin",this),y(t),c(t,o),"function"==typeof r&&r(t)}).bind("appendCache.tablesorter",function(e,n,i){e.stopPropagation(),c(t,i),"function"==typeof n&&n(t)}).bind("applyWidgetId.tablesorter",function(e,n){e.stopPropagation(),k.getWidgetById(n).format(t,l,l.widgetOptions)}).bind("applyWidgets.tablesorter",function(e,n){e.stopPropagation(),k.applyWidget(t,n)}).bind("refreshWidgets.tablesorter",function(e,n,i){e.stopPropagation(),k.refreshWidgets(t,n,i)}).bind("destroy.tablesorter",function(e,n,i){e.stopPropagation(),k.destroy(t,n,i)})}var k=this;k.version="2.13.3",k.parsers=[],k.widgets=[],k.defaults={theme:"default",widthFixed:!1,showProcessing:!1,headerTemplate:"{content}",onRenderTemplate:null,onRenderHeader:null,cancelSelection:!0,dateFormat:"mmddyyyy",sortMultiSortKey:"shiftKey",sortResetKey:"ctrlKey",usNumberFormat:!0,delayInit:!1,serverSideSorting:!1,headers:{},ignoreCase:!0,sortForce:null,sortList:[],sortAppend:null,sortInitialOrder:"asc",sortLocaleCompare:!1,sortReset:!1,sortRestart:!1,emptyTo:"bottom",stringTo:"max",textExtraction:"simple",textSorter:null,numberSorter:null,widgets:[],widgetOptions:{zebra:["even","odd"]},initWidgets:!0,initialized:null,tableClass:"",cssAsc:"",cssDesc:"",cssHeader:"",cssHeaderRow:"",cssProcessing:"",cssChildRow:"tablesorter-childRow",cssIcon:"tablesorter-icon",cssInfoBlock:"tablesorter-infoOnly",selectorHeaders:"> thead th, > thead td",selectorSort:"th, td",selectorRemove:".remove-me",debug:!1,headerList:[],empties:{},strings:{},parsers:[]},k.css={table:"tablesorter",childRow:"tablesorter-childRow",header:"tablesorter-header",headerRow:"tablesorter-headerRow",icon:"tablesorter-icon",info:"tablesorter-infoOnly",processing:"tablesorter-processing",sortAsc:"tablesorter-headerAsc",sortDesc:"tablesorter-headerDesc"},k.log=t,k.benchmark=n,k.construct=function(t){return this.each(function(){var n=this,i=e.extend(!0,{},k.defaults,t);!n.hasInitialized&&k.buildTable&&"TABLE"!==this.tagName&&k.buildTable(n,i),k.setup(n,i)})},k.setup=function(n,i){if(!n||!n.tHead||0===n.tBodies.length||n.hasInitialized===!0)return i.debug?t("stopping initialization! No table, thead, tbody or tablesorter has already been initialized"):"";var r="",o=e(n),c=e.metadata;n.hasInitialized=!1,n.isProcessing=!0,n.config=i,e.data(n,"tablesorter",i),i.debug&&e.data(n,"startoveralltimer",new Date),i.supportsTextContent="x"===e("<span>x</span>")[0].textContent,i.supportsDataObject=function(e){return e[0]=parseInt(e[0],10),e[0]>1||1===e[0]&&parseInt(e[1],10)>=4}(e.fn.jquery.split(".")),i.string={max:1,min:-1,"max+":1,"max-":-1,zero:0,none:0,"null":0,top:!0,bottom:!1},/tablesorter\-/.test(o.attr("class"))||(r=""!==i.theme?" tablesorter-"+i.theme:""),i.$table=o.addClass(k.css.table+" "+i.tableClass+r),i.$tbodies=o.children("tbody:not(."+i.cssInfoBlock+")"),i.widgetInit={},d(n),m(n),a(n),i.delayInit||s(n),$(n),i.supportsDataObject&&"undefined"!=typeof o.data().sortlist?i.sortList=o.data().sortlist:c&&o.metadata()&&o.metadata().sortlist&&(i.sortList=o.metadata().sortlist),k.applyWidget(n,!0),i.sortList.length>0?o.trigger("sorton",[i.sortList,{},!i.initWidgets]):i.initWidgets&&k.applyWidget(n),i.showProcessing&&o.unbind("sortBegin.tablesorter sortEnd.tablesorter").bind("sortBegin.tablesorter sortEnd.tablesorter",function(e){k.isProcessing(n,"sortBegin"===e.type)}),n.hasInitialized=!0,n.isProcessing=!1,i.debug&&k.benchmark("Overall initialization time",e.data(n,"startoveralltimer")),o.trigger("tablesorter-initialized",n),"function"==typeof i.initialized&&i.initialized(n)},k.isProcessing=function(t,n,i){t=e(t);var r=t[0].config,o=i||t.find("."+k.css.header);n?(r.sortList.length>0&&(o=o.filter(function(){return this.sortDisabled?!1:k.isValueInArray(parseFloat(e(this).attr("data-column")),r.sortList)})),o.addClass(k.css.processing+" "+r.cssProcessing)):o.removeClass(k.css.processing+" "+r.cssProcessing)},k.processTbody=function(t,n,i){var r;return i?(t.isProcessing=!0,n.before('<span class="tablesorter-savemyplace"/>'),r=e.fn.detach?n.detach():n.remove()):(r=e(t).find("span.tablesorter-savemyplace"),n.insertAfter(r),r.remove(),void(t.isProcessing=!1))},k.clearTableBody=function(t){e(t)[0].config.$tbodies.empty()},k.restoreHeaders=function(t){var n=t.config;n.$table.find(n.selectorHeaders).each(function(t){e(this).find(".tablesorter-header-inner").length&&e(this).html(n.headerContent[t])})},k.destroy=function(t,n,i){if(t=e(t)[0],t.hasInitialized){k.refreshWidgets(t,!0,!0);var r=e(t),o=t.config,a=r.find("thead:first"),s=a.find("tr."+k.css.headerRow).removeClass(k.css.headerRow+" "+o.cssHeaderRow),c=r.find("tfoot:first > tr").children("th, td");a.find("tr").not(s).remove(),r.removeData("tablesorter").unbind("sortReset update updateAll updateRows updateCell addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress sortBegin sortEnd ".split(" ").join(".tablesorter ")),o.$headers.add(c).removeClass([k.css.header,o.cssHeader,o.cssAsc,o.cssDesc,k.css.sortAsc,k.css.sortDesc].join(" ")).removeAttr("data-column"),s.find(o.selectorSort).unbind("mousedown.tablesorter mouseup.tablesorter keypress.tablesorter"),k.restoreHeaders(t),n!==!1&&r.removeClass(k.css.table+" "+o.tableClass+" tablesorter-"+o.theme),t.hasInitialized=!1,"function"==typeof i&&i(t)}},k.regex={chunk:/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,hex:/^0x[0-9a-f]+$/i},k.sortNatural=function(e,t){if(e===t)return 0;var n,i,r,o,a,s,c,l,u=k.regex;if(u.hex.test(t)){if(i=parseInt(e.match(u.hex),16),o=parseInt(t.match(u.hex),16),o>i)return-1;if(i>o)return 1}for(n=e.replace(u.chunk,"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0"),r=t.replace(u.chunk,"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0"),l=Math.max(n.length,r.length),c=0;l>c;c++){if(a=isNaN(n[c])?n[c]||0:parseFloat(n[c])||0,s=isNaN(r[c])?r[c]||0:parseFloat(r[c])||0,isNaN(a)!==isNaN(s))return isNaN(a)?1:-1;if(typeof a!=typeof s&&(a+="",s+=""),s>a)return-1;if(a>s)return 1}return 0},k.sortText=function(e,t){return e>t?1:t>e?-1:0},k.getTextValue=function(e,t,n){if(n){var i,r=e?e.length:0,o=n+t;for(i=0;r>i;i++)o+=e.charCodeAt(i);return t*o}return 0},k.sortNumeric=function(e,t,n,i){return e===t?0:(isNaN(e)&&(e=k.getTextValue(e,n,i)),isNaN(t)&&(t=k.getTextValue(t,n,i)),e-t)},k.characterEquivalents={a:"\xe1\xe0\xe2\xe3\xe4\u0105\xe5",A:"\xc1\xc0\xc2\xc3\xc4\u0104\xc5",c:"\xe7\u0107\u010d",C:"\xc7\u0106\u010c",e:"\xe9\xe8\xea\xeb\u011b\u0119",E:"\xc9\xc8\xca\xcb\u011a\u0118",i:"\xed\xec\u0130\xee\xef\u0131",I:"\xcd\xcc\u0130\xce\xcf",o:"\xf3\xf2\xf4\xf5\xf6",O:"\xd3\xd2\xd4\xd5\xd6",ss:"\xdf",SS:"\u1e9e",u:"\xfa\xf9\xfb\xfc\u016f",U:"\xda\xd9\xdb\xdc\u016e"},k.replaceAccents=function(e){var t,n="[",i=k.characterEquivalents;if(!k.characterRegex){k.characterRegexArray={};for(t in i)"string"==typeof t&&(n+=i[t],k.characterRegexArray[t]=new RegExp("["+i[t]+"]","g"));k.characterRegex=new RegExp(n+"]")}if(k.characterRegex.test(e))for(t in i)"string"==typeof t&&(e=e.replace(k.characterRegexArray[t],t));return e},k.isValueInArray=function(e,t){var n,i=t.length;for(n=0;i>n;n++)if(t[n][0]===e)return!0;return!1},k.addParser=function(e){var t,n=k.parsers.length,i=!0;for(t=0;n>t;t++)k.parsers[t].id.toLowerCase()===e.id.toLowerCase()&&(i=!1);i&&k.parsers.push(e)},k.getParserById=function(e){var t,n=k.parsers.length;for(t=0;n>t;t++)if(k.parsers[t].id.toLowerCase()===e.toString().toLowerCase())return k.parsers[t];return!1},k.addWidget=function(e){k.widgets.push(e)},k.getWidgetById=function(e){var t,n,i=k.widgets.length;for(t=0;i>t;t++)if(n=k.widgets[t],n&&n.hasOwnProperty("id")&&n.id.toLowerCase()===e.toLowerCase())return n},k.applyWidget=function(t,i){t=e(t)[0];var r,o,a,s=t.config,c=s.widgetOptions,l=[];s.debug&&(r=new Date),s.widgets.length&&(s.widgets=e.grep(s.widgets,function(t,n){return e.inArray(t,s.widgets)===n}),e.each(s.widgets||[],function(e,t){a=k.getWidgetById(t),a&&a.id&&(a.priority||(a.priority=10),l[e]=a)}),l.sort(function(e,t){return e.priority<t.priority?-1:e.priority===t.priority?0:1}),e.each(l,function(n,r){r&&((i||!s.widgetInit[r.id])&&(r.hasOwnProperty("options")&&(c=t.config.widgetOptions=e.extend(!0,{},r.options,c),s.widgetInit[r.id]=!0),r.hasOwnProperty("init")&&r.init(t,r,s,c)),!i&&r.hasOwnProperty("format")&&r.format(t,s,c,!1))})),s.debug&&(o=s.widgets.length,n("Completed "+(i===!0?"initializing ":"applying ")+o+" widget"+(1!==o?"s":""),r))},k.refreshWidgets=function(n,i,r){n=e(n)[0];var o,a=n.config,s=a.widgets,c=k.widgets,l=c.length;for(o=0;l>o;o++)c[o]&&c[o].id&&(i||e.inArray(c[o].id,s)<0)&&(a.debug&&t("Refeshing widgets: Removing "+c[o].id),c[o].hasOwnProperty("remove")&&(c[o].remove(n,a,a.widgetOptions),a.widgetInit[c[o].id]=!1));r!==!0&&k.applyWidget(n,i)},k.getData=function(t,n,i){var r,o,a="",s=e(t);return s.length?(r=e.metadata?s.metadata():!1,o=" "+(s.attr("class")||""),"undefined"!=typeof s.data(i)||"undefined"!=typeof s.data(i.toLowerCase())?a+=s.data(i)||s.data(i.toLowerCase()):r&&"undefined"!=typeof r[i]?a+=r[i]:n&&"undefined"!=typeof n[i]?a+=n[i]:" "!==o&&o.match(" "+i+"-")&&(a=o.match(new RegExp("\\s"+i+"-([\\w-]+)"))[1]||""),e.trim(a)):""},k.formatFloat=function(t,n){if("string"!=typeof t||""===t)return t;var i,r=n&&n.config?n.config.usNumberFormat!==!1:"undefined"!=typeof n?n:!0;return t=r?t.replace(/,/g,""):t.replace(/[\s|\.]/g,"").replace(/,/g,"."),/^\s*\([.\d]+\)/.test(t)&&(t=t.replace(/^\s*\(([.\d]+)\)/,"-$1")),i=parseFloat(t),isNaN(i)?e.trim(t):i},k.isDigit=function(e){return isNaN(e)?/^[\-+(]?\d+[)]?$/.test(e.toString().replace(/[,.'"\s]/g,"")):!0}}});var t=e.tablesorter;e.fn.extend({tablesorter:t.construct}),t.addParser({id:"text",is:function(){return!0},format:function(n,i){var r=i.config;return n&&(n=e.trim(r.ignoreCase?n.toLocaleLowerCase():n),n=r.sortLocaleCompare?t.replaceAccents(n):n),n},type:"text"}),t.addParser({id:"digit",is:function(e){return t.isDigit(e)},format:function(n,i){var r=t.formatFloat((n||"").replace(/[^\w,. \-()]/g,""),i);return n&&"number"==typeof r?r:n?e.trim(n&&i.config.ignoreCase?n.toLocaleLowerCase():n):n},type:"numeric"}),t.addParser({id:"currency",is:function(e){return/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/.test((e||"").replace(/[,. ]/g,""))},format:function(n,i){var r=t.formatFloat((n||"").replace(/[^\w,. \-()]/g,""),i);return n&&"number"==typeof r?r:n?e.trim(n&&i.config.ignoreCase?n.toLocaleLowerCase():n):n},type:"numeric"}),t.addParser({id:"ipAddress",is:function(e){return/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/.test(e)},format:function(e,n){var i,r=e?e.split("."):"",o="",a=r.length;for(i=0;a>i;i++)o+=("00"+r[i]).slice(-3);return e?t.formatFloat(o,n):e},type:"numeric"}),t.addParser({id:"url",is:function(e){return/^(https?|ftp|file):\/\//.test(e)},format:function(t){return t?e.trim(t.replace(/(https?|ftp|file):\/\//,"")):t
},type:"text"}),t.addParser({id:"isoDate",is:function(e){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/.test(e)},format:function(e,n){return e?t.formatFloat(""!==e?new Date(e.replace(/-/g,"/")).getTime()||"":"",n):e},type:"numeric"}),t.addParser({id:"percent",is:function(e){return/(\d\s*?%|%\s*?\d)/.test(e)&&e.length<15},format:function(e,n){return e?t.formatFloat(e.replace(/%/g,""),n):e},type:"numeric"}),t.addParser({id:"usLongDate",is:function(e){return/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i.test(e)||/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i.test(e)},format:function(e,n){return e?t.formatFloat(new Date(e.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||"",n):e},type:"numeric"}),t.addParser({id:"shortDate",is:function(e){return/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/.test((e||"").replace(/\s+/g," ").replace(/[\-.,]/g,"/"))},format:function(e,n,i,r){if(e){var o=n.config,a=o.headerList[r],s=a.dateFormat||t.getData(a,o.headers[r],"dateFormat")||o.dateFormat;e=e.replace(/\s+/g," ").replace(/[\-.,]/g,"/"),"mmddyyyy"===s?e=e.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$1/$2"):"ddmmyyyy"===s?e=e.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$2/$1"):"yyyymmdd"===s&&(e=e.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,"$1/$2/$3"))}return e?t.formatFloat(new Date(e).getTime()||"",n):e},type:"numeric"}),t.addParser({id:"time",is:function(e){return/^(([0-2]?\d:[0-5]\d)|([0-1]?\d:[0-5]\d\s?([AP]M)))$/i.test(e)},format:function(e,n){return e?t.formatFloat(new Date("2000/01/01 "+e.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||"",n):e},type:"numeric"}),t.addParser({id:"metadata",is:function(){return!1},format:function(t,n,i){var r=n.config,o=r.parserMetadataName?r.parserMetadataName:"sortValue";return e(i).metadata()[o]},type:"numeric"}),t.addWidget({id:"zebra",priority:90,format:function(n,i,r){var o,a,s,c,l,u,d,f,h=new RegExp(i.cssChildRow,"i"),p=i.$tbodies;for(i.debug&&(u=new Date),d=0;d<p.length;d++)o=p.eq(d),f=o.children("tr").length,f>1&&(c=0,a=o.children("tr:visible"),a.each(function(){s=e(this),h.test(this.className)||c++,l=c%2===0,s.removeClass(r.zebra[l?1:0]).addClass(r.zebra[l?0:1])}));i.debug&&t.benchmark("Applying Zebra widget",u)},remove:function(t,n,i){var r,o,a=n.$tbodies,s=(i.zebra||["even","odd"]).join(" ");for(r=0;r<a.length;r++)o=e.tablesorter.processTbody(t,a.eq(r),!0),o.children().removeClass(s),e.tablesorter.processTbody(t,o,!1)}})}(jQuery),function(e){e.fn.hoverIntent=function(t,n,i){var r={interval:100,sensitivity:7,timeout:0};r="object"==typeof t?e.extend(r,t):e.isFunction(n)?e.extend(r,{over:t,out:n,selector:i}):e.extend(r,{over:t,out:t,selector:n});var o,a,s,c,l=function(e){o=e.pageX,a=e.pageY},u=function(t,n){return n.hoverIntent_t=clearTimeout(n.hoverIntent_t),Math.abs(s-o)+Math.abs(c-a)<r.sensitivity?(e(n).off("mousemove.hoverIntent",l),n.hoverIntent_s=1,r.over.apply(n,[t])):(s=o,c=a,n.hoverIntent_t=setTimeout(function(){u(t,n)},r.interval),void 0)},d=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,r.out.apply(t,[e])},f=function(t){var n=jQuery.extend({},t),i=this;i.hoverIntent_t&&(i.hoverIntent_t=clearTimeout(i.hoverIntent_t)),"mouseenter"==t.type?(s=n.pageX,c=n.pageY,e(i).on("mousemove.hoverIntent",l),1!=i.hoverIntent_s&&(i.hoverIntent_t=setTimeout(function(){u(n,i)},r.interval))):(e(i).off("mousemove.hoverIntent",l),1==i.hoverIntent_s&&(i.hoverIntent_t=setTimeout(function(){d(n,i)},r.timeout)))};return this.on({"mouseenter.hoverIntent":f,"mouseleave.hoverIntent":f},r.selector)}}(jQuery),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,r,o,a,s=gap,c=t[e];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(c)){for(o=c.length,n=0;o>n;n+=1)a[n]=str(n,c)||"null";return r=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,r}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],r=str(i,c),r&&a.push(quote(i)+(gap?": ":":")+r));else for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(r=str(i,c),r&&a.push(quote(i)+(gap?": ":":")+r));return r=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i=walk(r,n),void 0!==i?r[n]=i:delete r[n]);return reviver.call(e,t,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e,t){"use strict";var n,i=e,r=i.document,o=i.navigator,a=i.setTimeout,s=i.Number.parseInt||i.parseInt,c=i.Number.parseFloat||i.parseFloat,l=i.Number.isNaN||i.isNaN,u=i.encodeURIComponent,d=i.Math,f=i.Date,h=i.ActiveXObject,p=i.Array.prototype.slice,m=i.Object.keys,g=i.Object.prototype.hasOwnProperty,v=function(){return"function"==typeof i.Object.defineProperty&&function(){try{var e={};return i.Object.defineProperty(e,"y",{value:"z"}),"z"===e.y}catch(t){return!1}}()?i.Object.defineProperty:void 0}(),_=function(e){return p.call(e,0)},y=function(e,t,n){if("function"==typeof t.indexOf)return t.indexOf(e,n);var i,r=t.length;for("undefined"==typeof n?n=0:0>n&&(n=r+n),i=n;r>i;i++)if(g.call(t,i)&&t[i]===e)return i;return-1},b=function(){var e,n,i,r,o,a,s=_(arguments),c=s[0]||{};for(e=1,n=s.length;n>e;e++)if(null!=(i=s[e]))for(r in i)if(g.call(i,r)){if(o=c[r],a=i[r],c===a)continue;a!==t&&(c[r]=a)}return c},w=function(e){var t,n,i,r;if("object"!=typeof e||null==e)t=e;else if("number"==typeof e.length)for(t=[],n=0,i=e.length;i>n;n++)g.call(e,n)&&(t[n]=w(e[n]));else{t={};for(r in e)g.call(e,r)&&(t[r]=w(e[r]))}return t},$=function(e,t){for(var n={},i=0,r=t.length;r>i;i++)t[i]in e&&(n[t[i]]=e[t[i]]);return n},k=function(e,t){var n={};for(var i in e)-1===y(i,t)&&(n[i]=e[i]);return n},x=function(e){if(null==e)return[];if(m)return m(e);var t=[];for(var n in e)g.call(e,n)&&t.push(n);return t},j=function(e){if(e)for(var t in e)g.call(e,t)&&delete e[t];return e},C=function(e,t){t in e&&"function"==typeof v&&v(e,t,{value:e[t],writable:!1,configurable:!0,enumerable:!0})},S=function(e){return function(){var t;return t=e.now?e.now():(new e).getTime()}}(f),T={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,unavailable:null,deactivated:null,overdue:null,ready:null},I="11.0.0",D={},E={},A=null,P={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate","flash-overdue":"Flash communication was established but NOT within the acceptable time limit"}},N=function(){var e,t,n,i,o="ZeroClipboard.swf";if(!r.currentScript||!(i=r.currentScript.src)){var a=r.getElementsByTagName("script");if("readyState"in a[0])for(e=a.length;e--&&("interactive"!==a[e].readyState||!(i=a[e].src)););else if("loading"===r.readyState)i=a[a.length-1].src;else{for(e=a.length;e--;){if(n=a[e].src,!n){t=null;break}if(n=n.split("#")[0].split("?")[0],n=n.slice(0,n.lastIndexOf("/")+1),null==t)t=n;else if(t!==n){t=null;break}}null!==t&&(i=t)}}return i&&(i=i.split("#")[0].split("?")[0],o=i.slice(0,i.lastIndexOf("/")+1)+o),o}(),M={swfPath:N,trustedDomains:e.location.host?[e.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},O=function(e){if("object"==typeof e&&null!==e)for(var t in e)if(g.call(e,t))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(t))M[t]=e[t];else if(null==T.bridge)if("containerId"===t||"swfObjectId"===t){if(!J(e[t]))throw new Error("The specified `"+t+"` value is not valid as an HTML4 Element ID");M[t]=e[t]}else M[t]=e[t];{if("string"!=typeof e||!e)return w(M);if(g.call(M,e))return M[e]}},L=function(){return{browser:$(o,["userAgent","platform","appName"]),flash:k(T,["bridge"]),zeroclipboard:{version:jt.version,config:jt.config()}}},F=function(){return!!(T.disabled||T.outdated||T.unavailable||T.deactivated)},z=function(e,t){var n,i,r,o={};if("string"==typeof e&&e)r=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)g.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&jt.on(n,e[n]);if(r&&r.length){for(n=0,i=r.length;i>n;n++)e=r[n].replace(/^on/,""),o[e]=!0,D[e]||(D[e]=[]),D[e].push(t);if(o.ready&&T.ready&&jt.emit({type:"ready"}),o.error){var a=["disabled","outdated","unavailable","deactivated","overdue"];for(n=0,i=a.length;i>n;n++)if(T[a[n]]===!0){jt.emit({type:"error",name:"flash-"+a[n]});break}}}return jt},R=function(e,t){var n,i,r,o,a;if(0===arguments.length)o=x(D);else if("string"==typeof e&&e)o=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)g.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&jt.off(n,e[n]);if(o&&o.length)for(n=0,i=o.length;i>n;n++)if(e=o[n].toLowerCase().replace(/^on/,""),a=D[e],a&&a.length)if(t)for(r=y(t,a);-1!==r;)a.splice(r,1),r=y(t,a,r);else a.length=0;return jt},q=function(e){var t;return t="string"==typeof e&&e?w(D[e])||null:w(D)},H=function(e){var t,n,i;return e=V(e),e&&!nt(e)?"ready"===e.type&&T.overdue===!0?jt.emit({type:"error",name:"flash-overdue"}):(t=b({},e),tt.call(this,t),"copy"===e.type&&(i=ct(E),n=i.data,A=i.formatMap),n):void 0},Y=function(){if("boolean"!=typeof T.ready&&(T.ready=!1),!jt.isFlashUnusable()&&null===T.bridge){var e=M.flashLoadTimeout;"number"==typeof e&&e>=0&&a(function(){"boolean"!=typeof T.deactivated&&(T.deactivated=!0),T.deactivated===!0&&jt.emit({type:"error",name:"flash-deactivated"})},e),T.overdue=!1,at()}},B=function(){jt.clearData(),jt.deactivate(),jt.emit("destroy"),st(),jt.off()},W=function(e,t){var n;if("object"==typeof e&&e&&"undefined"==typeof t)n=e,jt.clearData();else{if("string"!=typeof e||!e)return;n={},n[e]=t}for(var i in n)"string"==typeof i&&i&&g.call(n,i)&&"string"==typeof n[i]&&n[i]&&(E[i]=n[i])},U=function(e){"undefined"==typeof e?(j(E),A=null):"string"==typeof e&&g.call(E,e)&&delete E[e]},Q=function(e){if(e&&1===e.nodeType){n&&(gt(n,M.activeClass),n!==e&&gt(n,M.hoverClass)),n=e,mt(e,M.hoverClass);var t=e.getAttribute("title")||M.title;if("string"==typeof t&&t){var i=ot(T.bridge);i&&i.setAttribute("title",t)}var r=M.forceHandCursor===!0||"pointer"===_t(e,"cursor");$t(r),wt()}},G=function(){var e=ot(T.bridge);e&&(e.removeAttribute("title"),e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.top="1px"),n&&(gt(n,M.hoverClass),gt(n,M.activeClass),n=null)},J=function(e){return"string"==typeof e&&e&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(e)},V=function(e){var t;if("string"==typeof e&&e?(t=e,e={}):"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(t=e.type),t){b(e,{type:t.toLowerCase(),target:e.target||n||null,relatedTarget:e.relatedTarget||null,currentTarget:T&&T.bridge||null,timeStamp:e.timeStamp||S()||null});var i=P[e.type];return"error"===e.type&&e.name&&i&&(i=i[e.name]),i&&(e.message=i),"ready"===e.type&&b(e,{target:null,version:T.version}),"error"===e.type&&(/^flash-(disabled|outdated|unavailable|deactivated|overdue)$/.test(e.name)&&b(e,{target:null,minimumVersion:I}),/^flash-(outdated|unavailable|deactivated|overdue)$/.test(e.name)&&b(e,{version:T.version})),"copy"===e.type&&(e.clipboardData={setData:jt.setData,clearData:jt.clearData}),"aftercopy"===e.type&&(e=lt(e,A)),e.target&&!e.relatedTarget&&(e.relatedTarget=K(e.target)),e=X(e)}},K=function(e){var t=e&&e.getAttribute&&e.getAttribute("data-clipboard-target");return t?r.getElementById(t):null},X=function(e){if(e&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)){var n=e.target,o="_mouseover"===e.type&&e.relatedTarget?e.relatedTarget:t,a="_mouseout"===e.type&&e.relatedTarget?e.relatedTarget:t,s=bt(n),c=i.screenLeft||i.screenX||0,l=i.screenTop||i.screenY||0,u=r.body.scrollLeft+r.documentElement.scrollLeft,d=r.body.scrollTop+r.documentElement.scrollTop,f=s.left+("number"==typeof e._stageX?e._stageX:0),h=s.top+("number"==typeof e._stageY?e._stageY:0),p=f-u,m=h-d,g=c+p,v=l+m,_="number"==typeof e.movementX?e.movementX:0,y="number"==typeof e.movementY?e.movementY:0;delete e._stageX,delete e._stageY,b(e,{srcElement:n,fromElement:o,toElement:a,screenX:g,screenY:v,pageX:f,pageY:h,clientX:p,clientY:m,x:p,y:m,movementX:_,movementY:y,offsetX:0,offsetY:0,layerX:0,layerY:0})}return e},Z=function(e){var t=e&&"string"==typeof e.type&&e.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(t)},et=function(e,t,n,i){i?a(function(){e.apply(t,n)},0):e.apply(t,n)},tt=function(e){if("object"==typeof e&&e&&e.type){var t=Z(e),n=D["*"]||[],r=D[e.type]||[],o=n.concat(r);if(o&&o.length){var a,s,c,l,u,d=this;for(a=0,s=o.length;s>a;a++)c=o[a],l=d,"string"==typeof c&&"function"==typeof i[c]&&(c=i[c]),"object"==typeof c&&c&&"function"==typeof c.handleEvent&&(l=c,c=c.handleEvent),"function"==typeof c&&(u=b({},e),et(c,l,[u],t))}return this}},nt=function(e){var t=e.target||n||null,i="swf"===e._source;switch(delete e._source,e.type){case"error":y(e.name,["flash-disabled","flash-outdated","flash-deactivated","flash-overdue"])&&b(T,{disabled:"flash-disabled"===e.name,outdated:"flash-outdated"===e.name,unavailable:"flash-unavailable"===e.name,deactivated:"flash-deactivated"===e.name,overdue:"flash-overdue"===e.name,ready:!1});break;case"ready":var r=T.deactivated===!0;b(T,{disabled:!1,outdated:!1,unavailable:!1,deactivated:!1,overdue:r,ready:!r});break;case"copy":var o,a,s=e.relatedTarget;!E["text/html"]&&!E["text/plain"]&&s&&(a=s.value||s.outerHTML||s.innerHTML)&&(o=s.value||s.textContent||s.innerText)?(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",o),a!==o&&e.clipboardData.setData("text/html",a)):!E["text/plain"]&&e.target&&(o=e.target.getAttribute("data-clipboard-text"))&&(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",o));break;case"aftercopy":jt.clearData(),t&&t!==pt()&&t.focus&&t.focus();break;case"_mouseover":jt.activate(t),M.bubbleEvents===!0&&i&&(it(b({},e,{type:"mouseover"})),it(b({},e,{type:"mouseenter",bubbles:!1})));break;case"_mouseout":jt.deactivate(),M.bubbleEvents===!0&&i&&(it(b({},e,{type:"mouseout"})),it(b({},e,{type:"mouseleave",bubbles:!1})));break;case"_mousedown":mt(t,M.activeClass),M.bubbleEvents===!0&&i&&it(b({},e,{type:e.type.slice(1)}));break;case"_mouseup":gt(t,M.activeClass),M.bubbleEvents===!0&&i&&it(b({},e,{type:e.type.slice(1)}));break;case"_click":case"_mousemove":M.bubbleEvents===!0&&i&&it(b({},e,{type:e.type.slice(1)}))}return/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)?!0:void 0},it=function(e){if(e&&"string"==typeof e.type&&e){var t,n=e.target||e.srcElement||null,o=n&&n.ownerDocument||r,a={view:o.defaultView||i,canBubble:!0,cancelable:!0,detail:"click"===e.type?1:0,button:"number"==typeof e.which?e.which-1:"number"==typeof e.button?e.button:o.createEvent?0:1},s=b(a,e);n&&(o.createEvent&&n.dispatchEvent?(s=[s.type,s.canBubble,s.cancelable,s.view,s.detail,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,s.relatedTarget],t=o.createEvent("MouseEvents"),t.initMouseEvent&&(t.initMouseEvent.apply(t,s),n.dispatchEvent(t))):o.createEventObject&&n.fireEvent&&(t=o.createEventObject(s),n.fireEvent("on"+s.type,t)))}},rt=function(){var e=r.createElement("div");return e.id=M.containerId,e.className=M.containerClass,e.style.position="absolute",e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px",e.style.zIndex=""+kt(M.zIndex),e},ot=function(e){for(var t=e&&e.parentNode;t&&"OBJECT"===t.nodeName&&t.parentNode;)t=t.parentNode;return t||null},at=function(){var e,t=T.bridge,n=ot(t);if(!t){var o=ht(i.location.host,M),a="never"===o?"none":"all",s=dt(M),c=M.swfPath+ut(M.swfPath,M);n=rt();var l=r.createElement("div");n.appendChild(l),r.body.appendChild(n);var u=r.createElement("div"),d="activex"===T.pluginType;u.innerHTML='<object id="'+M.swfObjectId+'" name="'+M.swfObjectId+'" width="100%" height="100%" '+(d?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+c+'"')+">"+(d?'<param name="movie" value="'+c+'"/>':"")+'<param name="allowScriptAccess" value="'+o+'"/><param name="allowNetworking" value="'+a+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+s+'"/></object>',t=u.firstChild,u=null,t.ZeroClipboard=jt,n.replaceChild(t,l)}return t||(t=r[M.swfObjectId],t&&(e=t.length)&&(t=t[e-1]),!t&&n&&(t=n.firstChild)),T.bridge=t||null,t},st=function(){var e=T.bridge;if(e){var t=ot(e);t&&("activex"===T.pluginType&&"readyState"in e?(e.style.display="none",function n(){if(4===e.readyState){for(var i in e)"function"==typeof e[i]&&(e[i]=null);e.parentNode&&e.parentNode.removeChild(e),t.parentNode&&t.parentNode.removeChild(t)}else a(n,10)}()):(e.parentNode&&e.parentNode.removeChild(e),t.parentNode&&t.parentNode.removeChild(t))),T.ready=null,T.bridge=null,T.deactivated=null}},ct=function(e){var t={},n={};if("object"==typeof e&&e){for(var i in e)if(i&&g.call(e,i)&&"string"==typeof e[i]&&e[i])switch(i.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":t.text=e[i],n.text=i;break;case"text/html":case"html":case"air:html":case"flash:html":t.html=e[i],n.html=i;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":t.rtf=e[i],n.rtf=i}return{data:t,formatMap:n}}},lt=function(e,t){if("object"!=typeof e||!e||"object"!=typeof t||!t)return e;var n={};for(var i in e)if(g.call(e,i)){if("success"!==i&&"data"!==i){n[i]=e[i];continue}n[i]={};var r=e[i];for(var o in r)o&&g.call(r,o)&&g.call(t,o)&&(n[i][t[o]]=r[o])}return n},ut=function(e,t){var n=null==t||t&&t.cacheBust===!0;return n?(-1===e.indexOf("?")?"?":"&")+"noCache="+S():""},dt=function(e){var t,n,r,o,a="",s=[];if(e.trustedDomains&&("string"==typeof e.trustedDomains?o=[e.trustedDomains]:"object"==typeof e.trustedDomains&&"length"in e.trustedDomains&&(o=e.trustedDomains)),o&&o.length)for(t=0,n=o.length;n>t;t++)if(g.call(o,t)&&o[t]&&"string"==typeof o[t]){if(r=ft(o[t]),!r)continue;if("*"===r){s=[r];break}s.push.apply(s,[r,"//"+r,i.location.protocol+"//"+r])}return s.length&&(a+="trustedOrigins="+u(s.join(","))),e.forceEnhancedClipboard===!0&&(a+=(a?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof e.swfObjectId&&e.swfObjectId&&(a+=(a?"&":"")+"swfObjectId="+u(e.swfObjectId)),a},ft=function(e){if(null==e||""===e)return null;if(e=e.replace(/^\s+|\s+$/g,""),""===e)return null;var t=e.indexOf("//");e=-1===t?e:e.slice(t+2);var n=e.indexOf("/");return e=-1===n?e:-1===t||0===n?null:e.slice(0,n),e&&".swf"===e.slice(-4).toLowerCase()?null:e||null},ht=function(){var e=function(e,t){var n,i,r;if(null!=e&&"*"!==t[0]&&("string"==typeof e&&(e=[e]),"object"==typeof e&&"number"==typeof e.length))for(n=0,i=e.length;i>n;n++)if(g.call(e,n)&&(r=ft(e[n]))){if("*"===r){t.length=0,t.push("*");break}-1===y(r,t)&&t.push(r)}};return function(t,n){var i=ft(n.swfPath);null===i&&(i=t);var r=[];e(n.trustedOrigins,r),e(n.trustedDomains,r);var o=r.length;if(o>0){if(1===o&&"*"===r[0])return"always";if(-1!==y(t,r))return 1===o&&t===i?"sameDomain":"always"}return"never"}}(),pt=function(){try{return r.activeElement}catch(e){return null}},mt=function(e,t){if(!e||1!==e.nodeType)return e;if(e.classList)return e.classList.contains(t)||e.classList.add(t),e;if(t&&"string"==typeof t){var n=(t||"").split(/\s+/);if(1===e.nodeType)if(e.className){for(var i=" "+e.className+" ",r=e.className,o=0,a=n.length;a>o;o++)i.indexOf(" "+n[o]+" ")<0&&(r+=" "+n[o]);e.className=r.replace(/^\s+|\s+$/g,"")}else e.className=t}return e},gt=function(e,t){if(!e||1!==e.nodeType)return e;if(e.classList)return e.classList.contains(t)&&e.classList.remove(t),e;if("string"==typeof t&&t){var n=t.split(/\s+/);if(1===e.nodeType&&e.className){for(var i=(" "+e.className+" ").replace(/[\n\t]/g," "),r=0,o=n.length;o>r;r++)i=i.replace(" "+n[r]+" "," ");e.className=i.replace(/^\s+|\s+$/g,"")}}return e},vt=function(){var e=/\-([a-z])/g,t=function(e,t){return t.toUpperCase()};return function(n){return n.replace(e,t)}}(),_t=function(e,t){var n,r,o;return i.getComputedStyle?n=i.getComputedStyle(e,null).getPropertyValue(t):(r=vt(t),n=e.currentStyle?e.currentStyle[r]:e.style[r]),"cursor"!==t||n&&"auto"!==n||(o=e.tagName.toLowerCase(),"a"!==o)?n:"pointer"},yt=function(){var e,t,n,i=1;return"function"==typeof r.body.getBoundingClientRect&&(e=r.body.getBoundingClientRect(),t=e.right-e.left,n=r.body.offsetWidth,i=d.round(t/n*100)/100),i},bt=function(e){var t={left:0,top:0,width:0,height:0};if(e.getBoundingClientRect){var n,o,a,s=e.getBoundingClientRect();"pageXOffset"in i&&"pageYOffset"in i?(n=i.pageXOffset,o=i.pageYOffset):(a=yt(),n=d.round(r.documentElement.scrollLeft/a),o=d.round(r.documentElement.scrollTop/a));var c=r.documentElement.clientLeft||0,l=r.documentElement.clientTop||0;t.left=s.left+n-c,t.top=s.top+o-l,t.width="width"in s?s.width:s.right-s.left,t.height="height"in s?s.height:s.bottom-s.top}return t},wt=function(){var e;if(n&&(e=ot(T.bridge))){var t=bt(n);b(e.style,{width:t.width+"px",height:t.height+"px",top:t.top+"px",left:t.left+"px",zIndex:""+kt(M.zIndex)})}},$t=function(e){T.ready===!0&&(T.bridge&&"function"==typeof T.bridge.setHandCursor?T.bridge.setHandCursor(e):T.ready=!1)},kt=function(e){if(/^(?:auto|inherit)$/.test(e))return e;var t;return"number"!=typeof e||l(e)?"string"==typeof e&&(t=kt(s(e,10))):t=e,"number"==typeof t?t:"auto"},xt=function(e){function t(e){var t=e.match(/[\d]+/g);return t.length=3,t.join(".")}function n(e){return!!e&&(e=e.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(e)||"chrome.plugin"===e.slice(-13))}function i(e){e&&(l=!0,e.version&&(f=t(e.version)),!f&&e.description&&(f=t(e.description)),e.filename&&(d=n(e.filename)))}var r,a,s,l=!1,u=!1,d=!1,f="";if(o.plugins&&o.plugins.length)r=o.plugins["Shockwave Flash"],i(r),o.plugins["Shockwave Flash 2.0"]&&(l=!0,f="2.0.0.11");else if(o.mimeTypes&&o.mimeTypes.length)s=o.mimeTypes["application/x-shockwave-flash"],r=s&&s.enabledPlugin,i(r);else if("undefined"!=typeof e){u=!0;try{a=new e("ShockwaveFlash.ShockwaveFlash.7"),l=!0,f=t(a.GetVariable("$version"))}catch(h){try{a=new e("ShockwaveFlash.ShockwaveFlash.6"),l=!0,f="6.0.21"}catch(p){try{a=new e("ShockwaveFlash.ShockwaveFlash"),l=!0,f=t(a.GetVariable("$version"))}catch(m){u=!1}}}}T.disabled=l!==!0,T.outdated=f&&c(f)<c(I),T.version=f||"0.0.0",T.pluginType=d?"pepper":u?"activex":l?"netscape":"unknown"};xt(h);var jt=function(){return this instanceof jt?void("function"==typeof jt._createClient&&jt._createClient.apply(this,_(arguments))):new jt};jt.version="2.0.0",C(jt,"version"),jt.config=function(){return O.apply(this,_(arguments))},jt.state=function(){return L.apply(this,_(arguments))},jt.isFlashUnusable=function(){return F.apply(this,_(arguments))},jt.on=function(){return z.apply(this,_(arguments))},jt.off=function(){return R.apply(this,_(arguments))},jt.handlers=function(){return q.apply(this,_(arguments))},jt.emit=function(){return H.apply(this,_(arguments))},jt.create=function(){return Y.apply(this,_(arguments))},jt.destroy=function(){return B.apply(this,_(arguments))},jt.setData=function(){return W.apply(this,_(arguments))},jt.clearData=function(){return U.apply(this,_(arguments))},jt.activate=function(){return Q.apply(this,_(arguments))},jt.deactivate=function(){return G.apply(this,_(arguments))};var Ct=0,St={},Tt=0,It={},Dt={};b(M,{autoActivate:!0});var Et=function(e){var t=this;t.id=""+Ct++,St[t.id]={instance:t,elements:[],handlers:{}},e&&t.clip(e),jt.on("*",function(e){return t.emit(e)}),jt.on("destroy",function(){t.destroy()}),jt.create()},At=function(e,t){var n,i,r,o={},a=St[this.id]&&St[this.id].handlers;if("string"==typeof e&&e)r=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)g.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&this.on(n,e[n]);if(r&&r.length){for(n=0,i=r.length;i>n;n++)e=r[n].replace(/^on/,""),o[e]=!0,a[e]||(a[e]=[]),a[e].push(t);if(o.ready&&T.ready&&this.emit({type:"ready",client:this}),o.error){var s=["disabled","outdated","unavailable","deactivated","overdue"];for(n=0,i=s.length;i>n;n++)if(T[s[n]]){this.emit({type:"error",name:"flash-"+s[n],client:this});break}}}return this},Pt=function(e,t){var n,i,r,o,a,s=St[this.id]&&St[this.id].handlers;if(0===arguments.length)o=x(s);else if("string"==typeof e&&e)o=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)g.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&this.off(n,e[n]);if(o&&o.length)for(n=0,i=o.length;i>n;n++)if(e=o[n].toLowerCase().replace(/^on/,""),a=s[e],a&&a.length)if(t)for(r=y(t,a);-1!==r;)a.splice(r,1),r=y(t,a,r);else a.length=0;return this},Nt=function(e){var t=null,n=St[this.id]&&St[this.id].handlers;return n&&(t="string"==typeof e&&e?n[e]?n[e].slice(0):[]:w(n)),t},Mt=function(e){if(Rt.call(this,e)){"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(e=b({},e));var t=b({},V(e),{client:this});qt.call(this,t)}return this},Ot=function(e){e=Ht(e);for(var t=0;t<e.length;t++)if(g.call(e,t)&&e[t]&&1===e[t].nodeType){e[t].zcClippingId?-1===y(this.id,It[e[t].zcClippingId])&&It[e[t].zcClippingId].push(this.id):(e[t].zcClippingId="zcClippingId_"+Tt++,It[e[t].zcClippingId]=[this.id],M.autoActivate===!0&&Wt(e[t]));var n=St[this.id]&&St[this.id].elements;-1===y(e[t],n)&&n.push(e[t])}return this},Lt=function(e){var t=St[this.id];if(!t)return this;var n,i=t.elements;e="undefined"==typeof e?i.slice(0):Ht(e);for(var r=e.length;r--;)if(g.call(e,r)&&e[r]&&1===e[r].nodeType){for(n=0;-1!==(n=y(e[r],i,n));)i.splice(n,1);var o=It[e[r].zcClippingId];if(o){for(n=0;-1!==(n=y(this.id,o,n));)o.splice(n,1);0===o.length&&(M.autoActivate===!0&&Ut(e[r]),delete e[r].zcClippingId)}}return this},Ft=function(){var e=St[this.id];return e&&e.elements?e.elements.slice(0):[]},zt=function(){this.unclip(),this.off(),delete St[this.id]},Rt=function(e){if(!e||!e.type)return!1;if(e.client&&e.client!==this)return!1;var t=St[this.id]&&St[this.id].elements,n=!!t&&t.length>0,i=!e.target||n&&-1!==y(e.target,t),r=e.relatedTarget&&n&&-1!==y(e.relatedTarget,t),o=e.client&&e.client===this;return i||r||o?!0:!1},qt=function(e){if("object"==typeof e&&e&&e.type){var t=Z(e),n=St[this.id]&&St[this.id].handlers["*"]||[],r=St[this.id]&&St[this.id].handlers[e.type]||[],o=n.concat(r);if(o&&o.length){var a,s,c,l,u,d=this;for(a=0,s=o.length;s>a;a++)c=o[a],l=d,"string"==typeof c&&"function"==typeof i[c]&&(c=i[c]),"object"==typeof c&&c&&"function"==typeof c.handleEvent&&(l=c,c=c.handleEvent),"function"==typeof c&&(u=b({},e),et(c,l,[u],t))}return this}},Ht=function(e){return"string"==typeof e&&(e=[]),"number"!=typeof e.length?[e]:e},Yt=function(e,t,n){return e&&1===e.nodeType?(e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n),e):e},Bt=function(e,t,n){return e&&1===e.nodeType?(e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n),e):e},Wt=function(e){if(e&&1===e.nodeType){var t=function(t){(t||i.event)&&jt.activate(e)};Yt(e,"mouseover",t),Dt[e.zcClippingId]={mouseover:t}}},Ut=function(e){if(e&&1===e.nodeType){var t=Dt[e.zcClippingId];"object"==typeof t&&t&&("function"==typeof t.mouseover&&Bt(e,"mouseover",t.mouseover),delete Dt[e.zcClippingId])}};jt._createClient=function(){Et.apply(this,_(arguments))},jt.prototype.on=function(){return At.apply(this,_(arguments))},jt.prototype.off=function(){return Pt.apply(this,_(arguments))},jt.prototype.handlers=function(){return Nt.apply(this,_(arguments))},jt.prototype.emit=function(){return Mt.apply(this,_(arguments))},jt.prototype.clip=function(){return Ot.apply(this,_(arguments))},jt.prototype.unclip=function(){return Lt.apply(this,_(arguments))},jt.prototype.elements=function(){return Ft.apply(this,_(arguments))},jt.prototype.destroy=function(){return zt.apply(this,_(arguments))},jt.prototype.setText=function(e){return jt.setData("text/plain",e),this},jt.prototype.setHtml=function(e){return jt.setData("text/html",e),this},jt.prototype.setRichText=function(e){return jt.setData("application/rtf",e),this},jt.prototype.setData=function(){return jt.setData.apply(this,_(arguments)),this},jt.prototype.clearData=function(){return jt.clearData.apply(this,_(arguments)),this},"function"==typeof define&&define.amd?define(function(){return jt}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=jt:e.ZeroClipboard=jt}(function(){return this}()),function(e){function t(e,t){t||(t={}),this.text=t.text||e.data("text")||e.text(),this.$elem=e,this.is_on=!1,this.bind()}var n=e('<div id="jquery-clipster-overlay"><div><p>Press \u2318C to copy</p><p><textarea></textarea></p></div></div>'),i=n.find("textarea");n.hide(),e(function(){e("body").append(n)}),e.clipster=function(t,n){e(document).on("click",t,function(t){var i=e(this).clipster(n),r=i.data("clipster");r.activate(),t.preventDefault()})},e.fn.clipster=function(n){return this.each(function(){var i=e(this),r=i.data("clipster");r||(r=new t(i,n),i.data("clipster",r))})},t.prototype.bind=function(){var t=this;this.$elem.on("click",function(e){t.activate(),e.preventDefault()}),e(document).on("copy click",function(n){var r=e(n.target);r.closest(t.$elem).length||"click"===n.type&&r.is(i)||t.deactivate()}),e(document).on("keydown",function(e){27===e.which&&t.deactivate()})},t.prototype.activate=function(){this.active||(n.show(),i.val(this.text),i[0].select(),i.focus(),this.active=!0)},t.prototype.deactivate=function(){this.active&&(setTimeout(function(){n.hide()}),this.active=!1)}}(jQuery),function(e,t,n){"$:nomunge";function i(){r=t[s](function(){o.each(function(){var t=e(this),n=t.width(),i=t.height(),r=e.data(this,l);(n!==r.w||i!==r.h)&&t.trigger(c,[r.w=n,r.h=i])}),i()},a[u])}var r,o=e([]),a=e.resize=e.extend(e.resize,{}),s="setTimeout",c="resize",l=c+"-special-event",u="delay",d="throttleWindow";a[u]=250,a[d]=!0,e.event.special[c]={setup:function(){if(!a[d]&&this[s])return!1;var t=e(this);o=o.add(t),e.data(this,l,{w:t.width(),h:t.height()}),1===o.length&&i()},teardown:function(){if(!a[d]&&this[s])return!1;var t=e(this);o=o.not(t),t.removeData(l),o.length||clearTimeout(r)},add:function(t){function i(t,i,o){var a=e(this),s=e.data(this,l);s.w=i!==n?i:a.width(),s.h=o!==n?o:a.height(),r.apply(this,arguments)}if(!a[d]&&this[s])return!1;var r;return e.isFunction(t)?(r=t,i):(r=t.handler,void(t.handler=i))
}}}(jQuery,this),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Spinner=t()}(this,function(){"use strict";function e(e,t){var n,i=document.createElement(e||"div");for(n in t)i[n]=t[n];return i}function t(e){for(var t=1,n=arguments.length;n>t;t++)e.appendChild(arguments[t]);return e}function n(e,t,n,i){var r=["opacity",t,~~(100*e),n,i].join("-"),o=.01+n/i*100,a=Math.max(1-(1-e)/t*(100-o),e),s=u.substring(0,u.indexOf("Animation")).toLowerCase(),c=s&&"-"+s+"-"||"";return f[r]||(h.insertRule("@"+c+"keyframes "+r+"{0%{opacity:"+a+"}"+o+"%{opacity:"+e+"}"+(o+.01)+"%{opacity:1}"+(o+t)%100+"%{opacity:"+e+"}100%{opacity:"+a+"}}",h.cssRules.length),f[r]=1),r}function i(e,t){var n,i,r=e.style;for(t=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<d.length;i++)if(n=d[i]+t,void 0!==r[n])return n;return void 0!==r[t]?t:void 0}function r(e,t){for(var n in t)e.style[i(e,n)||n]=t[n];return e}function o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)void 0===e[i]&&(e[i]=n[i])}return e}function a(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function s(e,t){return"string"==typeof e?e:e[t%e.length]}function c(e){return"undefined"==typeof this?new c(e):void(this.opts=o(e||{},c.defaults,p))}function l(){function n(t,n){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}h.addRule(".spin-vml","behavior:url(#default#VML)"),c.prototype.lines=function(e,i){function o(){return r(n("group",{coordsize:u+" "+u,coordorigin:-l+" "+-l}),{width:u,height:u})}function a(e,a,c){t(f,t(r(o(),{rotation:360/i.lines*e+"deg",left:~~a}),t(r(n("roundrect",{arcsize:i.corners}),{width:l,height:i.width,left:i.radius,top:-i.width>>1,filter:c}),n("fill",{color:s(i.color,e),opacity:i.opacity}),n("stroke",{opacity:0}))))}var c,l=i.length+i.width,u=2*l,d=2*-(i.width+i.length)+"px",f=r(o(),{position:"absolute",top:d,left:d});if(i.shadow)for(c=1;c<=i.lines;c++)a(c,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(c=1;c<=i.lines;c++)a(c);return t(e,f)},c.prototype.opacity=function(e,t,n,i){var r=e.firstChild;i=i.shadow&&i.lines||0,r&&t+i<r.childNodes.length&&(r=r.childNodes[t+i],r=r&&r.firstChild,r=r&&r.firstChild,r&&(r.opacity=n))}}var u,d=["webkit","Moz","ms","O"],f={},h=function(){var n=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),p={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};c.defaults={},o(c.prototype,{spin:function(t){this.stop();var n,i,o=this,s=o.opts,c=o.el=r(e(0,{className:s.className}),{position:s.position,width:0,zIndex:s.zIndex}),l=s.radius+s.length+s.width;if(t&&(t.insertBefore(c,t.firstChild||null),i=a(t),n=a(c),r(c,{left:("auto"==s.left?i.x-n.x+(t.offsetWidth>>1):parseInt(s.left,10)+l)+"px",top:("auto"==s.top?i.y-n.y+(t.offsetHeight>>1):parseInt(s.top,10)+l)+"px"})),c.setAttribute("role","progressbar"),o.lines(c,o.opts),!u){var d,f=0,h=(s.lines-1)*(1-s.direction)/2,p=s.fps,m=p/s.speed,g=(1-s.opacity)/(m*s.trail/100),v=m/s.lines;!function _(){f++;for(var e=0;e<s.lines;e++)d=Math.max(1-(f+(s.lines-e)*v)%m*g,s.opacity),o.opacity(c,e*s.direction+h,d,s);o.timeout=o.el&&setTimeout(_,~~(1e3/p))}()}return o},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(i,o){function a(t,n){return r(e(),{position:"absolute",width:o.length+o.width+"px",height:o.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*l+o.rotate)+"deg) translate("+o.radius+"px,0)",borderRadius:(o.corners*o.width>>1)+"px"})}for(var c,l=0,d=(o.lines-1)*(1-o.direction)/2;l<o.lines;l++)c=r(e(),{position:"absolute",top:1+~(o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:u&&n(o.opacity,o.trail,d+l*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&t(c,r(a("#000","0 0 4px #000"),{top:"2px"})),t(i,t(c,a(s(o.color,l),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var m=r(e("group"),{behavior:"url(#default#VML)"});return!i(m,"transform")&&m.adj?l():u=i(m,"animation"),c}),function(e){if("object"==typeof exports)e(require("jquery"),require("spin"));else if("function"==typeof define&&define.amd)define(["jquery","spin"],e);else{if(!window.Spinner)throw new Error("Spin.js not present");e(window.jQuery,window.Spinner)}}(function(e,t){e.fn.spin=function(n,i){return this.each(function(){var r=e(this),o=r.data();o.spinner&&(o.spinner.stop(),delete o.spinner),n!==!1&&(n=e.extend({color:i||r.css("color")},e.fn.spin.presets[n]||n),o.spinner=new t(n).spin(this))})},e.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}}),function(e){"use strict";var t={cursor:"move",decelerate:!0,triggerHardware:!1,y:!0,x:!0,slowdown:.9,maxvelocity:40,throttleFPS:60,movingClass:{up:"kinetic-moving-up",down:"kinetic-moving-down",left:"kinetic-moving-left",right:"kinetic-moving-right"},deceleratingClass:{up:"kinetic-decelerating-up",down:"kinetic-decelerating-down",left:"kinetic-decelerating-left",right:"kinetic-decelerating-right"}},n="kinetic-settings",i="kinetic-active";window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()),e.support=e.support||{},e.extend(e.support,{touch:"ontouchend"in document});var r=function(){return!1},o=function(e,t){return 0===Math.floor(Math.abs(e))?0:e*t},a=function(e,t){var n=e;return e>0?e>t&&(n=t):0-t>e&&(n=0-t),n},s=function(e,t){this.removeClass(e.movingClass.up).removeClass(e.movingClass.down).removeClass(e.movingClass.left).removeClass(e.movingClass.right).removeClass(e.deceleratingClass.up).removeClass(e.deceleratingClass.down).removeClass(e.deceleratingClass.left).removeClass(e.deceleratingClass.right),e.velocity>0&&this.addClass(t.right),e.velocity<0&&this.addClass(t.left),e.velocityY>0&&this.addClass(t.down),e.velocityY<0&&this.addClass(t.up)},c=function(e,t){t.velocity=0,t.velocityY=0,t.decelerate=!0,"function"==typeof t.stopped&&t.stopped.call(e,t)},l=function(e,t){var n=e[0];t.x&&n.scrollWidth>0?(n.scrollLeft=t.scrollLeft=n.scrollLeft+t.velocity,Math.abs(t.velocity)>0&&(t.velocity=t.decelerate?o(t.velocity,t.slowdown):t.velocity)):t.velocity=0,t.y&&n.scrollHeight>0?(n.scrollTop=t.scrollTop=n.scrollTop+t.velocityY,Math.abs(t.velocityY)>0&&(t.velocityY=t.decelerate?o(t.velocityY,t.slowdown):t.velocityY)):t.velocityY=0,s.call(e,t,t.deceleratingClass),"function"==typeof t.moved&&t.moved.call(e,t),Math.abs(t.velocity)>0||Math.abs(t.velocityY)>0?window.requestAnimationFrame(function(){l(e,t)}):c(e,t)},u=function(t){var i=e.kinetic.callMethods[t],r=Array.prototype.slice.call(arguments);i&&this.each(function(){var t=r.slice(1),o=e(this).data(n);t.unshift(o),i.apply(this,t)})},d=function(t,n){t[0];e.support.touch?t.bind("touchstart",n.events.touchStart).bind("touchend",n.events.inputEnd).bind("touchmove",n.events.touchMove):t.mousedown(n.events.inputDown).mouseup(n.events.inputEnd).mousemove(n.events.inputMove),t.click(n.events.inputClick).scroll(n.events.scroll).bind("selectstart",r).bind("dragstart",n.events.dragStart)},f=function(t,n){t[0];e.support.touch?t.unbind("touchstart",n.events.touchStart).unbind("touchend",n.events.inputEnd).unbind("touchmove",n.events.touchMove):t.unbind("mousedown",n.events.inputDown).unbind("mouseup",n.events.inputEnd).unbind("mousemove",n.events.inputMove).unbind("scroll",n.events.scroll),t.unbind("click",n.events.inputClick).unbind("selectstart",r),t.unbind("dragstart",n.events.dragStart)},h=function(r){this.addClass(i).each(function(){var i=this,o=e(this);if(!o.data(n)){var c,u,f,h,p=e.extend({},t,r),m=!1,g=!1,v=!1,_=1e3/p.throttleFPS;p.velocity=0,p.velocityY=0;var y=function(){c=!1,u=!1,v=!1};e(document).mouseup(y).click(y);var b=function(){p.velocity=a(m-c,p.maxvelocity),p.velocityY=a(g-u,p.maxvelocity)},w=function(t){return e.isFunction(p.filterTarget)?p.filterTarget.call(i,t)!==!1:!0},$=function(e,t){v=!0,p.velocity=m=0,p.velocityY=g=0,c=e,u=t},k=function(){c&&m&&p.decelerate===!1&&(p.decelerate=!0,b(),c=m=v=!1,l(o,p))},x=function(t,n){(!f||new Date>new Date(f.getTime()+_))&&(f=new Date,v&&(c||u)&&(h&&(e(h).blur(),h=null,o.focus()),p.decelerate=!1,p.velocity=p.velocityY=0,o[0].scrollLeft=p.scrollLeft=p.x?o[0].scrollLeft-(t-c):o[0].scrollLeft,o[0].scrollTop=p.scrollTop=p.y?o[0].scrollTop-(n-u):o[0].scrollTop,m=c,g=u,c=t,u=n,b(),s.call(o,p,p.movingClass),"function"==typeof p.moved&&p.moved.call(o,p)))};p.events={touchStart:function(e){var t;w(e.target)&&(t=e.originalEvent.touches[0],$(t.clientX,t.clientY),e.stopPropagation())},touchMove:function(e){var t;v&&(t=e.originalEvent.touches[0],x(t.clientX,t.clientY),e.preventDefault&&e.preventDefault())},inputDown:function(e){w(e.target)&&($(e.clientX,e.clientY),h=e.target,"IMG"===e.target.nodeName&&e.preventDefault(),e.stopPropagation())},inputEnd:function(e){k(),h=null,e.preventDefault&&e.preventDefault()},inputMove:function(e){v&&(x(e.clientX,e.clientY),e.preventDefault&&e.preventDefault())},scroll:function(e){"function"==typeof p.moved&&p.moved.call(o,p),e.preventDefault&&e.preventDefault()},inputClick:function(e){return Math.abs(p.velocity)>0?(e.preventDefault(),!1):void 0},dragStart:function(){return h?!1:void 0}},d(o,p),o.data(n,p).css("cursor",p.cursor),p.triggerHardware&&o.css({"-webkit-transform":"translate3d(0,0,0)","-webkit-perspective":"1000","-webkit-backface-visibility":"hidden"})}})};e.kinetic={settingsKey:n,callMethods:{start:function(t,n){var i=e(this);t=e.extend(t,n),t&&(t.decelerate=!1,l(i,t))},end:function(t){e(this);t&&(t.decelerate=!0)},stop:function(t){var n=e(this);c(n,t)},detach:function(t){var n=e(this);f(n,t),n.removeClass(i).css("cursor","")},attach:function(t){var n=e(this);d(n,t),n.addClass(i).css("cursor","move")}}},e.fn.kinetic=function(e){return"string"==typeof e?u.apply(this,arguments):h.call(this,e),this}}(window.jQuery||window.Zepto),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},t=[].slice;!function(e,t){return"function"==typeof define&&define.amd?define("waypoints",["jquery"],function(n){return t(n,e)}):t(e.jQuery,e)}(this,function(n,i){var r,o,a,s,c,l,u,d,f,h,p,m,g,v,_,y;return r=n(i),d=e.call(i,"ontouchstart")>=0,s={horizontal:{},vertical:{}},c=1,u={},l="waypoints-context-id",p="resize.waypoints",m="scroll.waypoints",g=1,v="waypoints-waypoint-ids",_="waypoint",y="waypoints",o=function(){function e(e){var t=this;this.$element=e,this.element=e[0],this.didResize=!1,this.didScroll=!1,this.id="context"+c++,this.oldScroll={x:e.scrollLeft(),y:e.scrollTop()},this.waypoints={horizontal:{},vertical:{}},e.data(l,this.id),u[this.id]=this,e.bind(m,function(){var e;return t.didScroll||d?void 0:(t.didScroll=!0,e=function(){return t.doScroll(),t.didScroll=!1},i.setTimeout(e,n[y].settings.scrollThrottle))}),e.bind(p,function(){var e;return t.didResize?void 0:(t.didResize=!0,e=function(){return n[y]("refresh"),t.didResize=!1},i.setTimeout(e,n[y].settings.resizeThrottle))})}return e.prototype.doScroll=function(){var e,t=this;return e={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!d||e.vertical.oldScroll&&e.vertical.newScroll||n[y]("refresh"),n.each(e,function(e,i){var r,o,a;return a=[],o=i.newScroll>i.oldScroll,r=o?i.forward:i.backward,n.each(t.waypoints[e],function(e,t){var n,r;return i.oldScroll<(n=t.offset)&&n<=i.newScroll?a.push(t):i.newScroll<(r=t.offset)&&r<=i.oldScroll?a.push(t):void 0}),a.sort(function(e,t){return e.offset-t.offset}),o||a.reverse(),n.each(a,function(e,t){return t.options.continuous||e===a.length-1?t.trigger([r]):void 0})}),this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.refresh=function(){var e,t,i,r=this;return i=n.isWindow(this.element),t=this.$element.offset(),this.doScroll(),e={horizontal:{contextOffset:i?0:t.left,contextScroll:i?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:i?0:t.top,contextScroll:i?0:this.oldScroll.y,contextDimension:i?n[y]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},n.each(e,function(e,t){return n.each(r.waypoints[e],function(e,i){var r,o,a,s,c;return r=i.options.offset,a=i.offset,o=n.isWindow(i.element)?0:i.$element.offset()[t.offsetProp],n.isFunction(r)?r=r.apply(i.element):"string"==typeof r&&(r=parseFloat(r),i.options.offset.indexOf("%")>-1&&(r=Math.ceil(t.contextDimension*r/100))),i.offset=o-t.contextOffset+t.contextScroll-r,i.options.onlyOnScroll&&null!=a||!i.enabled?void 0:null!==a&&a<(s=t.oldScroll)&&s<=i.offset?i.trigger([t.backward]):null!==a&&a>(c=t.oldScroll)&&c>=i.offset?i.trigger([t.forward]):null===a&&t.oldScroll>=i.offset?i.trigger([t.forward]):void 0})})},e.prototype.checkEmpty=function(){return n.isEmptyObject(this.waypoints.horizontal)&&n.isEmptyObject(this.waypoints.vertical)?(this.$element.unbind([p,m].join(" ")),delete u[this.id]):void 0},e}(),a=function(){function e(e,t,i){var r,o;i=n.extend({},n.fn[_].defaults,i),"bottom-in-view"===i.offset&&(i.offset=function(){var e;return e=n[y]("viewportHeight"),n.isWindow(t.element)||(e=t.$element.height()),e-n(this).outerHeight()}),this.$element=e,this.element=e[0],this.axis=i.horizontal?"horizontal":"vertical",this.callback=i.handler,this.context=t,this.enabled=i.enabled,this.id="waypoints"+g++,this.offset=null,this.options=i,t.waypoints[this.axis][this.id]=this,s[this.axis][this.id]=this,r=null!=(o=e.data(v))?o:[],r.push(this.id),e.data(v,r)}return e.prototype.trigger=function(e){return this.enabled?(null!=this.callback&&this.callback.apply(this.element,e),this.options.triggerOnce?this.destroy():void 0):void 0},e.prototype.disable=function(){return this.enabled=!1},e.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},e.prototype.destroy=function(){return delete s[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},e.getWaypointsByElement=function(e){var t,i;return(i=n(e).data(v))?(t=n.extend({},s.horizontal,s.vertical),n.map(i,function(e){return t[e]})):[]},e}(),h={init:function(e,t){var i;return null==t&&(t={}),null==(i=t.handler)&&(t.handler=e),this.each(function(){var e,i,r,s;return e=n(this),r=null!=(s=t.context)?s:n.fn[_].defaults.context,n.isWindow(r)||(r=e.closest(r)),r=n(r),i=u[r.data(l)],i||(i=new o(r)),new a(e,i,t)}),n[y]("refresh"),this},disable:function(){return h._invoke(this,"disable")},enable:function(){return h._invoke(this,"enable")},destroy:function(){return h._invoke(this,"destroy")},prev:function(e,t){return h._traverse.call(this,e,t,function(e,t,n){return t>0?e.push(n[t-1]):void 0})},next:function(e,t){return h._traverse.call(this,e,t,function(e,t,n){return t<n.length-1?e.push(n[t+1]):void 0})},_traverse:function(e,t,r){var o,a;return null==e&&(e="vertical"),null==t&&(t=i),a=f.aggregate(t),o=[],this.each(function(){var t;return t=n.inArray(this,a[e]),r(o,t,a[e])}),this.pushStack(o)},_invoke:function(e,t){return e.each(function(){var e;return e=a.getWaypointsByElement(this),n.each(e,function(e,n){return n[t](),!0})}),this}},n.fn[_]=function(){var e,i;return i=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],h[i]?h[i].apply(this,e):n.isFunction(i)?h.init.apply(this,arguments):n.isPlainObject(i)?h.init.apply(this,[null,i]):n.error(i?"The "+i+" method does not exist in jQuery Waypoints.":"jQuery Waypoints needs a callback function or handler option.")},n.fn[_].defaults={context:i,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},f={refresh:function(){return n.each(u,function(e,t){return t.refresh()})},viewportHeight:function(){var e;return null!=(e=i.innerHeight)?e:r.height()},aggregate:function(e){var t,i,r;return t=s,e&&(t=null!=(r=u[n(e).data(l)])?r.waypoints:void 0),t?(i={horizontal:[],vertical:[]},n.each(i,function(e,r){return n.each(t[e],function(e,t){return r.push(t)}),r.sort(function(e,t){return e.offset-t.offset}),i[e]=n.map(r,function(e){return e.element}),i[e]=n.unique(i[e])}),i):[]},above:function(e){return null==e&&(e=i),f._filter(e,"vertical",function(e,t){return t.offset<=e.oldScroll.y})},below:function(e){return null==e&&(e=i),f._filter(e,"vertical",function(e,t){return t.offset>e.oldScroll.y})},left:function(e){return null==e&&(e=i),f._filter(e,"horizontal",function(e,t){return t.offset<=e.oldScroll.x})},right:function(e){return null==e&&(e=i),f._filter(e,"horizontal",function(e,t){return t.offset>e.oldScroll.x})},enable:function(){return f._invoke("enable")},disable:function(){return f._invoke("disable")},destroy:function(){return f._invoke("destroy")},extendFn:function(e,t){return h[e]=t},_invoke:function(e){var t;return t=n.extend({},s.vertical,s.horizontal),n.each(t,function(t,n){return n[e](),!0})},_filter:function(e,t,i){var r,o;return(r=u[n(e).data(l)])?(o=[],n.each(r.waypoints[t],function(e,t){return i(r,t)?o.push(t):void 0}),o.sort(function(e,t){return e.offset-t.offset}),n.map(o,function(e){return e.element})):[]}},n[y]=function(){var e,n;return n=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],f[n]?f[n].apply(null,e):f.aggregate.call(null,n)},n[y].settings={resizeThrottle:100,scrollThrottle:30},r.load(function(){return n[y]("refresh")})})}.call(this),function(e,t){"object"==typeof exports?module.exports=t(require("jquery","./URI")):"function"==typeof define&&define.amd?define(["jquery","./URI"],t):t(e.jQuery,e.URI)}(this,function(e,t){"use strict";function n(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function i(e){var n=e.nodeName.toLowerCase(),i=t.domAttributes[n];return"input"===n&&"image"!==e.type?void 0:i}function r(t){return{get:function(n){return e(n).uri()[t]()},set:function(n,i){return e(n).uri()[t](i),i}}}function o(t,n){var r,o,c;return i(t)&&n?(r=n.match(u),r&&(r[5]||":"===r[2]||s[r[2]])?(c=e(t).uri(),r[5]?c.is(r[5]):":"===r[2]?(o=r[1].toLowerCase()+":",s[o]?s[o](c,r[4]):!1):(o=r[1].toLowerCase(),a[o]?s[r[2]](c[o](),r[4],o):!1)):!1):!1}var a={},s={"=":function(e,t){return e===t},"^=":function(e,t){return!!(e+"").match(new RegExp("^"+n(t),"i"))},"$=":function(e,t){return!!(e+"").match(new RegExp(n(t)+"$","i"))},"*=":function(e,t,i){return"directory"==i&&(e+="/"),!!(e+"").match(new RegExp(n(t),"i"))},"equals:":function(e,t){return e.equals(t)},"is:":function(e,t){return e.is(t)}};e.each("authority directory domain filename fragment hash host hostname href password path pathname port protocol query resource scheme search subdomain suffix tld username".split(" "),function(t,n){a[n]=!0,e.attrHooks["uri:"+n]=r(n)});var c={get:function(t){return e(t).uri()},set:function(t,n){return e(t).uri().href(n).toString()}};e.each(["src","href","action","uri","cite"],function(t,n){e.attrHooks[n]={set:c.set}}),e.attrHooks.uri.get=c.get,e.fn.uri=function(e){var n=this.first(),r=n.get(0),o=i(r);if(!o)throw new Error('Element "'+r.nodeName+'" does not have either property: href, src, action, cite');if(void 0!==e){var a=n.data("uri");if(a)return a.href(e);e instanceof t||(e=t(e||""))}else{if(e=n.data("uri"))return e;e=t(n.attr(o)||"")}return e._dom_element=r,e._dom_attribute=o,e.normalize(),n.data("uri",e),e},t.prototype.build=function(e){return this._dom_element?(this._string=t.build(this._parts),this._deferred_build=!1,this._dom_element.setAttribute(this._dom_attribute,this._string),this._dom_element[this._dom_attribute]=this._string):e===!0?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=t.build(this._parts),this._deferred_build=!1),this};var l,u=/^([a-zA-Z]+)\s*([\^\$*]?=|:)\s*(['"]?)(.+)\3|^\s*([a-zA-Z0-9]+)\s*$/;return l=e.expr.createPseudo?e.expr.createPseudo(function(e){return function(t){return o(t,e)}}):function(e,t,n){return o(e,n[3])},e.expr[":"].uri=l,{}}),function(e){"use strict";function t(e){return(e||"").toLowerCase()}var n="2.0.2";e.fn.cycle=function(n){var i;return 0!==this.length||e.isReady?this.each(function(){var i,r,o,a,s=e(this),c=e.fn.cycle.log;if(!s.data("cycle.opts")){(s.data("cycle-log")===!1||n&&n.log===!1||r&&r.log===!1)&&(c=e.noop),c("--c2 init--"),i=s.data();for(var l in i)i.hasOwnProperty(l)&&/^cycle[A-Z]+/.test(l)&&(a=i[l],o=l.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,t),c(o+":",a,"("+typeof a+")"),i[o]=a);r=e.extend({},e.fn.cycle.defaults,i,n||{}),r.timeoutId=0,r.paused=r.paused||!1,r.container=s,r._maxZ=r.maxZ,r.API=e.extend({_container:s},e.fn.cycle.API),r.API.log=c,r.API.trigger=function(e,t){return r.container.trigger(e,t),r.API},s.data("cycle.opts",r),s.data("cycle.API",r.API),r.API.trigger("cycle-bootstrap",[r,r.API]),r.API.addInitialSlides(),r.API.preInitSlideshow(),r.slides.length&&r.API.initSlideshow()}}):(i={s:this.selector,c:this.context},e.fn.cycle.log("requeuing slideshow (dom not ready)"),e(function(){e(i.s,i.c).cycle(n)}),this)},e.fn.cycle.API={opts:function(){return this._container.data("cycle.opts")},addInitialSlides:function(){var t=this.opts(),n=t.slides;t.slideCount=0,t.slides=e(),n=n.jquery?n:t.container.find(n),t.random&&n.sort(function(){return Math.random()-.5}),t.API.add(n)},preInitSlideshow:function(){var t=this.opts();t.API.trigger("cycle-pre-initialize",[t]);var n=e.fn.cycle.transitions[t.fx];n&&e.isFunction(n.preInit)&&n.preInit(t),t._preInitialized=!0},postInitSlideshow:function(){var t=this.opts();t.API.trigger("cycle-post-initialize",[t]);var n=e.fn.cycle.transitions[t.fx];n&&e.isFunction(n.postInit)&&n.postInit(t)},initSlideshow:function(){var t,n=this.opts(),i=n.container;n.API.calcFirstSlide(),"static"==n.container.css("position")&&n.container.css("position","relative"),e(n.slides[n.currSlide]).css("opacity",1).show(),n.API.stackSlides(n.slides[n.currSlide],n.slides[n.nextSlide],!n.reverse),n.pauseOnHover&&(n.pauseOnHover!==!0&&(i=e(n.pauseOnHover)),i.hover(function(){n.API.pause(!0)},function(){n.API.resume(!0)})),n.timeout&&(t=n.API.getSlideOpts(n.currSlide),n.API.queueTransition(t,t.timeout+n.delay)),n._initialized=!0,n.API.updateView(!0),n.API.trigger("cycle-initialized",[n]),n.API.postInitSlideshow()},pause:function(t){var n=this.opts(),i=n.API.getSlideOpts(),r=n.hoverPaused||n.paused;t?n.hoverPaused=!0:n.paused=!0,r||(n.container.addClass("cycle-paused"),n.API.trigger("cycle-paused",[n]).log("cycle-paused"),i.timeout&&(clearTimeout(n.timeoutId),n.timeoutId=0,n._remainingTimeout-=e.now()-n._lastQueue,(n._remainingTimeout<0||isNaN(n._remainingTimeout))&&(n._remainingTimeout=void 0)))},resume:function(e){var t=this.opts(),n=!t.hoverPaused&&!t.paused;e?t.hoverPaused=!1:t.paused=!1,n||(t.container.removeClass("cycle-paused"),0===t.slides.filter(":animated").length&&t.API.queueTransition(t.API.getSlideOpts(),t._remainingTimeout),t.API.trigger("cycle-resumed",[t,t._remainingTimeout]).log("cycle-resumed"))},add:function(t,n){var i,r=this.opts(),o=r.slideCount,a=!1;"string"==e.type(t)&&(t=e.trim(t)),e(t).each(function(){var t,i=e(this);n?r.container.prepend(i):r.container.append(i),r.slideCount++,t=r.API.buildSlideOpts(i),r.slides=n?e(i).add(r.slides):r.slides.add(i),r.API.initSlide(t,i,--r._maxZ),i.data("cycle.opts",t),r.API.trigger("cycle-slide-added",[r,t,i])}),r.API.updateView(!0),a=r._preInitialized&&2>o&&r.slideCount>=1,a&&(r._initialized?r.timeout&&(i=r.slides.length,r.nextSlide=r.reverse?i-1:1,r.timeoutId||r.API.queueTransition(r)):r.API.initSlideshow())},calcFirstSlide:function(){var e,t=this.opts();e=parseInt(t.startingSlide||0,10),(e>=t.slides.length||0>e)&&(e=0),t.currSlide=e,t.reverse?(t.nextSlide=e-1,t.nextSlide<0&&(t.nextSlide=t.slides.length-1)):(t.nextSlide=e+1,t.nextSlide==t.slides.length&&(t.nextSlide=0))},calcNextSlide:function(){var e,t=this.opts();t.reverse?(e=t.nextSlide-1<0,t.nextSlide=e?t.slideCount-1:t.nextSlide-1,t.currSlide=e?0:t.nextSlide+1):(e=t.nextSlide+1==t.slides.length,t.nextSlide=e?0:t.nextSlide+1,t.currSlide=e?t.slides.length-1:t.nextSlide-1)},calcTx:function(t,n){var i,r=t;return n&&r.manualFx&&(i=e.fn.cycle.transitions[r.manualFx]),i||(i=e.fn.cycle.transitions[r.fx]),i||(i=e.fn.cycle.transitions.fade,r.API.log('Transition "'+r.fx+'" not found.  Using fade.')),i},prepareTx:function(e,t){var n,i,r,o,a,s=this.opts();return s.slideCount<2?void(s.timeoutId=0):(!e||s.busy&&!s.manualTrump||(s.API.stopTransition(),s.busy=!1,clearTimeout(s.timeoutId),s.timeoutId=0),void(s.busy||(0!==s.timeoutId||e)&&(i=s.slides[s.currSlide],r=s.slides[s.nextSlide],o=s.API.getSlideOpts(s.nextSlide),a=s.API.calcTx(o,e),s._tx=a,e&&void 0!==o.manualSpeed&&(o.speed=o.manualSpeed),s.nextSlide!=s.currSlide&&(e||!s.paused&&!s.hoverPaused&&s.timeout)?(s.API.trigger("cycle-before",[o,i,r,t]),a.before&&a.before(o,i,r,t),n=function(){s.busy=!1,s.container.data("cycle.opts")&&(a.after&&a.after(o,i,r,t),s.API.trigger("cycle-after",[o,i,r,t]),s.API.queueTransition(o),s.API.updateView(!0))},s.busy=!0,a.transition?a.transition(o,i,r,t,n):s.API.doTransition(o,i,r,t,n),s.API.calcNextSlide(),s.API.updateView()):s.API.queueTransition(o))))},doTransition:function(t,n,i,r,o){var a=t,s=e(n),c=e(i),l=function(){c.animate(a.animIn||{opacity:1},a.speed,a.easeIn||a.easing,o)};c.css(a.cssBefore||{}),s.animate(a.animOut||{},a.speed,a.easeOut||a.easing,function(){s.css(a.cssAfter||{}),a.sync||l()}),a.sync&&l()},queueTransition:function(t,n){var i=this.opts(),r=void 0!==n?n:t.timeout;return 0===i.nextSlide&&0===--i.loop?(i.API.log("terminating; loop=0"),i.timeout=0,r?setTimeout(function(){i.API.trigger("cycle-finished",[i])},r):i.API.trigger("cycle-finished",[i]),void(i.nextSlide=i.currSlide)):void(r&&(i._lastQueue=e.now(),void 0===n&&(i._remainingTimeout=t.timeout),i.paused||i.hoverPaused||(i.timeoutId=setTimeout(function(){i.API.prepareTx(!1,!i.reverse)},r))))},stopTransition:function(){var e=this.opts();e.slides.filter(":animated").length&&(e.slides.stop(!1,!0),e.API.trigger("cycle-transition-stopped",[e])),e._tx&&e._tx.stopTransition&&e._tx.stopTransition(e)},advanceSlide:function(e){var t=this.opts();return clearTimeout(t.timeoutId),t.timeoutId=0,t.nextSlide=t.currSlide+e,t.nextSlide<0?t.nextSlide=t.slides.length-1:t.nextSlide>=t.slides.length&&(t.nextSlide=0),t.API.prepareTx(!0,e>=0),!1},buildSlideOpts:function(n){var i,r,o=this.opts(),a=n.data()||{};for(var s in a)a.hasOwnProperty(s)&&/^cycle[A-Z]+/.test(s)&&(i=a[s],r=s.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,t),o.API.log("["+(o.slideCount-1)+"]",r+":",i,"("+typeof i+")"),a[r]=i);a=e.extend({},e.fn.cycle.defaults,o,a),a.slideNum=o.slideCount;try{delete a.API,delete a.slideCount,delete a.currSlide,delete a.nextSlide,delete a.slides}catch(c){}return a},getSlideOpts:function(t){var n=this.opts();void 0===t&&(t=n.currSlide);var i=n.slides[t],r=e(i).data("cycle.opts");return e.extend({},n,r)},initSlide:function(t,n,i){var r=this.opts();n.css(t.slideCss||{}),i>0&&n.css("zIndex",i),isNaN(t.speed)&&(t.speed=e.fx.speeds[t.speed]||e.fx.speeds._default),t.sync||(t.speed=t.speed/2),n.addClass(r.slideClass)},updateView:function(e,t){var n=this.opts();if(n._initialized){var i=n.API.getSlideOpts(),r=n.slides[n.currSlide];!e&&t!==!0&&(n.API.trigger("cycle-update-view-before",[n,i,r]),n.updateView<0)||(n.slideActiveClass&&n.slides.removeClass(n.slideActiveClass).eq(n.currSlide).addClass(n.slideActiveClass),e&&n.hideNonActive&&n.slides.filter(":not(."+n.slideActiveClass+")").hide(),0===n.updateView&&setTimeout(function(){n.API.trigger("cycle-update-view",[n,i,r,e])},i.speed/(n.sync?2:1)),0!==n.updateView&&n.API.trigger("cycle-update-view",[n,i,r,e]),e&&n.API.trigger("cycle-update-view-after",[n,i,r]))}},getComponent:function(t){var n=this.opts(),i=n[t];return"string"==typeof i?/^\s*[\>|\+|~]/.test(i)?n.container.find(i):e(i):i.jquery?i:e(i)},stackSlides:function(t,n,i){var r=this.opts();t||(t=r.slides[r.currSlide],n=r.slides[r.nextSlide],i=!r.reverse),e(t).css("zIndex",r.maxZ);var o,a=r.maxZ-2,s=r.slideCount;if(i){for(o=r.currSlide+1;s>o;o++)e(r.slides[o]).css("zIndex",a--);for(o=0;o<r.currSlide;o++)e(r.slides[o]).css("zIndex",a--)}else{for(o=r.currSlide-1;o>=0;o--)e(r.slides[o]).css("zIndex",a--);for(o=s-1;o>r.currSlide;o--)e(r.slides[o]).css("zIndex",a--)}e(n).css("zIndex",r.maxZ-1)},getSlideIndex:function(e){return this.opts().slides.index(e)}},e.fn.cycle.log=function(){window.console&&console.log&&console.log("[cycle2] "+Array.prototype.join.call(arguments," "))},e.fn.cycle.version=function(){return"Cycle2: "+n},e.fn.cycle.transitions={custom:{},none:{before:function(e,t,n,i){e.API.stackSlides(n,t,i),e.cssBefore={opacity:1,display:"block"}}},fade:{before:function(t,n,i,r){var o=t.API.getSlideOpts(t.nextSlide).slideCss||{};t.API.stackSlides(n,i,r),t.cssBefore=e.extend(o,{opacity:0,display:"block"}),t.animIn={opacity:1},t.animOut={opacity:0}}},fadeout:{before:function(t,n,i,r){var o=t.API.getSlideOpts(t.nextSlide).slideCss||{};t.API.stackSlides(n,i,r),t.cssBefore=e.extend(o,{opacity:1,display:"block"}),t.animOut={opacity:0}}},scrollHorz:{before:function(e,t,n,i){e.API.stackSlides(t,n,i);var r=e.container.css("overflow","hidden").width();e.cssBefore={left:i?r:-r,top:0,opacity:1,display:"block"},e.cssAfter={zIndex:e._maxZ-2,left:0},e.animIn={left:0},e.animOut={left:i?-r:r}}}},e.fn.cycle.defaults={allowWrap:!0,autoSelector:".cycle-slideshow[data-cycle-auto-init!=false]",delay:0,easing:null,fx:"fade",hideNonActive:!0,loop:0,manualFx:void 0,manualSpeed:void 0,manualTrump:!0,maxZ:100,pauseOnHover:!1,reverse:!1,slideActiveClass:"cycle-slide-active",slideClass:"cycle-slide",slideCss:{position:"absolute",top:0,left:0},slides:"> img",speed:500,startingSlide:0,sync:!0,timeout:4e3,updateView:0},e(document).ready(function(){e(e.fn.cycle.defaults.autoSelector).cycle()})}(jQuery),function(e){"use strict";function t(t,n,i){var r,o=t.API.getComponent("pager");o.each(function(){var o=e(this);if(n.pagerTemplate){var a=t.API.tmpl(n.pagerTemplate,n,t,i[0]);r=e(a).appendTo(o)}else r=o.children().eq(t.slideCount-1);r.on(t.pagerEvent,function(e){e.preventDefault(),t.API.page(o,e.currentTarget)})})}function n(e,t){var n=this.opts();if(!n.busy||n.manualTrump){var i=e.children().index(t),r=i,o=n.currSlide<r;n.currSlide!=r&&(n.nextSlide=r,n.API.prepareTx(!0,o),n.API.trigger("cycle-pager-activated",[n,e,t]))}}e.extend(e.fn.cycle.defaults,{pager:"> .cycle-pager",pagerActiveClass:"cycle-pager-active",pagerEvent:"click.cycle",pagerTemplate:"<span>&bull;</span>"}),e(document).on("cycle-bootstrap",function(e,n,i){i.buildPagerLink=t}),e(document).on("cycle-slide-added",function(e,t,i,r){t.pager&&(t.API.buildPagerLink(t,i,r),t.API.page=n)}),e(document).on("cycle-slide-removed",function(t,n,i){if(n.pager){var r=n.API.getComponent("pager");r.each(function(){var t=e(this);e(t.children()[i]).remove()})}}),e(document).on("cycle-update-view",function(t,n){var i;n.pager&&(i=n.API.getComponent("pager"),i.each(function(){e(this).children().removeClass(n.pagerActiveClass).eq(n.currSlide).addClass(n.pagerActiveClass)}))}),e(document).on("cycle-destroyed",function(e,t){var n=t.API.getComponent("pager");n&&(n.children().off(t.pagerEvent),t.pagerTemplate&&n.empty())})}(jQuery),function(e){"use strict";var t=e.fn.cycle;e.fn.cycle=function(n){var i,r,o,a=e.makeArray(arguments);return"number"==e.type(n)?this.cycle("goto",n):"string"==e.type(n)?this.each(function(){var s;return i=n,o=e(this).data("cycle.opts"),void 0===o?void t.log('slideshow must be initialized before sending commands; "'+i+'" ignored'):(i="goto"==i?"jump":i,r=o.API[i],e.isFunction(r)?(s=e.makeArray(a),s.shift(),r.apply(o.API,s)):void t.log("unknown command: ",i))}):t.apply(this,arguments)},e.extend(e.fn.cycle,t),e.extend(t.API,{next:function(){var e=this.opts();if(!e.busy||e.manualTrump){var t=e.reverse?-1:1;e.allowWrap===!1&&e.currSlide+t>=e.slideCount||(e.API.advanceSlide(t),e.API.trigger("cycle-next",[e]).log("cycle-next"))}},prev:function(){var e=this.opts();if(!e.busy||e.manualTrump){var t=e.reverse?1:-1;e.allowWrap===!1&&e.currSlide+t<0||(e.API.advanceSlide(t),e.API.trigger("cycle-prev",[e]).log("cycle-prev"))}},destroy:function(){this.stop();var t=this.opts(),n=e.isFunction(e._data)?e._data:e.noop;clearTimeout(t.timeoutId),t.timeoutId=0,t.API.stop(),t.API.trigger("cycle-destroyed",[t]).log("cycle-destroyed"),t.container.removeData(),n(t.container[0],"parsedAttrs",!1),t.retainStylesOnDestroy||(t.container.removeAttr("style"),t.slides.removeAttr("style"),t.slides.removeClass(t.slideActiveClass)),t.slides.each(function(){e(this).removeData(),n(this,"parsedAttrs",!1)
})},jump:function(e){var t,n=this.opts();if(!n.busy||n.manualTrump){var i=parseInt(e,10);if(isNaN(i)||0>i||i>=n.slides.length)return void n.API.log("goto: invalid slide index: "+i);if(i==n.currSlide)return void n.API.log("goto: skipping, already on slide",i);n.nextSlide=i,clearTimeout(n.timeoutId),n.timeoutId=0,n.API.log("goto: ",i," (zero-index)"),t=n.currSlide<n.nextSlide,n.API.prepareTx(!0,t)}},stop:function(){var t=this.opts(),n=t.container;clearTimeout(t.timeoutId),t.timeoutId=0,t.API.stopTransition(),t.pauseOnHover&&(t.pauseOnHover!==!0&&(n=e(t.pauseOnHover)),n.off("mouseenter mouseleave")),t.API.trigger("cycle-stopped",[t]).log("cycle-stopped")},reinit:function(){var e=this.opts();e.API.destroy(),e.container.cycle()},remove:function(t){for(var n,i,r=this.opts(),o=[],a=1,s=0;s<r.slides.length;s++)n=r.slides[s],s==t?i=n:(o.push(n),e(n).data("cycle.opts").slideNum=a,a++);i&&(r.slides=e(o),r.slideCount--,e(i).remove(),t==r.currSlide?r.API.advanceSlide(1):t<r.currSlide?r.currSlide--:r.currSlide++,r.API.trigger("cycle-slide-removed",[r,t,i]).log("cycle-slide-removed"),r.API.updateView())}}),e(document).on("click.cycle","[data-cycle-cmd]",function(t){t.preventDefault();var n=e(this),i=n.data("cycle-cmd"),r=n.data("cycle-context")||".cycle-slideshow";e(r).cycle(i,n.data("cycle-arg"))})}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{next:"> .cycle-next",nextEvent:"click.cycle",disabledClass:"disabled",prev:"> .cycle-prev",prevEvent:"click.cycle",swipe:!1}),e(document).on("cycle-initialized",function(e,t){if(t.API.getComponent("next").on(t.nextEvent,function(e){e.preventDefault(),t.API.next()}),t.API.getComponent("prev").on(t.prevEvent,function(e){e.preventDefault(),t.API.prev()}),t.swipe){var n=t.swipeVert?"swipeUp.cycle":"swipeLeft.cycle swipeleft.cycle",i=t.swipeVert?"swipeDown.cycle":"swipeRight.cycle swiperight.cycle";t.container.on(n,function(){t.API.next()}),t.container.on(i,function(){t.API.prev()})}}),e(document).on("cycle-update-view",function(e,t){if(!t.allowWrap){var n=t.disabledClass,i=t.API.getComponent("next"),r=t.API.getComponent("prev"),o=t._prevBoundry||0,a=void 0!==t._nextBoundry?t._nextBoundry:t.slideCount-1;t.currSlide==a?i.addClass(n).prop("disabled",!0):i.removeClass(n).prop("disabled",!1),t.currSlide===o?r.addClass(n).prop("disabled",!0):r.removeClass(n).prop("disabled",!1)}}),e(document).on("cycle-destroyed",function(e,t){t.API.getComponent("prev").off(t.nextEvent),t.API.getComponent("next").off(t.prevEvent),t.container.off("swipeleft.cycle swiperight.cycle swipeLeft.cycle swipeRight.cycle swipeUp.cycle swipeDown.cycle")})}(jQuery),function(e){"use strict";function t(t,i){var r,o,a,s=i.autoHeight;if("container"==s)o=e(i.slides[i.currSlide]).outerHeight(),i.container.height(o);else if(i._autoHeightRatio)i.container.height(i.container.width()/i._autoHeightRatio);else if("calc"===s||"number"==e.type(s)&&s>=0){if(a="calc"===s?n(t,i):s>=i.slides.length?0:s,a==i._sentinelIndex)return;i._sentinelIndex=a,i._sentinel&&i._sentinel.remove(),r=e(i.slides[a].cloneNode(!0)),r.removeAttr("id name rel").find("[id],[name],[rel]").removeAttr("id name rel"),r.css({position:"static",visibility:"hidden",display:"block"}).prependTo(i.container).addClass("cycle-sentinel cycle-slide").removeClass("cycle-slide-active"),r.find("*").css("visibility","hidden"),i._sentinel=r}}function n(t,n){var i=0,r=-1;return n.slides.each(function(t){var n=e(this).height();n>r&&(r=n,i=t)}),i}function i(t,n,i,r){var o=e(r).outerHeight();n.container.animate({height:o},n.autoHeightSpeed,n.autoHeightEasing)}function r(n,o){o._autoHeightOnResize&&(e(window).off("resize orientationchange",o._autoHeightOnResize),o._autoHeightOnResize=null),o.container.off("cycle-slide-added cycle-slide-removed",t),o.container.off("cycle-destroyed",r),o.container.off("cycle-before",i),o._sentinel&&(o._sentinel.remove(),o._sentinel=null)}e.extend(e.fn.cycle.defaults,{autoHeight:0,autoHeightSpeed:250,autoHeightEasing:null}),e(document).on("cycle-initialized",function(n,o){function a(){t(n,o)}var s,c=o.autoHeight,l=e.type(c),u=null;("string"===l||"number"===l)&&(o.container.on("cycle-slide-added cycle-slide-removed",t),o.container.on("cycle-destroyed",r),"container"==c?o.container.on("cycle-before",i):"string"===l&&/\d+\:\d+/.test(c)&&(s=c.match(/(\d+)\:(\d+)/),s=s[1]/s[2],o._autoHeightRatio=s),"number"!==l&&(o._autoHeightOnResize=function(){clearTimeout(u),u=setTimeout(a,50)},e(window).on("resize orientationchange",o._autoHeightOnResize)),setTimeout(a,30))})}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{tmplRegex:"{{((.)?.*?)}}"}),e.extend(e.fn.cycle.API,{tmpl:function(t,n){var i=new RegExp(n.tmplRegex||e.fn.cycle.defaults.tmplRegex,"g"),r=e.makeArray(arguments);return r.shift(),t.replace(i,function(t,n){var i,o,a,s,c=n.split(".");for(i=0;i<r.length;i++)if(a=r[i]){if(c.length>1)for(s=a,o=0;o<c.length;o++)a=s,s=s[c[o]]||n;else s=a[n];if(e.isFunction(s))return s.apply(a,r);if(void 0!==s&&null!==s&&s!=n)return s}return n})}})}(jQuery),function(e){"use strict";window.XDomainRequest&&e.ajaxTransport(function(t){if(t.crossDomain&&t.async){t.timeout&&(t.xdrTimeout=t.timeout,delete t.timeout);var n;return{send:function(i,r){function o(t,i,o,a){n.onload=n.onerror=n.ontimeout=e.noop,n=void 0,r(t,i,o,a)}n=new XDomainRequest,n.onload=function(){o(200,"OK",{text:n.responseText},"Content-Type: "+n.contentType)},n.onerror=function(){o(404,"Not Found")},n.onprogress=function(){},n.ontimeout=function(){o(0,"timeout")},n.timeout=t.xdrTimeout||Number.MAX_VALUE,n.open(t.type,t.url),n.send(t.hasContent&&t.data||null)},abort:function(){n&&(n.onerror=e.noop,n.abort())}}}})}(jQuery),function(e,t){"use strict";var n=e.console||t,i=e.document,r=e.navigator,o=e.sessionStorage||!1,a=e.setTimeout,s=e.clearTimeout,c=e.setInterval,l=e.clearInterval,u=e.JSON,d=e.alert,f=e.History=e.History||{},h=e.history;try{o.setItem("TEST","1"),o.removeItem("TEST")}catch(p){o=!1}if(u.stringify=u.stringify||u.encode,u.parse=u.parse||u.decode,"undefined"!=typeof f.init)throw new Error("History.js Core has already been loaded...");f.init=function(){return"undefined"==typeof f.Adapter?!1:("undefined"!=typeof f.initCore&&f.initCore(),"undefined"!=typeof f.initHtml4&&f.initHtml4(),!0)},f.initCore=function(){if("undefined"!=typeof f.initCore.initialized)return!1;if(f.initCore.initialized=!0,f.options=f.options||{},f.options.hashChangeInterval=f.options.hashChangeInterval||100,f.options.safariPollInterval=f.options.safariPollInterval||500,f.options.doubleCheckInterval=f.options.doubleCheckInterval||500,f.options.disableSuid=f.options.disableSuid||!1,f.options.storeInterval=f.options.storeInterval||1e3,f.options.busyDelay=f.options.busyDelay||250,f.options.debug=f.options.debug||!1,f.options.initialTitle=f.options.initialTitle||i.title,f.options.html4Mode=f.options.html4Mode||!1,f.options.delayInit=f.options.delayInit||!1,f.intervalList=[],f.clearAllIntervals=function(){var e,t=f.intervalList;if("undefined"!=typeof t&&null!==t){for(e=0;e<t.length;e++)l(t[e]);f.intervalList=null}},f.debug=function(){f.options.debug&&f.log.apply(f,arguments)},f.log=function(){var e,t,r,o,a,s=!("undefined"==typeof n||"undefined"==typeof n.log||"undefined"==typeof n.log.apply),c=i.getElementById("log");for(s?(o=Array.prototype.slice.call(arguments),e=o.shift(),"undefined"!=typeof n.debug?n.debug.apply(n,[e,o]):n.log.apply(n,[e,o])):e="\n"+arguments[0]+"\n",t=1,r=arguments.length;r>t;++t){if(a=arguments[t],"object"==typeof a&&"undefined"!=typeof u)try{a=u.stringify(a)}catch(l){}e+="\n"+a+"\n"}return c?(c.value+=e+"\n-----\n",c.scrollTop=c.scrollHeight-c.clientHeight):s||d(e),!0},f.getInternetExplorerMajorVersion=function(){var e=f.getInternetExplorerMajorVersion.cached="undefined"!=typeof f.getInternetExplorerMajorVersion.cached?f.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=i.createElement("div"),n=t.getElementsByTagName("i");(t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&n[0];);return e>4?e:!1}();return e},f.isInternetExplorer=function(){var e=f.isInternetExplorer.cached="undefined"!=typeof f.isInternetExplorer.cached?f.isInternetExplorer.cached:Boolean(f.getInternetExplorerMajorVersion());return e},f.emulated=f.options.html4Mode?{pushState:!0,hashChange:!0}:{pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(r.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(r.userAgent))),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in i)||f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<8)},f.enabled=!f.emulated.pushState,f.bugs={setHash:Boolean(!f.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),safariPoll:Boolean(!f.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),ieDoubleCheck:Boolean(f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<7)},f.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},f.cloneObject=function(e){var t,n;return e?(t=u.stringify(e),n=u.parse(t)):n={},n},f.getRootUrl=function(){var e=i.location.protocol+"//"+(i.location.hostname||i.location.host);return i.location.port&&(e+=":"+i.location.port),e+="/"},f.getBaseHref=function(){var e=i.getElementsByTagName("base"),t=null,n="";return 1===e.length&&(t=e[0],n=t.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},f.getBaseUrl=function(){var e=f.getBaseHref()||f.getBasePageUrl()||f.getRootUrl();return e},f.getPageUrl=function(){var e,t=f.getState(!1,!1),n=(t||{}).url||f.getLocationHref();return e=n.replace(/\/+$/,"").replace(/[^\/]+$/,function(e){return/\./.test(e)?e:e+"/"})},f.getBasePageUrl=function(){var e=f.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/";return e},f.getFullUrl=function(e,t){var n=e,i=e.substring(0,1);return t="undefined"==typeof t?!0:t,/[a-z]+\:\/\//.test(e)||(n="/"===i?f.getRootUrl()+e.replace(/^\/+/,""):"#"===i?f.getPageUrl().replace(/#.*/,"")+e:"?"===i?f.getPageUrl().replace(/[\?#].*/,"")+e:t?f.getBaseUrl()+e.replace(/^(\.\/)+/,""):f.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},f.getShortUrl=function(e){var t=e,n=f.getBaseUrl(),i=f.getRootUrl();return f.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(i,"/"),f.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},f.getLocationHref=function(e){return e=e||i,e.URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash?e.location.href:-1==e.URL.indexOf("#")&&-1!=e.location.href.indexOf("#")?e.location.href:e.URL||e.location.href},f.store={},f.idToState=f.idToState||{},f.stateToId=f.stateToId||{},f.urlToId=f.urlToId||{},f.storedStates=f.storedStates||[],f.savedStates=f.savedStates||[],f.normalizeStore=function(){f.store.idToState=f.store.idToState||{},f.store.urlToId=f.store.urlToId||{},f.store.stateToId=f.store.stateToId||{}},f.getState=function(e,t){"undefined"==typeof e&&(e=!0),"undefined"==typeof t&&(t=!0);var n=f.getLastSavedState();return!n&&t&&(n=f.createStateObject()),e&&(n=f.cloneObject(n),n.url=n.cleanUrl||n.url),n},f.getIdByState=function(e){var t,n=f.extractId(e.url);if(!n)if(t=f.getStateString(e),"undefined"!=typeof f.stateToId[t])n=f.stateToId[t];else if("undefined"!=typeof f.store.stateToId[t])n=f.store.stateToId[t];else{for(;;)if(n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"==typeof f.idToState[n]&&"undefined"==typeof f.store.idToState[n])break;f.stateToId[t]=n,f.idToState[n]=e}return n},f.normalizeState=function(e){var t,n;return e&&"object"==typeof e||(e={}),"undefined"!=typeof e.normalized?e:(e.data&&"object"==typeof e.data||(e.data={}),t={},t.normalized=!0,t.title=e.title||"",t.url=f.getFullUrl(e.url?e.url:f.getLocationHref()),t.hash=f.getShortUrl(t.url),t.data=f.cloneObject(e.data),t.id=f.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,n=!f.isEmptyObject(t.data),(t.title||n)&&f.options.disableSuid!==!0&&(t.hash=f.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=f.getFullUrl(t.hash),(f.emulated.pushState||f.bugs.safariPoll)&&f.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},f.createStateObject=function(e,t,n){var i={data:e,title:t,url:n};return i=f.normalizeState(i)},f.getStateById=function(e){e=String(e);var n=f.idToState[e]||f.store.idToState[e]||t;return n},f.getStateString=function(e){var t,n,i;return t=f.normalizeState(e),n={data:t.data,title:e.title,url:e.url},i=u.stringify(n)},f.getStateId=function(e){var t,n;return t=f.normalizeState(e),n=t.id},f.getHashByState=function(e){var t,n;return t=f.normalizeState(e),n=t.hash},f.extractId=function(e){var t,n,i,r;return r=-1!=e.indexOf("#")?e.split("#")[0]:e,n=/(.*)\&_suid=([0-9]+)$/.exec(r),i=n?n[1]||e:e,t=n?String(n[2]||""):"",t||!1},f.isTraditionalAnchor=function(e){var t=!/[\/\?\.]/.test(e);return t},f.extractState=function(e,t,n){var i,r,o=null;return t=t||!1,i=f.extractId(e),i&&(o=f.getStateById(i)),o||(r=f.getFullUrl(e),i=f.getIdByUrl(r)||!1,i&&(o=f.getStateById(i)),o||!t||f.isTraditionalAnchor(e)||(o=f.createStateObject(null,n||null,r))),o},f.getIdByUrl=function(e){var n=f.urlToId[e]||f.store.urlToId[e]||t;return n},f.getLastSavedState=function(){return f.savedStates[f.savedStates.length-1]||t},f.getLastStoredState=function(){return f.storedStates[f.storedStates.length-1]||t},f.hasUrlDuplicate=function(e){var t,n=!1;return t=f.extractState(e.url),n=t&&t.id!==e.id},f.storeState=function(e){return f.urlToId[e.url]=e.id,f.storedStates.push(f.cloneObject(e)),e},f.isLastSavedState=function(e){var t,n,i,r=!1;return f.savedStates.length&&(t=e.id,n=f.getLastSavedState(),i=n.id,r=t===i),r},f.saveState=function(e){return f.isLastSavedState(e)?!1:(f.savedStates.push(f.cloneObject(e)),!0)},f.getStateByIndex=function(e){var t=null;return t="undefined"==typeof e?f.savedStates[f.savedStates.length-1]:0>e?f.savedStates[f.savedStates.length+e]:f.savedStates[e]},f.getCurrentIndex=function(){var e=null;return e=f.savedStates.length<1?0:f.savedStates.length-1},f.getHash=function(e){var t,n=f.getLocationHref(e);return t=f.getHashByUrl(n)},f.unescapeHash=function(e){var t=f.normalizeHash(e);return t=decodeURIComponent(t)},f.normalizeHash=function(e){var t=e.replace(/[^#]*#/,"").replace(/#.*/,"");return t},f.setHash=function(e,t){var n,r;return t!==!1&&f.busy()?(f.pushQueue({scope:f,callback:f.setHash,args:arguments,queue:t}),!1):(f.busy(!0),n=f.extractState(e,!0),n&&!f.emulated.pushState?f.pushState(n.data,n.title,n.url,!1):f.getHash()!==e&&(f.bugs.setHash?(r=f.getPageUrl(),f.pushState(null,null,r+"#"+e,!1)):i.location.hash=e),f)},f.escapeHash=function(t){var n=f.normalizeHash(t);return n=e.encodeURIComponent(n),f.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},f.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=f.unescapeHash(t)},f.setTitle=function(e){var t,n=e.title;n||(t=f.getStateByIndex(0),t&&t.url===e.url&&(n=t.title)),n||(n=f.options.initialTitle);try{i.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(r){}return i.title=n,f},f.queues=[],f.busy=function(e){if("undefined"!=typeof e?f.busy.flag=e:"undefined"==typeof f.busy.flag&&(f.busy.flag=!1),!f.busy.flag){s(f.busy.timeout);var t=function(){var e,n,i;if(!f.busy.flag)for(e=f.queues.length-1;e>=0;--e)n=f.queues[e],0!==n.length&&(i=n.shift(),f.fireQueueItem(i),f.busy.timeout=a(t,f.options.busyDelay))};f.busy.timeout=a(t,f.options.busyDelay)}return f.busy.flag},f.busy.flag=!1,f.fireQueueItem=function(e){return e.callback.apply(e.scope||f,e.args||[])},f.pushQueue=function(e){return f.queues[e.queue||0]=f.queues[e.queue||0]||[],f.queues[e.queue||0].push(e),f},f.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),"undefined"!=typeof t&&(e.queue=t),f.busy()?f.pushQueue(e):f.fireQueueItem(e),f},f.clearQueue=function(){return f.busy.flag=!1,f.queues=[],f},f.stateChanged=!1,f.doubleChecker=!1,f.doubleCheckComplete=function(){return f.stateChanged=!0,f.doubleCheckClear(),f},f.doubleCheckClear=function(){return f.doubleChecker&&(s(f.doubleChecker),f.doubleChecker=!1),f},f.doubleCheck=function(e){return f.stateChanged=!1,f.doubleCheckClear(),f.bugs.ieDoubleCheck&&(f.doubleChecker=a(function(){return f.doubleCheckClear(),f.stateChanged||e(),!0},f.options.doubleCheckInterval)),f},f.safariStatePoll=function(){var t,n=f.extractState(f.getLocationHref());if(!f.isLastSavedState(n))return t=n,t||(t=f.createStateObject()),f.Adapter.trigger(e,"popstate"),f},f.back=function(e){return e!==!1&&f.busy()?(f.pushQueue({scope:f,callback:f.back,args:arguments,queue:e}),!1):(f.busy(!0),f.doubleCheck(function(){f.back(!1)}),h.go(-1),!0)},f.forward=function(e){return e!==!1&&f.busy()?(f.pushQueue({scope:f,callback:f.forward,args:arguments,queue:e}),!1):(f.busy(!0),f.doubleCheck(function(){f.forward(!1)}),h.go(1),!0)},f.go=function(e,t){var n;if(e>0)for(n=1;e>=n;++n)f.forward(t);else{if(!(0>e))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)f.back(t)}return f},f.emulated.pushState){var p=function(){};f.pushState=f.pushState||p,f.replaceState=f.replaceState||p}else f.onPopState=function(t,n){var i,r,o=!1,a=!1;return f.doubleCheckComplete(),(i=f.getHash())?(r=f.extractState(i||f.getLocationHref(),!0),r?f.replaceState(r.data,r.title,r.url,!1):(f.Adapter.trigger(e,"anchorchange"),f.busy(!1)),f.expectedStateId=!1,!1):(o=f.Adapter.extractEventData("state",t,n)||!1,a=o?f.getStateById(o):f.expectedStateId?f.getStateById(f.expectedStateId):f.extractState(f.getLocationHref()),a||(a=f.createStateObject(null,null,f.getLocationHref())),f.expectedStateId=!1,f.isLastSavedState(a)?(f.busy(!1),!1):(f.storeState(a),f.saveState(a),f.setTitle(a),f.Adapter.trigger(e,"statechange"),f.busy(!1),!0))},f.Adapter.bind(e,"popstate",f.onPopState),f.pushState=function(t,n,i,r){if(f.getHashByUrl(i)&&f.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(r!==!1&&f.busy())return f.pushQueue({scope:f,callback:f.pushState,args:arguments,queue:r}),!1;f.busy(!0);var o=f.createStateObject(t,n,i);return f.isLastSavedState(o)?f.busy(!1):(f.storeState(o),f.expectedStateId=o.id,h.pushState(o.id,o.title,o.url),f.Adapter.trigger(e,"popstate")),!0},f.replaceState=function(t,n,i,r){if(f.getHashByUrl(i)&&f.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(r!==!1&&f.busy())return f.pushQueue({scope:f,callback:f.replaceState,args:arguments,queue:r}),!1;f.busy(!0);var o=f.createStateObject(t,n,i);return f.isLastSavedState(o)?f.busy(!1):(f.storeState(o),f.expectedStateId=o.id,h.replaceState(o.id,o.title,o.url),f.Adapter.trigger(e,"popstate")),!0};if(o){try{f.store=u.parse(o.getItem("History.store"))||{}}catch(m){f.store={}}f.normalizeStore()}else f.store={},f.normalizeStore();f.Adapter.bind(e,"unload",f.clearAllIntervals),f.saveState(f.storeState(f.extractState(f.getLocationHref(),!0,i.title))),o&&(f.onUnload=function(){var e,t,n;try{e=u.parse(o.getItem("History.store"))||{}}catch(i){e={}}e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};for(t in f.idToState)f.idToState.hasOwnProperty(t)&&(e.idToState[t]=f.idToState[t]);for(t in f.urlToId)f.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=f.urlToId[t]);for(t in f.stateToId)f.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=f.stateToId[t]);f.store=e,f.normalizeStore(),n=u.stringify(e);try{o.setItem("History.store",n)}catch(r){if(r.code!==DOMException.QUOTA_EXCEEDED_ERR)throw r;o.length&&(o.removeItem("History.store"),o.setItem("History.store",n))}},f.intervalList.push(c(f.onUnload,f.options.storeInterval)),f.Adapter.bind(e,"beforeunload",f.onUnload),f.Adapter.bind(e,"unload",f.onUnload)),f.emulated.pushState||(f.bugs.safariPoll&&f.intervalList.push(c(f.safariStatePoll,f.options.safariPollInterval)),("Apple Computer, Inc."===r.vendor||"Mozilla"===(r.appCodeName||""))&&(f.Adapter.bind(e,"hashchange",function(){f.Adapter.trigger(e,"popstate")}),f.getHash()&&f.Adapter.onDomLoad(function(){f.Adapter.trigger(e,"hashchange")})))},f.options&&f.options.delayInit||f.init()}(window),function(e){"use strict";var t=e.document,n=e.setTimeout||n,i=e.clearTimeout||i,r=e.setInterval||r,o=e.History=e.History||{};if("undefined"!=typeof o.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");o.initHtml4=function(){return"undefined"!=typeof o.initHtml4.initialized?!1:(o.initHtml4.initialized=!0,o.enabled=!0,o.savedHashes=[],o.isLastHash=function(e){var t,n=o.getHashByIndex();return t=e===n},o.isHashEqual=function(e,t){return e=encodeURIComponent(e).replace(/%25/g,"%"),t=encodeURIComponent(t).replace(/%25/g,"%"),e===t},o.saveHash=function(e){return o.isLastHash(e)?!1:(o.savedHashes.push(e),!0)},o.getHashByIndex=function(e){var t=null;return t="undefined"==typeof e?o.savedHashes[o.savedHashes.length-1]:0>e?o.savedHashes[o.savedHashes.length+e]:o.savedHashes[e]},o.discardedHashes={},o.discardedStates={},o.discardState=function(e,t,n){var i,r=o.getHashByState(e);return i={discardedState:e,backState:n,forwardState:t},o.discardedStates[r]=i,!0},o.discardHash=function(e,t,n){var i={discardedHash:e,backState:n,forwardState:t};return o.discardedHashes[e]=i,!0},o.discardedState=function(e){var t,n=o.getHashByState(e);return t=o.discardedStates[n]||!1},o.discardedHash=function(e){var t=o.discardedHashes[e]||!1;return t},o.recycleState=function(e){var t=o.getHashByState(e);return o.discardedState(e)&&delete o.discardedStates[t],!0},o.emulated.hashChange&&(o.hashChangeInit=function(){o.checkerFunction=null;var n,i,a,s,c="",l=Boolean(o.getHash());return o.isInternetExplorer()?(n="historyjs-iframe",i=t.createElement("iframe"),i.setAttribute("id",n),i.setAttribute("src","#"),i.style.display="none",t.body.appendChild(i),i.contentWindow.document.open(),i.contentWindow.document.close(),a="",s=!1,o.checkerFunction=function(){if(s)return!1;s=!0;var t=o.getHash(),n=o.getHash(i.contentWindow.document);return t!==c?(c=t,n!==t&&(a=n=t,i.contentWindow.document.open(),i.contentWindow.document.close(),i.contentWindow.document.location.hash=o.escapeHash(t)),o.Adapter.trigger(e,"hashchange")):n!==a&&(a=n,l&&""===n?o.back():o.setHash(n,!1)),s=!1,!0}):o.checkerFunction=function(){var t=o.getHash()||"";return t!==c&&(c=t,o.Adapter.trigger(e,"hashchange")),!0},o.intervalList.push(r(o.checkerFunction,o.options.hashChangeInterval)),!0},o.Adapter.onDomLoad(o.hashChangeInit)),o.emulated.pushState&&(o.onHashChange=function(t){var n,i=t&&t.newURL||o.getLocationHref(),r=o.getHashByUrl(i),a=null,s=null;return o.isLastHash(r)?(o.busy(!1),!1):(o.doubleCheckComplete(),o.saveHash(r),r&&o.isTraditionalAnchor(r)?(o.Adapter.trigger(e,"anchorchange"),o.busy(!1),!1):(a=o.extractState(o.getFullUrl(r||o.getLocationHref()),!0),o.isLastSavedState(a)?(o.busy(!1),!1):(s=o.getHashByState(a),(n=o.discardedState(a))?(o.getHashByIndex(-2)===o.getHashByState(n.forwardState)?o.back(!1):o.forward(!1),!1):(o.pushState(a.data,a.title,encodeURI(a.url),!1),!0))))},o.Adapter.bind(e,"hashchange",o.onHashChange),o.pushState=function(t,n,i,r){if(i=encodeURI(i).replace(/%25/g,"%"),o.getHashByUrl(i))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(r!==!1&&o.busy())return o.pushQueue({scope:o,callback:o.pushState,args:arguments,queue:r}),!1;o.busy(!0);var a=o.createStateObject(t,n,i),s=o.getHashByState(a),c=o.getState(!1),l=o.getHashByState(c),u=o.getHash(),d=o.expectedStateId==a.id;return o.storeState(a),o.expectedStateId=a.id,o.recycleState(a),o.setTitle(a),s===l?(o.busy(!1),!1):(o.saveState(a),d||o.Adapter.trigger(e,"statechange"),o.isHashEqual(s,u)||o.isHashEqual(s,o.getShortUrl(o.getLocationHref()))||o.setHash(s,!1),o.busy(!1),!0)},o.replaceState=function(t,n,i,r){if(i=encodeURI(i).replace(/%25/g,"%"),o.getHashByUrl(i))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(r!==!1&&o.busy())return o.pushQueue({scope:o,callback:o.replaceState,args:arguments,queue:r}),!1;o.busy(!0);var a=o.createStateObject(t,n,i),s=o.getHashByState(a),c=o.getState(!1),l=o.getHashByState(c),u=o.getStateByIndex(-2);return o.discardState(c,a,u),s===l?(o.storeState(a),o.expectedStateId=a.id,o.recycleState(a),o.setTitle(a),o.saveState(a),o.Adapter.trigger(e,"statechange"),o.busy(!1)):o.pushState(a.data,a.title,a.url,!1),!0}),void(o.emulated.pushState&&o.getHash()&&!o.emulated.hashChange&&o.Adapter.onDomLoad(function(){o.Adapter.trigger(e,"hashchange")})))},"undefined"!=typeof o.init&&o.init()}(window),function(e,t){"use strict";var n=e.History=e.History||{},i=e.jQuery;if("undefined"!=typeof n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(e,t,n){i(e).bind(t,n)},trigger:function(e,t,n){i(e).trigger(t,n)},extractEventData:function(e,n,i){var r=n&&n.originalEvent&&n.originalEvent[e]||i&&i[e]||t;return r},onDomLoad:function(e){i(e)}},"undefined"!=typeof n.init&&n.init()}(window),function(){!function(e){function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function n(e){return"undefined"==typeof e}var i={},r=e.TraceKit,o=[].slice,a="?";i.noConflict=function(){return e.TraceKit=r,i},i.wrap=function(e){function t(){try{return e.apply(this,arguments)}catch(t){throw i.report(t),t}}return t},i.report=function(){function n(e){c(),d.push(e)}function r(e){for(var t=d.length-1;t>=0;--t)d[t]===e&&d.splice(t,1)}function a(e,n){var r=null;if(!n||i.collectWindowErrors){for(var a in d)if(t(d,a))try{d[a].apply(null,[e].concat(o.call(arguments,2)))}catch(s){r=s}if(r)throw r}}function s(e,t,n){var r=null;if(h)i.computeStackTrace.augmentStackTraceWithInitialElement(h,t,n,e),r=h,h=null,f=null;else{var o={url:t,line:n};o.func=i.computeStackTrace.guessFunctionName(o.url,o.line),o.context=i.computeStackTrace.gatherContext(o.url,o.line),r={mode:"onerror",message:e,url:document.location.href,stack:[o],useragent:navigator.userAgent}}return a(r,"from window.onerror"),u?u.apply(this,arguments):!1}function c(){p!==!0&&(u=e.onerror,e.onerror=s,p=!0)}function l(t){var n=o.call(arguments,1);if(h){if(f===t)return;var r=h;h=null,f=null,a.apply(null,[r,null].concat(n))}var s=i.computeStackTrace(t);throw h=s,f=t,e.setTimeout(function(){f===t&&(h=null,f=null,a.apply(null,[s,null].concat(n)))},s.incomplete?2e3:0),t}var u,d=[],f=null,h=null,p=!0;return l.subscribe=n,l.unsubscribe=r,l}(),i.computeStackTrace=function(){function r(t){function n(){try{return new e.XMLHttpRequest}catch(t){return new e.ActiveXObject("Microsoft.XMLHTTP")}}if(!i.remoteFetching)return"";try{var r=n();return r.open("GET",t,!1),r.send(""),r.responseText}catch(o){return""}}function o(e){if(!t($,e)){var n="";-1!==e.indexOf(document.domain)&&(n=r(e)),$[e]=n?n.split("\n"):[]}return $[e]}function s(e,t){var i,r=/function ([^(]*)\(([^)]*)\)/,s=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,c="",l=10,u=o(e);if(!u.length)return a;for(var d=0;l>d;++d)if(c=u[t-d]+c,!n(c)){if(i=s.exec(c))return i[1];if(i=r.exec(c))return i[1]}return a}function c(e,t){var r=o(e);if(!r.length)return null;var a=[],s=Math.floor(i.linesOfContext/2),c=s+i.linesOfContext%2,l=Math.max(0,t-s-1),u=Math.min(r.length,t+c-1);t-=1;for(var d=l;u>d;++d)n(r[d])||a.push(r[d]);return a.length>0?a:null}function l(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function u(e){return l(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function d(e,t){for(var n,i,r=0,a=t.length;a>r;++r)if((n=o(t[r])).length&&(n=n.join("\n"),i=e.exec(n)))return{url:t[r],line:n.substring(0,i.index).split("\n").length,column:i.index-n.lastIndexOf("\n",i.index)-1};return null}function f(e,t,n){var i,r=o(t),a=new RegExp("\\b"+l(e)+"\\b");return n-=1,r&&r.length>n&&(i=a.exec(r[n]))?i.index:null}function h(t){for(var n,i,r,o,a=[e.location.href],s=document.getElementsByTagName("script"),c=""+t,f=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,h=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,p=0;p<s.length;++p){var m=s[p];m.src&&a.push(m.src)}if(r=f.exec(c)){var g=r[1]?"\\s+"+r[1]:"",v=r[2].split(",").join("\\s*,\\s*");n=l(r[3]).replace(/;$/,";?"),i=new RegExp("function"+g+"\\s*\\(\\s*"+v+"\\s*\\)\\s*{\\s*"+n+"\\s*}")}else i=new RegExp(l(c).replace(/\s+/g,"\\s+"));if(o=d(i,a))return o;if(r=h.exec(c)){var _=r[1];if(n=u(r[2]),i=new RegExp("on"+_+"=[\\'\"]\\s*"+n+"\\s*[\\'\"]","i"),o=d(i,a[0]))return o;if(i=new RegExp(n),o=d(i,a))return o}return null}function p(e){if(!e.stack)return null;for(var t,n,i=/^\s*at (?:((?:\[object object\])?\S+(?: \[as \S+\])?) )?\(?((?:file|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,r=/^\s*(\S*)(?:\((.*?)\))?@((?:file|http|https).*?):(\d+)(?::(\d+))?\s*$/i,o=e.stack.split("\n"),l=[],u=/^(.*) is undefined$/.exec(e.message),d=0,h=o.length;h>d;++d){if(t=r.exec(o[d]))n={url:t[3],func:t[1]||a,args:t[2]?t[2].split(","):"",line:+t[4],column:t[5]?+t[5]:null};else{if(!(t=i.exec(o[d])))continue;n={url:t[2],func:t[1]||a,line:+t[3],column:t[4]?+t[4]:null}}!n.func&&n.line&&(n.func=s(n.url,n.line)),n.line&&(n.context=c(n.url,n.line)),l.push(n)}return l[0]&&l[0].line&&!l[0].column&&u&&(l[0].column=f(u[1],l[0].url,l[0].line)),l.length?{mode:"stack",name:e.name,message:e.message,url:document.location.href,stack:l,useragent:navigator.userAgent}:null}function m(e){for(var t,n=e.stacktrace,i=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,r=n.split("\n"),o=[],a=0,l=r.length;l>a;a+=2)if(t=i.exec(r[a])){var u={line:+t[1],column:+t[2],func:t[3]||t[4],args:t[5]?t[5].split(","):[],url:t[6]};if(!u.func&&u.line&&(u.func=s(u.url,u.line)),u.line)try{u.context=c(u.url,u.line)}catch(d){}u.context||(u.context=[r[a+1]]),o.push(u)}return o.length?{mode:"stacktrace",name:e.name,message:e.message,url:document.location.href,stack:o,useragent:navigator.userAgent}:null}function g(n){var i=n.message.split("\n");if(i.length<4)return null;var r,a,l,f,h=/^\s*Line (\d+) of linked script ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i,p=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i,m=/^\s*Line (\d+) of function script\s*$/i,g=[],v=document.getElementsByTagName("script"),_=[];for(a in v)t(v,a)&&!v[a].src&&_.push(v[a]);for(a=2,l=i.length;l>a;a+=2){var y=null;if(r=h.exec(i[a]))y={url:r[2],func:r[3],line:+r[1]};else if(r=p.exec(i[a])){y={url:r[3],func:r[4]};var b=+r[1],w=_[r[2]-1];if(w&&(f=o(y.url))){f=f.join("\n");var $=f.indexOf(w.innerText);$>=0&&(y.line=b+f.substring(0,$).split("\n").length)}}else if(r=m.exec(i[a])){var k=e.location.href.replace(/#.*$/,""),x=r[1],j=new RegExp(u(i[a+1]));f=d(j,[k]),y={url:k,line:f?f.line:x,func:""}}if(y){y.func||(y.func=s(y.url,y.line));var C=c(y.url,y.line),S=C?C[Math.floor(C.length/2)]:null;y.context=C&&S.replace(/^\s*/,"")===i[a+1].replace(/^\s*/,"")?C:[i[a+1]],g.push(y)}}return g.length?{mode:"multiline",name:n.name,message:i[0],url:document.location.href,stack:g,useragent:navigator.userAgent}:null}function v(e,t,n,i){var r={url:t,line:n};if(r.url&&r.line){e.incomplete=!1,r.func||(r.func=s(r.url,r.line)),r.context||(r.context=c(r.url,r.line));var o=/ '([^']+)' /.exec(i);if(o&&(r.column=f(o[1],r.url,r.line)),e.stack.length>0&&e.stack[0].url===r.url){if(e.stack[0].line===r.line)return!1;if(!e.stack[0].line&&e.stack[0].func===r.func)return e.stack[0].line=r.line,e.stack[0].context=r.context,!1}return e.stack.unshift(r),e.partial=!0,!0}return e.incomplete=!0,!1}function _(e,t){for(var n,r,o,c=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,l=[],u={},d=!1,p=_.caller;p&&!d;p=p.caller)if(p!==y&&p!==i.report){if(r={url:null,func:a,line:null,column:null},p.name?r.func=p.name:(n=c.exec(p.toString()))&&(r.func=n[1]),o=h(p)){r.url=o.url,r.line=o.line,r.func===a&&(r.func=s(r.url,r.line));var m=/ '([^']+)' /.exec(e.message||e.description);m&&(r.column=f(m[1],o.url,o.line))}u[""+p]?d=!0:u[""+p]=!0,l.push(r)}t&&l.splice(0,t);var g={mode:"callers",name:e.name,message:e.message,url:document.location.href,stack:l,useragent:navigator.userAgent};return v(g,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),g}function y(e,t){var n=null;t=null==t?0:+t;try{if(n=m(e))return n}catch(i){if(w)throw i
}try{if(n=p(e))return n}catch(i){if(w)throw i}try{if(n=g(e))return n}catch(i){if(w)throw i}try{if(n=_(e,t+1))return n}catch(i){if(w)throw i}return{mode:"failed"}}function b(e){e=(null==e?0:+e)+1;try{throw new Error}catch(t){return y(t,e+1)}return null}var w=!1,$={};return y.augmentStackTraceWithInitialElement=v,y.guessFunctionName=s,y.gatherContext=c,y.ofCaller=b,y}(),i.remoteFetching||(i.remoteFetching=!0),i.collectWindowErrors||(i.collectWindowErrors=!1),(!i.linesOfContext||i.linesOfContext<1)&&(i.linesOfContext=11),e.TraceKit=i}(window);var e;e=function(){function e(e){var n,i,r,o,a,s,c;this.options=null!=e?e:{},this.stackInfo=this.options.stackInfo||this.options.error&&TraceKit.computeStackTrace(this.options.error),this.trace=this._parseBacktrace(null!=(r=this.stackInfo)?r.stack:void 0),this["class"]=null!=(o=this.stackInfo)?o.name:void 0,this.message=null!=(a=this.stackInfo)?a.message:void 0,this.source=this.stackInfo&&this._extractSource(this.stackInfo.stack),this.url=document.URL,this.project_root=t.configuration.project_root,this.environment=t.configuration.environment,this.component=t.configuration.component,this.action=t.configuration.action,this.context={},s=t.context;for(n in s)i=s[n],this.context[n]=i;if(this.options.context){c=this.options.context;for(n in c)i=c[n],this.context[n]=i}}return e.prototype.toJSON=function(){return JSON.stringify({notifier:{name:"honeybadger.js",url:"https://github.com/honeybadger-io/honeybadger-js",version:t.version,language:"javascript"},error:{"class":this["class"],message:this.message,backtrace:this.trace,source:this.source},request:{url:this.url,component:this.component,action:this.action,context:this.context,cgi_data:this._cgiData()},server:{project_root:this.project_root,environment_name:this.environment}})},e.prototype._parseBacktrace=function(e){var n,i,r,o,a,s;for(null==e&&(e=[]),n=[],r=0,o=e.length;o>r;r++)i=e[r],(null!=(a=i.url)?a.match(/honeybadger(?:\.min)?\.js/):0)||n.push({file:(null!=(s=i.url)?s.replace(t.configuration.project_root,"[PROJECT_ROOT]"):void 0)||"unknown",number:i.line,method:i.func});return n},e.prototype._extractSource=function(e){var t,n,i,r,o,a,s,c;for(null==e&&(e=[]),i={},c=null!=(a=null!=(s=e[0])?s.context:void 0)?a:[],t=r=0,o=c.length;o>r;t=++r)n=c[t],i[t]=n;return i},e.prototype._cgiData=function(){var e,t,n;e={};for(t in navigator)n=navigator[t],"object"!=typeof n&&(e[t.split(/(?=[A-Z][a-z]*)/).join("_").toUpperCase()]=n);return e.HTTP_USER_AGENT=e.USER_AGENT,delete e.USER_AGENT,document.referrer.match(/\S/)&&(e.HTTP_REFERER=document.referrer),e},e}();var t;t=function(){function t(){}return t.version="0.0.2",t.default_configuration={api_key:null,host:"api.honeybadger.io",ssl:!0,project_root:window.location.protocol+"//"+window.location.host,environment:"production",component:null,action:null,disabled:!0,onerror:!1},t.configured=!1,t.configure=function(e){var t,n;null==e&&(e={}),this.configured===!1&&("undefined"==typeof e.disabled&&(e.disabled=!1),this.configured=!0);for(t in e)n=e[t],this.configuration[t]=n;return TraceKit.collectWindowErrors=!1,this},t.configuration={reset:function(){var e,n,i;t.configured=!1,i=t.default_configuration;for(e in i)n=i[e],t.configuration[e]=n;return TraceKit.collectWindowErrors=!1,t}},t.configuration.reset(),t.context={},t.resetContext=function(e){return null==e&&(e={}),this.context=e,this},t.setContext=function(e){var t,n;null==e&&(e={});for(t in e)n=e[t],this.context[t]=n;return this},t.notify=function(t,n){var i;return null==n&&(n={}),this.configuration.disabled===!0?!1:(t&&(n.error=t),i=new e(n),this._sendRequest(i.toJSON()))},t._sendRequest=function(e){var t;return t="http"+(this.configuration.ssl&&"s"||"")+"://"+this.configuration.host+"/v1/notices.html",this._crossDomainPost(t,e)},t._crossDomainPost=function(e,t){var n,i,r,o;return i=document.createElement("iframe"),o="_hb_"+(new Date).getTime(),document.body.appendChild(i),i.style.display="none",i.contentWindow.name=o,n=document.createElement("form"),n.target=o,n.action=e,n.method="POST",r=document.createElement("input"),r.type="hidden",r.name="payload",r.value=t,n.appendChild(r),r=document.createElement("input"),r.type="hidden",r.name="api_key",r.value=this.configuration.api_key,n.appendChild(r),document.body.appendChild(n),n.submit()},t._handleTraceKitSubscription=function(e){return t.notify(null,{stackInfo:e})},t}.call(this),TraceKit.report.subscribe(t._handleTraceKitSubscription),("undefined"!=typeof exports&&null!==exports?exports:this).Honeybadger=t}.call(this),function(e){function t(t,i,r){var o=(new Date).getTime();return t.find("label,input,textarea,select").each(function(t,a){n(e(a),o,i,r)}),t.removeClass("template").show()}function n(t,n,r,o){var a=r.pattern||i,s=new RegExp("_"+a+"_"),c=new RegExp("\\["+a+"\\]");t.attr("id")&&t.attr("id",t.attr("id").replace(s,"_"+n+"_")),t.attr("for")&&t.attr("for",t.attr("for").replace(s,"_"+n+"_")),t.attr("name")&&(r.copy_values&&t.val(e('[name="'+t.attr("name")+'"]').val()),t.attr("name",t.attr("name").replace(c,"["+n+"]"))),"function"==typeof o&&o.apply(t,t)}var i="-1";e.fn.clone_form_template=function(n,i){return n||(n={}),e(this).map(function(){return t(e(this).clone(),n,i)[0]})}}(jQuery),function(e){function t(t,n,i){this.url=t,this.finished=n||function(){},this.options=e.extend({delay:3e4,on_error:function(){},on_complete:function(){},continue_on_error:!1},i),this.xhr=!1,this.running=!1,this.go()}e.pollster=function(e,n,i){return new t(e,n,i)},window.Pollster=t,t.prototype.start=function(){var e=this;this.running=!0,this.timeout=setTimeout(function(){e.go()},this.options.delay)},t.prototype.stop=function(){this.running=!1,this.timeout&&clearTimeout(this.timeout)},t.prototype.go=function(){function t(){n?i.stop():i.start()}var n=!1,i=this;this.xhr||(this.xhr=e.ajax({url:this.url,dataType:"json",type:"get",global:!1,cache:!1,success:function(e){n=i.finished(e),t()},error:function(){i.options.continue_on_error&&t(),i.options.on_error()},complete:function(){i.xhr=!1,i.options.on_complete()}}))}}(jQuery),function(e){function t(e,t){""===e.val()?e.data("placeholder").removeClass(t.hideClass):e.data("placeholder").addClass(t.hideClass)}function n(e,t){e.data("placeholder").addClass(t.hideClass)}function i(e,t){var n=t.is("textarea"),i=parseFloat(t.css("padding-top")),r=parseFloat(t.css("padding-left")),o=t.offset();i&&(o.top+=i),r&&(o.left+=r),e.css({width:t.innerWidth()-(n?20:4),height:t.innerHeight()-6,lineHeight:t.css("line-height"),whiteSpace:n?"normal":"nowrap",overflow:"hidden"}).offset(o)}function r(e,t){var i=e.val();!function r(){c=requestAnimationFrame(r),e.val()!==i&&(n(e,t),a(),o(e,t))}()}function o(e,n){!function i(){c=requestAnimationFrame(i),t(e,n)}()}function a(){window.cancelAnimationFrame&&cancelAnimationFrame(c)}function s(e){l&&window.console&&window.console.log&&window.console.log(e)}var c,l=!1;e.fn.placeHolder=function(o){s("init placeHolder");var c=this,l=e(this).length;return this.options=e.extend({className:"placeholder",visibleToScreenreaders:!0,visibleToScreenreadersHideClass:"placeholder-hide-except-screenreader",visibleToNoneHideClass:"placeholder-hide",hideOnFocus:!1,removeLabelClass:"visuallyhidden",hiddenOverrideClass:"visuallyhidden-with-placeholder",forceHiddenOverride:!0,forceApply:!1,autoInit:!0},o),this.options.hideClass=this.options.visibleToScreenreaders?this.options.visibleToScreenreadersHideClass:this.options.visibleToNoneHideClass,e(this).each(function(o){function u(){!c.options.hideOnFocus&&window.requestAnimationFrame?r(m,c.options):n(m,c.options)}var d,f,h,p,m=e(this),g=m.attr("placeholder"),v=m.attr("id");return(""===g||void 0===g)&&(g=m[0].attributes.placeholder.value),d=m.closest("label"),m.removeAttr("placeholder"),d.length||v?(d=d.length?d:e('label[for="'+v+'"]').first(),d.length?(p=e(d).find(".placeholder"),p.length?(i(p,m),p.text(g),m):(d.hasClass(c.options.removeLabelClass)&&d.removeClass(c.options.removeLabelClass).addClass(c.options.hiddenOverrideClass),f=e("<span>").addClass(c.options.className).text(g).appendTo(d),h=f.width()>m.width(),h&&f.attr("title",g),i(f,m),m.data("placeholder",f),f.data("input",m),f.click(function(){e(this).data("input").focus()}),m.focusin(u),m.focusout(function(){t(e(this),c.options),c.options.hideOnFocus||a()}),t(m,c.options),e(document).bind("fontresize resize",function(){i(f,m)}),e.event.special.resize?e("textarea").bind("resize",function(t){e(this).is(":visible")&&i(f,m),t.stopPropagation(),t.preventDefault()}):e("textarea").css("resize","none"),o>=l-1&&"undefined"!=typeof e.attrHooks&&(e.attrHooks.placeholder={get:function(t){return"input"===t.nodeName.toLowerCase()||"textarea"===t.nodeName.toLowerCase()?e(t).data("placeholder")?e(e(t).data("placeholder")).text():e(t)[0].placeholder:void 0},set:function(t,n){return e(e(t).data("placeholder")).text(n)}}),void(m.is(":focus")&&u()))):void s("the input element with the placeholder needs a label!")):void s("the input element with the placeholder needs an id!")})},e(function(){var t=window.placeHolderConfig||{};return t.autoInit===!1?void s("placeholder:abort because autoInit is off"):("placeholder"in e("<input>")[0]||"placeHolder"in e("<input>")[0])&&!t.forceApply?void s("placeholder:abort because browser has native support"):void e("input[placeholder], textarea[placeholder]").placeHolder(t)})}(jQuery),function(e,t,n){"use strict";function i(n){if(r=t.documentElement,o=t.body,B(),at=this,n=n||{},dt=n.constants||{},n.easing)for(var i in n.easing)Q[i]=n.easing[i];_t=n.edgeStrategy||"set",lt={beforerender:n.beforerender,render:n.render},ut=n.forceHeight!==!1,ut&&(Nt=n.scale||1),ft=n.mobileDeceleration||x,pt=n.smoothScrolling!==!1,mt=n.smoothScrollingDuration||j,gt={targetTop:at.getScrollTop()},Ht=(n.mobileCheck||function(){return/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||e.opera)})(),Ht?(ct=t.getElementById("skrollr-body"),ct&&ot(),G(),Tt(r,[_,w],[y])):Tt(r,[_,b],[y]),at.refresh(),wt(e,"resize orientationchange",function(){var e=r.clientWidth,t=r.clientHeight;(t!==zt||e!==Ft)&&(zt=t,Ft=e,Rt=!0)});var a=W();return function s(){K(),bt=a(s)}(),at}var r,o,a=e.skrollr={get:function(){return at},init:function(e){return at||new i(e)},VERSION:"0.6.21"},s=Object.prototype.hasOwnProperty,c=e.Math,l=e.getComputedStyle,u="touchstart",d="touchmove",f="touchcancel",h="touchend",p="skrollable",m=p+"-before",g=p+"-between",v=p+"-after",_="skrollr",y="no-"+_,b=_+"-desktop",w=_+"-mobile",$="linear",k=1e3,x=.004,j=200,C="start",S="end",T="center",I="bottom",D="___skrollable_id",E=/^(?:input|textarea|button|select)$/i,A=/^\s+|\s+$/g,P=/^data(?:-(_\w+))?(?:-?(-?\d*\.?\d+p?))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,N=/\s*([\w\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,M=/^([a-z\-]+)\[(\w+)\]$/,O=/-([a-z])/g,L=function(e,t){return t.toUpperCase()},F=/[\-+]?[\d]*\.?[\d]+/g,z=/\{\?\}/g,R=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,q=/[a-z\-]+-gradient/g,H="",Y="",B=function(){var e=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;if(l){var t=l(o,null);for(var n in t)if(H=n.match(e)||+n==n&&t[n].match(e))break;if(!H)return void(H=Y="");H=H[0],"-"===H.slice(0,1)?(Y=H,H={"-webkit-":"webkit","-moz-":"Moz","-ms-":"ms","-o-":"O"}[H]):Y="-"+H.toLowerCase()+"-"}},W=function(){var t=e.requestAnimationFrame||e[H.toLowerCase()+"RequestAnimationFrame"],n=Et();return(Ht||!t)&&(t=function(t){var i=Et()-n,r=c.max(0,1e3/60-i);return e.setTimeout(function(){n=Et(),t()},r)}),t},U=function(){var t=e.cancelAnimationFrame||e[H.toLowerCase()+"CancelAnimationFrame"];return(Ht||!t)&&(t=function(t){return e.clearTimeout(t)}),t},Q={begin:function(){return 0},end:function(){return 1},linear:function(e){return e},quadratic:function(e){return e*e},cubic:function(e){return e*e*e},swing:function(e){return-c.cos(e*c.PI)/2+.5},sqrt:function(e){return c.sqrt(e)},outCubic:function(e){return c.pow(e-1,3)+1},bounce:function(e){var t;if(.5083>=e)t=3;else if(.8489>=e)t=9;else if(.96208>=e)t=27;else{if(!(.99981>=e))return 1;t=91}return 1-c.abs(3*c.cos(e*t*1.028)/t)}};i.prototype.refresh=function(e){var i,r,o=!1;for(e===n?(o=!0,st=[],qt=0,e=t.getElementsByTagName("*")):e=[].concat(e),i=0,r=e.length;r>i;i++){var a=e[i],s=a,c=[],l=pt,u=_t;if(a.attributes){for(var d=0,f=a.attributes.length;f>d;d++){var h=a.attributes[d];if("data-anchor-target"!==h.name)if("data-smooth-scrolling"!==h.name)if("data-edge-strategy"!==h.name){var m=h.name.match(P);if(null!==m){var g={props:h.value,element:a};c.push(g);var v=m[1];v&&(g.constant=v.substr(1));var _=m[2];/p$/.test(_)?(g.isPercentage=!0,g.offset=(0|_.slice(0,-1))/100):g.offset=0|_;var y=m[3],b=m[4]||y;y&&y!==C&&y!==S?(g.mode="relative",g.anchors=[y,b]):(g.mode="absolute",y===S?g.isEnd=!0:g.isPercentage||(g.offset=g.offset*Nt))}}else u=h.value;else l="off"!==h.value;else if(s=t.querySelector(h.value),null===s)throw'Unable to find anchor target "'+h.value+'"'}if(c.length){var w,$,k;!o&&D in a?(k=a[D],w=st[k].styleAttr,$=st[k].classAttr):(k=a[D]=qt++,w=a.style.cssText,$=St(a)),st[k]={element:a,styleAttr:w,classAttr:$,anchorTarget:s,keyFrames:c,smoothScrolling:l,edgeStrategy:u},Tt(a,[p],[])}}}for(xt(),i=0,r=e.length;r>i;i++){var x=st[e[i][D]];x!==n&&(X(x),et(x))}return at},i.prototype.relativeToAbsolute=function(e,t,n){var i=r.clientHeight,o=e.getBoundingClientRect(),a=o.top,s=o.bottom-o.top;return t===I?a-=i:t===T&&(a-=i/2),n===I?a+=s:n===T&&(a+=s/2),a+=at.getScrollTop(),a+.5|0},i.prototype.animateTo=function(e,t){t=t||{};var i=Et(),r=at.getScrollTop();return ht={startTop:r,topDiff:e-r,targetTop:e,duration:t.duration||k,startTime:i,endTime:i+(t.duration||k),easing:Q[t.easing||$],done:t.done},ht.topDiff||(ht.done&&ht.done.call(at,!1),ht=n),at},i.prototype.stopAnimateTo=function(){ht&&ht.done&&ht.done.call(at,!0),ht=n},i.prototype.isAnimatingTo=function(){return!!ht},i.prototype.setScrollTop=function(t,n){return vt=n===!0,Ht?Yt=c.min(c.max(t,0),Pt):e.scrollTo(0,t),at},i.prototype.getScrollTop=function(){return Ht?Yt:e.pageYOffset||r.scrollTop||o.scrollTop||0},i.prototype.getMaxScrollTop=function(){return Pt},i.prototype.on=function(e,t){return lt[e]=t,at},i.prototype.off=function(e){return delete lt[e],at},i.prototype.destroy=function(){var e=U();e(bt),kt(),Tt(r,[y],[_,b,w]);for(var t=0,i=st.length;i>t;t++)rt(st[t].element);r.style.overflow=o.style.overflow="auto",r.style.height=o.style.height="auto",ct&&a.setStyle(ct,"transform","none"),at=n,ct=n,lt=n,ut=n,Pt=0,Nt=1,dt=n,ft=n,Mt="down",Ot=-1,Ft=0,zt=0,Rt=!1,ht=n,pt=n,mt=n,gt=n,vt=n,qt=0,_t=n,Ht=!1,Yt=0,yt=n};var G=function(){var i,a,s,l,p,m,g,v,_,y,b,w;wt(r,[u,d,f,h].join(" "),function(e){var r=e.changedTouches[0];for(l=e.target;3===l.nodeType;)l=l.parentNode;switch(p=r.clientY,m=r.clientX,y=e.timeStamp,E.test(l.tagName)||e.preventDefault(),e.type){case u:i&&i.blur(),at.stopAnimateTo(),i=l,a=g=p,s=m,_=y;break;case d:E.test(l.tagName)&&t.activeElement!==l&&e.preventDefault(),v=p-g,w=y-b,at.setScrollTop(Yt-v,!0),g=p,b=y;break;default:case f:case h:var o=a-p,$=s-m,k=$*$+o*o;if(49>k){if(!E.test(i.tagName)){i.focus();var x=t.createEvent("MouseEvents");x.initMouseEvent("click",!0,!0,e.view,1,r.screenX,r.screenY,r.clientX,r.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),i.dispatchEvent(x)}return}i=n;var j=v/w;j=c.max(c.min(j,3),-3);var C=c.abs(j/ft),S=j*C+.5*ft*C*C,T=at.getScrollTop()-S,I=0;T>Pt?(I=(Pt-T)/S,T=Pt):0>T&&(I=-T/S,T=0),C*=1-I,at.animateTo(T+.5|0,{easing:"outCubic",duration:C})}}),e.scrollTo(0,0),r.style.overflow=o.style.overflow="hidden"},J=function(){var e,t,n,i,o,a,s,l,u,d,f,h=r.clientHeight,p=jt();for(l=0,u=st.length;u>l;l++)for(e=st[l],t=e.element,n=e.anchorTarget,i=e.keyFrames,o=0,a=i.length;a>o;o++)s=i[o],d=s.offset,f=p[s.constant]||0,s.frame=d,s.isPercentage&&(d*=h,s.frame=d),"relative"===s.mode&&(rt(t),s.frame=at.relativeToAbsolute(n,s.anchors[0],s.anchors[1])-d,rt(t,!0)),s.frame+=f,ut&&!s.isEnd&&s.frame>Pt&&(Pt=s.frame);for(Pt=c.max(Pt,Ct()),l=0,u=st.length;u>l;l++){for(e=st[l],i=e.keyFrames,o=0,a=i.length;a>o;o++)s=i[o],f=p[s.constant]||0,s.isEnd&&(s.frame=Pt-s.offset+f);e.keyFrames.sort(At)}},V=function(e,t){for(var n=0,i=st.length;i>n;n++){var r,o,c=st[n],l=c.element,u=c.smoothScrolling?e:t,d=c.keyFrames,f=d[0].frame,h=d[d.length-1].frame,_=f>u,y=u>h,b=d[_?0:d.length-1];if(_||y){if(_&&-1===c.edge||y&&1===c.edge)continue;switch(Tt(l,[_?m:v],[m,g,v]),c.edge=_?-1:1,c.edgeStrategy){case"reset":rt(l);continue;case"ease":u=b.frame;break;default:case"set":var w=b.props;for(r in w)s.call(w,r)&&(o=it(w[r].value),a.setStyle(l,r,o));continue}}else 0!==c.edge&&(Tt(l,[p,g],[m,v]),c.edge=0);for(var $=0,k=d.length-1;k>$;$++)if(u>=d[$].frame&&u<=d[$+1].frame){var x=d[$],j=d[$+1];for(r in x.props)if(s.call(x.props,r)){var C=(u-x.frame)/(j.frame-x.frame);C=x.props[r].easing(C),o=nt(x.props[r].value,j.props[r].value,C),o=it(o),a.setStyle(l,r,o)}break}}},K=function(){Rt&&(Rt=!1,xt());var e,t,i=at.getScrollTop(),r=Et();if(ht)r>=ht.endTime?(i=ht.targetTop,e=ht.done,ht=n):(t=ht.easing((r-ht.startTime)/ht.duration),i=ht.startTop+t*ht.topDiff|0),at.setScrollTop(i,!0);else if(!vt){var o=gt.targetTop-i;o&&(gt={startTop:Ot,topDiff:i-Ot,targetTop:i,startTime:Lt,endTime:Lt+mt}),r<=gt.endTime&&(t=Q.sqrt((r-gt.startTime)/mt),i=gt.startTop+t*gt.topDiff|0)}if(Ht&&ct&&a.setStyle(ct,"transform","translate(0, "+-Yt+"px) "+yt),vt||Ot!==i){Mt=i>Ot?"down":Ot>i?"up":Mt,vt=!1;var s={curTop:i,lastTop:Ot,maxTop:Pt,direction:Mt},c=lt.beforerender&&lt.beforerender.call(at,s);c!==!1&&(V(i,at.getScrollTop()),Ot=i,lt.render&&lt.render.call(at,s)),e&&e.call(at,!1)}Lt=r},X=function(e){for(var t=0,n=e.keyFrames.length;n>t;t++){for(var i,r,o,a,s=e.keyFrames[t],c={};null!==(a=N.exec(s.props));)o=a[1],r=a[2],i=o.match(M),null!==i?(o=i[1],i=i[2]):i=$,r=r.indexOf("!")?Z(r):[r.slice(1)],c[o]={value:r,easing:Q[i]};s.props=c}},Z=function(e){var t=[];return R.lastIndex=0,e=e.replace(R,function(e){return e.replace(F,function(e){return e/255*100+"%"})}),Y&&(q.lastIndex=0,e=e.replace(q,function(e){return Y+e})),e=e.replace(F,function(e){return t.push(+e),"{?}"}),t.unshift(e),t},et=function(e){var t,n,i={};for(t=0,n=e.keyFrames.length;n>t;t++)tt(e.keyFrames[t],i);for(i={},t=e.keyFrames.length-1;t>=0;t--)tt(e.keyFrames[t],i)},tt=function(e,t){var n;for(n in t)s.call(e.props,n)||(e.props[n]=t[n]);for(n in e.props)t[n]=e.props[n]},nt=function(e,t,n){var i,r=e.length;if(r!==t.length)throw"Can't interpolate between \""+e[0]+'" and "'+t[0]+'"';var o=[e[0]];for(i=1;r>i;i++)o[i]=e[i]+(t[i]-e[i])*n;return o},it=function(e){var t=1;return z.lastIndex=0,e[0].replace(z,function(){return e[t++]})},rt=function(e,t){e=[].concat(e);for(var n,i,r=0,o=e.length;o>r;r++)i=e[r],n=st[i[D]],n&&(t?(i.style.cssText=n.dirtyStyleAttr,Tt(i,n.dirtyClassAttr)):(n.dirtyStyleAttr=i.style.cssText,n.dirtyClassAttr=St(i),i.style.cssText=n.styleAttr,Tt(i,n.classAttr)))},ot=function(){yt="translateZ(0)",a.setStyle(ct,"transform",yt);var e=l(ct),t=e.getPropertyValue("transform"),n=e.getPropertyValue(Y+"transform"),i=t&&"none"!==t||n&&"none"!==n;i||(yt="")};a.setStyle=function(e,t,n){var i=e.style;if(t=t.replace(O,L).replace("-",""),"zIndex"===t)i[t]=isNaN(n)?n:""+(0|n);else if("float"===t)i.styleFloat=i.cssFloat=n;else try{H&&(i[H+t.slice(0,1).toUpperCase()+t.slice(1)]=n),i[t]=n}catch(r){}};var at,st,ct,lt,ut,dt,ft,ht,pt,mt,gt,vt,_t,yt,bt,wt=a.addEvent=function(t,n,i){var r=function(t){return t=t||e.event,t.target||(t.target=t.srcElement),t.preventDefault||(t.preventDefault=function(){t.returnValue=!1}),i.call(this,t)};n=n.split(" ");for(var o,a=0,s=n.length;s>a;a++)o=n[a],t.addEventListener?t.addEventListener(o,i,!1):t.attachEvent("on"+o,r),Bt.push({element:t,name:o,listener:i})},$t=a.removeEvent=function(e,t,n){t=t.split(" ");for(var i=0,r=t.length;r>i;i++)e.removeEventListener?e.removeEventListener(t[i],n,!1):e.detachEvent("on"+t[i],n)},kt=function(){for(var e,t=0,n=Bt.length;n>t;t++)e=Bt[t],$t(e.element,e.name,e.listener);Bt=[]},xt=function(){var e=at.getScrollTop();Pt=0,ut&&!Ht&&(o.style.height="auto"),J(),ut&&!Ht&&(o.style.height=Pt+r.clientHeight+"px"),Ht?at.setScrollTop(c.min(at.getScrollTop(),Pt)):at.setScrollTop(e,!0),vt=!0},jt=function(){var e,t,n=r.clientHeight,i={};for(e in dt)t=dt[e],"function"==typeof t?t=t.call(at):/p$/.test(t)&&(t=t.slice(0,-1)/100*n),i[e]=t;return i},Ct=function(){var e=ct&&ct.offsetHeight||0,t=c.max(e,o.scrollHeight,o.offsetHeight,r.scrollHeight,r.offsetHeight,r.clientHeight);return t-r.clientHeight},St=function(t){var n="className";return e.SVGElement&&t instanceof e.SVGElement&&(t=t[n],n="baseVal"),t[n]},Tt=function(t,i,r){var o="className";if(e.SVGElement&&t instanceof e.SVGElement&&(t=t[o],o="baseVal"),r===n)return void(t[o]=i);for(var a=t[o],s=0,c=r.length;c>s;s++)a=Dt(a).replace(Dt(r[s])," ");a=It(a);for(var l=0,u=i.length;u>l;l++)-1===Dt(a).indexOf(Dt(i[l]))&&(a+=" "+i[l]);t[o]=It(a)},It=function(e){return e.replace(A,"")},Dt=function(e){return" "+e+" "},Et=Date.now||function(){return+new Date},At=function(e,t){return e.frame-t.frame},Pt=0,Nt=1,Mt="down",Ot=-1,Lt=Et(),Ft=0,zt=0,Rt=!1,qt=0,Ht=!1,Yt=0,Bt=[]}(window,document),function(){var e,t,n,i,r,o={}.hasOwnProperty,a=function(e,t){function n(){this.constructor=e}for(var i in t)o.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s=this;for(this.Stripe=function(){function e(){}return e.version=2,e.endpoint="https://api.stripe.com/v1",e.setPublishableKey=function(t){e.key=t},e.complete=function(t,n){return function(i){var r;return"success"!==i?(r=Math.round((new Date).getTime()/1e3),(new Image).src="https://q.stripe.com?event=stripejs-error&type="+i+"&key="+e.key+"&timestamp="+r,"function"==typeof t?t(500,{error:{code:i,type:i,message:n}}):void 0):void 0}},e}.call(this),e=this.Stripe,this.Stripe.token=function(){function t(){}return t.validate=function(e,t){if(!e)throw t+" required";if("object"!=typeof e)throw t+" invalid"},t.formatData=function(t,n){return e.utils.isElement(t)&&(t=e.utils.paramsFromForm(t,n)),e.utils.underscoreKeys(t),t},t.create=function(t,n){return t.key||(t.key=e.key||e.publishableKey),e.utils.validateKey(t.key),e.ajaxJSONP({url:""+e.endpoint+"/tokens",data:t,method:"POST",success:function(e,t){return"function"==typeof n?n(t,e):void 0},complete:e.complete(n,"A network error has occurred, and you have not been charged. Please try again."),timeout:4e4})},t.get=function(t,n){if(!t)throw"token required";return e.utils.validateKey(e.key),e.ajaxJSONP({url:""+e.endpoint+"/tokens/"+t,data:{key:e.key},success:function(e,t){return"function"==typeof n?n(t,e):void 0},complete:e.complete(n,"A network error has occurred loading data from Stripe. Please try again."),timeout:4e4})},t}.call(this),this.Stripe.card=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,t),n.tokenName="card",n.whitelistedAttrs=["number","cvc","exp_month","exp_year","name","address_line1","address_line2","address_city","address_state","address_zip","address_country"],n.createToken=function(t,i,r){var o;return null==i&&(i={}),e.token.validate(t,"card"),"function"==typeof i?(r=i,i={}):"object"!=typeof i&&(o=parseInt(i,10),i={},o>0&&(i.amount=o)),i[n.tokenName]=e.token.formatData(t,n.whitelistedAttrs),e.token.create(i,r)},n.getToken=function(t,n){return e.token.get(t,n)},n.validateCardNumber=function(e){return e=(e+"").replace(/\s+|-/g,""),e.length>=10&&e.length<=16&&n.luhnCheck(e)},n.validateCVC=function(t){return t=e.utils.trim(t),/^\d+$/.test(t)&&t.length>=3&&t.length<=4},n.validateExpiry=function(t,n){var i,r;return t=e.utils.trim(t),n=e.utils.trim(n),/^\d+$/.test(t)&&/^\d+$/.test(n)&&parseInt(t,10)<=12?(r=new Date(n,t),i=new Date,r.setMonth(r.getMonth()-1),r.setMonth(r.getMonth()+1,1),r>i):!1},n.luhnCheck=function(e){var t,n,i,r,o,a;for(i=!0,r=0,n=(e+"").split("").reverse(),o=0,a=n.length;a>o;o++)t=n[o],t=parseInt(t,10),(i=!i)&&(t*=2),t>9&&(t-=9),r+=t;return r%10===0},n.cardType=function(e){return n.cardTypes[e.slice(0,2)]||"Unknown"},n.cardTypes=function(){var e,t,n,i;for(t={},e=n=40;49>=n;e=++n)t[e]="Visa";for(e=i=50;59>=i;e=++i)t[e]="MasterCard";return t[34]=t[37]="American Express",t[60]=t[62]=t[64]=t[65]="Discover",t[35]="JCB",t[30]=t[36]=t[38]=t[39]="Diners Club",t}(),n}.call(this,this.Stripe.token),this.Stripe.bankAccount=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,t),n.tokenName="bank_account",n.whitelistedAttrs=["country","routing_number","account_number"],n.createToken=function(t,i,r){return null==i&&(i={}),e.token.validate(t,"bank account"),"function"==typeof i&&(r=i,i={}),i[n.tokenName]=e.token.formatData(t,n.whitelistedAttrs),e.token.create(i,r)},n.getToken=function(t,n){return e.token.get(t,n)},n.validateRoutingNumber=function(t,i){switch(t=e.utils.trim(t),i){case"US":return/^\d+$/.test(t)&&9===t.length&&n.routingChecksum(t);case"CA":return/\d{5}\-\d{3}/.test(t)&&9===t.length;default:return!0}},n.validateAccountNumber=function(t,n){switch(t=e.utils.trim(t),n){case"US":return/^\d+$/.test(t)&&t.length>=1&&t.length<=17;default:return!0}},n.routingChecksum=function(e){var t,n,i,r,o,a;for(i=0,t=(e+"").split(""),a=[0,3,6],r=0,o=a.length;o>r;r++)n=a[r],i+=3*parseInt(t[n]),i+=7*parseInt(t[n+1]),i+=parseInt(t[n+2]);return 0!==i&&i%10===0},n}.call(this,this.Stripe.token),this.Stripe.bitcoinReceiver=function(){function t(){}return t._whitelistedAttrs=["amount","currency","email","description"],t.createReceiver=function(t,n){var i;return e.token.validate(t,"bitcoin_receiver data"),i=e.token.formatData(t,this._whitelistedAttrs),i.key=e.key||e.publishableKey,e.utils.validateKey(i.key),e.ajaxJSONP({url:""+e.endpoint+"/bitcoin/receivers",data:i,method:"POST",success:function(e,t){return"function"==typeof n?n(t,e):void 0},complete:e.complete(n,"A network error has occurred while creating a Bitcoin address. Please try again."),timeout:4e4})},t.getReceiver=function(t,n){var i;if(!t)throw"receiver id required";return i=e.key||e.publishableKey,e.utils.validateKey(i),e.ajaxJSONP({url:""+e.endpoint+"/bitcoin/receivers/"+t,data:{key:i},success:function(e,t){return"function"==typeof n?n(t,e):void 0},complete:e.complete(n,"A network error has occurred loading data from Stripe. Please try again."),timeout:4e4})},t._activeReceiverPolls={},t._clearReceiverPoll=function(e){return delete t._activeReceiverPolls[e]},t._pollInterval=1500,t.pollReceiver=function(e,t){if(null!=this._activeReceiverPolls[e])throw"You are already polling receiver "+e+". Please cancel that poll before polling it again.";return this._activeReceiverPolls[e]={},this._pollReceiver(e,t)},t._pollReceiver=function(e,n){t.getReceiver(e,function(i,r){var o,a;if(null!=t._activeReceiverPolls[e])return 200===i&&r.filled?(t._clearReceiverPoll(e),"function"==typeof n?n(i,r):void 0):i>=400&&500>i?(t._clearReceiverPoll(e),"function"==typeof n?n(i,r):void 0):(o=500===i?5e3:t._pollInterval,a=setTimeout(function(){return t._pollReceiver(e,n)},o),t._activeReceiverPolls[e].timeoutId=a)})},t.cancelReceiverPoll=function(e){var n;if(n=t._activeReceiverPolls[e],null==n)throw"You are not polling receiver "+e+".";null!=n.timeoutId&&clearTimeout(n.timeoutId),t._clearReceiverPoll(e)},t}.call(this),t=["createToken","getToken","cardType","validateExpiry","validateCVC","validateCardNumber"],i=0,r=t.length;r>i;i++)n=t[i],this.Stripe[n]=this.Stripe.card[n];"undefined"!=typeof module&&null!==module&&(module.exports=this.Stripe),"function"==typeof define&&define("stripe",[],function(){return s.Stripe})}.call(this),function(){var e,t,n,i=[].slice;e=encodeURIComponent,t=(new Date).getTime(),n=function(t,i,r){var o,a;null==i&&(i=[]);for(o in t)a=t[o],r&&(o=""+r+"["+o+"]"),"object"==typeof a?n(a,i,o):i.push(""+o+"="+e(a));return i.join("&").replace(/%20/g,"+")},this.Stripe.ajaxJSONP=function(e){var r,o,a,s,c,l;return null==e&&(e={}),a="sjsonp"+ ++t,c=document.createElement("script"),o=null,r=function(t){var n;return null==t&&(t="abort"),clearTimeout(o),null!=(n=c.parentNode)&&n.removeChild(c),a in window&&(window[a]=function(){}),"function"==typeof e.complete?e.complete(t,l,e):void 0},l={abort:r},c.onerror=function(){return l.abort(),"function"==typeof e.error?e.error(l,e):void 0},window[a]=function(){var t;t=1<=arguments.length?i.call(arguments,0):[],clearTimeout(o),c.parentNode.removeChild(c);try{delete window[a]}catch(n){window[a]=void 0}return"function"==typeof e.success&&e.success.apply(e,t),"function"==typeof e.complete?e.complete("success",l,e):void 0},e.data||(e.data={}),e.data.callback=a,e.method&&(e.data._method=e.method),c.src=e.url+"?"+n(e.data),s=document.getElementsByTagName("head")[0],s.appendChild(c),e.timeout>0&&(o=setTimeout(function(){return l.abort("timeout")},e.timeout)),l}}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};this.Stripe.utils=function(){function t(){}return t.trim=function(e){return(e+"").replace(/^\s+|\s+$/g,"")},t.underscore=function(e){return(e+"").replace(/([A-Z])/g,function(e){return"_"+e.toLowerCase()}).replace(/-/g,"_")},t.underscoreKeys=function(e){var t,n,i;i=[];for(t in e)n=e[t],delete e[t],i.push(e[this.underscore(t)]=n);return i},t.isElement=function(e){return"object"!=typeof e?!1:"undefined"!=typeof jQuery&&null!==jQuery&&e instanceof jQuery?!0:1===e.nodeType},t.paramsFromForm=function(t,n){var i,r,o,a,s,c,l,u,d,f;for(null==n&&(n=[]),"undefined"!=typeof jQuery&&null!==jQuery&&t instanceof jQuery&&(t=t[0]),o=t.getElementsByTagName("input"),s=t.getElementsByTagName("select"),c={},l=0,d=o.length;d>l;l++)r=o[l],i=this.underscore(r.getAttribute("data-stripe")),e.call(n,i)<0||(c[i]=r.value);for(u=0,f=s.length;f>u;u++)a=s[u],i=this.underscore(a.getAttribute("data-stripe")),e.call(n,i)<0||null!=a.selectedIndex&&(c[i]=a.options[a.selectedIndex].value);return c},t.validateKey=function(e){if(!e||"string"!=typeof e)throw new Error("You did not set a valid publishable key. Call Stripe.setPublishableKey() with your publishable key. For more info, see https://stripe.com/docs/stripe.js");if(/\s/g.test(e))throw new Error("Your key is invalid, as it contains whitespace. For more info, see https://stripe.com/docs/stripe.js");if(/^sk_/.test(e))throw new Error("You are using a secret key with Stripe.js, instead of the publishable one. For more info, see https://stripe.com/docs/stripe.js")},t}()}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};this.Stripe.validator={"boolean":function(e,t){return"true"!==t&&"false"!==t?"Enter a boolean string (true or false)":void 0},integer:function(e,t){return/^\d+$/.test(t)?void 0:"Enter an integer"},positive:function(e,t){return!this.integer(e,t)&&parseInt(t,10)>0?void 0:"Enter a positive value"},range:function(t,n){var i;return i=parseInt(n,10),e.call(t,i)<0?"Needs to be between "+t[0]+" and "+t[t.length-1]:void 0},required:function(e,t){return!e||null!=t&&""!==t?void 0:"Required"},year:function(e,t){return/^\d{4}$/.test(t)?void 0:"Enter a 4-digit year"},birthYear:function(e,t){var n;return n=this.year(e,t),n?n:parseInt(t,10)>2e3?"You must be over 18":parseInt(t,10)<1900?"Enter your birth year":void 0},month:function(e,t){return this.integer(e,t)?"Please enter a month":this.range([1,2,3,4,5,6,7,8,9,10,11,12],t)?"Needs to be between 1 and 12":void 0},choices:function(t,n){return e.call(t,n)<0?"Not an acceptable value for this field":void 0},email:function(e,t){return/^[^@<\s>]+@[^@<\s>]+$/.test(t)?void 0:"That doesn't look like an email address"},url:function(e,t){return/^https?:\/\/.+\..+/.test(t)?void 0:"Not a valid url"},usTaxID:function(e,t){return/^\d{2}-?\d{1}-?\d{2}-?\d{4}$/.test(t)?void 0:"Not a valid tax ID"},ein:function(e,t){return/^\d{2}-?\d{7}$/.test(t)?void 0:"Not a valid EIN"},ssnLast4:function(e,t){return/^\d{4}$/.test(t)?void 0:"Not a valid last 4 digits for an SSN"},ownerPersonalID:function(e,t){var n;return n=function(){switch(e){case"CA":return/^\d{3}-?\d{3}-?\d{3}$/.test(t);case"US":return!0}}(),n?void 0:"Not a valid ID"},bizTaxID:function(e,t){var n,i,r,o,a,s,c,l;if(s={CA:["Tax ID",[/^\d{9}$/]],US:["EIN",[/^\d{2}-?\d{7}$/]]},a=s[e],null!=a){for(n=a[0],o=a[1],i=!1,c=0,l=o.length;l>c;c++)if(r=o[c],r.test(t)){i=!0;break}if(!i)return"Not a valid "+n}},zip:function(e,t){var n;return n=function(){switch(e.toUpperCase()){case"CA":return/^[\d\w]{6}$/.test(null!=t?t.replace(/\s+/g,""):void 0);case"US":return/^\d{5}$/.test(t)||/^\d{9}$/.test(t)}}(),n?void 0:"Not a valid zip"},bankAccountNumber:function(e,t){return/^\d{1,17}$/.test(t)?void 0:"Invalid bank account number"},usRoutingNumber:function(e){var t,n,i,r,o,a,s;if(!/^\d{9}$/.test(e))return"Routing number must have 9 digits";for(o=0,t=a=0,s=e.length-1;s>=a;t=a+=3)n=3*parseInt(e.charAt(t),10),i=7*parseInt(e.charAt(t+1),10),r=parseInt(e.charAt(t+2),10),o+=n+i+r;return 0===o||o%10!==0?"Invalid routing number":void 0
},caRoutingNumber:function(e){return/^\d{5}\-\d{3}$/.test(e)?void 0:"Invalid transit number"},routingNumber:function(e,t){switch(e.toUpperCase()){case"CA":return this.caRoutingNumber(t);case"US":return this.usRoutingNumber(t)}},phoneNumber:function(e,t){var n;return n=t.replace(/[^0-9]/g,""),10!==n.length?"Invalid phone number":void 0},bizDBA:function(e,t){return/^.{1,23}$/.test(t)?void 0:"Statement descriptors can only have up to 23 characters"},nameLength:function(e,t){return 1===t.length?"Names need to be longer than one character":void 0}}}.call(this),instrument_function(function(e){!function(){if(e.report_errors){requires({$:"jquery",Mustache:"mustache"});var t=$.fn.ready,n=$.fn.on,i=$.fn.livequery;$.fn.ready=function(){var e,n=Array.prototype.splice.call(arguments,0,arguments.length),i=n[0];return"function"==typeof i&&(e=instrument_function(i),e.guid=i.guid=i.guid||(jQuery.guid=jQuery.guid+1),n[0]=e),t.apply(this,n)},$.fn.on=function(){for(var e,t,i=Array.prototype.splice.call(arguments,0,arguments.length),r=3;r>0;)"function"==typeof i[r]&&(e=i[r],t=instrument_function(e),t.guid=e.guid=e.guid||(jQuery.guid=jQuery.guid+1),i[r]=t),r-=1;return n.apply(this,i)},$.fn.livequery=function(){var e,t,n=Array.prototype.splice.call(arguments,0,arguments.length);return n[1]&&(e=n[1],t=instrument_function(e),t.guid=e.guid=e.guid||(jQuery.guid=jQuery.guid+1),n[1]=t),n[2]&&(e=n[2],t=instrument_function(e),t.guid=e.guid=e.guid||(jQuery.guid=jQuery.guid+1),n[2]=t),i.apply(this,n)}}}(this)})(this),instrument_function(function(e){!function(){var t={},n=document.getElementsByTagName("body")[0].className.split(/\s+/);_.each(n,function(e){t[e]=!0}),e.device_idioms=t}()})(this),instrument_function(function(){!function(){navigator.geolocation||(navigator.geolocation={getCurrentPosition:function(e,t){t&&t()},watchPosition:function(e,t){t&&t()},clearWatch:function(){}})}()})(this),instrument_function(function(e){!function(){e.ksr_navigate=function(e){"function"==typeof ksr_before_unload?ksr_before_unload(function(){window.location=e}):window.location=e}}()})(this),instrument_function(function(e){!function(){e.KsrJSON={get:function(e,t,n,i){return n.hasClass("loading")?!1:(n.trigger("before_ksrjson",[n,i]),$.ajax({url:e,type:t||"GET",data:{format:"json"},dataType:"json",beforeSend:function(){n.addClass("loading")},success:function(e){KsrJSON.parse_response(e,n)},complete:function(){n.removeClass("loading")}}),!1)},enable_form:function(e,t){e.on("submit",function(n){n.preventDefault(),e.trigger("ajaxForm:beforeSerialize"),$.ajax({url:e.attr("action"),type:e.attr("method"),data:e.serialize(),dataType:"json",beforeSend:function(){var n=e.find("input.confirmation");return e.is(".submitting")?(growl({error:I18n.t("library.ksr_json.Sorry_still_waiting_for_a_response_Please_try_refreshing_if")}),!1):n.length&&!n.prop("checked")?!1:(t.addClass("loading"),void e.addClass("submitting"))},success:function(n){KsrJSON.parse_response(n,t,e)},error:function(n){KsrJSON.parse_error(n,t,e)},complete:function(){t.removeClass("loading"),e.removeClass("submitting")}})})},parse_response:function(e,t,n){var i,r,o,a={open:function(){$(n).trigger("jGrowl.open_"+e.status)},close:function(){$(n).trigger("jGrowl.close_"+e.status)}};switch(t.trigger("ksr_json:complete",e),$.isArray(e.flash)&&$.isArray(e.flash[0])?growl($.map(e.flash,function(e){return e[e.length-1]}),a):e.flash&&growl(e.flash,a),parseInt(e.status,10)){case 200:case 406:i=$(e.data),e.data&&e.data.length>0&&(e.modal?(o=$.create_modal_dialog("",e.data),o.data("modal_dialog").open(),"undefined"!=typeof FB&&FB.XFBML.parse(o.find(".modal_dialog_body")[0])):(i.find("a.cancel").length>0?(r=t.contents().detach(),i.find("a.cancel").one("click",function(){return t.contents().remove(),r.appendTo(t),!1})):t.contents().remove(),t.html(i),t.trigger("size_change"),"undefined"!=typeof FB&&FB.XFBML.parse(t[0]))),$('meta[name="csrf-token"]').attr("content",e.auth_token);break;case 204:t.remove();break;case 302:window.location.href=e.data.replace(/.json$/,"");break;case 303:t.load(e.data,function(){$('meta[name="csrf-token"]').attr("content",e.auth_token)});break;case 304:break;case 500:growl({error:I18n.t("library.ksr_json.Sorry_something_went_wrong_Weve_been_notified_and_are_looking")});break;case 422:growl({error:I18n.t("library.ksr_json.Sorry_something_went_wrong_Your_form_may_have_explired")});break;default:$.console.log(e.status)}return e},parse_error:function(e,t,n){KsrJSON.parse_response({flash:{},status:e.status,data:e.body},t,n)}}}()})(this),instrument_function(function(){!function(e){function t(t,n){this.$elem=t,this.$close_a=t.find("a.modal_dialog_close");var i=t.children(),r=i.children(),o=r.children(),a=t.add(i).add(r).add(o).add(this.$close_a);this.options=e.extend({close_link:a,scroll_margin:20,ignore_parent:!1,prevent_close:!1},n),this.prevent_close=this.options.prevent_close,this.prevent_close&&this.$close_a.hide(),this.options.ignore_parent||this._bind_parent_modal(),this._remember_original_css(),this._attach()}function n(t,n){var r,o=e([]);return e.each(i,function(e){url_equals(t,e,{include_query:!0})&&(r=this)}),r||(o=e.create_modal_dialog(n.title||"","spinner",n),o.addClass("spinning"),r=o.data("modal_dialog"),r.remote_url=t,r.remote_xhr=e.ajax({url:t,type:"get",dataType:n.dataType,beforeSend:n.beforeSend,success:function(i){var r=e(i);n.remote_modal_dialog_contents_loaded&&n.remote_modal_dialog_contents_loaded.apply(this,[r,n,t]),o.find(".modal_dialog_body").html(r),o.removeClass("spinning"),o.trigger("size_change"),o.trigger("modal_dialog:remote_dialog_loaded")},error:function(){o.trigger("modal_dialog:errored",arguments),o.remove(),delete i[t]}}),n.do_not_cache||(i[t]=r)),r}e.fn.modal_dialog=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("modal_dialog");i||(i=new t(e(this),n),e(this).data("modal_dialog",i)),i.open()})};var i={};e.create_modal_dialog=function(n,i,r){r=r||{},n.length&&(n="<h4>"+n+"</h4>");var o,a=e('<div class="modal_dialog '+(void 0!==r.theme?r.theme:"dark")+(void 0!==r.class_name?" "+r.class_name:"")+'"'+(void 0!==r.id?' id="'+r.id+'" ':" ")+'style="display: none;"><div class="modal_dialog_outer"><div class="modal_dialog_sizer"><div class="modal_dialog_inner"><div class="modal_dialog_content"><div class="modal_dialog_head">'+n+'<a class="modal_dialog_close" href="#"><span class="ss-icon ss-delete"></span></a></div><div class="modal_dialog_body">'+i+'</div></div></div><span class="modal_dialog_ie_hack"></span></div></div></div>');return e("body").append(a),o=new t(a,r),a.data("modal_dialog",o),a},e.open_remote_modal_dialog=function(t,i){var r=e(".modal_dialog:visible");if(!r.data("modal_dialog")||r.data("modal_dialog").remote_url!==t){i=i||{};var o=n(t,i);return o.open(),o}},e.extend(t.prototype,{_attach:function(){if(!this._attached){var t=this,n=e(this.options.close_link);this._attached=!0,this.overflow_scroll="scroll"===this.$elem.css("overflow"),this.$elem.on("close.modal_dialog",function(){t.close()}),this.$elem.on("size_change.modal_dialog",function(){t._on_size_changed()}),this.$elem.on("prevent_close.modal_dialog",function(){t._set_prevent_close(!0)}),this.$elem.on("allow_close.modal_dialog",function(){t._set_prevent_close(!1)}),e(window).on("resize.modal_dialog",function(){t._on_size_changed()}),n.on("click.modal_dialog",function(e){-1!==n.index(e.target)&&(t.close(e),e.preventDefault())}),this.$elem.keypress(function(e){27===e.keyCode&&(t.close(e),e.preventDefault())})}},_detach:function(){this._attached=!1,e(this.options.close_link).off("click.modal_dialog"),this.$elem.off("size_change.modal_dialog"),e(window).off("resize.modal_dialog")},_bind_parent_modal:function(){this.$parent_modal=e([]),this.$elem.on("before_close.modal_dialog",function(){var t=e(this).data("modal_dialog").$parent_modal;t.show(),t=e([])})},_on_size_changed:function(e){var t=this.$elem.find("div.modal_dialog_inner");!this.overflow_scroll&&t.height()>this._get_viewport_height()?this._resize_to_position_absolute(e):this._resize_to_position_fixed()},_resize_to_position_fixed:function(){this._apply_original_css()},_resize_to_position_absolute:function(t){var n=e(document).height(),i=document.documentElement&&document.documentElement.scrollTop||e("body")[0].scrollTop+e("html")[0].scrollTop,r=this.$elem.find("div.modal_dialog_inner"),o=r.height(),a=this.options.scroll_margin,s=i+o+2*a,c=s>n?s:n,l=c-i-o-2*a,u="absolute"===this.$elem.css("position");this.$elem.css("position","absolute"),this.$elem.css("top","0"),this.$elem.css("height",n),(!u||t)&&(r.css("margin-top",i+a),r.css("margin-bottom",l))},_remember_original_css:function(){this._elem_original_css={},this._inner_original_css={};var t=this.$elem.find("div.modal_dialog_inner"),n=["position","top"],i=["margin-top","margin-bottom"],r=this;e.each(n,function(e){var t=n[e];r._elem_original_css[t]=r.$elem.css(t)}),e.each(i,function(e){var n=i[e];r._inner_original_css[n]=t.css(n)})},_get_viewport_height:function(){return e.browser.msie?window.document.documentElement.clientHeight:window.innerHeight},_apply_original_css:function(){var e,t,n=this.$elem.find("div.modal_dialog_inner");for(e in this._elem_original_css)this._elem_original_css.hasOwnProperty(e)&&(t=this._elem_original_css[e],this.$elem.css(e,t));for(e in this._inner_original_css)this._inner_original_css.hasOwnProperty(e)&&(t=this._inner_original_css[e],n.css(e,t));this.$elem.css("height","100%")},_set_prevent_close:function(e){this.prevent_close=e,e?this.$close_a.hide():this.$close_a.show()},open:function(){var t=this.$elem.parents("body");t.length&&t.append(this.$elem),this.options.ignore_parent||(this.$parent_modal=e(".modal_dialog:visible"),this.$parent_modal.hide()),this.$elem.show(),this._on_size_changed(!0),this.overflow_scroll&&e("html").css("overflow","hidden"),this.$elem.trigger("modal_dialog:opened",[this]),this._attach()},close:function(t){this.prevent_close||(this.$elem.trigger("before_close.modal_dialog",[t]),t&&t.isDefaultPrevented()||(this._detach(),this.options.do_not_cache?this.$elem.remove():this.$elem.hide(),this.overflow_scroll&&e("html").css("overflow","visible"),this.$elem.trigger("closed.modal_dialog",[t])))}}),e.modal_confirm=function(t,n){var i,r,o,a={message:I18n.t("library.modal_dialog.Do_you_really_want_to_do_this"),confirm_text:I18n.t("library.modal_dialog.Confirm"),cancel_text:I18n.t("library.modal_dialog.Cancel"),title:I18n.t("library.modal_dialog.Are_you_sure")};n=e.extend({},a,n),i='<div style="max-width:600px;">'+n.message+'<p class="clearfix"><a class="confirm button button_blue left" href="#">'+n.confirm_text+'</a><a class="cancel button-space left ml1 lh40 grey-dark" href="#">'+n.cancel_text+"</a></p></div>",r=e.create_modal_dialog(n.title,i),o=r.data("modal_dialog"),r.find(".cancel").click(function(e){e.preventDefault(),o.close()}),r.find(".confirm").click(function(e){e.preventDefault(),t(),o.close()}),o.open()}}(jQuery)})(this),instrument_function(function(){!function(e){function t(t,n){this.$elem=t,this.options=n,this.$target=this.options.target||t,this.offset=this.options.sprite_orientation&&"horizontal"===this.options.sprite_orientation?this.$target.width():this.$target.height(),this.index=0,this.playing=!0,this.$index_control_children=this.options.index_control?this.options.index_control.children():e([]),this.options.should_autoadvance_callback||(this.options.should_autoadvance_callback=function(){return!0}),this.number=this.options.number||this.$index_control_children.length,this.update_offset(),this._attach(),n.play_delay&&this.playing_timer()}e.fn.spriteshow=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("spriteshow");i||(i=new t(e(this),n),e(this).data("spriteshow",i))})},e.extend(t.prototype,{_attach:function(){var t=this;this.$index_control_children.click(function(n){n.preventDefault(),t.set_index(e(this).index()),t.pause()}),this.options.controls&&(this.options.controls.children(".left").click(function(e){e.preventDefault(),t.page_left(),t.pause()}),this.options.controls.children(".right").click(function(e){e.preventDefault(),t.page_right(),t.pause()}),this.options.controls.children(".play-pause").click(function(){t.playing?t.pause():t.play()}))},update_offset:function(){var t=e([]);"fade"===this.options.effect&&(t=this.$target.clone(),this.$target.css("position","absolute"),this.$target.after(t),this.$target.fadeOut(function(){e(this).remove()}),this.$target=t),this.current_offset=this.index*this.offset,this.options.sprite_orientation&&"horizontal"===this.options.sprite_orientation?this.$target.css("background-position","-"+this.current_offset.toString()+"px 0"):this.$target.css("background-position","0 -"+this.current_offset.toString()+"px")},set_index:function(e){this.index=e,this.$index_control_children.removeClass("selected"),this.$index_control_children.filter(":eq("+e.toString()+")").addClass("selected"),this.$target.trigger("spriteshow:index",[e]),this.update_offset()},page_left:function(){var e=this.index-1;0>e&&(e=this.number-1),this.set_index(e)},page_right:function(){var e=this.index+1;e>=this.number&&(e=0,this.options.play_once&&this.pause()),this.set_index(e)},playing_timer:function(){var e=this;this.play_timeout=setTimeout(function(){if(e.playing&&e.options.should_autoadvance_callback()&&e.page_right(),e.options.pause_when_behind_by){var t=(new Date).getTime();e.last_play_date&&Math.abs(e.last_play_date-t-e.options.play_delay)>e.options.pause_when_behind_by?(e.slow_strikes?e.slow_strikes+=1:e.slow_strikes=0,e.slow_strikes>3&&e.pause()):e.slow_strikes=0,e.last_play_date=t}e.playing_timer()},this.options.play_delay)},play:function(){this.playing=!0,this.options.controls&&this.options.controls.children(".play-pause").removeClass("spriteshow-play").addClass("spriteshow-pause")},pause:function(){this.playing=!1,this.options.controls&&this.options.controls.children(".play-pause").removeClass("spriteshow-pause").addClass("spriteshow-play")}})}(jQuery)})(this),instrument_function(function(){$.fn.validate=function(){var e=!0;return this.length?this.is(":input")?(this.each(function(){var t=$(this),n=!1,i=t.data("validations");i&&i.length&&(_.each(i,function(i){var r=i[0],o=i[1]||{};if("function"!=typeof o.when||o.when())return r.call(t,t.val())?void 0:(e=!1,n=!0,!1)}),n?$.each($.fn.validate.defaults.on_invalid,function(e,n){n(t)}):$.each($.fn.validate.defaults.on_valid,function(e,n){n(t)}))}),e):this.find(":input").validate():!0},$.fn.validate.defaults={on_valid:[function(e){$(e).trigger("validate:valid")}],on_invalid:[function(e){$(e).trigger("validate:invalid")}]},function(e){function t(t){return function(n){return this.each(function(){var i=e(this);i.data("validations")||i.data("validations",[]),i.data("validations").push([t,n])}),this}}e.fn.validates_format=t(function(t){return t.match(new RegExp(e(this).data("format")))}),e.fn.validates_min_length=t(function(t){return t.length>=parseInt(e(this).data("minlength"),10)}),e.fn.validates_max_length=t(function(t){return t.length<=parseInt(e(this).data("maxlength"),10)}),e.fn.validates_presence=t(function(t){return!!e.trim(t)}),e.fn.validates_email=t(function(e){return e.match(/^.+@.+\..{2,4}$/)}),e.fn.validates_luhn_check=t(function(e){var t,n,i,r=String(e).replace(/[^\d]/g,""),o=0;for(n=r.length-1;n>=0;n-=1)t=parseInt(r[n],10),i=n%2+1,o+=t>4&&2===i?t*i%10+1:t*i;return o%10===0}),e.fn.validates_routing_number=t(function(t){var n,i,r,o=String(t).replace(/[^\d]/g,""),a=e(this).closest("form").attr("data-country"),s=(o+"").split(""),c=0,l=[0,3,6];switch(a){case"US":for(i=0,r=l.length;r>i;i+=1)n=l[i],c+=3*parseInt(s[n],10),c+=7*parseInt(s[n+1],10),c+=parseInt(s[n+2],10);return 0!==c&&c%10===0;case"CA":return 8===o.length;case"AU":return 6===o.length;case"NZ":return 6===o.length;default:return!0}}),e.fn.validates_vat_format=t(function(e){var t=String(e).toUpperCase(),n=t.substr(0,2);switch(n){case"NL":return/^\w{2}\d{9}B\d{2}$/.test(t);default:return/^\w{2}[\w\d]{6}/.test(t)}}),e.fn.validates_business_id=t(function(t){var n=String(t).toUpperCase().replace(/\s+/g,""),i=e(this).closest("form").attr("data-country"),r=!1,o={AU:[/^\d{9}$/,/^\d{11}$/],BE:[/^(BE)?[A-Z0-9]{12}$/],CA:[/^\d{9,10}$/],CH:[/^(CHE-?)?[0-9]{3}\.?[0-9]{3}(\.?[0-9]{3})?(TVA|MWST|IVA|VAT)?$/],ES:[/^[ABCDEFGHJNPQRSUVW][0-9]{7}[A-Z0-9]$/],FI:[/^\d{7}\-\d$/],FR:[/^\d{14}$/],GB:[/^\d{7,8}$/,/^(AC|E[NS]|FC|G[ENS]|I[CP]|LP|N[ACFILOPRVZ]|OC|R[0C]|S[ACEFILOPRZ]|ZC)\d{5,6}[A-Z]?$/i],IE:[/^\d{5,6}$/,/^[A-Z]{2}\d{5,6}$/i,/^R\d{3}$/i,/^\d{2,4}(?:SAL|F|R|T|SA)$/],LU:[/^\d{4,8}$/,/^B\d{4,8}$/i,/^F\d{3,8}$/i],NL:[/^\d{8}$/],US:[/^\d{2}-?\d{7}$/]};return""===n?!0:void 0===o[i]?!0:(e.each(o[i],function(e,t){t.test(n)&&(r=!0)}),r)})}(jQuery)})(this),instrument_function(function(){!function(e){e.fn.confirm_submit=function(t){return t=t||{},e(this).each(function(){var n=e(this);n.on("submit.confirm_submit",function(i){i.preventDefault();var r=t.copy||I18n.t("library.confirm_submit.Really_buddy"),o='<div class="modal_delete_confirmation"><p class="copy">'+r+'</p><div class="buttons"><a href="#" class="yes button button_green">'+(t.yes_copy||I18n.t("library.confirm_submit.Yes"))+'</a><a href="#" class="no button button_grey">'+(t.no_copy||I18n.t("library.confirm_submit.No_Thanks"))+"</a></div></div>",a=e.create_modal_dialog(t.title||"Are you sure?",o);n.removeClass("submitting-non-ajax"),a.find("a.yes").on("click",function(e){e.preventDefault(),n.off("submit.confirm_submit"),t.on_confirm_submit&&t.on_confirm_submit(),n[0].submit()}),a.find("a.no").on("click",function(t){t.preventDefault(),e(this).trigger("close")}),a.data("modal_dialog").open()})})}}(jQuery)})(this),instrument_function(function(e){!function(t){var n,i=function(){},r=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];if(e.console)t.console=e.console;else for(t.console={},n=0;n<r.length;n+=1)t.console[r[n]]=i}(jQuery)})(this),instrument_function(function(){!function(){$.fn.in_place_editor=function(){return $(this).each(function(){function e(){i.css("width",n.width()+"px"),a.css("fontSize",n.css("fontSize")),n.hide(),i.removeClass("inactive"),a.focus()}function t(){i.addClass("inactive"),n.show()}var n=$(this),i=n.next("form.in_place_editor"),r=i.find(".button"),o=n.siblings(".trigger_editor")||n,a=i.find("input.text"),s=!1;o.on("click",function(){e()}),r.on("click",function(){a.val(n.text()),t()}),i.on("submit",function(e){e.preventDefault(),s||(i.addClass("submitting"),s=!0,$.ajax({url:i.attr("action").replace(/(\.\w+)?$/,".js"),data:i.serialize(),type:"POST",complete:function(){i.removeClass("submitting"),s=!1},success:function(){var e=a.val();n.html(e),t(),s=!1,i.siblings(".clippy_parent").find("a.clippy").data("text",e)},error:function(e){var t=JSON.parse(e.responseText),n="<p>"+I18n.t("library.in_place_editor.Oops_there_was_a_problem_with_your_submission");i.removeClass("submitting"),s=!1,t.errors?(n+=":<br/>"+$.map(t.errors,function(e,t){return t+": "+e}),n+="</p>"):n+=". "+I18n.t("library.in_place_editor.Please_refresh_the_page_before_trying_again")+"</p>",growl({error:$(n).html()})}}))})})}}(),function(){$("span.in_place_editor").in_place_editor()}()})(this),instrument_function(function(e){!function(){var t=e.eventNormalizer={};t.pageX=function(e){var t;return t=e.originalEvent&&e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX}}()})(this),function(e){function t(e,t){return eventNormalizer.pageX(e)-t.offset().left}e.fn.draggable_bar=function(n,i){return i||(i=n,n=null),this.each(function(){var r=e(this),o=null,a=0;r.on("mousedown touchstart",n,function(n){var i=e(n.target);o=n.target,a=t(n,i)}),r.on("mousedown touchstart mousemove touchmove",n,function(e){var n;o&&(n=t(e,r)/r.width(),n>0&&1>n&&i(n,o,a))}),e(document).on("mouseup touchend",function(){o=null})})}}(jQuery),function(e){function t(t){this.$c=e(t),this.video_data=this.$c.data("video")||{},this.autostarting=!1;var n=this.$c.find("video");n.get(0)&&n.get(0).canPlayType&&(n.get(0).canPlayType("video/mp4")||n.hasClass("has_webm"))&&(this.$video=n,this.video=n.get(0),e.browser.chrome&&this.$video.attr("controls","controls").removeAttr("controls"),this.$c.addClass("vertically_center")),this.initialize(),(window.location.search.match("play="+(this.$c.attr("id")||this.video_data.id))||this.$c.hasClass("autoplay"))&&(this.autostarting=!0,this.play()),this.add_size_class(),this.bind_events()}e.fn.ksr_video=function(){return e(this).each(function(){var n=e(this).data("ksr_video");n||(n=new t(e(this)),e(this).data("ksr_video",n))})},e.extend(t.prototype,{overlay:function(){var t=this;this.$c.children(":not(video)").hide(),this.$overlay=e('<div class="overlay"><span class="button-playvideo"></span></div>'),this.$overlay.on("click",function(e){t.initialize_flash(),t.$overlay.remove(),e.preventDefault()}),this.$c.append(this.$overlay)},bind_events:function(){var e=this;this.$c.on("ksr_video:play",function(){e.play()}),this.$c.on("ksr_video:pause",function(){e.pause()}),this.$c.on("ksr_video:mute",function(){e.mute()}),this.$c.on("ksr_video:unmute",function(){e.unmute()}),this.$c.on("ksr_video:destroy",function(){e.destroy()}),this.$c.on("ksr_video:seek",function(t,n,i){e.seek(n,i)})},add_size_class:function(){this.$c.removeClass("small medium large"),this.$c.addClass(this.$c.width()>600?"large":this.$c.width()>400?"large":"small")},bind_video_element:function(){var e=this,t=this.$video,n=!0;this.$video.on("loadedmetadata",function(){e.$c.trigger("ksr_video:loaded")}),t.bind("ended",function(){e.$c.trigger("ksr_video:ended")}),t.on("play",function(){e.$c.trigger("ksr_video:playing",[n]),e.$c.addClass("has_played"),e.autostarting?e.autostarting=!1:e.focus_playpause_button(),n=!1}),t.on("pause",function(){e.$c.trigger("ksr_video:paused"),e.focus_playpause_button()}),t.on("progress",function(){var t,n,i,r=e.video.buffered,o=[];if(r.length)for(t=0;t<r.length;t+=1)o.push(r.end(t));n=_.max(o),i=n/e.video.duration*100,e.$c.trigger("ksr_video:buffer_change",[n,i])}),t.on("timeupdate",function(){e.$c.trigger("ksr_video:time_update",[e.video.currentTime])})},bind_controls:function(){function t(e){var t=Math.floor(e/60),n=Math.floor(e-60*t);return t+":"+(10>n?"0":"")+n}function n(){f.removeClass("visible"),f.trigger("ksr_video:controls_hidden")}function i(){f.addClass("visible"),f.trigger("ksr_video:controls_shown")}function r(){clearTimeout(j)}function o(){r(),j=setTimeout(n,2e3)}function a(){var e=d.video.duration;e&&(d.$c.find(".total_time").text(t(e)).attr("datetime","PT"+Math.floor(e)+"S"),g.attr("aria-valuenow",d.video.currentTime).attr("aria-valuemin","0").attr("aria-valuemax",e))}function s(e){return e.which===KEY.LEFT?-1:e.which===KEY.RIGHT?1:null}function c(e,t,n){return Math.min(n,Math.max(t,e))}function l(e,t){var n=t.delta,r=t.direction,a=t.max,s=d.video[e];r&&(s=c(s+n*r,0,a),d.video[e]=s,i(),o())}function u(){var t=100*d.video.volume+"%";if(e.support.localStorage())try{localStorage.ksr_video_volume=d.video.volume}catch(n){}d.video.muted?$.addClass("muted").attr("aria-label",I18n.t("library.ksr_video.Unmute")):$.removeClass("muted").attr("aria-label",I18n.t("library.ksr_video.Mute")),y.width(t),b.css("left",t),b.attr("aria-valuenow",d.video.volume)}var d=this,f=this.$c.find(".player_controls"),h=f.find(".progress_container .progress_bg"),p=h.find(".buffer"),m=h.find(".progress"),g=h.find(".progress_handle"),v=f.find(".volume_container .progress_bg"),y=v.find(".progress"),b=v.find(".progress_handle"),w=f.find(".current_time"),$=f.find(".volume"),k=f.find(".playpause"),x={x:0,y:0},j=!1;this.$c.on("mousemove touchstart touchmove",function(e){var t={x:e.pageX,y:e.pageY};d.playing()&&("touchstart"===e.type||Math.abs(t.x-x.x)+Math.abs(t.y-x.y)>20)&&(i(),o(),x=t)}),a(),this.$video.on("click",function(){d.playpause()}),this.$c.find(".play_button_big, img.poster").on("click",function(){d.play()}),this.$c.on("focus click",":tabbable",function(){d.playing()&&(i(),o())}),this.$c.on("keydown",'[role="button"]',function(t){(t.which===KEY.ENTER||t.which===KEY.SPACE)&&(e(this).click(),t.preventDefault())}),this.$c.on("keydown",'.progress_container [role="slider"]',function(e){l("currentTime",{delta:.05*d.video.duration,direction:s(e),max:d.video.duration})}),this.$c.on("keydown",'.volume_container [role="slider"]',function(e){l("volume",{delta:.05,direction:s(e),max:1})}),this.$c.on("ksr_video:loaded",function(){a(),b.attr("aria-valuemin","0").attr("aria-valuemax","1"),u()}),this.$video.on("volumechange",function(){u()}).on("play",function(){k.removeClass("play").addClass("pause").attr("aria-label",I18n.t("library.ksr_video.Pause")),o()}).on("pause",function(){k.removeClass("pause").addClass("play").attr("aria-label",I18n.t("library.ksr_video.Play")),i(),r()}),k.on("click",function(e){d.playpause(),e.preventDefault()}),f.find(".video_dropdown_trigger").on("click",function(){e(this).closest(".video_dropdown").toggleClass("open")}),f.find(".video_track_list").on("click","li",function(){var t=e(this),n=t.index(),i=n-1;t.closest(".video_dropdown").removeClass("open"),t.find("a").removeClass("selected").eq(n).addClass("selected"),d.video.textTracks&&_.each(d.video.textTracks,function(e,t){e.mode=t===i?"showing":"hidden"})}),f.find(".fullscreen").on("click",function(e){if(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled){var t=d.$c.get(0);document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?document.cancelFullscreen?document.cancelFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}else d.$c.toggleClass("fullscreen");e.preventDefault()}),h.draggable_bar(function(e){var t=d.video.duration*e;d.video.currentTime=t}),v.draggable_bar(function(e){d.video.volume=e}),e("body").is(".touchable")?y.hide():$.on("click",function(){d.mute_toggle()}),this.$c.on("ksr_video:buffer_change",function(e,t,n){p.width(n+"%")}),this.$c.on("ksr_video:time_update",function(e,n){var i=n/d.video.duration*100;m.width(i+"%"),g.css("left",i+"%"),w.text(t(n)).attr("datetime","PT"+Math.floor(n)+"S"),g.attr("aria-valuenow",n)})},play:function(){this.video?(this.$video.show(),this.video.play()):this.jwplayer&&this.jwplayer.play()},pause:function(){this.playing()&&(this.video?this.video.pause():this.jwplayer&&this.jwplayer.pause())},playpause:function(){return this.playing()?this.pause():this.play(),this.playing()},focus_playpause_button:function(){var t=this.$c.find(".playpause"),n=e(window),i=t[0].getBoundingClientRect();i.top>=0&&i.left>=0&&i.bottom<=n.height()&&i.right<=n.width()&&t.focus()},seek:function(e,t){var n=this;if("undefined"==typeof t&&(t=!1),this.video){if(this.video.readyState<1)return this.video.load(),void this.$c.one("ksr_video:loaded",function(){n.seek(e,t)});this.video.currentTime=e,t?this.pause():this.play()}else this.jwplayer&&(this.jwplayer.seek(e),this.jwplayer.pause(t))},mute_toggle:function(){return this.video&&(this.video.muted?this.unmute():this.mute()),this.video.muted},mute:function(){this.jwplayer?this.jwplayer.setMute(!0):this.video.muted=!0},unmute:function(){this.jwplayer?this.jwplayer.setMute(!1):this.video.muted=!1},destroy:function(){this.$c.empty(),this.$c.removeData("ksr_video")},current_position:function(){return this.video?this.video.currentTime:this.jwplayer?this.jwplayer.getPosition():void 0},duration:function(){return this.jwplayer?this.jwplayer.getDuration():this.video.duration},playing:function(){return this.video?!this.video.paused:this.jwplayer?"playing"===this.jwplayer.getState().toLowerCase():void 0},initialize_flash:function(){var e="v"+parseInt(1e8*Math.random(),10),t=this.$c.data("external_flashvars")||{},n=this;this.$c.append('<div id="'+e+'"></div>'),swfobject.embedSWF("//d3mlfyygrfdi2i.cloudfront.net/321f/kickplayer.swf",e,this.$c.data("dimensions").width,this.$c.data("dimensions").height,"9.0.115","/swf/expressInstall.swf",_.extend(t,{displayheight:this.$c.height(),file:encodeURI(this.$c.attr("data-video-url")),image:encodeURI(this.$c.attr("data-image")),backcolor:"000000",screencolor:"000000",controlbar:"over","controlbar.idlehide":"true",autostart:!0,skin:"//d3mlfyygrfdi2i.cloudfront.net/cc3a/kickskin.swf"}),{allowscriptaccess:"always",allowfullscreen:"true",wmode:"opaque",menu:"false"},{id:"ksr_player_"+e,"class":"ksr_player",name:"ksr_player_"+e},function(e){var t=!0;root.player_reference=e.ref,e.success?(n.$c.find("video").remove(),n.jwplayer=jwplayer(e.ref),n.jwplayer.onReady(function(){n.$c.trigger("ksr_video:loaded")}),n.jwplayer.onPlay(function(){n.$c.trigger("ksr_video:playing",[t]),t=!1}),n.jwplayer.onPause(function(){n.$c.trigger("ksr_video:paused")}),n.jwplayer.onComplete(function(){n.$c.trigger("ksr_video:ended")}),n.jwplayer.onBufferChange(function(e){var t=e.duration*(e.bufferPercent/100);isNaN(t)||n.$c.trigger("ksr_video:buffer_change",[t,e.bufferPercent])})):(n.$video=n.$c.find("video"),n.video=n.$video.get(0),n.$overlay.remove(),n.$c.children().show(),n.$c.find(".play_button_big").removeAttr("style"),n.video&&(n.initialize(),n.play()))})},initialize:function(){var t=this;this.video?(t.bind_controls(),t.bind_video_element(),e.support.localStorage()&&localStorage.ksr_video_volume&&(this.video.volume=localStorage.ksr_video_volume),this.$video.css({height:"100%"}).removeAttr("style")):this.overlay()}})}(jQuery),instrument_function(function(){!function(e){function t(t){this.$container=e(t),this.embed()}e.fn.sound_player=function(){return e(this).each(function(){var n=e(this).data("ksr_video");n||(n=new t(e(this)),e(this).data("sound_player",n))})},e.extend(t.prototype,{embed:function(t){var n="v"+parseInt(1e8*Math.random(),10),i=this;this.$container.find("span").attr("id",n),swfobject.embedSWF("https://d3mlfyygrfdi2i.cloudfront.net/321f/kickplayer.swf",n,this.$container.width(),this.$container.height(),"9.0.115","https://d3mlfyygrfdi2i.cloudfront.net/7b65/expressInstall.swf",{displayheight:this.$container.height(),file:encodeURI(this.$container.attr("data-file")),backcolor:"000000",screencolor:"000000",controlbar:"bottom","controlbar.idlehide":"false",autostart:t,audioonly:!0,skin:"https://d3mlfyygrfdi2i.cloudfront.net/cc3a/kickskin.swf"},{allowscriptaccess:"always",wmode:"opaque",menu:"false"},{id:"sound_player_"+n,"class":"ksr_player",name:"sound_player_"+n},function(n){if(n.success)i.jwplayer=jwplayer(n.ref);else{var r=e("<audio />",{src:i.$container.attr("data-file"),controls:!0,autoplay:t});i.$container.html(r),i.$audio=r}}),this.initialized=!0}})}(jQuery)})(this),instrument_function(function(){!function(e){function t(t,n){this.$elem=t,this.xhr=!1,this.paused=n.paused||!1,this.options=e.extend({},{threshold:500,trigger_next:"scroll",load_next_after:!1,prepend_next:!1,dataType:"html",extra_params:{},$context:e(window),page_by:function(e){return e?e+1:1},page_param:"page",url:!1},n),this.current_page=this.options.page_by(),this.bind_events()}e.fn.mobius=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("mobius");i||(i=new t(e(this),n),e(this).data("mobius",i))})},e.extend(t.prototype,{bind_events:function(){var t=this;"string"==typeof this.options.trigger_next?(this.options.$context.on(this.options.trigger_next,function(){t.check_for_more()}),t.check_for_more()):this.options.trigger_next.jquery&&this.options.trigger_next.click(function(n){n.preventDefault(),e(this).addClass("loading_next"),t.load_next()})},clear_extra_params:function(){this.options.extra_params={}},add_param:function(t,n){var i={};i[t]=n,e.extend(this.options.extra_params,i)},set_extra_params:function(e){this.options.extra_params=e},pause:function(){this.paused=!0},play:function(){this.paused=!1},check_for_more:function(){if(!this.paused){var e=this.options.$context.scrollTop()+this.options.$context.height(),t=this.$elem.offset().top,n=this.$elem.get(0).scrollHeight,i=e-t,r=n-this.options.threshold,o=i>r;o&&this.load_next()}},load_next:function(){this.load_page(this.options.page_by(this.current_page),this.options.load_next_after,!0)},load_page:function(t,n,i){var r=parseInt(t,10),o=this;isNaN(r)||(n&&n.length||(n=!1),this.xhr||(this.$elem.trigger("mobius:loading_page"),this.xhr=e.ajax({type:"get",dataType:this.options.dataType,url:this.build_paged_url(r),success:function(t){if(o.xhr=!1,"html"===o.options.dataType){var a=e("<div>"+t+"</div>"),s=a.find(".mobius").children();if(!s.length)return void o.$elem.trigger("mobius:error",[I18n.t("library.mobius.No_mobius_found_in_page",{page:r})]);n?n.after(s):o.options.prepend_next?o.$elem.prepend(s):o.$elem.append(s),o.options.trigger_next.jquery&&o.options.trigger_next.removeClass("loading_next"),o.$elem.trigger("mobius:loaded_page",[r,s])
}else o.$elem.trigger("mobius:loaded_page",[r,t]);(i||!n)&&(o.current_page=r)},error:function(){o.xhr=!1}})))},build_paged_url:function(t){var n=window.location.toString().replace(window.location.search,"").replace(window.location.hash,""),i="undefined"==typeof this.options.extra_params?"":"string"==typeof this.options.extra_params?this.options.extra_params:e.param(this.options.extra_params),r=/(.*)#$/;return r.test(n)&&(n=r.exec(n)[1]),i&&(i="&"+i),this.options.url&&(n=this.options.url),n.toString()+"?"+this.options.page_param+"="+t+i}})}(jQuery)})(this),instrument_function(function(){!function(e){function t(t,n){this.$elem=t,this.options=e.extend({},{adjust_on:"mobius:loaded_page scroll resize sticky_bar:position load hashchange",parent:t.parent(),attach_to:"top",lock_to_bottom:!0},n),this.options.parent&&this.options.parent.length||e.console.log("WARNING: sticky bar has no parent"),this.paused=!1,this.last_scroll_top=0,this.last_up=!1,this.fixed=!1,this.original_top=t.offset().top,this.original_bottom=this.original_top+t.height(),this.update_window_larger_then_elem(),this.attach_to_top="top"===this.options.attach_to,this.attach_to_bottom=!this.attach_to_top,this.bind_events(),this.reposition()}function n(t,n){this.$elem=t,this.options=e.extend({},{adjust_on:"shifted scroll resize load hashchange"},n),this.original_top=t.offset().top,this.bind_events(),this.reposition()}e.fn.sticky_bar=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("stickybar");i?e(this).trigger("shifted"):(i=new t(e(this),n),e(this).data("stickybar",i))})},e.fn.simple_sticky_bar=function(t){return t=t||{},e(this).each(function(){var i=e(this).data("simple_stickybar");i?e(this).trigger("shifted"):(i=new n(e(this),t),e(this).data("simple_stickybar",i))})},e.extend(n.prototype,{bind_events:function(){var t=this;e(window).on(this.options.adjust_on,function(e){t.reposition(e)})},reposition:function(){var t=e(window).scrollTop();t<this.original_top?(this.$elem.css("position","static"),this.$elem.css("top","auto")):(this.$elem.css("position","fixed"),this.$elem.css("top",0))}}),e.extend(t.prototype,{bind_events:function(){var t=this;e(window).resize(function(e){e.target===window&&t.update_window_larger_then_elem()}),e(document).on("shifted",function(){t.fixed=!1,t.$elem.css("position","static"),t.$elem.css("top","auto"),t.$elem.css("bottom","auto"),t.original_top=t.$elem.offset().top,t.original_bottom=t.original_top+t.$elem.height(),t.reposition()}),e(window).on(this.options.adjust_on,function(e){t.paused||t.reposition(e)}),this.$elem.on("sticky_bar:fix_to_bottom",function(){t.fixed=!0,t.$elem.css("position","fixed"),t.$elem.css("top",-(t.$elem.height()-e(window).height()))}),this.$elem.on("sticky_bar:pause",function(){t.paused=!0}),this.$elem.on("sticky_bar:unpause",function(){t.paused=!1})},update_window_larger_then_elem:function(){this.window_larger_then_elem=e(window).height()>this.$elem.height()},reposition:function(t){var n=this,i=e(window).scrollTop(),r=i+e(window).height(),o=n.$elem.offset().top,a=o+n.$elem.height(),s=n.options.parent,c=s.offset().top+s.outerHeight(),l=t&&"scroll"===t.type,u=i>n.last_scroll_top?!1:!0,d=u!==n.last_up?!0:!1;e("body").width()<640||n.attach_to_top&&i<n.original_top||n.attach_to_bottom&&r>n.original_bottom?(n.fixed=!1,n.$elem.css("position","static"),n.$elem.css("top","auto"),n.$elem.css("bottom","auto")):n.options.lock_to_bottom&&!n.window_larger_then_elem&&r>c?(n.fixed=!1,n.$elem.css("position","absolute"),n.$elem.css("top",c-n.$elem.outerHeight())):n.options.lock_to_bottom&&n.window_larger_then_elem&&i+n.$elem.height()>c?(n.fixed=!1,n.$elem.css("position","absolute"),n.$elem.css("top",c-n.$elem.outerHeight())):d&&l?n.window_larger_then_elem||(n.fixed=!1,n.$elem.css("position","absolute"),n.$elem.css("top",o),n.$elem.css("bottom","auto")):n.fixed||(n.attach_to_top?n.window_larger_then_elem||(!l||u)&&o>i?(n.fixed=!0,n.$elem.css("position","fixed"),n.$elem.css("top",0)):l&&u||!(r>a)||(n.fixed=!0,n.$elem.css("position","fixed"),n.$elem.css("top",-(n.$elem.height()-e(window).height()))):(n.window_larger_then_elem||(!l||!u)&&r>a)&&(n.fixed=!0,n.$elem.css("position","fixed"),n.$elem.css("bottom",0))),n.was_fixed!==n.fixed&&n.$elem.trigger("sticky_bar:fixed_changed",[n.fixed]),n.last_scroll_top=i,n.last_up=u}})}(jQuery)})(this),instrument_function(function(e){!function(t){function n(t){e.history&&e.history.replaceState?history.replaceState(null,null,t):window.location.replace(t)}t.fn.persistent_paging=function(e){return e=e||{},t(this).each(function(){function e(){var e=[];t.each(r,function(){e.push([this[0],this[2].offset().top,this[2]])}),r=e}var i=t(this),r=[[1,0,i.find(".page")]],o=[],a=!1,s=i.data("mobius"),c=/^#p(\d*)/,l=c.exec(window.location.hash);l&&1!==parseInt(l[1],10)&&(i.one("mobius:loaded_page",function(e,n,i){t.scrollTo(i.offset().top+70)}),s.load_page(parseInt(l[1],10))),i.on("mobius:loaded_page",function(n,o,a){function c(){return this[0]===u?(l=!0,!1):void 0}var l,u,d=[];for(r.push([o,!1,a]),e(),u=1;u<=r[r.length-1][0];u+=1)l=!1,t.each(r,c),l||d.push(u);d.length?t.each(d,function(){var e=r[0],n=parseInt(this,10),o=t([]),a=[],c=t([]),l=t([]);t.each(r,function(){this[0]>e[0]&&this[0]<n&&(e=this)}),o=e[2].next(".missing"),o.length?(a=o.data("missing_pages"),-1===t.inArray(n,a)&&(a.push(n),o.data("missing_pages",a))):(o=i.siblings(".missing").clone(),c=o.find(".loading"),l=o.find(".load_more"),o.data("missing_pages",[n]),o.find("a").click(function(e){var t=o.data("missing_pages"),n=t.pop();e.preventDefault(),t.length&&o.data("missing_pages",t),l.addClass("loading"),s.load_page(n,o),i.one("mobius:loaded_page",function(){l.removeClass("loading")})}),e[2].after(o),c.hide(),o.show())}):i.find("div.missing").remove()}),t(document).scroll(function(){var e=t(window).scrollTop();t.each(r,function(){var t=this[1];e>t&&(o=this)}),o[0]!==a&&(n("#p"+o[0]),t(document).trigger("infinite_scroll:scrolled_to",[o[0]]),a=o[0])})})}}(jQuery)})(this),instrument_function(function(){!function(e){function t(e,t){this.$elem=e,this.options=t,this.total_elements=e.find(t.items).length,e.serialScroll(t),this.bind_events()}e.fn.infinite_carousel=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("infinite_carousel");i||(i=new t(e(this),n),e(this).data("infinite_carousel",i))})},e.extend(t.prototype,{bind_events:function(){var e=this;this.$elem.on("notify.serialScroll",function(t,n){e.total_elements=e.$elem.find(e.options.items).length+1,n+1>=e.total_elements-e.options.step&&e.$elem.trigger("infinite_carousel:last_page")})}})}(jQuery)})(this),instrument_function(function(){!function(){$.fn.tabs=function(){return $(this).each(function(){var e=$(this);e.on("activate",function(t,n){var i=$(n),r=$("#"+i.data("pane"));e.data("pane")&&e.data("pane").trigger("deactivated"),e.data("pane",r.trigger("activated"))}),e.children().on("click",function(){$(this).parent().trigger("activate",$(this))})})},$.fn.panes=function(){var e=$(this);return e.each(function(){e.children().on("activated",function(){$(this).show()}).on("deactivated",function(){$(this).hide()})})}}()})(this),instrument_function(function(){!function(e){function t(t,n){this.$elem=t,this.val=0,this.options=e.extend({},{frame_count:10,frame_step:40,frame_duration:30,format_numbers:!0,max_digits:5,keyframes:["","0","1","2","3","4","5","6","7","8","9",","],framesets:null},n),this.val=this.$elem.attr("rel"),this.keyframes=this.options.keyframes,this.framesets=this.options.framesets;var i;for(this.framesets||this.init_framesets(),i=0;i<this.options.max_digits;i+=1)this.init_digit(i);this.write(this.val,!0)}e.fn.ticker=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("ticker");i||(i=new t(e(this),n),e(this).data("ticker",i))})},e.extend(t.prototype,{read:function(){return this.val},write:function(t,n){this.val=String(t||""),this.$elem.attr("rel",this.val);var i,r,o,a,s,c,l,u,d=(this.options.format_numbers?formatters.format_number(this.val,0):this.val).split(""),f=this.$elem.find(".ticker_digit");for(u=0;u<d.length-f.length;u+=1)this.init_digit(u+f.length);for(f=this.$elem.find(".ticker_digit"),u=0;u<f.length;u+=1){if(i=e(f[u]),r=i.html(),o=d[u]?String(d[u]):"",a=e.inArray(o,this.keyframes),s=this.framesets[a][0],c=e.inArray(i.html(),this.keyframes),l=[],i.html(o).data("tween_id",i.data("tween_id")+1),!o||o===r||n)l=l.concat(s);else for(;c!==a;)l=l.concat(this.framesets[c]),c+=1,c=c>=this.keyframes.length?1:c;this.tween(i.data("tween_id"),i,l)}},init_framesets:function(){var e,t;for(this.framesets=[],e=0;e<this.keyframes.length;e+=1)for(this.framesets.push([]),t=0;t<this.options.frame_count;t+=1)this.framesets[e].push(e*this.options.frame_count*this.options.frame_step+t*this.options.frame_step)},init_digit:function(t){var n=e(this.$elem.find(".ticker_digit").get(t));n.length||(n=e('<span class="ticker_digit">&nbsp;</span>').prependTo(this.$elem)),n.data("tween_id",1)},digit_count:function(){return this.$elem.find(".ticker_digit").length},remove_digit:function(e){e.remove(),this.pad_digits()},tween:function(e,t,n){if(n.length){if(t.data("tween_id")!==e)return!1;var i=this;setTimeout(function(){var r=n.shift();t.css({"background-position":"0px "+-1*r+"px"}),i.tween(e,t,n)},this.options.frame_duration)}}})}(jQuery)})(this),instrument_function(function(){!function(e){function t(e){var t=e.css("backgroundImage"),n=/[("]([^()"]+)[")]/;try{return n.exec(t)[1]}catch(i){return!1}}e.fn.preload_background_image=function(){return this.each(function(){var n=t(e(this));n&&((new Image).src=n)})}}(jQuery)})(this),instrument_function(function(){!function(e){e.fn.serialize_without_blank=function(){var t,n=this,i=[];return n.find(":input").each(function(){""!==e.trim(this.value)||this.disabled||(i.push(this),this.disabled=!0)}),t=n.serialize(),_.each(i,function(e){e.disabled=!1}),t}}(jQuery)})(this),instrument_function(function(){!function(e){e.fn.term_form=function(){return this.each(function(){var t=e(this);t.find(".text").on("input keydown paste cut",function(){e.trim(e(this).val())?e("form.term .ss-delete").show():e("form.term .ss-delete").hide()}).trigger("input").on("blur",function(){t.submit()}),t.find(".ss-delete").on("click",function(){e("form.term .text").val("").trigger("input").focus(),t.submit()}),t.find(".text").on("focus",function(){e(this).addClass("focused")}),t.find(".text").on("blur",function(){var t=e(this);t.val()||t.removeClass("focused")})}),this}}(jQuery)})(this),instrument_function(function(){$(function(){function e(){$.console.log("xdreceiver did not initialize")}var t,n=$("iframe#api_xdreceiver"),i=n[0],r=[];$.api_ajax=function(){r.push(arguments)},n.load(function(){try{$.api_ajax=i.contentWindow.jQuery.ajax,_.each(r,function(e){$.api_ajax.apply(this,e)})}catch(n){$.api_ajax=e,e()}clearTimeout(t)}),t=setTimeout(e,1e4)})})(this),instrument_function(function(){$(function(){$.fn.sync_form=function(e){var t=$(this),n=function(){};return e=e||{},t.data("updating")?void t.data("dirty",(t.data("dirty")||[]).concat(e)):(t.data("updating",!0),void $.ajax({type:e.type||t.attr("method"),url:e.url||t.attr("action"),data:e.data||t.serialize(),dataType:"json",global:!1,context:t,beforeSend:e.beforeSend,success:function(i){(e.success||n).apply(this,arguments),t.trigger("form_synced",[i]),t.data("dirty")&&t.data("dirty").length&&setTimeout(function(){for(var e={};$.isEmptyObject(e)&&t.data("dirty").length;)e=t.data("dirty").shift();t.sync_form(e)},100),i.url&&t.attr("action",i.url)},error:e.error,complete:function(){(e.complete||n).apply(this,arguments),t.data("updating",!1)}}))}})})(this),instrument_function(function(){!function(e){var t={};e.publish=function(){var n=Array.prototype.slice.call(arguments),i=n.shift();t[i]&&e.each(t[i],function(){this.apply(e,n)})},e.subscribe=function(e,n){return t[e]||(t[e]=[]),t[e].push(n),[e,n]},e.unsubscribe=function(){var n=arguments[0];t[n]&&e.each(t[n],function(e){this===arguments[1]&&t[n].splice(e,1)})}}(jQuery)})(this),instrument_function(function(e){!function(){e.oauth_url=function(e){return"undefined"!=typeof api_oauth_token?URI(e).addQuery("oauth_token",api_oauth_token).toString():e}}()})(this),instrument_function(function(e){!function(){function t(e){var t,n,i=e.length;if(i)for(;i;)i-=1,n=Math.floor(Math.random()*(i+1)),t=e[n],e[n]=e[i],e[i]=t;return e}e.shuffle=t}()})(this),instrument_function(function(e){!function(){function t(e,t){return _.template(e,t)}_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e.render_raw=t}()})(this),instrument_function(function(){function e(e,t,n){var i=$(e),r=_.map(_.keys(t),function(e){return"#"+e}).join(", ");i.delegate(r,"change",function(){$(this).trigger("state_change")}),i.delegate(r,"state_change",function(){var e=$(this),i=e.val();_.each(t[e[0].id],function(e,t){var r,o=$("#"+t),a=o.add(o.prev("label")),s=o.val(),c=_.result(e,i);"undefined"==typeof o.data("options")&&o.data("options",o.find("option")),_.isRegExp(c)&&(c=o.option_values(function(e){return e.match(c)})),_.isArray(c)&&(c=_.map(c,function(e){return'[value="'+e+'"]'}).join(", ")),c?(r=$(o.data("options")),_.isString(c)&&(r=r.filter(c)),n.include_blank&&(r=$("<option>").add(r)),o.html(r),a.show(),o.val()!==s&&o.trigger("change")):(n.default_control(a),o.trigger("change"))})})}$.fn.option_values=function(e){var t=$(this).first().find("option").map(function(t,n){var i=n.value;return"function"!=typeof e||e(i)?i:!1});return _(t).without(!1)},$.fn.select_machine=function(t,n){var i={default_control:function(e){e.hide()}};return $(this).each(function(){e(this,t,$.extend(i,n))}),this}})(this),instrument_function(function(){!function(e){window.XDomainRequest&&e.ajaxTransport(function(t){if(t.crossDomain&&t.async){t.timeout&&(t.xdrTimeout=t.timeout,delete t.timeout);var n;return{send:function(i,r){function o(t,i,o,a){n.onload=n.onerror=n.ontimeout=n.onprogress=e.noop,n=void 0,r(t,i,o,a)}n=new window.XDomainRequest,n.open(t.type,t.url),n.onload=function(){o(200,"OK",{text:n.responseText},"Content-Type: "+n.contentType)},n.onerror=function(){o(404,"Not Found")},n.onprogress=function(){},t.xdrTimeout&&(n.ontimeout=function(){o(0,"timeout")},n.timeout=t.xdrTimeout),n.send(t.hasContent&&t.data||null)},abort:function(){n&&(n.onerror=e.noop(),n.abort())}}}})}(jQuery)})(this),instrument_function(function(e){var t={mailcheck:{threshold:2,defaultDomains:["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com","ymail.com","hotmail.co.uk","yahoo.co.uk","live.co.uk"],defaultTopLevelDomains:["co.uk","com","net","org","info","edu","gov","mil"],whitelistRegexes:[/ymail.com/,/yahoo\.co\./,/yahoo\.com\./,/hotmail\.co\./,/hotmail\.com\./],run:function(e){e.domains=e.domains||t.mailcheck.defaultDomains,e.topLevelDomains=e.topLevelDomains||t.mailcheck.defaultTopLevelDomains,e.distanceFunction=e.distanceFunction||t.sift3Distance,e.ignoreTLDs=e.ignoreTLDs||!1;var n=t.mailcheck.suggest(encodeURI(e.email),e.domains,e.topLevelDomains,e.distanceFunction,e.ignoreTLDs);n?e.suggested&&e.suggested(n):e.empty&&e.empty()},suggest:function(e,t,n,i,r){e=e.toLowerCase();var o,a,s,c,l=this.splitEmail(e),u=this.findClosestDomain(l.domain,t,i);for(s=0;s<this.whitelistRegexes.length;s+=1)if(c=this.whitelistRegexes[s],c.exec(l.domain))return!1;if(u){if(u!==l.domain)return{address:l.address,domain:u,full:l.address+"@"+u}}else if(!r&&(o=this.findClosestDomain(l.topLevelDomain,n),l.domain&&o&&o!==l.topLevelDomain))return a=l.domain,u=a.substring(0,a.lastIndexOf(l.topLevelDomain))+o,{address:l.address,domain:u,full:l.address+"@"+u};return!1},findClosestDomain:function(e,t,n){var i,r,o=99,a=null;if(!e||!t)return!1;for(n||(n=this.sift3Distance),r=0;r<t.length;r+=1){if(e===t[r])return e;i=n(e,t[r]),o>i&&(o=i,a=t[r])}return o<=this.threshold&&null!==a?a:!1},sift3Distance:function(e,t){var n,i=0,r=0,o=0,a=0,s=5;if(null===e||0===e.length)return null===t||0===t.length?0:t.length;if(null===t||0===t.length)return e.length;for(;i+r<e.length&&i+o<t.length;){if(e.charAt(i+r)===t.charAt(i+o))a+=1;else for(r=0,o=0,n=0;s>n;n+=1){if(i+n<e.length&&e.charAt(i+n)===t.charAt(i)){r=n;break}if(i+n<t.length&&e.charAt(i)===t.charAt(i+n)){o=n;break}}i+=1}return(e.length+t.length)/2-a},splitEmail:function(e){var t,n,i,r=e.split("@"),o="";if(r.length<2)return!1;for(t=0;t<r.length;t+=1)if(""===r[t])return!1;if(n=r.pop(),i=n.split("."),0===i.length)return!1;if(1===i.length)o=i[0];else{for(t=1;t<i.length;t+=1)o+=i[t]+".";i.length>=2&&(o=o.substring(0,o.length-1))}return{topLevelDomain:o,domain:n,address:r.join("@")}}}};e.jQuery&&!function(e){e.fn.mailcheck=function(e){var n,i,r=this;e.suggested&&(n=e.suggested,e.suggested=function(e){n(r,e)}),e.empty&&(i=e.empty,e.empty=function(){i.call(null,r)}),e.email=this.val(),t.mailcheck.run(e)}}(jQuery)})(this),instrument_function(function(e){!function(){function t(e,t,n){var i=URI(e).absoluteTo(window.location),r=URI(t).absoluteTo(window.location);return n=n||{},n.ignore_query&&(i.search({}),r.search({})),n.ignore_hash&&(i.hash(""),r.hash("")),i.equals(r)}e.url_equals=t}()})(this),instrument_function(function(){$(function(){$(document).on("click","ul.faqs_alt li .question",function(e){$(this).parent("li").toggleClass("expanded"),track("FAQ Toggle",{question:$(this).text().trim()}),e.preventDefault()})})})(this),instrument_function(function(e){e.define_namespace=function(e,t){$(function(){var n=$(e);n.length&&t(n)})}})(this),instrument_function(function(){$(function(){var e=$(".toggle_box_nav li"),t=$(".toggle_box_content");e.length&&t.length&&e.on("click",function(){var n=$(this),i=e.index(n);return t.removeClass("current"),e.removeClass("current"),$(t[i]).addClass("current"),n.addClass("current"),!1})})})(this),instrument_function(function(){!function(){function e(e){var t=e.css("line-height");return"normal"===t?1.2*parseInt(e.css("font-size"),10):parseInt(t,10)}function t(e){var t=e.children(":not(.fade)").last(),n=0;n=parseInt(t.css("padding-bottom"),10)+parseInt(t.css("margin-bottom"),10),e.css("margin-bottom",n),t.css("padding-bottom",0),t.css("margin-bottom",0)}function n(t,n){var i=e(t)*n;return t.css("max-height",i+"px"),r(t[0])}function i(e){e.css("max-height",e[0].scrollHeight+"px")}function r(e){return e.clientHeight<e.scrollHeight}function o(e,t){var n=e.parents(":hidden:last"),i=n.attr("style");n.length&&n.show(),t(),n.length&&(void 0===i?n.removeAttr("style"):n.attr("style",i))}$(".js-line-clamp").livequery(function(){var e=$(this),r=$(this).find(".clamped"),a=e.find(".fade,.expand");o(e,function(){t(r),n(r,e.data("lines"))&&(a.show(),a.one("click",function(e){e.preventDefault(),e.stopPropagation(),i(r),a.hide()}))})})}()})(this),function(){function e(){return URI(History.getState().url)}var t=Model.extend();t.uri=t.prototype.uri=function(){return e()},t.on_initialize(function(t,n,i,r){this.$view=n,this.template=i,this.original_uri=r.url?URI(r.url).equals(e().clone().query(""))?e():URI(r.url):e(),this.current_params="",this.param_change_listeners=[],this.options=r,e().equals()?t&&this.change_params(e().query()):this.set_params(e().query(),!0),this.bind_events()}),t.prototype.on_change_params=function(e){this.param_change_listeners.push(e)},t.prototype.change_params=function(t){this.$view.html(render(this.template,this.get())),this.options.mobius_on&&!this.mobius&&(this.mobius=this.init_mobius(this.options.mobius_on)),this.current_params=t,t!==e().query()?History.pushState({params:t},null,this.original_uri.query(t).hash("").toString()):History.replaceState({params:t},null,e().query(t).hash("").toString()),this.mobius&&function(){var e=this.$mobius_context();this.mobius.current_page=1,this.mobius.set_extra_params(t),this.mobius.$elem=this.$mobius_on(),e.get(0)!==this.mobius.options.$context.get(0)&&(this.mobius.options.$context=e,this.mobius.bind_events()),this.get("total_pages")>1?(this.mobius.play(),this.mobius.check_for_more(),$(".mobius_load_more").show()):(this.mobius.pause(),$(".mobius_load_more").hide())}.apply(this),_.each(this.param_change_listeners,function(e){"function"==typeof e&&e(t)}),this.change()},t.prototype.set_params=function(e,t){var n=this.original_uri.clone().query(e||!1),i=this;return t||e!==this.current_params?($.ajax({url:n.suffix("json").toString(),dataType:"json",success:function(t){i.set(t,{overwrite:!0}),i.change_params(e)},error:function(e){growl({error:e.responseText})}}),!0):!1},t.prototype.bind_events=function(){var e=this;$(window).on("statechange",function(){var t=History.getState().data;t&&"string"==typeof t.params&&e.set_params(t.params)})},t.prototype.$mobius_on=function(){var e=this.$view.find(".mobius_on");return e.length||(e=this.$view),e},t.prototype.$mobius_context=function(){var e=this.$view.find(".mobius_context");return e.length||(e=$(window)),e},t.prototype.init_mobius=function(e){var t=this,n=this.$mobius_on(),i=this.$mobius_context();return this.$view.on("mobius:loaded_page",function(n,i,r){r[e]=t.get(e).concat(r[e]),i>=r.total_pages?(t.mobius.pause(),$(".mobius_load_more").hide()):(t.mobius.play(),$(".mobius_load_more").show()),delete r.params.page,t.set(r,{overwrite:!0})}),n.mobius({dataType:"json",url:this.original_uri.clone().query("").toString(),$context:i,paused:!0}).data("mobius")},root.Location=t}(),function(){var e=ApplicationModel.extend();e.prototype.publishSuccess=function(){this.syncDiscardState(),this.get("feature_image_attributes._destroy")&&this.replace("feature_image_attributes",{}),this.get("background_image_attributes._destroy")&&this.replace("background_image_attributes",{})},e.prototype.syncDiscardState=function(){this.setDiscardState(this.get())},e.prototype.setDiscardState=function(e){this._discardState=e},e.prototype.discard=function(){this.set(this._discardState)},e.prototype.tryFixValidationErrors=function(){var e=this,t=this.get("link_url");t&&!/^http/.test(t)&&this.set("link_url","http://"+t),this.get("link_text")||this.set("link_text",I18n.t("onloads.views.project_profiles.edit.Follow_along")),["name","blurb","link_text","link_url"].forEach(function(t){var n=e.get(t);n&&e.set(t,n.trim())})},e.prototype.validate=function(){var e=[];return""===this.get("name").trim()&&e.push(I18n.t("onloads.views.project_profiles.edit.errors.Project_title_cannot_be_blank")),e},e.prototype.data_for_rails=function(){return _.reduce(this.data,function(e,t,n){return e["project_profile["+n+"]"]=t,e},{})},["text_color","background_color","link_text_color","link_background_color"].forEach(function(t){e.set_computed_value(""+t+"_hex",function(){var e=this[t];return e?"#"+e:""},{changes_on:[t]})}),root.CurrentProjectProfile=e}(),instrument_function(function(e){!function(){"string"==typeof current_checkout&&(e.current_checkout=new Checkout($.parseEscapedJSON(current_checkout)),current_checkout.on_change(function(e){e.reward?track("Checkout Reward Changed"):"undefined"!=typeof e.location_id?track("Checkout Location Changed"):e.shipping_amount?track("Checkout Shipping Amount Changed"):e.amount&&track("Checkout Amount Changed")}))}()})(this),instrument_function(function(){!function(){var e=History.isTraditionalAnchor;"undefined"!=typeof History&&(History.isTraditionalAnchor=function(t){return 0===t.indexOf("remote_modal_dialog")?!0:e.apply(this,arguments)})}(),$(function(){$(".modal_dialog").livequery(function(){var e=$(this),t=e.attr("id");$(document).on("click","a.link_to_"+t,function(t){e.modal_dialog({event:t}),t.preventDefault()}),e.closest(".pop_modal_on_load").length&&e.modal_dialog()}),$(document).on("click","a.remote_modal_dialog",function(e){if(e.preventDefault(),!$(this).is(".disabled")){var t=$.open_remote_modal_dialog(URI($(this).attr("href")).suffix("js").toString(),{title:$(this).attr("data-modal-title"),id:$(this).attr("data-modal-id"),event:e,do_not_cache:$(this).attr("data-do_not_cache")?!0:!1,class_name:$(this).attr("data-modal-class"),theme:$(this).attr("data-modal-theme"),ignore_parent:$(this).attr("data-ignore_parent")?!0:!1,remote_modal_dialog_contents_loaded:function(e){var t=e.find(".move_to_head");$("#global-zeroclipboard-html-bridge").css("position","fixed"),t.length&&($("head").append(t.children()),t.remove())},dataType:"html"});$(this).data("modal_dialog",t),t.$elem.on("modal_dialog:remote_dialog_loaded",function(){try{"undefined"!=typeof FB&&FB.XFBML&&FB.XFBML.parse()}catch(e){$.console.log(e)}})}}).each(function(){var e=$(this);e.is(".pop_modal_on_load")&&e.click()}),$(document).on("click","a.modal_dialog_close",function(e){e.preventDefault(),$("#global-zeroclipboard-html-bridge").css("position","absolute"),$(this).trigger("close.modal_dialog")}),$(document).on("closed.modal_dialog",function(e){$(e.target).find(".video-player").trigger("ksr_video:pause")}),$(document).on("click",".modal_dialog .pagination a",function(e){var t=$(this).closest(".modal_dialog_body"),n=$(this);t.height(t.height()),e.preventDefault(),$.ajax({url:n.attr("href"),type:"get",dataType:"html",beforeSend:function(e){e.setRequestHeader("Accept","text/javascript, */*")},success:function(e){t.html(e),$.scrollTo(t),t.css("height","auto")}})});var e,t=/^#modal_dialog:([\-_a-zA-Z0-9]+)$/,n=/^#remote_modal_dialog:(.*)$/,i=t.exec(window.location.hash),r=n.exec(window.location.hash);i&&(e=i[1],$("#"+e).modal_dialog(),window.location.replace("#")),r&&($("a.remote_modal_dialog").each(function(){url_equals(decodeURIComponent(r[1]),decodeURIComponent($(this).attr("href")))&&$(this).click()}),window.location.replace("#")),$("a.generate_modal_dialog").livequery(function(){var e=$(this),t=_.pick(e.data(),"id");$.create_modal_dialog(e.data("title"),e.data("content"),t)}),$(document).on("modal_dialog:opened",function(e,t){var n={};n={modal_class:t.options.class_name,modal_title:t.options.title,modal_id:t.options.id},track("Modal Dialog View",n)})})})(this),instrument_function(function(){})(this),instrument_function(function(){$(function(){function e(e){$(e).ksr_video()}$.videos_changed=function(){$(".video-player:visible").each(function(){e(this)})},$(document).on("ksr_video:pause_all_videos",function(){$(".video-player").trigger("ksr_video:pause")}),$(".video-player:visible").livequery(function(){e(this)})})})(this),instrument_function(function(){$(document).on("timer_added",".ksr_page_timer",function(){new ProjectTimer(this,window.ksr_page_clock)}),$(".ksr_page_timer").livequery(function(){this.ksr_page_timer||$(this).trigger("timer_added")})})(this),instrument_function(function(){$("span.character_counter").livequery(function(){var e=$(this);$(document).on("keyup",e.attr("rel"),function(){e.html(parseInt($(this).attr("maxlength"),10)-$(this).val().length)})})})(this),instrument_function(function(){$("form:not([data-ksrjson])").livequery("submit",function(e){var t=$(this);t.is(".submitting-non-ajax")?e.preventDefault():t.attr("target")||($(window).unload(function(){t.removeClass("submitting-non-ajax")}),t.addClass("submitting-non-ajax"))})})(this),instrument_function(function(){$(function(){$(document).tipsy({gravity:"s",html:!0,live:"a.tip",fade:!0}),$(document).tipsy({gravity:"n",html:!0,live:".tipsy_n",fade:!0}),$(document).tipsy({gravity:"s",html:!0,live:".tipsy_s",fade:!0}),$(document).tipsy({gravity:"se",html:!0,live:".tipsy_se",fade:!0})})})(this),instrument_function(function(){$(document).on("click","input#share_a_link",function(){$("#share_a_link").focus().select()})})(this),instrument_function(function(){$(".keep-or-delete").livequery(function(){var e=$(this).closest("li"),t=$(this).find("a"),n=$(this).find(".checkbox").hide();t.attr("disabled")||t.show(),t.on("click",function(i){t.attr("disabled")||(n.prop("checked",!1),e.hide(),e.trigger("nested_attributes_list:removed")),i.preventDefault()})}),$("a.add-another").livequery(function(){var e=$(this),t=e.data("context")?e.closest(e.data("context")):$(document),n=t.find(e.attr("rel")).hide();e.attr("disabled")||e.show(),e.on("click",function(i){if(!e.attr("disabled")){var r=n.clone_form_template();r.find(".keep_box").val(0).prop("checked",!0),e.attr("data-target-selector")?t.find(e.attr("data-target-selector")).append(r):n.before(r),r.trigger("nested_attributes_list:added")}i.preventDefault()})})})(this),instrument_function(function(){$("form.requires-confirmation").livequery("submit",function(e){var t=$(this),n=$(this).find("input.confirmation");n.is(":checked")||(setTimeout(function(){t.removeClass("submitting-non-ajax")},100),growl({error:I18n.t("onloads.initializers.form_requires_confirmation.Please_accept_the_Rules")}),e.preventDefault())})})(this),instrument_function(function(){$(document).on("click",".js-removeable .js-remove",function(){var e=$(this);return e.data("confirm")&&!confirm(e.data("confirm"))?!1:($.post(e.attr("href"),{_method:"delete"},function(){e.parents(".js-removeable").fadeOut(400,function(){$(this).remove()})}),!1)})})(this),instrument_function(function(){$(function(){$(document).on("click",".location_list .big_locations li",function(){window.location=$(this).find(".name a").attr("href")})})})(this),instrument_function(function(){!function(e){function t(t){t.each(function(){var t=e(this),n=t.find("option:selected");t.siblings(".title").text(n.data("altLabel")||n.text())})}e.fn.ksrSelect=function(){var n=e(this);n.find(".ksr-select").livequery(function(){t(e(this).find("select"))}),n.on("change",".ksr-select select",function(){t(e(this))}),n.on("keydown",".ss-navigatedown, .ss-delete",function(t){var n=e(this),i=t.keyCode;(i===KEY.ENTER||i===KEY.SPACE)&&(t.preventDefault(),n.hasClass("ss-delete")&&n.parent().find(".ss-navigatedown").focus(),n.click())})},e.fn.ksr_val=function(n){var i=e(this);if(void 0!==n){var r=i.val(n);return t(i),r}return i.val()}}(jQuery)})(this),$(function(){$(document).ksrSelect()}),instrument_function(function(){$(function(){$(document).on("click",".ksr-dropdown",function(){var e=$(this);e.toggleClass("open"),setTimeout(function(){$(window).on("click",function(t){$(t.target).closest(e).length||e.removeClass("open")})},0)})})})(this),instrument_function(function(){$(function(){function e(e){var r=$(e.data("targetId"));r.addClass("ksr-popover-active"),i&&t(),i=e,e.addClass("visible"),$("body").addClass("ksr-popover-visible"),device_idioms.mobile&&$("body, html").addClass("ksr-mobile-popover-visible"),n(e),$(document).trigger("ksr_popover:opened",{$popover:e})}function t(e){e=e||{};var t=e.update_focus||!1;if(i){var n=$(i.data("targetId"));n.removeClass("ksr-popover-active"),i.removeClass("visible"),$("body").removeClass("ksr-popover-visible"),$("body, html").removeClass("ksr-mobile-popover-visible"),t&&n.find(".ss-navigatedown").focus(),$(document).trigger("ksr_popover:closed",{$popover:i}),i=!1}}function n(e){if(!device_idioms.mobile){var t=e.data("targetId"),n=$(t),i=n.offset().left-32;i-=Math.max(0,i+e.outerWidth()-($(window).width()-32)),i=Math.max(4,i),e.css({left:i,top:n.offset().top+n.outerHeight()+20}),e.find(".arrow").css({left:n.offset().left-e.offset().left+n.outerWidth()/2})}}var i,r,o=$(".ksr-popover"),a=[];o.length&&(o.each(function(){var e=$(this),t=e.data("targetId");a.push(t)}),o.find(".close").on("click",function(e){t(),e.preventDefault()}),$(document).on("click",function(e){var n=$(e.target);n.closest(i).length||t()}),$(document).on("keydown",function(e){e.keyCode===KEY.ESC&&t({update_focus:!0})}),$(document).on("click",a.join(","),function(n){var i=$(n.currentTarget);return r=$('[data-target-id="#'+i.prop("id")+'"]'),i.hasClass("ksr-popover-excluded")?void 0:r.is(".visible")?void t():(e(r),!1)}),o.on("ksr_popover:reposition",function(){var e=$(this);n(e)}),o.on("ksr_popover:close",function(){t($(this))}),$(document).on("ksr_popover:opened",function(e,t){t.$popover.aria_set_visible().aria_focus_first_element().aria_activate_keyboard_tabindex()}),$(document).on("ksr_popover:closed",function(e,t){t.$popover.aria_set_hidden().aria_deactivate_keyboard_tabindex()}))})})(this),instrument_function(function(){$(function(){$(".mobius.click").livequery(function(){function e(){n=r.find("*[data-cursor]:last")}var t,n,i,r=$(this),o=r.parent().find("a.load_more"),a=r.parent().find(".loading");e(),i=n.length,r.mobius({trigger_next:o,prepend_next:r.data("mobius_append")?!1:!0,url:r.data("mobius_url")||!1,page_param:i?"cursor":"page",extra_params:r.data("mobius_extra_params"),page_by:function(t){return i?(e(),n.data("cursor")):t?t+1:1}}),t=r.data("mobius"),r.on("mobius:loading_page",function(){a.show(),o.parent().hide()}),r.on("mobius:loaded_page",function(e,t,n){r.parent().find(".count .current").text(r.find("li.item").length),a.hide(),n.data("last_page")?o.parent().hide():o.parent().show()})}),$(".mobius:not(.click)").livequery(function(){function e(){o=s.find("*[data-cursor]:last")}var t,n,i,r,o,a,s=$(this);s.find(".page").data("last_page")||(e(),a=o.length,t=s.mobius({url:s.data("url"),paused:s.is(".paused"),page_param:a?"cursor":"page",extra_params:s.data("extra_params")||"",page_by:function(t){return a?(e(),o.data("cursor")):t?t+1:1
}}).data("mobius"),s.length&&(n=$(".js-mini-footer--sticky"),r=$(".js-mini-footer__links"),r.mouseenter(function(){n.addClass("is-visible")}),n.mouseleave(function(){n.removeClass("is-visible")}),s.on("mobius:loaded_page",function(e,r,o){o.data("last_page")?(t.pause(),s.siblings(".load_more").hide(),i=n.clone(),n.remove()):(t.play(),s.siblings(".load_more").show(),$("body").append(i))})))})})})(this),instrument_function(function(){$(function(){var e,t=!1;$(document).on("zeroclipboard:initialize",".zeroclipboard",function(){if(t)e.unclip(),e.clip($(".zeroclipboard"));else{if(ZeroClipboard.isFlashUnusable())return;ZeroClipboard.config({swfPath:"/assets/bower_components/zeroclipboard/dist/ZeroClipboard.swf",forceHandCursor:!0}),ZeroClipboard.on("aftercopy",function(e){$(document).trigger("zeroclipboard:click");var t,n=$(e.target);n.is(".clippy")&&n.data("text")+""===e.data["text/plain"]&&(t=n.text(),n.text("Copied!"),setTimeout(function(){n.text(t)},1e3))}),e=new ZeroClipboard($(".zeroclipboard")),t=!0}}).on("mouseenter",".zeroclipboard",function(){ZeroClipboard.isFlashUnusable()||e.setText($(this).data("text"))}),$(".zeroclipboard").livequery(function(){$(this).trigger("zeroclipboard:initialize")}),$(document).on("send_clippy_away",".zero_clipboard_wrapper",function(){$(this).css({top:"0",left:"-100000px"})}),$(document).on("tab",function(){$(".zero_clipboard_wrapper").trigger("send_clippy_away")})})})(this),instrument_function(function(){$(function(){$.clipster(".clipster")})})(this),instrument_function(function(){$(function(){$(document).on("click",".js-click_select",function(e){var t=document.createRange(),n=window.getSelection();t.setStartBefore(this.firstChild),t.setEndAfter(this.lastChild),n.removeAllRanges(),n.addRange(t),e.preventDefault()})})})(this),instrument_function(function(){$(function(){$(".overlabels .field label.overlabel").livequery(function(){var e=$(this),t=e.siblings("input:not([type=hidden]), textarea, .wym_box");return t.length||(t=e.parent(".field_with_errors").siblings(".field_with_errors").find("input, textarea")),t.length?(e.addClass("overlabel-apply"),t.val()&&e.hide(),t.focus(function(){$(this).val()&&e.hide(),e.addClass("field_focused")}).blur(function(){$(this).val()||e.show(),e.removeClass("field_focused")}).on("keydown input change paste cut",function(){var t=$(this);setTimeout(function(){t.val()?e.hide():e.show()},1)}),void e.click(function(){t.attr("disabled")||t.focus()})):void e.hide()})})})(this),instrument_function(function(){$(function(){if($.support.localStorage())try{localStorage.removeItem("history"),localStorage.removeItem("banner_canada_projects_animated")}catch(e){}})})(this),instrument_function(function(){$(document).ready(function(){$(".sortable_table").tablesorter({textExtraction:function(e){var t;return t=$(e).closest("td").data("table-value"),"undefined"!=typeof t?t:e.innerHTML.replace(/[,?!\s,%$]/g,"")}})})})(this),instrument_function(function(){!function(){var e=this,t={$:"jquery",_:"../../../../../vendor/assets/javascripts/bower_components/underscore/underscore.js"},n={};if("function"==typeof require)for(var i in t)t.hasOwnProperty(i)&&(e[i]=require(t[i]));"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=n),exports.formatters=n):e.formatters=e.formatters||n,n=_.extend(e.formatters||{},{currency_symbol:function(e){return this.currency_symbol_mappings[e]},currency_trailing_code_class:function(e){return this.currency_trailing_code_mappings[e]?e.toLowerCase():void 0},money:function(e,t,n){return isNaN(n)&&(n=0),this.currency_symbol(e)+this.format_number(t,n)},format_number:function(e,t,n,i,r){t=isNaN(t)?2:Math.abs(t),n=n||".",i=i||",",r=_.extend({},r);var o,a,s;return o=t||r.round?Math.abs(e).toFixed(t):parseInt(Math.abs(e),10).toString(),a=String(parseInt(o,10)),s=a.split("").reverse().join("").replace(/(\d{3})(?=\d)/g,"$1"+i).split("").reverse().join(""),0>e&&(s="-"+s),t&&(s+=n+Math.abs(o-a).toFixed(t).slice(2)),s},pluralize:function(e,t){function n(e,n){var i=a[l+(1===t?0:1)-l%2];return"undefined"!=typeof n&&(i=i.replace(/\(.*\)/,n)),i}function i(e,t){return t.toUpperCase()}for(var r,o=e,a=["zombie","zombies","cow()","ki(i?)ne","move","moves","sex","sexes","child","children","man","men","person","people","database","databases","quiz","quizzes","matrix","matrices","(vert|ind)ex","(vert|ind)ices","(^ox)","(^ox)en","(alias|status)","(alias|status)es","(octop|vir)us","(octop|vir)i","(cris|ax|test)is","(cris|ax|test)es","shoe","shoes","o","oes","bus","buses","(m|l)ouse","(m|l)ice","(x|ch|ss|sh)","(x|ch|ss|sh)es","movie","movies","series","series","([^aeiouy]|qu)y","([^aeiouy]|qu)ies","([lr])f","([lr])ves","tive","tives","hive","hives","([^f])fe","([^f])ves","(analy|ba|diagno|parenthe|progno|synop|the)sis","(analy|ba|diagno|parenthe|progno|synop|the)ses","([ti])um","([ti])a","news","news","([^s])","()s"],s=_.map(a,function(e){return new RegExp(e+"$","i")}),c=!1,l=0;!c&&l<a.length;)l+=1,r=s[l],e.match(r)&&(c=!0,o=e.replace(r,n),e.match(/^[A-Z][^A-Z]+$/)?o=o.replace(/^([a-z])/,i):e.match(/^[A-Z]+$/)&&(o=o.toUpperCase()));return o},capitalize:function(e){return"string"!=typeof e?"":e.replace(/^(\w)|\s(\w)/g,function(e){return e.toUpperCase()})},to_sentence:function(e,t){switch(t=$.extend({},{words_connector:", ",two_words_connector:" and ",last_word_connector:", and "},t),e.length){case 0:return"";case 1:return String(e[0]);case 2:return e[0]+t.two_words_connector+e[1];default:return e.slice(0,-1).join(t.words_connector)+t.last_word_connector+_.last(e)}}})}()})(this),instrument_function(function(){$(function(){var e=$(".NS_projects__project_share");e.length&&$.getScript("//platform.tumblr.com/v1/share.js")})})(this),instrument_function(function(){$(".sound_player:visible").livequery(function(){$(this).sound_player()})})(this),instrument_function(function(){$.fn.validate.defaults.on_valid.push(function(e){$(e).removeClass("errored")}),$.fn.validate.defaults.on_invalid.push(function(e){$(e).addClass("errored")})})(this),instrument_function(function(){$(function(){$(document).on("click",".js-read_more",function(e){var t=$(this).closest(".js-read_more_context"),n=t.data("mixpanel_context"),i=t.find(".js-less"),r=t.find(".js-more");i.addClass("hide"),i.find(".video-player").trigger("ksr_video:pause"),r.removeClass("hide"),$.scrollTo(t),n&&track(n+" Read More"),e.preventDefault()}),$(document).on("click",".js-read_less",function(e){var t=$(this).closest(".js-read_more_context"),n=t.data("mixpanel_context"),i=t.find(".js-less"),r=t.find(".js-more");i.removeClass("hide"),r.addClass("hide"),r.find(".video-player").trigger("ksr_video:pause"),$.scrollTo(t),n&&track(n+" Read Less"),e.preventDefault()})})})(this),instrument_function(function(){!function(){$.fn.spin.presets.ksr={className:"",lines:8,length:4,width:2,radius:5,speed:2}}()})(this),instrument_function(function(){window.placeHolderConfig={autoInit:!1},$(function(){"placeholder"in $("<input>")[0]||"placeHolder"in $("<input>")[0]||$("input[placeholder], textarea[placeholder]").livequery(function(){$(this).placeHolder()})})})(this),instrument_function(function(){$(function(){"autofocus"in document.createElement("input")||$(".js-auto_focus").first().focus()})})(this),instrument_function(function(){$(function(){$(".js-load-more").livequery("click",function(e){var t,n=$(this),i=n.data("page")||2,r=n.text();n.prop("disabled",!0),n.text(I18n.t("onloads.initializers.load_more.Loading")),t=$.ajax({url:n.data("url"),type:"GET",data:{page:i}}),t.success(function(e){n.data("page",i+1),n.trigger("load_more_success",e)}),t.error(function(){n.trigger("load_more_error")}),t.done(function(){n.prop("disabled",!1),n.text(r),n.trigger("load_more_done")}),e.preventDefault()})})})(this),instrument_function(function(){$(function(){function e(){try{localStorage[n]=!0}catch(e){}}var t=$(".js-launch-banner"),n=t.data("id"),i=t.data("one_time");t.length&&($.support.localStorage()&&localStorage[n]||(t.find(".js-close").on("click",function(n){t.addClass("banner-hidden"),e(),n.preventDefault()}),t.removeClass("banner-hidden"),void 0!==i&&e()))})})(this),instrument_function(function(){define_namespace(".js-asset-uploads",function(e){var t=e.find(".js-asset-uploads--tracks");e.on("ksr_uploader:uploaded",function(e,n){var i,r=$(this),o=r.data("subtitles-path");o&&0!==t.length&&(t.empty(),i=$.ajax({url:o,method:"GET",data:{captionable_id:n.id,captionable_type:n.type}}),i.success(function(e){t.html(e.html)}))}),e.on("ksr_uploader:remove",function(){t.empty()})})})(this),instrument_function(function(){!function(){window.presenters["admin/reverse_image_search/_show"]=function(e){var t=e.matches;return"string"==typeof t&&(t=JSON.parse(t)),e.matches=_.map(t,function(e){var t=URI.parse(e.website);return e.abbreviated_website=t.hostname,e}),e}}()})(this),instrument_function(function(){!function(){presenters["backer_report/_index"]=function(e){return _.each(_.keys(e.facets),function(t){_.each(_.keys(e.facets[t]),function(n){var i=e.facets[t][n];e.facets[t][n]={count:i}})}),e.facets.must_have_creator_note={"true":{},"false":{}},e.currency_symbol=current_project.get("currency_symbol"),e.not_filtered=!0,e.params&&(_.each(_.keys(e.params),function(t){_.has(e.facets,t)?(e.facets[t][e.params[t]]||(e.facets[t][e.params[t]]={}),e.facets[t][e.params[t]].selected=!0):(e.facets[t]={})[e.params[t]]={selected:!0}}),e.params.sort_by&&(e.params["sort_by_"+e.params.sort_by]=" "+(e.params.asc_or_desc||"asc")),e.params.reward_id&&(e.selected_reward=_.findWhere(e.rewards,{id:parseInt(e.params.reward_id,10)}),e.selected_reward||(e.selected_reward=_.findWhere(e.rewards,{id:"none"})),e.selected_reward.selected=!0),_.each(["survey_answered","completed","must_have_creator_note","status"],function(t){e.params[t]&&(e.not_filtered=!1)})),"successful"===e.project.state&&(e.project.is_successful=!0),e.show_facets=e.total_entries>0||!(e.params&&e.params.term&&!e.params.creator_note&&!e.params.creator_note_not),e.formatted_total_entries=formatters.format_number(e.total_entries,0),e.count=e.total_entries,_.each(e.rewards,function(e){e.formatted_minimum=formatters.format_number(e.minimum,0),e.truncated_description=e.reward.length>35?e.reward.substring(0,35)+"\u2026":e.reward}),e}}()})(this),instrument_function(function(){!function(){presenters["backer_report/_row"]=function(e){return e.formatted_pledged_at=moment(1e3*e.pledged_at).format("MMM D, YYYY"),e.formatted_survey_answered_at=moment(1e3*e.survey_answered_at).format("MMM D, YYYY"),e.formatted_amount=formatters.format_number(e.amount,2),e.currency_symbol=current_project.get("currency_symbol"),e}}()})(this),instrument_function(function(){!function(){presenters["backings/_row"]=function(e){if(e.completed=!!e.completed_at,e.currency_trailing_code_class=formatters.currency_trailing_code_class(e.project.currency),e["is_"+e.status]=!0,e.formatted_deadline=moment(1e3*e.project.deadline).format("MMM D, YYYY"),e.formatted_money=formatters.money(e.project.currency,e.amount),e.formatted_status=formatters.capitalize(e.status),e.reward){var t=57,n=e.reward.reward;e.formatted_reward=n.length>t?n.substring(0,t)+"\u2026":n,e.reward.estimated_delivery_on&&(e.formatted_estimated_delivery_on=moment(1e3*e.reward.estimated_delivery_on).utc().format("MMM YYYY"))}switch(e.project.state){case"canceled":e.project_state=I18n.t("presenters.backings.row.Canceled");break;case"failed":e.project_state=I18n.t("presenters.backings.row.Unsuccessful");break;case"live":e.project_state=I18n.t("presenters.backings.row.In_progress");break;case"successful":e.project_state=I18n.t("presenters.backings.row.Successful");break;case"suspended":e.project_state=I18n.t("presenters.backings.row.Suspended")}return e.messages&&(e.formatted_messages_count=I18n.t("presenters.backings.row.messages_count",{count:e.messages.count,formatted_count:formatters.format_number(e.messages.count,0)}),e.formatted_messages_last_activity_at=moment(1e3*e.messages.last_activity_at).format("MMM D, YYYY")),e}}()})(this),instrument_function(function(){!function(){presenters["backings/_table"]=function(e){return e.show_more_backings=e.total>e.backings.length,e.count=e.total,e.backings=_.map(e.backings,function(e){return presenters["backings/_row"]($.extend({},e.get()))}),e}}()})(this),instrument_function(function(){!function(){presenters["discover/_location_li"]=function(e){return e.json=JSON.stringify(e),e}}()})(this),instrument_function(function(){!function(){presenters["discover/_location_options"]=function(e){return e.ancestor_locations=e.ancestor_locations||[],e.ancestor_locations=e.ancestor_locations.reverse(),e.nearby_locations=e.nearby_locations||[],e}}()})(this),instrument_function(function(){!function(){presenters["discover/_project_baseball_card_li"]=function(e){return presenters["projects/_baseball_card_tall"](e)}}()})(this),instrument_function(function(){!function(){presenters["discover/_search_location_li"]=function(e){return e.json=JSON.stringify(e),e}}()})(this),instrument_function(function(){!function(){presenters["funnels/_backing"]=function(e){return e.formatted_pledged_at=moment(1e3*e.pledged_at).format("MMM D, YYYY"),e.project_successful="successful"===e.project.state,e.project_live="live"===e.project.state,e.project_failed="failed"===e.project.state,e.project_canceled="canceled"===e.project.state,e.project_suspended="suspended"===e.project.state,e}}()})(this),instrument_function(function(){!function(){presenters["funnels/_backing_details"]=function(e){return e.formatted_created_at=moment(1e3*e.pledged_at).format("MMM D, YYYY"),e.project.formatted_deadline=moment(1e3*e.project.deadline).format("MMM D, YYYY"),e.reward&&e.reward.reward.match(/^no reward$/i)&&(e.reward=void 0),e.reward&&(e.reward.formatted_estimated_delivery_on=moment(1e3*e.reward.estimated_delivery_on).utc().format("MMM YYYY")),e.pledged_live="pledged"===e.status&&"live"===e.project.state,e.pledged_failed_or_canceled="pledged"===e.status&&("failed"===e.project.state||"canceled"===e.project.state),e.collected="collected"===e.status,e.errored="errored"===e.status,e.canceled_or_dropped="canceled"===e.status||"dropped"===e.status,e.project_successful="successful"===e.project.state,e.project_live="live"===e.project.state,e.project_failed="failed"===e.project.state,e.project_canceled="canceled"===e.project.state,e.project_suspended="suspended"===e.project.state,e.show_status_tooltip="pledged"===e.status&&("failed"===e.project.state||"canceled"===e.project.state||"suspended"===e.project.state),e}}()})(this),instrument_function(function(){!function(){presenters["funnels/_project_details"]=function(e){return e.formatted_money=formatters.money(e.currency,e.pledged),e.launched_at&&(e.formatted_launched_at=moment(1e3*e.launched_at).format("MMM D, YYYY")),e.formatted_created_at=moment(1e3*e.created_at).format("MMM D, YYYY"),e.formatted_deadline=moment(1e3*e.deadline).format("MMM D, YYYY"),e.successful="successful"===e.state,e.live="live"===e.state,e.failed="failed"===e.state,e.started="started"===e.state,e.submitted="submitted"===e.state,e.canceled="canceled"===e.state,e.suspended="suspended"===e.state,e.ended="successful"===e.state||"failed"===e.state||"canceled"===e.state,e.preview_link=new URI(e.urls.web.edit).fragment("preview").toString(),e}}()})(this),instrument_function(function(){!function(){window.presenters["funnels/_text"]=function(e){return e.backing&&(e.backing.formatted_amount=formatters.format_number(e.backing.amount)),e.rendered_body=render_raw(e.text.body,e),e}}()})(this),instrument_function(function(){!function(){presenters["funnels/_ticket_error"]=function(e){var t={"Ticket_requester ":"Email","Ticket_requester_email_param ":"Email","Ticket_requester_name ":"Name","Base Description: ":"Details"},n=new RegExp(_.keys(t).join("|"),"g");return e.errors=_.map(e.errors,function(e){return e.replace(n,function(e){return t[e]+" "})}),e}}()})(this),instrument_function(function(e){!function(){presenters["funnels/contact"]=function(t){var n=t.user,i=e.funnel_user_backings?e.funnel_user_backings.length-_.compact(e.funnel_user_backings).length:0;return t.projects=_.map(n.get_created_projects(),function(e){var t=e.get();return t.launched_at&&(t.formatted_launched_at=moment(1e3*t.launched_at).format("MMM D, YYYY")),t.formatted_created_at=moment(1e3*t.created_at).format("MMM D, YYYY"),t.formatted_deadline=moment(1e3*t.deadline).format("MMM D, YYYY"),t.successful="successful"===t.state,t.live="live"===t.state,t.failed="failed"===t.state,t.started="started"===t.state,t.submitted="submitted"===t.state,t.canceled="canceled"===t.state,t.suspended="suspended"===t.state,t}),t.project_groups=_.map(_.groupBy(t.projects,function(e){return I18n.t("live"===e.state?"presenters.funnels.contact.Live_projects":e.ended?"presenters.funnels.contact.Ended_projects":"presenters.funnels.contact.Started_projects")}),function(e,t){return{k:t,v:e}}),t.backings=_.map(n.get_backings().slice(0,32),function(e){var t=e.get();return t.project.formatted_deadline=moment(1e3*t.project.deadline).format("MMM D, YYYY"),t.formatted_pledged_at=moment(1e3*t.pledged_at).format("MMM D, YYYY"),t.project_successful="successful"===t.project.state,t.project_live="live"===t.project.state,t.project_failed="failed"===t.project.state,t.project_canceled="canceled"===t.project.state,t.project_suspended="suspended"===t.project.state,t}),t.any_subjects=t.projects.length+t.backings.length,t.repeat_creator=t.projects.length>1,t.repeat_backer=n.get("backings_count")>1,t.backings_count=n.get("backings_count")-i,t.show_more_backings=n.get("backings_count")>32-i,t.my_stuff=!!n.get("id"),t.projects.length&&!t.backings.length?(t.select_phrase_one=I18n.t("presenters.funnels.contact.Select_your_project"),t.select_phrase_two=I18n.t("presenters.funnels.contact.your_project")):!t.projects.length&&t.backings.length?(t.select_phrase_one=I18n.t("presenters.funnels.contact.Select_your_pledge"),t.select_phrase_two=I18n.t("presenters.funnels.contact.a_pledge")):t.projects.length&&t.backings.length&&(t.select_phrase_one=I18n.t("presenters.funnels.contact.Select_a_pledge_or_project"),t.select_phrase_two=I18n.t("presenters.funnels.contact.one_of_your_projects_or_pledges")),n.data.avatar&&!n.data.avatar.thumb.match(/\/missing_thumb\.png/)&&(n.show_avatar=!0),t.o=JSON.stringify(t),t}}()})(this),instrument_function(function(){!function(){presenters["funnels/index"]=function(e){e.sections=[],e.funnels=_.map(e.funnels,function(e){return e.breadcrumbs=_.compact([e.section_title,e.item_title]).join(" > "),e.section_title?e.item_title||(e.item_title=e.section_title):e.section_title=e.item_title,e});var t,n=_.groupBy(e.funnels,function(e){return e.section_title||e.item_title}),i=$(".current a[data-topic]").data("topic");return e.sections=[],t=e.funnels[0]&&"variant"===e.funnels[0].version?[I18n.t("presenters.funnels.index.Requirements"),I18n.t("presenters.funnels.index.Building_a_project"),I18n.t("presenters.funnels.index.Editing_my_project"),I18n.t("presenters.funnels.index.Project_tips"),I18n.t("presenters.funnels.index.Image_video_and_audio"),I18n.t("presenters.funnels.index.Identity_verification"),I18n.t("presenters.funnels.index.Collecting_funds"),I18n.t("presenters.funnels.index.Backers"),I18n.t("presenters.funnels.index.Fees_and_taxes"),I18n.t("presenters.funnels.index.Pledging"),I18n.t("presenters.funnels.index.Amazon_Payments"),I18n.t("presenters.funnels.index.Payments"),I18n.t("presenters.funnels.index.Payment"),I18n.t("presenters.funnels.index.Reward"),I18n.t("presenters.funnels.index.Survey"),I18n.t("presenters.funnels.index.Project_submission"),I18n.t("presenters.funnels.index.Project_suspension"),I18n.t("presenters.funnels.index.Account_settings")]:{project:[I18n.t("presenters.funnels.index.Project_idea_and_tips"),I18n.t("presenters.funnels.index.Creator_requirements"),I18n.t("presenters.funnels.index.Tips"),I18n.t("presenters.funnels.index.Starting_a_new_project"),I18n.t("presenters.funnels.index.Funds_and_payments"),I18n.t("presenters.funnels.index.Identity_verification"),I18n.t("presenters.funnels.index.Editing_my_project"),I18n.t("presenters.funnels.index.My_submission"),I18n.t("presenters.funnels.index.My_backers"),I18n.t("presenters.funnels.index.Project_updates"),I18n.t("presenters.funnels.index.Why_would_a_project_be_suspended"),I18n.t("presenters.funnels.index.What_happens_when_a_project_is_suspended"),I18n.t("presenters.funnels.index.Using_the_site")],pledge:[I18n.t("presenters.funnels.index.Why_is_my_pledge_dropped"),I18n.t("presenters.funnels.index.What_happened_to_my_pledge"),I18n.t("presenters.funnels.index.Pledge_problems"),I18n.t("presenters.funnels.index.Money_and_payments"),I18n.t("presenters.funnels.index.My_reward"),I18n.t("presenters.funnels.index.Survey"),I18n.t("presenters.funnels.index.Using_the_site")],projects:[I18n.t("presenters.funnels.index.Project_idea_and_tips"),I18n.t("presenters.funnels.index.Creator_requirements"),I18n.t("presenters.funnels.index.Editing_my_project"),I18n.t("presenters.funnels.index.Tips"),I18n.t("presenters.funnels.index.Funds_and_payments"),I18n.t("presenters.funnels.index.My_backers"),I18n.t("presenters.funnels.index.Project_updates"),I18n.t("presenters.funnels.index.Using_the_site")],backings:[I18n.t("presenters.funnels.index.Pledge_problems"),I18n.t("presenters.funnels.index.Money_and_payments"),I18n.t("presenters.funnels.index.Rewards"),I18n.t("presenters.funnels.index.Using_the_site")],other:[I18n.t("presenters.funnels.index.Using_the_site"),I18n.t("presenters.funnels.index.Press"),I18n.t("presenters.funnels.index.Jobs"),I18n.t("presenters.funnels.index.Copyright"),I18n.t("presenters.funnels.index.Stats"),I18n.t("presenters.funnels.index.Partnerships")]}[i],_.each(t,function(t){n[t]&&(e.sections.push({section_title:t,funnels:_.sortBy(n[t],function(e){return e.importance})}),delete n[t])}),_.each(n,function(t,n){e.sections.push({section_title:n,funnels:_.sortBy(t,function(e){return e.importance})})}),e.sections=_.map(e.sections,function(e){return 1===e.funnels.length&&e.funnels[0].item_title===e.section_title?e.funnels[0]:e}),e}}()})(this),instrument_function(function(){!function(){presenters["message_threads/_index"]=function(e){var t=[],n=e.facets.read?e.facets.read[e.user]:0,i=e.total_entries-n;return e.facets.read={},n>0&&(e.facets.read["true"]=n),i>0&&(e.facets.read["false"]=i),_.each(_.keys(e.facets),function(t){_.each(_.keys(e.facets[t]),function(n){var i=e.facets[t][n];e.facets[t][n]={count:i}})}),"undefined"==typeof current_project?(_.each(e.projects,function(n){var i=e.facets.projects?e.facets.projects[n[1]]:void 0,r=parseInt(e.params.project,10)===n[1],o={name:n[0],truncated_name:n[0].substring(0,35)+(n[0].length>35?"\u2026":""),id:n[1],count:i||0,selected:r};t.push(o),r&&(e.selected_project=o)}),e.projects=t,e.has_projects=e.projects&&e.projects.length>0):e.has_projects=!1,e.params&&(_.each(_.keys(e.params),function(t){_.has(e.facets,t)?(e.facets[t][e.params[t]]||(e.facets[t][e.params[t]]={}),e.facets[t][e.params[t]].selected=!0):(e.facets[t]={})[e.params[t]]={selected:!0}}),"other"===e.params.project&&(e.selected_project={truncated_name:I18n.t("presenters.message_threads.index.Other_projects"),other:!0})),e}}()})(this),instrument_function(function(){!function(){presenters["message_threads/_row"]=function(e){return e.formatted_sent_at=moment(1e3*e.sent_at).format("MMM D, YYYY"),e}}()})(this),instrument_function(function(){!function(){window.presenters["message_threads/_show"]=function(e){return e.is_creator=e.project.creator.id===current_user.get("id"),e.project.is_live="live"===e.project.state,e.backing&&(e.backing.reward.formatted_estimated_delivery_on=moment(1e3*e.backing.reward.estimated_delivery_on).utc().format("MMM D, YYYY"),e.backing.is_creator=e.is_creator),e.messages=_.map(e.messages,function(t){return t.sender=_.findWhere(e.participants,{id:t.sender_id}),presenters["messages/_show"](t)}),e}}()})(this),instrument_function(function(){!function(){window.presenters["messages/_show"]=function(e){return e.formatted_created_at=moment(1e3*e.created_at).format("MMM D, YYYY"),e.is_recipient="undefined"!=typeof current_user?current_user.get("id")===e.recipient_id:!1,e}}()})(this),instrument_function(function(){!function(){presenters["projects/_baseball_card_tall"]=function(e){var t=["live","successful","canceled","failed"],n=[];return e.currency_symbol=formatters.currency_symbol(e.currency),e.percent_raised=e.pledged/e.goal*100,e.percent_raised_rounded=Math.round(e.percent_raised),e.percent_raised_to_100=Math.min(100,e.percent_raised),e.formatted_money=formatters.format_number(e.pledged,0),e.formatted_goal=formatters.format_number(e.goal,0),e.formatted_backers_count=formatters.format_number(e.backers_count,0),e.count=e.backers_count,e.javascript_deadline=1e3*e.deadline,e.javascript_state_changed_at=1e3*e.state_changed_at,e.formatted_deadline=moment(e.javascript_deadline).format("MMM D, YYYY"),e.formatted_state_changed_at=moment(e.javascript_state_changed_at).format("MMM D, YYYY"),$.each(t,function(){var t=String(this);e[t+"?"]=e.state===t}),e.url_with_ref=e.url_ref?URI(e.urls.web.project).setSearch("ref",e.url_ref).toString():e.urls.web.project,e["live_or_successful?"]="live"===e.state||"successful"===e.state,e["video?"]=null!==e.video&&void 0!==e.video,e["potd_today?"]=moment(1e3*e.potd_at).isSame(new Date,"day"),e["friends_backing?"]=e.friends&&e.friends.length>0,e["friends_backing?"]&&(e.truncated_friends=e.friends.slice(0,2),n=_.map(e.truncated_friends,function(e){return"<strong>"+_.escape(e.name.split(" ")[0])+"</strong>"}),n.length<e.friends.length&&n.push("<strong>"+I18n.t("presenters.projects.baseball_card_tall.amount_more",{count:e.friends.length-n.length})+"</strong>"),e.escaped_sentence=I18n.t("presenters.projects.baseball_card_tall.friends_are_backers",{friends:formatters.to_sentence(n),count:n.length})),e.json=JSON.stringify(e),e.location_json=JSON.stringify(e.location),e.baseball_card_size||(e.baseball_card_size="tall"),e}}()})(this),instrument_function(function(){!function(){presenters["projects/_verify_identity_questions"]=function(e){function t(e,t){var n;e.index=t,r="single"===e["answer-type"]?"radio":"checkbox";for(n in e.choice)e.choice.hasOwnProperty(n)&&(o=e.choice[n],o["question-id"]=e["question-id"],o.type=r,o.index=t);return e}var n,i,r,o,a=e.questions;if(a.question["question-id"])a.question=[t(a.question,0)];else for(n in a.question)a.question.hasOwnProperty(n)&&(i=a.question[n],a.question[n]=t(i,n));return a}}()})(this),instrument_function(function(){$(function(){function e(){return $(i+" :input:not(.optional)").validates_presence(),1===$(i+' input[name="account[type]"][value="business"]:checked').length&&($(i+" input.required_business").validates_presence(),$(i+' input[name="account[business_id]"]').validates_business_id()),1===$(i+' input[name="account[routing_number]"]').length&&$(i+' input[name="account[routing_number]"]').validates_routing_number(),$(i).validate()}var t="#project_account_form_container",n=$(t),i="#project_account_form";n.length&&($(document).on("phone_number:added",function(){0===$(".needs_verification:visible").length&&n.closest(".collapsed").removeClass("collapsed")}),n.livequery(function(){var n=$(this);n.on("blur",".errored",function(){e()}),n.on("submit",i,function(t){var i=$(this),r=$("#account_errors"),o=$('<div class="spinner" />').spin("ksr","#fff");t.preventDefault(),e()&&(i.after(o),$.ajax({type:i.attr("method"),url:i.attr("action"),dataType:"json",data:i.serialize(),success:function(e){void 0!==e.error?(r.removeClass("hide").addClass("flash-error"),r.find("ul").html(e.error),$.scrollTo(r)):(r.addClass("hide").removeClass("flash-error"),n.closest("#account-setup-panel").html(e.data),$(window).trigger("project_edit:check_all_panels_for_completion"))},beforeSend:function(){n.addClass("loading")},complete:function(){n.removeClass("loading"),o.remove()}}))}),n.on("change",'input[name="account[type]"]',function(){var e=$(t+" #business_id_section");$("#account_type_business").is(":checked")?e.show():(e.hide(),e.find(":input").each(function(){$(this).data("validations",[])}))})}))})})(this),instrument_function(function(){$(function(){function e(){$("#account-setup-panel").trigger("project_build:refresh")}$("#account-setup-panel .NS_accounts__edit .account-pending").livequery(function(){$.pollster($(this).attr("data-url"),function(t){var n=t.state,i=t.identity.state;if("active"===n)growl({success:I18n.t("onloads.views.accounts.processing_state.Your_identity_and_banking_information_has_been_approved")});else if("verifying"===n){if("failed"!==i)return!1;growl({error:I18n.t("onloads.views.accounts.processing_state.We_need_more_information_to_verify_your_identity")})}return e(),!0})})})})(this),instrument_function(function(){$(function(){var e={};$(".NS-activity-card-_backing").livequery(function(){var t=$(this),n=t.data("project_id"),i=t.data("user"),r=e[n]||[],o=[i];_.each(r,function(e){e.$div.hide(),o.push(e.user)}),o.length>1&&(t.find(".js-backers").html(formatters.to_sentence(_.map(o,function(e){return'<a href="'+e.urls.web.user+'" class="link-green-dark bold">'+e.name+"</a>"}))),t.find(".js-avatar").replaceWith(render("activity/card/_backing_avatars",{backers:_.sample(o,3)}))),r.push({$div:t,user:i}),e[n]=r})})})(this),instrument_function(function(){$(function(){function e(e){var t=e.find(".timeline_header:first"),i=t.data("time_bucket");-1===n.indexOf(i)&&(n.push(i),t.find(".timeline_header_name:first").css({display:"block"}))}var t=$("body#activity_index");if(t.length){var n=[];$(".dashboard_activities .activity",t).livequery(function(){e($(this))}),$(document).on("click",".NS_post_likes__button form .js-like",function(){track("Activity Like")})}})})(this),instrument_function(function(){$(function(){$(document).on("click",".activity_mini_comment .excerpt a",function(e){e.preventDefault();var t=$(this),n=t.parents("blockquote.excerpt"),i=n.siblings("blockquote.everything");n.hide(),i.css("display","inline")})})})(this),instrument_function(function(){$(function(){var e=".NS_backer_backing_notes__form";$(document).on("submit",e,function(){var e=$(this);e.trigger("backer_backing_note:added",[e.data("backing_id"),e.find("textarea").val()])})})})(this),instrument_function(function(){$(function(){var e=$(".NS-backer_report__header");e.length&&($(document).on("submit","#send_message_dialog form.choose_tier",function(e){var t=$(this),n=t.find("option:selected"),i=n.data("reward_id"),r=n.data("backers_count"),o=n.data("minimum"),a=$("#send_message_dialog .reward_"+i);return e.preventDefault(),track("Message Tier Selected"),i?(t.find(".error").hide(),void(a.length?(t.hide(),a.show()):$.ajax({url:n.val(),type:"get",dataType:"html",beforeSend:function(e){e.setRequestHeader("Accept","text/javascript, */*")},success:function(e){a=$('<div class="reward reward_'+i+'">'+e+"</div>");var n=a.find("form");n.find("textarea").validates_presence(),n.on("submit",function(e){e.preventDefault(),n.validate()&&$.ajax({url:n.attr("action"),type:n.attr("method"),data:n.serialize(),dataType:"json",success:function(){var e=a.siblings(".success");a.hide(),a.find("textarea").val(""),e.find(".count").text(r),o?e.find(".tier").show().find(".money").text(current_project.get("currency_symbol")+parseInt(o,10)):e.find(".tier").hide(),e.show()}})}),t.hide(),t.closest(".modal_dialog_body").append(a),n.find("textarea").focus()}}))):void t.find(".error").show()}),$(document).on("submit","#send_message_dialog form.messages-new-box",function(){track("Message Tier Sent")}),$(document).on("click","#send_message_dialog span.cancel",function(){$("#send_message_dialog .choose_tier").show(),$("#send_message_dialog .reward").hide()}),$(document).on("click","#send_message_dialog .success .new_message",function(e){e.preventDefault(),track("Message Tier Another Message"),$("#send_message_dialog .choose_tier").show(),$("#send_message_dialog .success").hide()}))})})(this),instrument_function(function(){$(function(){function e(e,t){t.closest(i).addClass("generating"),$.pollster(e,function(e){return e.email_url&&$(i+" a.email_me").attr("href",e.email_url).show(),e.uploaded||"completed"===e.state?($(i+" .progress .bar").width("100%"),$(i+" .success a.download").attr("href",e.download_url),$(i).removeClass("generating").addClass("success"),!0):("undefined"!=typeof e.percent&&$(i+" .progress .bar").width(e.percent+"%"),!1)},{delay:500,continue_on_error:!0})}var t="body#backer_report_index",n=$(t),i=".NS-backer_report_export";n.length&&(n.on("submit",i+" form",function(t){var n=$(this),i=n.find("select").val(),r=n.find(".select").data("all_reports_url");t.preventDefault(),i&&("all"===i?(track("Backer Report Export",{export_type:"all"}),$.ajax({type:"post",url:r,dataType:"json",success:function(t){e(t.poll_url,n)}})):(track("Backer Report Export",{export_type:"tier"}),$.ajax({type:"get",url:i,data:"new=true",dataType:"json",success:function(t){e(t.poll_url,n)
}})))}),n.on("click",i+" a.email_me",function(e){e.preventDefault();var t=$(this);$.ajax({url:t.attr("href"),type:"post",dataType:"json",success:function(e){e&&200!==e.status?this.error():$(i+" .email_me_container").empty().html(I18n.t("onloads.views.backer_report.export.Well_send_you_an_email_when_this_report_is_ready"))},error:function(){$(i+" .email_me_container").empty().html(I18n.t("onloads.views.backer_report.export.There_was_an_error_requesting_the_email"))}})}),n.on("click",i+" a.reset",function(e){track("Backer Report Another Export"),$(i).removeClass("generating").removeClass("success"),$(i+" .email_me_container").empty().html(I18n.t("onloads.views.backer_report.export.Email_me_when_ready")),$(i+" .bar").css("width","0%"),e.preventDefault()}),n.on("click",i+" .export_warning .button",function(e){e.preventDefault();var t=$(this).closest(".export_warning");t.hide().next("form").show()}))})})(this),instrument_function(function(e){$(function(){function t(){return URI(History.getState().url)}function n(){$("form.term").term_form().bind("submit",function(e){e.preventDefault();var t=$(this);s.set_params(t.serialize_without_blank()),track("Backer Report Search",{term:t.find(":input").val()})})}function i(){var e=$(".dropdown a.selected"),t={};e.each(function(){var e=$(this);_.extend(t,URI(e.attr("href")).query(!0))}),s.set_params($.param(t),!0)}function r(e){e.is(".selected")||($("#main tbody tr").removeClass("selected"),e.addClass("selected"),u=!0,$(".NS_backers__info:visible").trigger("close").length&&e.find(".backer a").click(),u=!1,e.index()>e.parent().children().length-10&&!s.mobius.paused&&s.mobius.load_next())}function o(){var e=$("#main tbody tr.selected");r(e.length?e.next():$("#main tbody tr:first"))}function a(){var e=$("#main tbody tr.selected");r(e.length?e.prev():$("#main tbody tr:last"))}if(e.backers){var s,c=[],l=t(),u=!1,d=l.query(!0).show_responses||$.support.localStorage()&&localStorage.backer_report_show_responses;s=new Location(null,$("#main"),"backer_report/_index",{mobius_on:"backers"}),track("Backer Report View"),$.support.localStorage()&&_.has(l.query(!0),"show_responses")&&(localStorage.backer_report_show_responses=l.query(!0).show_responses),"string"==typeof d&&(d="true"===d),s.on_change_params(function(){c=[],n(),function(){var e=t().query(!0).reward_id,n=$(".NS-backer_report__header .remote_modal_dialog");e&&n.attr("href",URI(n.attr("href")).removeSearch("reward_id").addSearch("reward_id",e))}(),$("form.term .text").trigger("keydown"),s.get("params.reward_id")||"dropped"===s.get("params.status")||($("#reward, #reward_message, ul.dropdown li.all").remove(),$(".reward_tiers .title > span.reward b").text("All rewards"));var e=$("#main input[name=note]:visible, #main input[name=note_not]:visible");e.focus(),e.val(e.val()),s.change()}),$(document).on("click","#main table th",function(e){var n,i=$(this).data("sort"),r=t(),o=r.search(!0);i&&(e.preventDefault(),"asc"===o.asc_or_desc&&o.sort_by===i?(n="desc",r.removeSearch("asc_or_desc").addSearch("asc_or_desc",n)):(n="asc",r.removeSearch("asc_or_desc").addSearch("asc_or_desc",n)),r.removeSearch("sort_by").addSearch("sort_by",i),track("Backer Report Sort",{selected_sort:i,selected_order:n}),s.set_params(r.query()))}),s.on_change(function(){var e=$("#main");_.each(this.get("backers"),function(t){_.contains(c,t.id)||(c.push(t.id),t.project_is_successful="successful"===s.get("project.state"),t.show_responses=d,e.find("table tbody").append(render("backer_report/_row",t)))})}),$(window).on("statechange",function(){var e=History.getState().data;e&&("string"==typeof e.params&&s.set_params(e.params),"string"==typeof e.modal_url?$.open_remote_modal_dialog(e.modal_url):(u=!0,$(".modal_dialog:has(.NS_backers__info):visible").trigger("close"),u=!1))}),$(window).on("set_params",function(e,t){s.set_params(t)}),$(document).on("click","#main .dropdown a",function(e){var t=$(this),n=t.closest(".dropdown"),r=n.closest(".ksr-dropdown");n.find("a").removeClass("selected"),t.addClass("selected"),i(),e.preventDefault(),r.hasClass("reward_tiers")?track("Backer Report Reward Filter",{selected_tier:$.trim($(this).find("b").text())}):r.hasClass("views")&&track("Backer Report Views Filter",{selected_tier:$.trim($("#main .reward_tiers .title b").text()),selected_view:$.trim($(this).find("span").text())})}),$(document).on("keyup","form.facets input[name=note], form.facets input[name=note_not]",function(e){13===e.which&&$(this).trigger("change")}),$(document).on("click","#main table tbody tr a",function(){var e=$(this);r(e.closest("tr"))}),$(window).on("backer_completed",function(e,t,n){var i=$("#main table tbody tr td.completed a, .NS_backers__info a.completed_toggle").filter("[data-backer_id="+t+"]");i.toggleClass("completed",n)}),$(window).on("creator_backing_note:added",function(e,t,n){$("#main table tbody tr[data-backing_id="+t+"] td.notes a").text(n)}),$(window).on("message_sent",function(e,t,n){$("#main table tbody tr[data-backing_id="+t+"] td.actions a").html('<span class="ss-icon ss-mail"></span> ('+n+")")}),$(window).on("modal_dialog:opened",function(e){var n=$(e.target),i=n.data("modal_dialog");History.busy()||History.pushState({modal_url:i.remote_url},null,t().hash("").toString())}),$(window).on("modal_dialog:remote_dialog_loaded",function(e){var t=$(e.target),n=t.data("modal_dialog"),i=n.$elem.find("div[data-backing-id]").data("backing-id"),r=$('tr[data-backing_id="'+i+'"]'),s=r.prev("tr"),c=r.next("tr"),l=t.find(".NS_backers__info");c.length&&$('<a class="next button button_dark button_big" href="#"><span class="ss-icon ss-navigateright"></span></a>').click(function(e){e.preventDefault(),o(),track("Backer Info Modal Next",{event_type:"click"})}).prependTo(l.find(".controls")),s.length&&$('<a class="prev button button_dark button_big" href="#"><span class="ss-icon ss-navigateleft"></span></a>').click(function(e){e.preventDefault(),a(),track("Backer Info Modal Previous",{event_type:"click"})}).prependTo(l.find(".controls"))}),$(window).on("closed.modal_dialog",function(){if(!u){var e=$.param(s.get("params")),t=l.clone();History.pushState({params:e},null,t.query(e).hash("").toString())}}),$(window).on("keydown",function(e){if(!$(e.target).is(":input"))switch(e.keyCode){case KEY.J:case KEY.RIGHT:o(),track("Backer Info Modal Next",{event_type:"keyboard"});break;case KEY.K:case KEY.LEFT:a(),track("Backer Info Modal Previous",{event_type:"keyboard"});break;case KEY.ENTER:$(".NS_backers__info:visible").trigger("close").length||$("#main tbody tr.selected td.backer a").click()}}),s.set($.parseEscapedJSON(e.backers)),s.change_params(l.query()),e.backers=s}})})(this),instrument_function(function(){$(function(){var e=".NS_backers__info";$(document).on("click",e+" .pledge .reward_details",function(e){e.preventDefault();var t=$(this).closest(".pledge");t.find(".description").toggle(),t.find(".description_short").toggle(),t.trigger("resize")}),$(document).on("click",e+" a.completed_toggle, #backer_report_index #main table tbody tr td.completed a",function(e){var t,n=$(this),i=n.is(".completed");$.ajax({url:n.attr("href"),type:"put",dataType:"json",data:{"backer[completed]":!i},success:function(e){n.trigger("backer_completed",[n.data("backer_id"),!i,e.completed_at]),n.toggleClass("completed",!i),e.completed_at&&n.find("span.date").text(e.completed_at)}}),n.closest(".modal_dialog").length?t="backer_modal":n.closest("td.completed").length&&(t="backer_row"),i?track("Rewards Sent Unchecked",{context:t}):track("Rewards Sent Checked",{context:t}),e.preventDefault()}),$(document).on("click",e+" .tab-nav a",function(t){t.preventDefault();var n=$(this).attr("rel"),i=$("."+n);$(e+" .panel").hide(),i.show(),$(".tab-nav li").removeClass("selected"),$(this).closest("li").addClass("selected"),track("Backings Show Toggle Tab",{toggled_to:n})}),$(document).on("ksr_json:complete",e+" .messages_panel",function(){var e=$(this),t=e.find(".message").length+1;e.trigger("message_sent",[e.data("backing-id"),t])}),$(document).on("message_sent",e+" .messages_panel",function(t,n,i){var r=$(this);r.closest(e).find(".messages_link").html(I18n.t("onloads.views.backers.info.Messages_count",{count:i}))})})})(this),instrument_function(function(){$(function(){var e=$("body#backers_search"),t=$(".mobius",e).data("mobius");e.length&&"undefined"!=typeof t&&t.add_param("term",$("#main").data("term"))})})(this),instrument_function(function(){$(function(){var e=".NS_backings__info";$(document).on("click",e+" .tab-nav a",function(t){t.preventDefault();var n=$(this).attr("rel"),i=$("."+n);$(e+" .panel").hide(),i.show(),$(".tab-nav li").removeClass("selected"),$(this).closest("li").addClass("selected"),track("Backings Show Toggle Tab",{toggled_to:n})}),$(document).on("message_sent",e+" .messages_panel",function(t,n,i){var r=$(this);r.closest(e).find(".messages_link").html(I18n.t("onloads.views.backings.info.Messages_count",{count:i}))}),$(document).on("click",e+" .backing_completed form",function(t){var n=$(this),i=n.find("label.with_data"),r=n.find(".checkbox"),o=!i.data("completed");t.preventDefault(),$.ajax({url:n.attr("action"),data:{"backing[backer_completed]":o},dataType:"json",type:"PUT",success:function(t){n.trigger("backer_completed",[n.closest(e).data("backing_id"),t.backing.completed_at]),r.prop("checked",o),i.data("completed",o)}})})})})(this),instrument_function(function(e){$(function(){function t(){return URI(History.getState().url)}function n(e){return e.closest("section").data("collection_state")}function i(e){return e.closest("section").find("table")}function r(e){p.find("#backing_"+e.get("id")).each(function(){var t=$(this),i=n(t);t.replaceWith(o(e,i))})}function o(e,t){return render("backings/_row_"+t,presenters["backings/_row"]($.extend({},e.get())))}function a(e,t){return render("backings/_"+t,presenters["backings/_table"]($.extend({},e)),["backings/_row_"+t])}function s(e){i(e).removeClass("table_loading")}function c(e){i(e).addClass("table_loading")}function l(e){var t=i(e);return t.hasClass("table_loading")}function u(e){l(e)||e.is(".selected")||($("#main tbody tr").removeClass("selected"),e.addClass("selected"),g=!0,$(".NS_backings__info:visible").trigger("close").length&&e.find("a.more").click(),g=!1)}function d(){var e=$("#main tbody tr.selected");u(e.length?e.next():$("#main tbody tr:first"))}function f(){var e=$("#main tbody tr.selected");u(e.length?e.prev():$("#main tbody tr:last"))}var h,p=$("#backings_index"),m=["active","collected","uncollected"],g=!1,v=t(),y=150;if(p.length){p.on("backer_completed",function(e,t,n){var i=Backing.find(t);i.set("completed_at",n),r(i)});var b=!1;p.on("click","a.backer_completed_at",function(e){e.preventDefault(),setTimeout(function(){b=!0,e.target.checked=!e.target.checked,$(e.target).change()},0)}),p.on("change","a.backer_completed_at input.checkbox",function(e){if(!b)return void e.preventDefault();b=!1;var t=$(this),n=t.closest("a"),i=t.is(":checked");l(t)||$.ajax({url:n.attr("href"),data:{"backing[backer_completed]":i},dataType:"json",type:"PUT",success:function(e){e.backing&&n.trigger("backer_completed",[e.backing.id,e.backing.completed_at])}})}),p.on("message_sent",function(e,t,n){var i=Backing.find(t);i.set("messages",{count:n,last_activity_at:moment().unix()}),r(i)}),p.on("click","#main table tbody tr",function(e){var t=$(this),n=$(e.target);return l(t)?void e.preventDefault():void(n.closest("input, label, a.more, a.messages").length>0||(track("Backings Show Modal",{how_triggered:"row"}),t.find("td a.more").click()))}),p.on("click","a.more span.ss-icon",function(){track("Backings Show Modal",{how_triggered:"icon"})}),p.on("click","table th.sortable",function(e){var t=$(this),i=t.closest("table"),r=n(t),a=t.hasClass("asc")?"asc":"desc",l=Math.min(i.find("tbody tr").length,y),u=t.data("sort"),d=URI(i.data("url"));e.preventDefault(),track("Backings "+formatters.capitalize(r)+" Sort",{selected_sort:u}),d.addSearch({direction:a,sort:u,page:1,per_page:l}),h&&h.abort(),h=$.ajax({url:d.toString(),dataType:"json",beforeSend:function(){c(t)},complete:function(){s(t),h=void 0},success:function(e){var n;n=_.map(e.backings,function(e){return o(new Backing(e),r)}),i.find("tbody").html(n),i.data({sort:u,direction:a}),i.find("th").not(t).removeClass("active asc").addClass("desc"),t.addClass("active").removeClass(a).addClass("desc"===a?"asc":"desc"),i.find("tbody tr").length<e.total&&t.closest("section").find("a.show_more_backings").show()}})}),$(document).on("click","a.show_more_backings",function(e){var t=$(this),r=i(t),a=n(t),s=r.data("sort");e.preventDefault(),l(t)||(track("Backings "+formatters.capitalize(a)+" More",{selected_sort:s}),h&&h.abort(),h=$.ajax({url:r.data("url"),data:{direction:r.data("direction"),page:Math.floor(r.find("tbody tr").length/y)+1,per_page:y,sort:s},beforeSend:function(){t.addClass("loading")},complete:function(){t.removeClass("loading"),h=void 0},success:function(e){var i,a=n(t),s=r.find("tbody tr").length,c=0;y>s&&(c=s),i=_.chain(e.backings).rest(c).map(function(e){return o(new Backing(e),a)}).value(),r.find("tbody").append(i),r.find("tbody tr").length>=e.total&&t.hide()}}))}),$(window).on("statechange",function(){var e=History.getState().data;e&&("string"==typeof e.modal_url?$.open_remote_modal_dialog(e.modal_url):(g=!0,$(".modal_dialog:has(.NS_backings__info):visible").trigger("close"),g=!1))}),p.on("click","#main table tbody tr a.remote_modal_dialog",function(){u($(this).closest("tr"))}),$(window).on("modal_dialog:opened",function(e){var n=$(e.target),i=n.data("modal_dialog");History.busy()||History.pushState({modal_url:i.remote_url},null,t().hash("").toString())}),$(window).on("modal_dialog:remote_dialog_loaded",function(e){var t=$(e.target),n=t.data("modal_dialog"),i=n.$elem.find("div[data-backing_id]").data("backing_id"),r=p.find("#backing_"+i),o=r.prev("tr"),a=r.next("tr"),s=t.find(".NS_backings__info");a.length&&$('<a class="next button button_dark button_big" href="#"><span class="ss-icon ss-navigateright"></span></a>').click(function(e){e.preventDefault(),d()}).prependTo(s.find(".controls")),o.length&&$('<a class="prev button button_dark button_big" href="#"><span class="ss-icon ss-navigateleft"></span></a>').click(function(e){e.preventDefault(),f()}).prependTo(s.find(".controls"))}),$(window).on("closed.modal_dialog",function(){if(!g){var e=v.clone();History.pushState(null,null,e.hash("").toString())}}),$(window).on("keydown",function(e){if(!$(e.target).is(":input"))switch(e.keyCode){case KEY.J:case KEY.RIGHT:d();break;case KEY.K:case KEY.LEFT:f();break;case KEY.ENTER:$(".NS_backings__info:visible").trigger("close").length||$("#main tbody tr.selected td a.more").click()}}),_.each(m,function(t){var n=JSON.parse(_.unescape(e[t]));n.backings=_.map(n.backings,function(e){return new Backing(e)}),$("#"+t).append(a(n,t))})}})})(this),instrument_function(function(){$(function(){var e="#bank_account_container";$(e).length&&($(document).on("submit",e+" #bank_account_form",function(t){var n=$(e),i=$(e+" #bank_account_form"),r=$("#bank_errors",n),o=$('<div class="spinner" />').spin("ksr","#fff");t.preventDefault(),i.after(o),$.ajax({type:"post",url:i.attr("action"),dataType:"json",data:i.serialize(),success:function(e){void 0!==e.error?r.html(e.error).removeClass("hide"):n.closest("#account-setup-panel").html(e.data)},beforeSend:function(){n.addClass("loading")},complete:function(){n.removeClass("loading"),o.remove()}})}),$(document).on("change",e+" input#routing_number",function(){var t=$(e),n=$(e+" #bank_account_form"),i=$("#bank_errors",t),r=$('<div class="spinner" />').spin("ksr","#fff"),o=$("#cheque_example",t),a=$("#account_helper_text",t),s=$("input#routing_number",t),c=$("input#account_number",t),l=$("input#swift_number",t);n.after(r),$.ajax({type:"get",url:n.attr("action")+"/helper_text",dataType:"json",data:n.serialize(),success:function(e){void 0!==e.error?(s.val()&&i.html(e.error).removeClass("hide"),a.addClass("hide"),c.attr("disabled","disabled"),l.attr("disabled","disabled")):(i.addClass("hide"),o.html(e.example),a.html(e.helper).removeClass("hide"),c.removeAttr("disabled"),l.removeAttr("disabled"))},beforeSend:function(){t.addClass("loading")},complete:function(){t.removeClass("loading"),r.remove()}})}),$(e+" input#routing_number").livequery(function(){$(this).trigger("change")}))})})(this),instrument_function(function(){$(function(){var e=$("#NS_banners__password_reset");if(e.length){var t=!1,n=e.closest("li");if($.support.localStorage())try{t=localStorage.getItem("password_reset_dismissed")}catch(i){}t||n.show(),e.find("a.dismiss").on("click",function(e){try{localStorage.setItem("password_reset_dismissed",!0)}catch(t){}n.hide(),e.preventDefault()})}})})(this),instrument_function(function(){$(function(){var e,t,n=$("body#blog_posts_category");n.length&&(e=$("#sidebar",n),e.sticky_bar({parent:e.closest("#content")}),t=$(".mobius",n),$("div.load_more",n).show(),$("div.pagination",n).hide(),t.persistent_paging())})})(this),instrument_function(function(){$(function(){var e=$("body#checkouts_interstitial");e.length&&(e.on("click",".amazon-payments-logo",function(){track("Clicked Amazon Payments Logo")}),$(".amazon_payments_footer").click(function(){location.href=$(".amazon-link").attr("href")}))})})(this),instrument_function(function(){$(function(){var e=$("body#checkouts_thanks");e.length&&($(".short_url",e).click(function(){$(this).select(),track("Checkout Share",{share_type:"copy_link"})}),$(".verifying",e).livequery(function(){$.pollster($(this).data("poll_url"),function(e){return"verifying"!==e.state?(window.location.reload(),!0):void 0},{delay:2500})}),e.find(".js-facebook-share").click(function(e){if(e.preventDefault(),"undefined"!=typeof FB){$.ajax($(this).data("ks-share-url")),track("Checkout Show Share",{share_type:"facebook"});var t=$(this).attr("href");FB.ui({method:"share",href:t,display:"popup"},function(e){e&&"undefined"==typeof e.error_code?(growl({success:I18n.t("onloads.views.checkouts.thanks.Facebook_post_was_published")}),track("Checkout Share",{share_type:"facebook"})):growl({notice:I18n.t("onloads.views.checkouts.thanks.Facebook_post_was_not_published")})})}}),twttr.ready(function(t){t.events.bind("click",function(){track("Checkout Show Share",{share_type:"twitter"}),$.ajax(e.find(".js-twitter-share").data("ks-share-url"))}),t.events.bind("tweet",function(){track("Checkout Share",{share_type:"twitter"}),growl({success:I18n.t("onloads.views.checkouts.thanks.Your_tweet_was_posted")})})}))})})(this),instrument_function(function(){$(function(){var e=".NS_comments__comment";$(".js-could-have-comments").length&&($(document).on("click",e+" a.report_spam",function(e){e.preventDefault();var t=$(this),n=this,i=t.closest(".comment");$.modal_confirm(function(){return KsrJSON.get(t.data("url"),"post",i.find(".ajax-container"),n)},{message:I18n.t("onloads.views.comments.comment.We_review_all_reports_with_care_but_please_keep_in_mind"),title:I18n.t("onloads.views.comments.comment.Report_this_comment_to_Kickstarter"),confirm_text:I18n.t("onloads.views.comments.comment.Yes_report_as_spam")})}),$(document).on("ksr_json:complete",e+" .spam_reported",function(e,t){var n=$(this).closest(".comment"),i=n.find(".report_spam");i.hide(),200!==t.status||i.is(".admin")||n.find(".body").hide()}))})})(this),instrument_function(function(){$(function(){var e=$("form#new_comment");e.length&&e.on("click",":submit",function(t){if(current_project&&current_project.get("comments_loaded")&&current_project.get("comments_count")-current_project.get("comments_loaded")>50)return!0;t.preventDefault();var n=e.find("input.submit"),i=n.val(),r=$("#comments").find(".comments li:first"),o=_.reduce(e.serializeArray(),function(e,t){return e[t.name]=t.value,e},{});r.length&&current_project&&current_project.get("comments_loaded")&&(o.cursor=parseInt(r.attr("id").match(/\d+/)[0],10)),n.hasClass("disabled")||(n.addClass("disabled"),n.val(I18n.t("onloads.views.comments.form.Posting")),$.ajax({type:e.attr("method"),url:e.attr("action"),dataType:"json",data:o,success:function(t){var n=e.closest("#comments"),i=n.find(".list-comments"),r=n.find("header");_.isArray(t.flash)&&_.isArray(t.flash[0])&&(t.flash=_.object(t.flash)),growl(t.flash),t.html&&(e.each(function(){"undefined"!=typeof this.reset&&this.reset()}),i.length||(i=$('<ol class="list-comments click"><li class="page"><ol class="comments"></ol></li></ol>'),r.length?r.after(i):n.append(i)),t.comments_count&&current_project&&current_project.get("comments_loaded")&&(current_project.set("comments_loaded",current_project.get("comments_loaded")+$(t.html).length),current_project.set("comments_count",t.comments_count)),$("#project-edit-nav .preview .count").text(function(e,t){return parseInt(t,10)+1}),i.closest(".project_preview_comments").addClass("has_comments"),$("body#proposals_show").length?i.append(t.html):i.find(".page ol.comments").prepend(t.html))},complete:function(){n.removeClass("disabled"),n.val(i)}}))})})})(this),instrument_function(function(){!function(){$(".js-could-have-comments").length&&$(".load_new_comments").livequery(function(){function e(e){"undefined"==typeof e&&(e={});var t=e.comments_count||current_project.get("comments_count"),i=e.comments_loaded||current_project.get("comments_loaded"),r=t-i;n.text(r),s.find(".pluralize").text(formatters.pluralize("comment",r)),r>0?s.show():s.hide()}function t(e,t){var n,i=$(this),r=new URI(this.href).removeQuery("cursor").addQuery({cursor:e});"asc"===t&&r.addQuery({direction:t}),n=r.toString(),$.ajax({url:n,beforeSend:function(){i.addClass("loading")},complete:function(){i.removeClass("loading")},success:function(e){var n="asc"===t?"prepend":"append";"asc"===t&&current_project.set("comments_loaded",e.comments_count),current_project.set("comments_count",e.comments_count),$("ol.list-comments ol.comments:first")[n](e.comments)},error:function(){growl({error:I18n.t("onloads.views.comments.list.Sorry_we_couldnt_load_comments_just_now")})}})}var n,i,r,o,a,s=$(".load_new_comments");s.length&&(n=s.find("span.new_comments_count"),i=s.find("a"),r=$(".Project"+current_project.get("id")+'[itemprop="Project[comments_count]"]'),o=$.trim(r.text()),o=o.replace(/\D/g,""),current_project.set("comments_count",parseInt(o,10)),$(".latest_comment").livequery(function(){a||(a=!0,current_project.on_change("comments_count",e),current_project.on_change("comments_loaded",e)),current_project.set("comments_loaded",current_project.get("comments_count")),e()}),$(".earliest_comment").livequery(function(){$("a.older_comments").hide()}),$(".comment").livequery(function(){var e,t,n=$(this).find('[itemprop="Comment[created_at]"]'),i={};n.each(function(e,n){var r,o=$(n);o.attr("itemprop")&&(r=o.attr("itemprop").match(/Comment\[(\w+)\]/),r&&(i[r[1]]=JSON.parse(o.data("value")),t||(t=o.attr("class").match(/Comment(\d+)/)[1])))}),e=Comment.find(t)||new Comment({id:t}),e.set(i)}),i.click(function(e){if(!$(this).hasClass(".loading")){e.preventDefault();var n=$(".comments li:first");track("Project Comment Load New"),current_project.get("comments_count")-current_project.get("comments_loaded")>50?window.location.href=window.location.href:t.call(this,n.attr("id").match(/\d+/)[0],"asc")}}),$(document).on("click",".older_comments",function(e){e.preventDefault();var n=$(".comments li:last");!$(this).hasClass(".loading")&&n.length&&(track("Project Comment Load Older"),t.call(this,n.attr("id").match(/\d+/)[0],"desc"))}),$(".comment-moderation, .backer_info","ol.list-comments").livequery(function(){$(this).removeClass("hidden")}),$(document).on("submit","ol.list-comments form.delete_comment",function(e){e.preventDefault();var t=$(this),n=t.closest(".comment");$.ajax({url:t.attr("action"),dataType:"json",type:"delete",success:function(){n.hide(),$("#project-edit-nav .preview .count").text(function(e,t){return parseInt(t,10)-1}),$(".NS_comments__comment").length||$(".project_preview_comments").removeClass("has_comments")}})}))})}()})(this),instrument_function(function(){$(function(){var e="#company_form_section",t=$(e),n=e+" #company_submit",i=e+" #business_id_section";t.length&&($(document).on("change",e+' input[name="type"]',function(){$("#type_business").is(":checked")?$(i).show():$(i).hide()}),$(i+" :input:not(.optional)").validates_presence(),$(document).find(e+" #beneficiary_lookup_link").length&&($(document).on("change",e+' input[name="type"]',function(){$("#type_business").is(":checked")?$(n).addClass("disabled"):$(n).removeClass("disabled")}),$(document).on("input cut paste keydown",e+" #business_id",function(){$(n).addClass("disabled")}),$(document).on("click",e+" #beneficiary_lookup_link",function(t){var i=$(this),r=i.closest(e).find("form"),o=i.closest(e).find("#business_id"),a=i.closest(e).find("#business_id_section"),s=$('<p id="beneficiary_errors"/>'),c=i.closest(e).find("#beneficiary_lookup"),l=$('<div class="spinner" />').spin("ksr","#fff");return t.preventDefault(),s.empty(),c.empty(),o.validate()?void $.ajax({type:"get",url:i.attr("href"),dataType:"json",data:r.serialize(),success:function(e){void 0!==e.error?(a.find("#beneficiary_errors").remove(),a.prepend(s.html(e.error))):(a.find("#beneficiary_errors").remove(),c.html(e.data),$(n).removeClass("disabled"))},beforeSend:function(){i.after(l)},complete:function(){l.remove()}}):(a.find("#beneficiary_errors").remove(),void a.prepend(s.html(I18n.t("onloads.views.companies.form.Please_enter_a_Business_ID"))))})),$(document).on("submit",e+" form#company_form",function(e){var i=$(this),r=t.find("input.radio[name=type]:checked").val(),o=t.find("#business_id_section"),a=$('<p id="beneficiary_errors"/>'),s=$('<div class="spinner" />').spin("ksr","#fff");return e.preventDefault(),$(n).is(".disabled")?void e.preventDefault():"individual"!==r&&"business"!==r?void e.preventDefault():"business"!==r||o.validate()?void $.ajax({type:"post",url:i.attr("action"),dataType:"json",data:i.serialize(),success:function(e){void 0!==e.error?(o.find("#beneficiary_errors").remove(),o.prepend(a.html(e.error))):(a.remove(),i.closest("#account-setup-panel").html(e.data))},beforeSend:function(){i.after(s)},complete:function(){s.remove()}}):void e.preventDefault()}))})})(this),instrument_function(function(){$(function(){$(document).on("submit","#beneficiary_container form.beneficiary_reset",function(e){var t=$(this),n=$('<div class="spinner" />').spin("ksr","#fff");t.closest("#beneficiary_container").append(n),$.ajax({type:t.attr("method"),url:t.attr("action"),data:t.serialize(),dataType:"html",success:function(e){t.closest("#account-setup-panel").html(e)}}),e.preventDefault()})})})(this),instrument_function(function(){$(function(){var e="#tax_form_section",t=e+" #tax_id_section";$("#account-setup-panel").length&&$(document).on("submit",e+" form#tax_form",function(e){function n(e){r.find("#tax_errors").remove(),r.prepend(c.html(e))}var i=$(this),r=$(t),o=$(this).find("#tax_id"),a=o.data("field-name"),s=o.data("country-name"),c=$('<p id="tax_errors"/>'),l=$('<div class="spinner" />').spin("ksr","#fff");return e.preventDefault(),c.empty(),o.validates_presence(),o.validates_vat_format(),o.validate()?void $.ajax({type:"put",url:i.attr("action"),dataType:"json",data:i.serialize(),success:function(e){"undefined"==typeof e.error?(c.remove(),i.closest("#account-setup-panel").html(e.data)):(r.find("#tax_errors").remove(),r.prepend(c.html(e.error)))},beforeSend:function(){i.after(l)},complete:function(){l.remove()}}):void n(I18n.t("onloads.views.companies.tax_id_form.Field_is_not_in_a_valid_format_for_country",{field_name:a,country_name:s}))})})})(this),instrument_function(function(){$(function(){function e(){var e=$(window).height()-$("#header-wrap").height(),t=$(window).width(),i=t/e;n.css({height:e,"min-height":"660px"}),1.777777>i?n.find("video").css({height:e,width:"auto",left:"50%",top:0,"margin-top":0,"margin-left":-n.find("video").width()/2}):(n.find("video").css({height:"auto",width:t,left:0,"margin-left":0,top:"50%","margin-top":-n.find("video").height()/2}),620>e&&n.find("video").css({"margin-top":-360}))}var t=$("body#country_signups_netherlands"),n=t.find(".video-banner");t.length&&($(document).resize(function(){e()}),e())})})(this),instrument_function(function(){$(function(){var e=$("body.country_signups");e.length&&($("input#signup_email").validates_presence().validates_email(),$("form#new_signup").on("submit",function(e){var t=$(this);return e.preventDefault(),t.validate()?void $.ajax({url:t.attr("action"),data:t.serialize(),type:t.attr("method"),dataType:"json",success:function(){$(".submitting").hide(),$(".submitted").show()},error:function(){t.find("#signup_email").addClass("errored")}}):!1}),localStorage.banner_canada_hide=!0)})})(this),instrument_function(function(){$(function(){var e=".NS_creator_backing_notes__form";$(document).on("submit",e,function(){var e=$(this);"undefined"!=typeof ga&&ga("send","event","Backing Notes","Save",$("body").attr("id")),e.trigger("creator_backing_note:added",[e.data("backing_id"),e.find("textarea").val()])})})})(this),instrument_function(function(){$(function(){function e(){var e=!0;return $("#number").trigger("input"),$("#number.valid").length?$("#number").closest("li").removeClass("invalid"):(e=!1,$("#number").closest("li").addClass("invalid")),$(".required :input:not(#number)").each(function(){var t=$(this);t.is("#address_state_default")||($.trim(t.val())?t.closest("li").removeClass("invalid"):(t.closest("li").addClass("invalid"),e=!1))}),$("#cvc").each(function(){Stripe.card.validateCVC($(this).val())?$(this).closest("li").removeClass("invalid"):($(this).closest("li").addClass("invalid"),e=!1)}),$("#exp_month").each(function(){var t=$(this),n=t.val(),i=parseInt(n,10),r=$("#exp_year"),o=t.closest("li"),a=parseInt(r.val()+n,10);a<parseInt(o.data("min_date"),10)?(o.addClass("invalid"),e=!1):i>12||1>i?(o.addClass("invalid"),e=!1):o.removeClass("invalid")}),e}function t(){Stripe.setPublishableKey(d);var e,t=$("#address_country").val();"US"===t?e=$("#address_state_us").val():"CA"===t&&(e=$("#address_state_ca").val()),Stripe.card.createToken({name:$("input#name").val(),number:$("#number").val(),exp_month:$("#exp_month").val(),exp_year:$("#exp_year").val(),cvc:$("#cvc").val(),address_line1:$("#address_line1").val()||null,address_line2:$("#address_line2").val()||null,address_city:$("#address_city").val()||null,address_state:e||null,address_zip:$("#address_zip").val(),address_country:t||null},n)}function n(e,t){t.error?(clearTimeout(s),f.hide(),u.html(t.error.message),u.show()):i(t.id)}function i(e){var t=$("#reusable").is(":checked");$("input#stripe_token").val(e),$("input#stripe_reusable").val(t),$("#js-stripe_form").submit()}function r(){var e=$("#address_country").val(),t=$("#address_state_us");"US"!==e&&"CA"!==e?t.closest("li").hide().removeClass("required").find("select").attr("disabled",!0):(t.closest("li").show().addClass("required").find("select").hide().attr("disabled",!0),"US"===e?(t.closest("li").find("label").text("State"),t.show().attr("disabled",!1)):(t.closest("li").find("label").text("Province"),$("#address_state_ca").show().attr("disabled",!1)))}function o(e){var t="000";return/^(511071011|511071013|511071014|511071015|511106|511271000|511271010|511271015|511271020|511271025|511271030|511271035|511271040|511271045|511271050|511271055|511271060|511271065|514792221|514793221|515115011|515115012|515115013|515115014|515115015|515115017|515115040|515115050|515115060|515115070|515115080|515115090|515115100|515115110|515115120|515115130|515116002|51512107|51512117|51512123|515267|515400|519110002|520569000|520569001|520569002|520569003|520569004|520569005|520569006|520569007|520569008|520569009|52056901|52056902|52056903|52056904|52056905|52056906|52056907|52056908|520569090|520569091|520569092|520569093|520569094|520569095|520569096|520569097|520569099|5205691|5205692|5205693|5205694|5205695|5205696|5205697|5205698|5205699|520830|522087|522091|523947|525802|528155|52921518|529235|529373000|529373010|529373015|529373020|529373025|529373030|529373035|529373040|529373045|529373050|529373055|529373060|529373065|530571|5307441|5307442|5307443|5307444|5307445|5307446|5307447|5307448|5307449|532573|532574|532578|534085514|534090|534091|534092|534093|534094|534095|534096|534097|534098|534099|539052|53967700|53967701|53967702|53967703|53967704|53967705|53967706|53967707|53967708|53967709|539696|540761|541094034|541094035|541094036|541094038|541094041|541094043|541094057|541094059|541094064|541094090|541094108|541094124|541094125|541094129|541094138|541094139|541094145|541094151|541094152|541094153|541094154|541094159|541094165|541094166|541094169|541094186|541094192|541094193|541094194|541094195|541094205|541094206|541094227|54357127|54357128|54357129|5435713|5435714|5435715|5435716|5435717|5435718|5435719|545391|545433|545729|5464002|546432000|546432001|546432002|546432003|546432004|546432005|546432006|546432007|546432008|546432009|54643201|54643202|54643203|54643204|54643205|54643206|54643207|54643208|54643209|5464321|5464322|5464323|5464324|5464325|5464326|5464327|54643280|54643281|54643282|54643283|54643284|546432850|546432851|546432852|546432853|546432854|546432855|546432856|546432857|546432858|546432859|54643286|54643287|54643288|54643289|54643290|54643291|54643292|54643293|54643294|54643295|54643296|54643297|54643298|54643299|547195108|547195163|550917|551033545|553103|553104|553725591|553783053|554563|554587|557187|557205031|557549|5586741|5586742|5586743|5586744|5586745|5586746|5586747|5586748|5586749)/.test(e)?t="042":/^(400115|400837|400838|400839|401773|412921|412922|412923|419740|419741|419773|419774|419775|424519|444000|484406|484407|484411|484419|484420|484422|484426|484430|484431|484432|484441|488061|491731|491734|491735|491736|491740|491746|491754|491755|491758)/.test(e)?t="033":/^5[1-5]/.test(e)?t="mastercard":/^4/.test(e)?t="visa":/^3[47]/.test(e)&&(t="american_express"),t
}function a(e){return-1!==_.indexOf(["visa","mastercard","american_express"],e)}var s,c=$("#credit_card_form.js-ksr-stripe"),l=$("#credit_card_form form"),u=$("#credit_card_form").find(".errored"),d=l.attr("data-public-key"),f=$("#saving-layer"),h=3e4;c.length&&(l.on("submit",function(n){e()?(u.hide(),f.show(),t(),n.preventDefault(),s=setTimeout(function(){f.find(".modal_dialog_body").html(I18n.t("onloads.views.credit_cards_form.Well_this_is_embarassing_Processing_your_pledge")),f.removeClass("spinning"),$.ajax({url:"/client_error",type:"post",data:{error:"stripe timeout",url:window.location.toString()}})},h)):n.preventDefault()}),$(document).on("change","#address_country",r),r(),$("#number",c).on("keyup input paste cut",function(){var e=$(this),t=e.val().replace(/[^0-9]/g,""),n=o(t),i=Stripe.card.validateCardNumber(t),r=$("ul#js-card_type_list");i&&a(n)?(e.addClass("valid"),e.closest("li").removeClass("invalid"),r.addClass("selected").children().removeClass("selected").filter(".js-"+n).addClass("selected")):(e.removeClass("valid"),r.removeClass("selected").children().removeClass("selected"))}),function(){var e=$(".no_stored_cards form"),t=$(".selected input.card_toggle");$("#credit_card_form .errored").not(".hide").length&&(t=$("#new-card input.card_toggle")),t.length||(t=$("input.card_toggle:first")),$(document).on("change click","input.card_toggle",function(t){t.preventDefault();var n,i=$(this),r=$("#new_card_form");i.is("input.card_toggle")||(i=i.find("input.card_toggle")),n=$("input.card_toggle").not(i),n.prop("checked",!1),i.prop("checked",!0),n.closest(".payment_option").removeClass("selected"),i.closest(".payment_option").addClass("selected"),i.closest("#new-card").length?(r.slideDown(400,"easeOutQuad"),e=r.find("form")):(r.slideUp(400,"easeOutQuad"),e=i.closest("form"))}),$(document).on("click",".pledge-submit",function(t){e.submit(),t.preventDefault()}),t.prop("checked",!0).trigger("change")}())})})(this),instrument_function(function(){$(".NS-curated_page_projects-new").livequery(function(){var e=$(this),t=e.find("form.curated_pages_form"),n=parseInt($("div.blurb .character_counter .number:first",e).text(),10);$(".blurb textarea",e).validates_max_length().validates_presence(),$(".blurb",e).on("validate:invalid",function(){$(this).addClass("errored")}),$(document).on("validate:valid",".blurb, .meta h1",function(){$(this).removeClass("errored")}),$("div.blurb",e).on("keypress cut paste input",function(){var e=$(this),t=e.find("textarea").val().length,i=n-t;e.find("textarea").validate(),e.find(".character_counter .number").text(i)}),e.find(".save").click(function(){var e=t.find(".buttons .loading");$("div.blurb textarea").validate()&&(e.show(),$.ajax({type:t.attr("method"),url:t.attr("action"),data:t.serialize(),dataType:"json",global:!1,success:function(n){t.trigger("close.modal_dialog"),t.trigger("project_added_to_curated_page",[n]),e.hide()}}))}),e.find(".cancel").click(function(){$(this).trigger("close.modal_dialog")})})})(this),instrument_function(function(){$(function(){function e(){$(".js-project").each(function(e){$(this).find("input.text").val(e+1)})}var t=$("#curated_pages_reorder");t.length&&($(".js-project input.text").on("blur",function(){var t=$(this),n=parseInt(t.val(),10),i=t.closest(".js-project");isNaN(n)||($(".js-project").not(i).eq(n-1).before(i),e())}).on("focus",function(){this.select()}),t.find("form ol").sortable({containment:"document",tolerance:"pointer",items:"> li",stop:e}))})})(this),instrument_function(function(){$(function(){var e=$("#curated_pages_show"),t="#curated_pages_show form.curated_pages_form",n=$(t);n.length&&(!function(){function i(e){var t=e.siblings(".value"),n=e.children("span.add_prompt");if(!t.siblings("textarea:visible, input:visible").length)return""===$.trim(t.text())?(n.show(),e.addClass("empty")):(n.hide(),e.removeClass("empty")),e}function r(){var e=$("li.curated_page_project:visible:not(.new)"),t=e.length-e.find("div.blurb.errored").length;return""===$.trim($("#curated_page_title:not(:visible)").val())?!1:""===$.trim($("#curated_page_description:not(:visible)").val())?!1:1>t?!1:!0}function o(){var e=$(".submit.launch, #add_shortcut_url");r()?e.removeAttr("disabled").removeClass("disabled"):e.attr("disabled",!0).addClass("disabled")}function a(e){var t=$('<div class="buttons"></div>'),n=e.val(),i=$('<div class="save button button_green button_small">'+I18n.t("onloads.views.curated_pages.show.Save")+"</div>"),r=$('<div class="cancel button button_small">'+I18n.t("onloads.views.curated_pages.show.Cancel")+"</div>"),o=$('<span class="loading icon-loading-small"></span>');return i.click(function(){e.trigger("close")}),r.click(function(){e.val(n),e.trigger("close")}),o.hide(),t.append(i),t.append(r),t.append(o),t}function s(e){var t={};return e.data("livesearch_result")?(t.html=e.data("livesearch_result").html,t.id=e.data("livesearch_result").id):(t.html=e.data("html"),t.id=e.data("id")),t.card='<div class="project-card-wrap">'+$(t.html).find("div.project-card-wrap").html()+"</div>",t}var c,l=$("#main.published"),u=$("ul.project-card-list.live",e),d=$(".tools .delete").closest("form"),f=!!l.length,h=".find_projects .project-results ul.result_list li",p=$(".find_projects .project-results ul.result_list",e).clone(),m=$(".find_projects .project-results div.instructions",e).clone(),g=!!p.length;$(document).on("form_synced","form.header_form",function(e,t){var n,r=$(this);t.curated_page&&t.curated_page.description&&(n=r.find(".description .value").html(t.curated_page.description),i(n.siblings(".edit_prompt")))}),$(document).on("form_synced","li.curated_page_project > form",function(e,t){var n,r=$(this);t.curated_page_project&&t.curated_page_project.blurb&&(n=r.find(".blurb .value").html(t.curated_page_project.blurb),i(n.siblings(".edit_prompt")))}),e.on("click",".value:not(.image), .edit_prompt",function(){function e(t){t.target===n[0]||$(t.target).is("a.cancel, a.save")||$(document).off("click",e)}var t=$(this),n=$(this).siblings("input, textarea");n.is(":visible")||(n.show().focus(),n.parent().append(a(n)),setTimeout(function(){$(document).on("click",e)},100),t.is(".empty")?t.find(".add_prompt").hide():t.hide(),t.siblings(".value").hide(),t.trigger("field_opened"))}),$(".edit_prompt",n).each(function(){i($(this))}),e.on("close","input:not(.not_edit_in_place), textarea",function(){function e(){r.show(),f||n.show(),t.siblings(".buttons").remove(),t.hide(),t.trigger("field_closed")}var t=$(this),n=t.siblings(".edit_prompt"),r=t.siblings(".value");return t.validate()?void(t.is("textarea")?(t.siblings(".buttons").find(".loading").css("display","inline-block"),t.closest("form").sync_form({success:function(t){t.valid&&e()},complete:function(){t.siblings(".buttons").find(".loading").hide()}})):(r.text(t.val()),i(n),e(),t.closest("form").sync_form())):void t.focus()}),$(document).on("keydown",t+" input:not(.not_edit_in_place)",function(e){13===e.keyCode&&(e.preventDefault(),$(this).trigger("close")),27===e.keyCode&&(e.preventDefault(),$(this).siblings(".buttons").find(".cancel").click())}),$(document).on("click","li.curated_page_project a.remove",function(e){e.preventDefault();var t,n,i=$(this),r=i.closest("form"),a=parseInt(r.find("input.project_id").val(),10);p.find("li").each(function(){$(this).attr("data-id")===a&&$(this).show()}),r.sync_form({type:"delete",success:function(){n&&i.closest("li.curated_page_project").remove(),t=!0}}),i.closest("li.curated_page_project").fadeOut(function(){o(),t&&$(this).remove(),n=!0})}),$(".blurb textarea, .meta .description textarea").livequery(function(){$(this).validates_max_length().validates_presence()}),$("#curated_page_title").data("validations",[[function(e){return e.length||!f?!0:!1}]]),$(document).on("field_opened",".blurb",function(){$(this).find(".label").show(),$(this).find(".character_counter").show()}),$(document).on("field_closed",".blurb",function(){$(this).find(".label").hide(),$(this).find(".character_counter").hide()}),$(document).on("field_opened",".meta .description",function(){$(this).find(".character_counter").show()}),$(document).on("field_closed",".meta .description",function(){$(this).find(".character_counter").hide()}),$(document).on("validate:invalid",".blurb, .meta h1, .meta .description",function(){$(this).addClass("errored")}),$(document).on("validate:valid",".blurb, .meta h1, .meta .description",function(){$(this).removeClass("errored")}),$(document).on("keypress cut paste input field_opened","div.blurb, .meta .description",function(e){var t=$(this),n=t.find("textarea").val().length,i=parseInt(t.find("textarea").data("maxlength"),10)-n;"field_opened"!==e.type&&t.find("textarea").validate(),t.find(".character_counter .number").text(i)}),$(document).on("form_synced","li.curated_page_project",function(e,t){var n=$(this),i=n.find("form");t.valid&&(i.attr("action",t.url),i.attr("method","put"),i.find("#curated_page_project_id").val(t.curated_page_project.id),n.css("border","0"))}),$(document).on("click",".image a.remove",function(e){e.preventDefault();var t=$(this);$.ajax({url:t.attr("href"),type:"delete",dataType:"text",contentType:"application/x-www-form-urlencoded",success:function(e){var n=t.closest(".image");n.find("img").attr("src",e)}})}),e.on("click",".add_project",function(){var e=$(this).closest("li.curated_page_project").find(".find_projects");e.show(),e.find(".input-search").focus()}),$(document).on("livesearch:soft_select livesearch:unselect",h,function(e){var t,n,i=$(this),r=$(this).closest("li.curated_page_project").find(".project");if("livesearch:soft_select"===e.type){if(t=s(i),!t.card)return;n=$(t.card),r.children(".add_project").hide(),r.find(".project-card-wrap").remove(),r.append(n)}else r.find(".project-card-wrap").remove(),r.children(".add_project").show()}),$(document).on("livesearch:selected",h,function(e){e.preventDefault();var t,n,i=$(this),r=s(i),o=$('<li class="curated_page_project">'+r.html+"</li>"),a=i.closest("li.curated_page_project");i.trigger("livesearch:unselect"),p.find("li").each(function(){$(this).attr("data-id")===r.id&&$(this).hide()}),g?(a.find("ul.result_list").replaceWith(p.clone()),a.find(".project-results > h2").text("My Backed Projects"),c.bind_results()):(a.find("ul.result_list").empty().before(m.clone()),a.find(".project-results > h2").text("Adding Projects")),c.livesearch.last_search=!1,a.find("input.input-search").val("").blur(),t=a.find("input.exclude"),n="",u.children("li.curated_page_project").each(function(){var e=$(this).find("input.project_id").val();e&&(n+=e+",")}),n+=o.find("input.project_id").val(),t.val(n),a.hide(),a.after(o),o.find(".blurb .value").click()}),$(document).on("livesearch:results",".find_projects",function(){$(this).find(".project-results > h2").text("Search Results"),$(this).find(".project-results > .instructions").remove()}),$(".find_projects input.input-search").livequery(function(){var e=$(this),t=$(this).siblings("input.exclude"),n=e.siblings(".ss-search");c=e.livesearch_input_dropdown({url:e.data("livesearch-url"),serialize:e.add(t),cancel_copy:"",client_side_cache:!1,update_input:!1,return_name_from_result:function(e){return e.name}}).data("livesearch.input_dropdown"),e.on("livesearch:searching",function(){n.removeClass("ss-search").addClass("icon-loading-small")}),e.on("livesearch:results livesearch:ajax_error",function(){n.removeClass("icon-loading-small").addClass("ss-search")})}),$(document).on("form_synced",o),o(),f&&($(document).on("mouseenter","li.curated_page_project, .image.value",function(){$(this).find("a.remove").show()}).on("mouseleave","li.curated_page_project, .image.value",function(){$(this).find("a.remove").hide()}),$(document).on("mouseenter","ul.project-card-list.live .value, .value ~ textarea, .value ~ input",function(){$(this).siblings(".edit_prompt").show()}).on("mouseleave",".value, .value ~ textarea, .value ~ input",function(){$(this).siblings(".edit_prompt:not(.empty)").hide()})),$(document).on("click","#new_root_slug .cancel",function(e){e.preventDefault(),$(this).trigger("close.modal_dialog")}),$(document).on("submit","#new_root_slug",function(e){e.preventDefault();var t=$(this),n=t.find(".shortcut.url");n.addClass("processing"),n.removeClass("invalid"),n.find(".error_message").text(""),$.ajax({url:t.attr("action"),type:t.attr("method"),data:t.serialize(),dataType:"json",success:function(e){if(n.removeClass("processing"),e.valid){t.trigger("close.modal_dialog");var i=$(".tools .launch");i.length&&i.closest("form").submit(),$("#add_shortcut_url").replaceWith('<a class="button button_red shortcut_url" href="'+e.url+'">'+e.url+"</a>")}else t.removeClass("submitting-non-ajax"),n.addClass("invalid"),n.find(".error_message").text(e.errors.slug[0])}})}),d.confirm_submit({title:I18n.t("onloads.views.curated_pages.show.Delete_your_Curated_Page"),copy:I18n.t("onloads.views.curated_pages.show.Are_you_sure_you_want_to_delete_your_current_Curated_Page"),yes_copy:I18n.t("onloads.views.curated_pages.show.Yes_delete"),no_copy:I18n.t("onloads.views.curated_pages.show.Nevermind")})}(),$(".js-add_project").on("click",function(e){var t=$("li.new");t.is(":visible")?t.hide():t.show().find(".add_project").click(),e.preventDefault()}))})})(this),instrument_function(function(){$(function(){var e,t=$("body.discover"),n=$(".mobius",t);t.length&&n.length&&(e=$("#sidebar",t),e.sticky_bar({parent:e.closest("#content")}),$("div.load_more",t).show(),$("div.pagination",t).hide(),n.persistent_paging())})})(this),instrument_function(function(){$(function(){function e(){var e=t.find("ul.expanded");t.height(e.length?Math.max(r.height(),e.height()):r.height())}var t=$("#NS_discover__categories");if(t.length){var n=t.find(".categories"),i=t.find(".subcategories_container"),r=t.find(".root-categories");n.find("> li > a").on("click",function(r){var o=$(this),a=o.closest("li"),s=a.data("category")||{},c=s.id||0,l=t.find("#category_"+c+"_subcategories");n.find(".selected").removeClass("selected"),a.addClass("selected"),i.find("ul.expanded").removeClass("expanded"),l.addClass("expanded"),l.length?(t.addClass("expanded"),l.find("li.subcategory > a").first().trigger("click")):($(document).trigger("discovery:categories:changed",s),t.trigger("ksr_popover:close"),t.removeClass("expanded")),device_idioms["not-mobile"]&&e(),r.preventDefault()}),i.find("li > a").on("click",function(e){var n=$(this),i=n.closest("li"),r=n.closest("ul"),o=i.data("category");r.find(".selected").removeClass("selected"),i.addClass("selected"),$(document).trigger("discovery:categories:changed",o),t.trigger(e.originalEvent?"ksr_popover:close":"ksr_popover:reposition"),e.preventDefault()}),t.on("ksr_popover:opened",function(){device_idioms["not-mobile"]&&e()}),$(document).on("discovery:sentence:changed",function(e,n){n.category_id||(t.removeClass("expanded").find(".selected, .expanded").removeClass("selected expanded"),t.find("li:first").addClass("selected"))}),$(document).on("discovery:categories:load_sample",function(e,n){var i=(n.category||{}).id;t.find("#category_"+i).trigger("click")})}})})(this),instrument_function(function(){$(function(){function e(){var e={};return e.term=r.val(),e.staff_picks=a.is(".selected"),e.starred=s.is(".selected"),e.social=c.is(".selected"),e.backed=l.is(".selected"),e.state=u.find("select").val(),e.goal=d.find("select").val(),e.pledged=f.find("select").val(),e.raised=h.find("select").val(),e.tag_id=(p.find(".selected").data("tag")||{}).id,e}function t(e){r.val(e.term),e.staff_picks?a.addClass("selected"):a.removeClass("selected"),e.starred?s.addClass("selected"):s.removeClass("selected"),e.social?c.addClass("selected"):c.removeClass("selected"),e.backed?l.addClass("selected"):l.removeClass("selected"),p.find(".selected").removeClass("selected"),p.find("#tag_"+(e.tag_id||0)).addClass("selected"),u.find("select").ksr_val(e.state||""),d.find("select").ksr_val(e.goal||""),f.find("select").ksr_val(e.pledged||""),h.find("select").ksr_val(e.raised||"")}var n=$("#NS_discover__filters");if(n.length){var i,r=n.find(".search_term input"),o=n.find(".featured"),a=o.find(".staff_picks"),s=o.find(".starred"),c=o.find(".social"),l=o.find(".backed"),u=n.find(".states"),d=n.find(".goals"),f=n.find(".pledged"),h=n.find(".raised"),p=n.find(".tags");r.on("cut paste input keydown",function(t){t.keyCode===KEY.ENTER?(n.trigger("ksr_popover:close"),$(document).trigger("discovery:filters:changed",e())):-1===_.indexOf(KEY.NOT_INPUT,t.keyCode)&&($(document).trigger("discovery:filters:term_changed",e()),n.trigger("ksr_popover:reposition"))}),o.find("li > a").on("click",function(t){var i=$(this),r=i.closest("li");r.toggleClass("selected"),$(document).trigger("discovery:filters:changed",e()),n.trigger("ksr_popover:reposition"),t.preventDefault()}),p.find("li > a").on("click",function(t){var i=$(this),r=i.closest("li");r.siblings(".selected").removeClass("selected"),r.toggleClass("selected"),$(document).trigger("discovery:filters:changed",e()),n.trigger("ksr_popover:reposition"),t.preventDefault()}),n.find("select").on("change",function(){$(document).trigger("discovery:filters:changed",e()),n.trigger("ksr_popover:reposition")}),$(document).on("discovery:sentence:changed",function(e,n){t(n)}),$(document).on("discovery:sentence:term_changed",function(e,t){r.val(t.term)}),$(document).on("discovery:filters:load_sample",function(e,n){var i=(n.tag||{}).id;t({tag_id:i})}),n.on("ksr_popover:opened",function(){i=r.val()||"",device_idioms["not-touchable"]&&r.focus()}),n.on("ksr_popover:closed",function(){var t=r.val()||"";$.trim(t)!==$.trim(i)&&($(document).trigger("discovery:filters:changed",e()),n.trigger("ksr_popover:reposition"))})}})})(this),instrument_function(function(){$(function(){function e(){$.each(a,function(){$(this).css({height:$(this).find("a").outerHeight(!0)})}),$.each(s,function(){$(this).find("a.current").closest(".js-category").addClass("has-children-is-current"),$(this).closest(a).width($(this).find("a.current .js-name-prop").outerWidth()),$(this).css({marginTop:-$(this).find("a.current").position().top,opacity:1})})}var t=$(".NS_discover__hero");if(t.length){var n=t.find(".js-category-title"),i=t.find(".js-sort-title"),r=t.find(".js-colloquial-title"),o=t.data("category"),a=t.find(".js-interactive-title"),s=t.find(".js-interactive-title-group"),c=t.find(".js-interactive-title-content-fade"),l=$("#NS__discover_advanced_sentence");a.length&&(window.setTimeout(function(){e()},300),a.find("a").on("click",function(e){$(".interactive-title-group-visible").length||($(this).closest(a).find(".js-interactive-title-content-fade").fadeIn(300),l.length&&l.removeClass("clip"),e.preventDefault()),a.not($(this).closest(a)).addClass("other-interactive-title-group-visible"),$(this).closest(a).addClass("interactive-title-group-visible"),track("Discover Switch Modal",{modal_type:$(this).closest(a).data("modal_type")})}),c.on("click",function(e){a.not($(this).closest(a)).removeClass("other-interactive-title-group-visible"),$(this).closest(a).removeClass("interactive-title-group-visible"),$(this).fadeOut(200),l.length&&l.addClass("clip"),track("Discover Switch Modal Close"),e.preventDefault()}),$(document).resize(function(){e()})),t.find("a.subcategory").on("click",function(e){var i=$(this),r=$(this).data();i.hasClass("current")?(i.removeClass("current"),n.is(":visible")&&$(document).trigger("discovery:hero:unselect_subcategory",r),track("Discover Subcategory Deselected",namespace_keys("discover_category",r)),$(document).trigger("discovery:sentence:update_params",{category_id:r.parent_id||r.id})):(i.siblings().removeClass("current"),i.addClass("current"),$(document).trigger("discovery:hero:select_subcategory",r),$(document).trigger("discovery:sentence:update_params",{category_id:r.id}),track("Discover Subcategory Selected",namespace_keys("discover_category",r))),$(document).scrollTop()<t.offset().top&&$.scrollTo(t.offset().top,300,"easeOutExpo"),e.preventDefault()}),t.find(".js-back-to-category").on("click",function(e){n.show(),i.show(),r.hide(),$(document).trigger("discovery:sentence:load_sample",{category_id:o.parent_id||o.id,sort:"magic"}),$(document).trigger("discovery:hero:back_to_category"),t.find("a.subcategory.current").trigger("click"),track("Discover Back to Category Clicked",namespace_keys("discover_category",o)),e.preventDefault()}),$(document).on("discovery:hero:update_colloquial_sentence",function(e,n){t.find(".js-colloquial-title-text").text(n)}),$(document).on("discovery:landing:see_more",function(){n.hide(),i.hide(),r.show()}),$(".js-refine-and-sort").on("click",function(){o&&track("Discover Refine Search Clicked",namespace_keys("discover_category",o))})}})})(this),instrument_function(function(){$(function(){var e=$("#NS_discover__landing");if(e.length){var t=$(".js-discover-module-title"),n=t.find(".js-title"),i=t.find(".js-explore"),r=e.data("category");t.on("mouseenter",function(){$(this).find(i).show(),$(this).css({height:$(this).find(n).outerHeight()}),$(this).find(n).css({marginTop:-$(this).find(n).outerHeight()})}),t.on("mouseleave",function(){$(this).find(n).css({marginTop:0})}),e.find(".js-see-more").on("click",function(e){var t=$(this),n=t.attr("href"),i=URI(n).query(!0),o=t.closest("[data-type]").data("type");i.category_id=r.id,i.sort=i.sort||"magic",$(document).trigger("discovery:sentence:load_sample",i),$(document).trigger("discovery:landing:see_more"),track("Discover Category See More Clicked",_.extend(namespace_keys("discover_category",r),{discover_module_type:o})),e.preventDefault()})}})})(this),instrument_function(function(){$(function(){function e(){r&&r.abort(),s.addClass("loading"),clearTimeout(a),a=setTimeout(function(){r=$.ajax({url:s.attr("action"),dataType:"json",data:s.serialize(),success:function(e){s.addClass("results_visible"),l.empty(),_.each(e.locations,function(e){l.append(render("discover/_search_location_li",e))}),i.find("ul.locations").addClass("results_visible"),track("Discover Location Search Results",{discover_location_search_term:c.val(),discover_location_search_hits:e.total_hits})},complete:function(){s.removeClass("loading"),r=!1}})},h)}function t(){n(current_location.get())}function n(e){var t=$(render("discover/_location_li",e));d.empty(),u.children("li:not(:first-child)").remove(),u.append(t),f.find("li.selected").removeClass("selected"),t.addClass("selected"),$(document).trigger("discovery:locations:updated",e),$(document).trigger("discovery:locations:changed",e),o&&o.abort(),o=$.ajax({url:e.urls.web.location,dataType:"json",success:function(e){d.children().remove(),_.each(e.nearby_locations,function(e){d.append(render("discover/_location_li",e))}),u.children("li:not(:first-child)").remove(),_.each(e.ancestor_locations.reverse(),function(e){u.append(render("discover/_location_li",e))}),u.append(t),$(document).trigger("discovery:locations:updated",e)},complete:function(){o=!1}})}var i=$("#NS_discover__locations");if(i.length){var r,o,a,s=i.find("form"),c=s.find("input"),l=s.find("ul.results"),u=i.find(".broader-locations ul"),d=i.find(".nearby-locations ul"),f=i.find(".broader-locations ul, .nearby-locations ul"),h=500;s.on("submit",function(e){e.preventDefault()}),f.on("click","li > a",function(e){var t=$(this),n=t.closest("li"),r=n.data("location")||{};f.find(".selected").removeClass("selected"),n.addClass("selected"),$(document).trigger("discovery:locations:changed",r),i.trigger("ksr_popover:close"),e.preventDefault()}),c.on("blur",function(){setTimeout(function(){s.removeClass("results_visible")},500)}),c.on("cut paste input keydown",function(t){t.keyCode===KEY.ESC?($(this).val(""),s.removeClass("results_visible")):-1===_.indexOf(KEY.NOT_INPUT,t.keyCode)&&e()}),i.on("ksr_popover:opened",function(){device_idioms["not-touchable"]&&c.focus()}),i.find(".current_location").on("click",function(e){t(),c.val(""),track("Discovery Current Location Click",{discover_used_html5:!1}),e.preventDefault()}),l.on("click","li > a",function(e){var t=$(this),i=t.closest("li"),r=i.data("location")||{};n(r),s.removeClass("results_visible"),track("Discover Location Search Click",{discover_location_search_term:c.val()}),e.preventDefault()}),$(document).on("discovery:sentence:changed",function(e,t){i.find(".selected").removeClass("selected"),t.woe_id&&parseInt(t.woe_id,10)>0?i.find("#location_"+t.woe_id).addClass("selected"):i.find("li:first").addClass("selected")}),$(document).on("discovery:locations:load_sample",function(e,t){t.location&&n(t.location),e.preventDefault()})}})})(this),instrument_function(function(){$(function(){function e(e){return $('<span class="text">'+e+"</span>")}function t(e,t){return $('<span class="inline-block mobile-block"></span>').append(e).append(t)}function n(n){var r=$("<div></div>"),o=[],a=[];n=n||i(),n.state=n.state||"all",n.term=$.trim(n.term||""),r.append(e(I18n.t("onloads.views.discover.sentence.Show_me"))),"all"===n.state&&0===n.term.length?(r.append(d),r.append(e(I18n.t("onloads.views.discover.sentence.projects"))),d.find("option:first").data("alt-label","all")):("all"!==n.state&&r.append(v),n.term.length>0&&r.append(u),r.append(e(I18n.t("onloads.views.discover.sentence.projects_in"))),r.append(d),d.find("option:first").data("alt-label",I18n.t("onloads.views.discover.sentence.All_Categories"))),n.category_id&&parseInt(n.category_id,10)>0?(d.addClass("selected"),d.find("select").ksr_val(n.category_id)):(d.removeClass("selected"),d.find("select").ksr_val("0")),v.find("select").ksr_val(n.state),u.find("input").val(n.term),u.find(".term").text(n.term),n.woe_id&&parseInt(n.woe_id,10)>0?(k.addClass("selected"),k.find("select").ksr_val(n.woe_id),r.append(t(e(I18n.t("onloads.views.discover.sentence.from")),k))):(k.removeClass("selected"),k.find("select").ksr_val("0"),r.append(t(e(I18n.t("onloads.views.discover.sentence.on")),k))),n.tag_id>0&&(g.find("select").ksr_val(n.tag_id),r.append(t(e(I18n.t("onloads.views.discover.sentence.tagged_with")),g))),n.staff_picks&&o.push(f),n.social?o.push(m):m.find("select").ksr_val("1"),n.starred?o.push(h):h.find("select").ksr_val("1"),n.backed?o.push(p):p.find("select").ksr_val("1"),o=_.compact(o),o.length>0&&(r.append(o[0]===p||o[0]===h?e(I18n.t("onloads.views.discover.sentence.that")):e(I18n.t("onloads.views.discover.sentence.that_are"))),r.append(o)),_.isUndefined(n.pledged)||_.isNull(n.pledged)||""===n.pledged||(b.find("select").ksr_val(n.pledged),a.push(b)),_.isUndefined(n.goal)||_.isNull(n.goal)||""===n.goal||(y.find("select").ksr_val(n.goal),a.push(y)),_.isUndefined(n.raised)||_.isNull(n.raised)||""===n.raised||(w.find("select").ksr_val(n.raised),a.push(w)),a.length>0&&r.append(t(e(I18n.t("onloads.views.discover.sentence.with")),a)),x.find("select").ksr_val(n.sort),r.append(t(e(I18n.t("onloads.views.discover.sentence.sorted_by")),x)),c.children().detach(),c.empty(),c.html(r)}function i(){var e=URI("?"+c.serialize()).query(!0);return e.category_id=e.category_id&&parseInt(e.category_id,10),e.tag_id=e.tag_id&&parseInt(e.tag_id,10),e.woe_id=e.woe_id&&parseInt(e.woe_id,10),e}function r(e){var t={discover_interaction_param:e.param,discover_interaction_action:e.action,discover_interaction_value:e.value};_.extend(t,namespace_keys("discover",i())),track("Discover Sentence Parameter Interaction",t)}function o(){s.css({height:S.outerHeight()}),setTimeout(function(){s.addClass("transition-all-bezier"),C.removeClass("hide"),s.css({height:l.outerHeight()}),T.css({marginTop:-S.outerHeight()})},1),setTimeout(function(){T.addClass("hide"),s.removeClass("transition-all-bezier"),s.css({height:"auto"}),C.aria_set_visible(),T.aria_set_hidden()},1e3)}function a(){s.css({height:l.outerHeight()}),setTimeout(function(){T.removeClass("hide"),s.addClass("transition-all-bezier"),s.css({height:S.outerHeight()}),T.css({marginTop:0})},1),setTimeout(function(){C.addClass("hide"),s.removeClass("transition-all-bezier"),s.css({height:"auto"}),C.aria_set_hidden(),T.aria_set_visible()},1e3)}var s=$("#NS__discover_advanced_sentence");if(s.length){var c=s.find("form"),l=s.find(".js-sentence"),u=s.find(".filter.search"),d=s.find(".filter.category"),f=s.find(".filter.staff_picks"),h=s.find(".filter.starred"),p=s.find(".filter.backed"),m=s.find(".filter.social"),g=s.find(".filter.tag"),v=s.find(".filter.state"),y=s.find(".filter.goal"),b=s.find(".filter.pledged"),w=s.find(".filter.raised"),k=s.find(".filter.location"),x=s.find(".filter.sorts"),j=s.find(".js-close"),C=$(".js-sentence-container"),S=$(".js-category-hero"),T=$(".NS_discover__hero");$(document).on("discovery:filters:term_changed",function(e,t){$.trim(t.term).length&&u.closest(c).length?u.find("input").val(t.term).siblings(".term").text(t.term):n(_.extend(i(),{term:t.term}))}),$(document).on("discovery:categories:changed",function(e,t){d.find("select").ksr_val(t.id||0),n(),$(document).trigger("discovery:sentence:changed",i())}),$(document).on("discovery:locations:changed",function(e,t){k.find("select").ksr_val(t.id||0),n(),$(document).trigger("discovery:sentence:changed",i())}),$(document).on("discovery:sorts:changed",function(e,t){x.find("select").ksr_val(t),n(),$(document).trigger("discovery:sentence:changed",i())}),$(document).on("discovery:locations:updated",function(e,t){k.find("select").children().remove(),k.find("select").append(render("discover/_location_options",t)),k.find("select").ksr_val(t.id)}),$(document).on("discovery:filters:changed",function(e,t){n(_.extend(i(),t)),$(document).trigger("discovery:sentence:changed",i())}),s.find("#filters").on("click",function(e){track("Discovery Add Filter Pressed"),e.preventDefault()}),s.on("change","select",function(){var e=$(this);n(),$(document).trigger("discovery:sentence:changed",i()),r({param:e.attr("name"),action:"change",value:e.val()})}),s.on("click",".filter .ss-delete",function(e){var t=$(this);t.closest(".filter").detach(),n(),$(document).trigger("discovery:sentence:changed",i()),r({param:t.siblings("input").attr("name"),action:"remove"}),e.preventDefault()}),s.on("keypress cut paste input blur",".search span[contenteditable]",function(e){var t=$(this),o=t.siblings("input"),a=$.trim(t.text()||"");"blur"===e.type||"focusout"===e.type?(n(),r({param:o.attr("name"),value:o.val(),action:"change"})):"keypress"!==e.type||e.keyCode!==KEY.ENTER&&e.keyCode!==KEY.TAB?(o.val(a),$(document).trigger("discovery:sentence:term_changed",i())):(t.blur(),e.preventDefault())}),s.find(".term").on("focus",function(){u.addClass("focused")}).on("blur",function(){u.removeClass("focused")}),$(document).on("discovery:sentence:changed",function(){C.is(":visible")&&j.hide()}),$(document).on("discovery:sentence:load_sample",function(e,t){n(t),$(document).trigger("discovery:sentence:changed",i())}),$(document).on("discovery:sentence:update_params",function(e,t){var r=_.extend(i(),t);n(r),$(document).trigger("discovery:sentence:changed",r)}),$(document).on("discovery:sentence:show_sentence",function(){o(),j.hide()}),n(),T.length&&(s.find(".js-sentence-edit").on("click",function(e){o(),e.preventDefault()}),j.on("click",function(e){a(),track("Discover Sentence Close Clicked"),e.preventDefault()}))}})})(this),instrument_function(function(){$(function(){var e=$("#NS_discover__sorts");e.length&&(e.find("li > a").on("click",function(t){var n=$(this),i=n.closest("li");e.find(".selected").removeClass("selected"),i.addClass("selected"),$(document).trigger("discovery:sorts:changed",i.data("sort")),e.trigger("ksr_popover:close"),t.preventDefault()}),$(document).on("discovery:sentence:changed",function(t,n){e.find(".selected").removeClass("selected"),e.find('li[data-sort="'+(n.sort||"magic")+'"]').addClass("selected")}),$(document).on("discovery:sorts:load_sample",function(t,n){e.find(".selected").removeClass(),n.sort?e.find('li[data-sort="'+n.sort+'"]').addClass("selected"):e.find('li[data-sort="magic"]').addClass("selected")}))})})(this),instrument_function(function(e){$(function(){function t(e){return render("discover/_project_baseball_card_li",e,"projects/_baseball_card_tall")}function n(e,n){var i=(n||{}).append_results;i||(h.children().remove(),k=e.seed,x=[],p.show(),h.siblings(".title").find(".count").text(formatters.format_number(e.total_hits,0)+formatters.pluralize(" project",e.total_hits)).siblings(".category").hide()),e.projects.length>0?(o(),_.each(e.projects,function(e){-1===_.indexOf(x,e.id)&&(h.append(t(e)),x.push(e.id))})):(p.hide(),i||r())}function i(e){e=e||URI("?"+f.serialize()).query(!0),e=_.pick(e||{},_.filter(_.keys(e),function(t){return!!e[t]})),s&&s.abort(),l.addClass(1===v?"loading":"loading-pagination"),clearTimeout(c),c=setTimeout(function(){s=$.ajax({url:"/discover/advanced?google_chrome_workaround&page="+v,data:e,dataType:"json",success:function(t){n(t,{append_results:v>1}),t.projects.length<20&&p.hide(),$(document).trigger("discovery:hero:update_colloquial_sentence",t.colloquial_title),t.colloquial_title?History.replaceState({},t.colloquial_title+" \u2013 Kickstarter","/discover/advanced?"+$.param(e)):History.replaceState({},I18n.t("onloads.views.discover.advanced.Discover_Projects_Kickstarter"),"/discover/advanced?"+$.param(e))
},complete:function(e){0!==e.status&&l.removeClass("loading loading-pagination"),s=!1}})},y)}function r(){var t=URI().query(!0);l.addClass("no_results"),(t.social||t.backed||t.starred)&&_.isUndefined(e.current_user)?(l.find(".requires_login_empty_state").show(),l.find(".general_empty_state").hide()):(l.find(".requires_login_empty_state").hide(),l.find(".general_empty_state").show())}function o(){l.removeClass("no_results")}var a=$("#discover_advanced");if(a.length){var s,c,l=a.find("#advanced_container"),u=$(".NS_discover__hero"),d=a.find("#NS_discover__landing"),f=$("#NS__discover_advanced_sentence").find("form"),h=a.find("#projects_list"),p=a.find(".load_more"),m=a.find(".NS_discover__spotlight_projects"),g=a.find(".NS_discover__footer"),v=1,y=500,b=URI().query(!0)||{},w=b.ref,k=h.data("seed"),x=[];x=_.map(h.find("> li > .project-card-wrap"),function(e){return $(e).data("project").id}),p.on("click",function(e){v+=1,i(),h.children().show(),e.preventDefault()}),a.find(".login, .signup").on("click",function(e){window.location=$(this).data("url")+"?then="+encodeURIComponent(window.location.href),e.preventDefault()}),a.find("li.sample_search a").on("click",function(e){var t=$(this).closest("li").data("sample")||{};t.category_id=(t.category||{}).id,t.location_id=(t.location||{}).id,t.tag_id=(t.tag||{}).id,$(document).trigger("discovery:sentence:load_sample",t),$(document).trigger("discovery:categories:load_sample",t),$(document).trigger("discovery:locations:load_sample",t),$(document).trigger("discovery:sorts:load_sample",t),$(document).trigger("discovery:filters:load_sample",t),$(document).trigger("discovery:sentence:show_sentence",t),d.hide(),m.hide(),g.hide(),track("Discovery Sample Sentence Click",{discover_sample_sentence_ref:t.mp_ref}),e.preventDefault()}),a.on("click",".project-card-wrap .project-meta li a",function(e){var t=$(this).data("location");$(document).trigger("discovery:locations:load_sample",{location:t}),w="city",track("Discover Baseball Card Location Clicked"),e.preventDefault()}),$(document).on("discovery:sentence:changed",function(e,t){w=!1,1===parseInt(t.social,10)?h.addClass("social"):h.removeClass("social"),0===t.category_id?(d.hide(),m.hide()):f.is(":visible")&&(d.remove(),m.remove()),v=1,i(t)}),$(document).on("discovery:sentence:term_changed",function(e,t){v=1,i(t)}),$(document).on("discovery:hero:select_subcategory",function(){d.hide(),m.hide()}),$(document).on("discovery:hero:unselect_subcategory discovery:hero:back_to_category",function(){d.show(),m.show()}),$(document).on("discovery:landing:see_more",function(){d.hide(),$.scrollTo(u.offset().top,500,"easeOutExpo")}),device_idioms.mobile||($("#projects_list").waypoint(function(e){"down"===e?$(".js-back-to-top").fadeIn():"up"===e&&$(".js-back-to-top").fadeOut("fast")}),$(".js-back-to-top a").on("click",function(e){$.scrollTo(a.find("#NS__discover_advanced_sentence").offset().top,1e3,"easeOutExpo"),e.preventDefault()}));var j=h.children().length;j||r(),8>j&&p.hide()}})})(this),instrument_function(function(){$(function(){function e(e){e=e||{},h=!0,u.cycle({autoHeight:0,timeout:0,slides:".slide",speed:600,fx:"scrollHorz",easing:"easeOutExpo",startingSlide:e.starting_slide||u.children().length-1,next:a.find(".js-next"),prev:a.find(".js-previous"),allowWrap:!1,log:!1})}function t(){h=!1,u.cycle("destroy")}function n(){var n=$(window).width();h&&f>n?t():!h&&n>=f&&e()}function i(){var e=l.find(".js-adjective").eq(m);l.find(".js-adjective").removeClass("active"),e.addClass("active"),c.css({height:e.outerHeight(!0),width:e.find("span").width()}),l.css({top:-e.position().top})}function r(){clearInterval(s),s=setInterval(function(){o()},5e3)}function o(){m+=1,m>=l.find(".js-adjective").length&&(m=0),i()}var a=$("body#discover_index");if(a.length){var s,c=a.find(".js-adjectives-container"),l=a.find(".js-adjectives-list"),u=a.find(".slides"),d=a.find(".js-potd"),f=640,h=!1,p=!0,m=6;u.on("cycle-before",function(n,i){p&&2===i.nextSlide&&$.ajax({url:d.data("potds"),data:{page:parseInt(u.children().length/10+1,10)},dataType:"json",success:function(n){p=10===n.results.length,t();var i=u.children().length;_.each(n.results,function(e){u.prepend(e)});var r=u.children().length;e({starting_slide:r-i+2})}})}),u.on("cycle-next",function(e,t){track("Discover POTD Next Clicked",{discover_potd_slide:u.children().length-1-t.nextSlide})}),u.on("cycle-prev",function(e,t){track("Discover POTD Previous Clicked",{discover_potd_slide:t.slideCount-1-t.nextSlide})}),device_idioms["not-touchable"]&&skrollr.init({forceHeight:!1}),$(document).resize(function(){n(),i()}),window.setTimeout(function(){c.removeClass("opacity-0"),i()},500),n(),r()}})})(this),instrument_function(function(){$(function(){$("#dmca_claims_new").length&&($("#claimer_type_owner").click(function(){$("#part_b").show(),$("#owner_name").hide(),$("#none_of_above_error").hide(),$("#dmca_claim_owner_name").val("")}),$("#claimer_type_representative").click(function(){$("#part_b").show(),$("#owner_name").show(),$("#none_of_above_error").hide()}),$("#claimer_type_none").click(function(){$("#part_b").hide(),$("#none_of_above_error").show()}),$('input.radio[id^="claimer_type"]').each(function(e,t){t.checked&&t.click()}))})})(this),instrument_function(function(){$(function(){var e=$("body.email_previews");return e.length?(e.find("#index").on("change",function(){this.submit()}),void e.find("#show").on("submit",function(t){t.preventDefault(),e.find("#email_preview").attr("src",$(t.target).attr("action")+"?"+$(t.target).serialize())})):!1})})(this),instrument_function(function(){$(function(){var e=$("body.events");e.length&&$(".js-scroll_to").on("click",function(e){e.preventDefault(),$.scrollTo($(this).attr("href"),1e3,{easing:"swing"})})})})(this),instrument_function(function(){$(function(){var e=$("body#events_blockparty.not-touchable");e.length&&skrollr.init()})})(this),instrument_function(function(){$(function(){var e=$("body#events_filmfest2014");if(e.length){var t=document.location.protocol+"//",n="embed.vhx.tv",i=function(e,i){var r={},o=$('iframe[src*="'+n+'"]');"undefined"==typeof i&&(i=null),r=JSON.stringify({method:e,params:i}),o.length&&o[0].contentWindow.postMessage(r,t+n)},r={play:function(){i("play")},pause:function(){i("pause")},seekTo:function(e){"undefined"==typeof e&&(e=null),i("seekTo",e)}};$(window).on("message",function(e){var i;if(e.originalEvent.origin===t+n)switch(i=JSON.parse(e.originalEvent.data),i.event_type){case"start":track("2014 Kickstarter Film Festival Start Program");break;case"play":track("2014 Kickstarter Film Festival Play Program");break;case"pause":track("2014 Kickstarter Film Festival Pause Program");break;case"finish":track("2014 Kickstarter Film Festival Finish Program");break;case"fullscreen":track("2014 Kickstarter Film Festival Fullscreen Program")}}),track_links(".download_booklet","2014 Kickstarter Film Festival Download Booklet"),$(".js-open_video").on("click",function(e){var t=$(this),n=t.closest("section");n.find(".js-content").fadeOut(600,function(){n.closest("section").find(".js-video").fadeIn(function(){var e=URI(),t=$('<iframe width="100%" height="auto" frameborder="0" webkitallowfullscreen="" src="//embed.vhx.tv/videos/8138?parent_url='+e.protocol()+"://"+e.host()+'" mozallowfullscreen="" id="host_player" class="video" allowfullscreen=""></iframe>');$(this).find(".videowrapper").html(t),t.on("load",function(){r.play()})})}),e.preventDefault()}),$(".js-video_close").on("click",function(e){var t=$(this),n=t.closest("section");n.find(".js-video").fadeOut(600,function(){n.closest("section").find(".js-content").fadeIn()}),r.pause(),e.preventDefault()})}})})(this),instrument_function(function(){$(function(){var e=$("body#events_filmfest2014_brooklyn");e.length&&track_links(".download_booklet","2014 Kickstarter Film Festival Download Booklet")})})(this),instrument_function(function(){$(function(){function e(e){$(e).each(function(){(new Image).src=this})}var t=$("#events_fourth_birthday");t.length&&($("#the_right_way").hover(function(){$("body").addClass("reveal")},function(){$("body").removeClass("reveal")}),e(["https://d3mlfyygrfdi2i.cloudfront.net/5429/rsvp-awful.gif"]))})})(this),instrument_function(function(){$(function(){var e=$("body#events_projectjam");e.length&&$(document).on("click",".signup_tout",function(){$("html, body").animate({scrollTop:$("#signup").offset().top},300)})})})(this),instrument_function(function(){$(function(){function e(e){i.removeClass("current"),r.find('a[data="'+e+'"]').addClass("current")}var t=$("#faqs_show"),n=t.find(".sidebar"),i=$(".subcat").find("a"),r=t.find("a.anchor.current").siblings(".subcat-list"),o=!1;t.length&&(n.sticky_bar({parent:n.closest(".main")}),i.on("click",function(){var t=$(this).attr("data");o=!0,e(t),$.scrollTo("#"+t,800,{easing:"easeOutExpo",onAfter:function(){o=!1}})}),n.find("a.anchor.current").siblings(".subcat-list").find("li:first-child a").addClass("current"),$(".list-faqs > li").waypoint(function(){o||e($(this).attr("id"))}))})})(this),instrument_function(function(){$(function(){var e=".NS-features__toggle";$(document).on("click",e+" a",function(t){t.preventDefault();var n=$(this),i=n.closest(e),r=i.hasClass("featured"),o=n.closest("form");$.ajax({type:r?"delete":"post",url:o.attr("action"),data:o.serialize(),dataType:"json",success:function(e){e.featured?i.addClass("featured"):i.removeClass("featured"),e.remove_featurings_path&&i.find(".featured form").attr("action",e.remove_featurings_path)}})})})})(this),instrument_function(function(){$(function(){var e=$(".js-could-have-report-project");if(e.length){var t="#project-issues form",n=t+" .expandable";e.on("click",n,function(e){e.stopPropagation(),$(this).trigger("ksr_expand:activate")}),e.on("ksr_expand:activate",n,function(e){e.stopPropagation();var t=$(this),n=t.children(".detail");t.children(".choice").find("input.radio").prop("checked",!0),n.show(),t.find("textarea,select,input:not(.radio)").prop("disabled",!1),n.find("textarea").focus(),t.siblings(".expandable").trigger("ksr_expand:deactivate")}).on("ksr_expand:deactivate",n,function(e){e.stopPropagation();var t=$(this),n=t.children(".detail");n.hide(),t.find("textarea,select,input:not(.radio)").prop("disabled",!0).blur()})}})})(this),instrument_function(function(){$(function(){var e=$(".NS-follows-_follow_button");e.on("mouseenter",".friend_button.following",function(){$(this).closest(".ajax-container").hasClass("loading")||($(this).addClass("unfollow"),$(this).text("Unfollow"))}).on("mouseleave",".friend_button.following",function(){$(this).closest(".ajax-container").hasClass("loading")||($(this).removeClass("unfollow"),$(this).text("Following"))}),e.on("click",".friend_button.follow",function(){$(this).text("Following")}),e.on("click",".friend_button.following",function(){$(this).text("Follow")}),e.on("mouseenter",".friend_button.blocked",function(){$(this).closest(".ajax-container").hasClass("loading")||$(this).text("Unblock")}).on("mouseleave",".friend_button.blocked",function(){$(this).closest(".ajax-container").hasClass("loading")||$(this).text("Blocked")}),e.on("click",".friend_button.blocked",function(){$(this).removeClass("blocked"),$(this).text("Follow")})})})(this),instrument_function(function(){$(function(){var e=$(".NS-forms_categorization_field");e.length&&e.each(function(){function e(e){var t=$('<a class="remove" href="#">'+I18n.t("onloads.views.forms.categorization_field.remove")+"</a>");e.append(t)}var t=$(this),n=t.find(".template"),i=t.find("ol.selected");i.find("li").each(function(){e($(this))}),i.on("click","a.remove",function(e){var t=$(this).closest("li"),n=t.find(".destroy");e.preventDefault(),t.fadeOut(function(){n.length?n.val("1"):t.remove()})}),t.find(".new a").on("click",function(e){e.preventDefault(),i.append(n.clone_form_template())})})})})(this),instrument_function(function(){$(function(){$(".ajax-container .async-reload").livequery(function(){function e(){$.ajax({url:window.location.href,data:{format:"json"},dataType:"json",success:function(n){var i=KsrJSON.parse_response(n,t);t.trigger("after_asyncreload"),304===i.status&&setTimeout(e,1e3)}})}var t=$(this).closest(".ajax-container");e()}),$(document).on("click",".friend .block_user",function(){$(this).hide(),$(this).parent().find(".friend_button").removeClass("follow").removeClass("following").addClass("blocking").text("Blocked")})})})(this),instrument_function(function(){$(function(){var e,t=$("#friends_ticker_wrap");t.length&&(e=$("#friends_ticker_wrap"),e.sticky_bar({parent:$("body"),attach_to:"bottom"}),$(document).on("click",".friend_button.follow",function(){$("#friends_ticker_wrap").is(":hidden")&&($("#friends_ticker_wrap").slideDown("fast"),setTimeout(function(){$(document).trigger("shifted")},100))}))})})(this),instrument_function(function(){$(function(){var e,t,n,i=$("#friends_find, #friends_index, #friends_projects, #friends_following, #friends_followers, #friends_blocked, #friends_opt_out");i.length&&($(document).on("mobius:loaded_page",".friends.ajax-container",function(){$(document).trigger("shifted")}),n=[[0,40,80,120,160,200,240,280,320,360,400,440],[440,480,520,560,600,640,680,720,760,800,840],[840,880,920,960,1e3,1040,1080,1120,1160,1200,1240],[1240,1280,1320,1360,1400,1440,1480,1520,1560,1600,1640],[1640,1680,1720,1760,1800,1840,1880,1920,1960,2e3],[2e3,2040,2080,2120,2160,2200,2240,2280,2320,2360,2400],[2440,2480,2520,2560,2600,2640,2680,2720,2760,2800],[2800,2840,2880,2920,2960,3e3,3040,3080,3120,3160,3200,3240],[3240,3280,3320,3360,3400,3440,3480,3520,3560,3600,3640],[3640,3680,3720,3760,3800,3840,3880,3920,3960,4e3,4040],[4040,4080,4120,4160,4200,4240,4280,4320,4360,4400,4440,4480],[4440,4480,4520,4560,4600,4640,4680,4720,4760,4800,4840,4880]],e=$("#friends_ticker .ticker.backed_projects",i).ticker({framesets:n}).data("ticker"),t=$("#friends_ticker .ticker.followed_people",i).ticker({framesets:n}).data("ticker"),$(".spinner").livequery(function(){$(this).spin("ksr","#d9d9de")}),$(document).on("before_ksrjson",".friend.ajax-container",function(n,i,r){var o=$(r),a=parseInt($(this).find(".follow_status").data("backed_projects"),10);o.hasClass("block_user")||(o.hasClass("follow")?(e.write(parseInt(e.read(),10)+a),t.write(parseInt(t.read(),10)+1)):o.hasClass("following")&&(e.write(parseInt(e.read(),10)-a),t.write(parseInt(t.read(),10)-1)))}),$("form.edit_user input.checkbox").change(function(){$(this).closest("form").submit()}),$("form.edit_user").submit(function(e){$.ajax({type:this.method,url:this.action,data:$(this).serialize(),beforeSend:function(e){e.setRequestHeader("Accept","text/javascript"),$("form.edit_user").removeClass("highlight").removeClass("animate")},error:function(){},success:function(){$("form.edit_user").addClass("highlight").addClass("animate")}}),e.preventDefault()}))})})(this),instrument_function(function(e){!function(){function t(e){var t;e.project?(t=Project.find(e.project.id),t?t.set(e.project):t=new Project(e.project),window.current_project=t):Project.find(e.id)&&(t=Project.find(e.id),t.set(e),window.current_project=t)}function n(e,t){"function"==typeof e.offset&&(e=e.offset().top),"undefined"==typeof t&&(t={}),_.defaults(t,{close_enough:100});var n=Math.max.apply(this,$("html, body").map(function(e,t){return t.scrollTop}).get()),i=n+$(window).height()-t.close_enough<e,r=n>e+t.close_enough;(t.force||i||r)&&$("html, body").animate({scrollTop:e-20},500,"easeOutExpo")}function i(){var e;return"string"==typeof u?u:_.isObject(u)?(e=_.keys(u)[0],_.compact([e,u[e].id]).join("_")):void 0}function r(){$("#open_ticket .container").find(".success, .error").remove()}function o(){return moment()-l}function a(e,t){track("Contact "+e,_.extend({time_on_page:o()},h,f.data,t))}var s,c,l,u,d=$("#funnels_contact"),f=new Model,h={texts_loaded:0},p=0,m=!0,g=!0;d.length&&(l=moment(),e.funnel_user&&("undefined"==typeof e.funnel_user._broadcast&&("string"==typeof e.funnel_user&&(c=JSON.parse(_.unescape(e.funnel_user))),c=new User(c)),h.uid=c.get("id"),"string"==typeof funnel_user_backings&&(e.funnel_user_backings=JSON.parse(_.unescape(funnel_user_backings)),p=_.compact(funnel_user_backings).length,c._broadcast({backings_fetched:funnel_user_backings})),"string"==typeof funnel_user_created_projects&&(e.funnel_user_created_projects=JSON.parse(_.unescape(funnel_user_created_projects)),c._broadcast({created_projects_fetched:funnel_user_created_projects})),a("Page Load"),History.Adapter.bind(window,"statechange",function(){var e=_.extend({topic:null,subject:null,funnel:null},History.getState().data);g&&(m=!1,e.subject||"pledge"!==e.topic&&"project"!==e.topic||f.set("topic",null),f.set(e),m=!0)}),f.on_change(function(e){if(m){var t,n=_.pick(e,"funnel","subject","topic");_.each(n,function(e,n){e&&(t=n)}),t&&(g=!1,History.pushState(this.data,"",""),g=!0)}}),f.on_change({topic:function(e){var t,i,r=$('a[data-topic="'+e.topic+'"]');if($("#summary, #pledge_project_summary, #answers").addClass("hide"),d.find(".options li").removeClass("current"),f.set("subject",null),r.length)if($("#funnels_main").addClass("started"),a("Select Topic"),t=r.closest("li"),t.addClass("current"),r.is('[data-subjects="true"]')){if(i=new URI(r.attr("href")),1===$("#"+i.fragment()+" li").length)return void $("#"+i.fragment()).find('li a[data-fetch="subject"]').click();$("#subjects").show(),n($("#subjects")),$(".side").addClass("hide"),$("#"+i.fragment()).removeClass("hide")}else $("#subjects").hide(),u={},u[$.trim(r.text())]={},"subject"===r.data("fetch")&&(m=!1,f.set("subject",r.attr("href")),m=!0);else $("#funnels_main").removeClass("started"),$("#subjects").hide(),$("#new_zendesk_ticket").removeClass("open closed none")},subject:function(e){$("#text").html("");try{delete window.current_project}catch(i){window.current_project=void 0}if(!e.subject)return $("#pledge_project_summary").addClass("hide"),$("#pledge_project_summary .container").html(""),$("#answers").addClass("hide"),void $("#funnels").html("");a("Select Subject");var r=new URI(window.location.url).query(!0),o=new URI(e.subject),l=r.funnels_structure,d=r.version;l&&o.addQuery({funnels_structure:l}),d&&o.addQuery({version:d}),$.ajax({type:"GET",dataType:"JSON",url:o.toString(),beforeSend:function(){$("#answers").addClass("loading")},complete:function(){$("#answers").removeClass("loading")},success:function(e){var i,r,o;if(e.subject){for(r in e.subject)if(e.subject.hasOwnProperty(r)){u=e.subject,i=e.subject[r],t(i);break}$("#pledge_project_summary").removeClass("hide"),o=_.extend({},i,{other_backings:c.backings.length>=1,other_projects:c.created_projects.length>=1}),$("#pledge_project_summary .container").html(render("funnels/_"+r+"_details",o)),$("#subjects").hide()}s=_.map(e.funnels,function(e){return e.funnel}),$("#answers").removeClass("hide"),$("#funnels").html(render("funnels/index",{funnels:s})),e.subject?n($("#pledge_project_summary"),{force:!0}):n($("#funnels"),{force:!0})}})},funnel:function(e){if(!e.funnel)return $("#text").html(""),$("#new_zendesk_ticket").find("textarea, input.text").attr("value",""),$("#zendesk_ticket_ticket_requester_id").attr("value",""),$("#zendesk_ticket_ticket_tags").attr("value",""),$("#zendesk_ticket_funnel_id").attr("value",""),$("#zendesk_ticket_funnel_subject").attr("value",""),void $("#new_zendesk_ticket").removeClass("open closed none");var t=$('[data-funnel_id="'+e.funnel+'"]'),r=_.find(s,function(t){return t.id===e.funnel});$.ajax({type:"GET",url:t.attr("href"),beforeSend:function(){$("#text").addClass("loading")},complete:function(){$("#text").removeClass("loading")},success:function(e){var t=_.extend(u,{text:e.funnel_text,user:c.data,funnel:r});$(document).trigger("got_json",[t]),$("#text").html(render("funnels/_text",t)),a("Funnel",{funnel_name:r.item_title||r.section_title,funnel_section:r.section_title,funnel_text_name:e.funnel_text.title,ticketable:"none"!==r.ticketable,texts_loaded:h.texts_loaded+=1,funnel_test_version:r.version}),$("#zendesk_ticket_ticket_requester_id").attr("value",c.get("email")||""),$("#zendesk_ticket_ticket_tags").attr("value",r.zendesk_tag),$("#zendesk_ticket_funnel_id").attr("value",r.id),$("#zendesk_ticket_funnel_subject").attr("value",i()),$("#new_zendesk_ticket").removeClass("open closed none").addClass(r.ticket_field),n($("#text"))}})}}),$(document).on("click",".quick_links a",function(){var e=$(this);a("Click Quick Link",{text:e.text(),href:e.attr("href")})}),f.on_change(function(){r()}),$(document).on("click",".options a",function(e){e.preventDefault(),f.set("topic",null),f.set("topic",$(this).data("topic"))}),$(document).on("click",'#subjects a[data-fetch="subject"]',function(e){e.preventDefault(),f.set("subject",this.href)}),$(document).on("click","a.select_new",function(e){e.preventDefault(),a("Select Different Subject");var t=f.get("topic");f.set("topic",null),f.set("topic",t)}),$(document).on("click","a.funnel",function(e){e.preventDefault(),f.set("funnel",$(this).data("funnel_id"))}),$(document).on("click","li.open > span, li.open > a",function(e){e.preventDefault();var t=$(this).parent(),n=t.find("> ul");n.length?(t.closest(".side_container").addClass("opened"),a("Select Section",{section_title:$(this).text()})):t.closest(".side_container").removeClass("opened"),$("li.open:not(.stay_open) > ul").hide(),n.show()}),$(document).on("click","a.show_more_backings",function(e){e.preventDefault();var t=this,n=new URI(t.href+"?"+(new URI).query()).toString(),i=_.last(c.get_backings()).get("pledged_at");a("Load More Pledges"),$.ajax({url:n,data:{cursor:i},beforeSend:function(){$(t).addClass("loading")},complete:function(){$(t).removeClass("loading")},success:function(e){var n,r;c._broadcast({backings_fetched:e.backings}),r=_.select(c.get_backings(),function(e){return e.get("pledged_at")<i}),n=_.map(r,function(e){var t=e.get();return t.formatted_created_at=moment(1e3*t.created_at).format("MMM D, YYYY"),render("funnels/_backing",t)}).join(""),$(t).before(n),c.get_backings().length>=c.get("backings_count")&&$(t).remove()}})}),$(document).on("click","#funnels a",function(e){e.preventDefault();var t=$(this).closest("li");t.siblings().removeClass("selected"),t.addClass("selected")}),$(document).on("click",".open_a_ticket",function(e){e.preventDefault(),a("Open Ticket Form"),$("#new_zendesk_ticket").removeClass("closed").addClass("open")}),$(document).on("click","#new_zendesk_ticket input:submit",function(e){e.preventDefault();var t=$(this),i=t.closest("form");i.is(".submitting")||(i.addClass("submitting"),t.data("original_text",t.val()),t.val("Submitting..."),$("#zendesk_ticket_time_on_page").attr("value",o()),c&&c.data&&window.current_user&&window.current_user.data&&c.data.id!==window.current_user.data.id&&$("#zendesk_ticket_ticket_requester_id").attr("value",c.get("email")+".ksr"),_.each(["description","subject"],function(e){var t=$("#zendesk_ticket_ticket_"+e);t.val()===t.attr("placeholder")&&t.val("")}),$.ajax({type:"POST",data:i.serialize(),url:$(this).closest("form").attr("action"),beforeSend:function(){r(),a("Submit Ticket")},complete:function(){i.removeClass("submitting"),t.val(t.data("original_text"))},success:function(){$(".funnels .contact_funnels").html(render("funnels/_ticket_success")),$("html, body").animate({scrollTop:0},800,"easeOutExpo"),a("Ticket Success")},error:function(e){var t=_.flatten(_.compact(_.map(JSON.parse(e.responseText),function(e,t){var n={base:"",requester:"email",subject:"question",description:"details"}[t]||t;return _.map(e,function(e){return _.compact([formatters.capitalize(n),e]).join(" ")})})));a("Ticket Error",t),$("#open_ticket .container").prepend(render("funnels/_ticket_error",{errors:t})),n($("#open_ticket"))}}))}),$(".prompt_login").length&&($(".contact_funnels").hide(),$(".prompt_login a.anonymously").on("click",function(e){e.preventDefault(),$(".prompt_login").hide(),$(".contact_funnels").show()})),$(".contact_funnels").prepend(render("funnels/contact",{user:c},["funnels/_backing","funnels/_project"])),$(document).on("click","a.login",function(){a("Select Log In")}),$(document).on("click","a.anonymously",function(e){e.preventDefault(),a("Select No Account")}),$(document).on("click",".helpfulness [data-score]",function(){var e=$(this).data("score");a("Funnel Rating",{score:e}),$(this).closest(".helpfulness").html('<span class="green">'+I18n.t("onloads.views.funnels.contact.Thanks_got_it")+"</span>")})))}()})(this),instrument_function(function(){$(function(){var e=$("#happening_layouts_index");0!==e.length&&(e.find(".js-load-more").removeClass("hidden"),e.on("load_more_success",function(t,n){e.find(".js-add-more").append(n.html),n.has_more||e.find(".js-load-more-container").remove()}),e.on("load_more_error",function(){growl({error:I18n.t("onloads.views.happening_layouts.show.There_was_a_problem_loading_more_happenings")})}),e.on("click",".js-load-more",function(){track("Happening See More Click")}),device_idioms["not-touchable"]&&skrollr.init({forceHeight:!1}))})})(this),instrument_function(function(){!function(){var e=$("body.faqs").find(window.location.hash),t="#term.help",n=$(t);e.length&&!e.find(".subcat").length&&e.animate({backgroundColor:"#ffffc9"},{duration:2e3,complete:function(){$(this).animate({backgroundColor:"#ffffff"},{duration:2500})}}),$(".NS_help__search_box").livequery(function(){$(this).livesearch_pretty_input_dropdown({input_can_submit_on_enter:!0,file_extension:"json",ignore_history:!1})}),$(document).on("livesearch:selected","#search .results li",function(e,t){t&&t[1]&&(window.location.href=t[1])}),$(document).on("click","body.help form.search .submit",function(){$(this).closest("form").submit()}),$(document).on("livesearch:revealed_results",t,function(){$(this).addClass("expanded"),$(this).parents("#search").children(".submit").addClass("expanded")}),$(document).on("livesearch:close_results",t,function(){$(this).removeClass("expanded"),$(this).parents("#search").children(".submit").removeClass("expanded")}),$("body.help").click(function(e){var t=$(e.target);t.is("#term")||t.closest("#search").length||n.trigger("livesearch:close_results")}),n.on("focus",function(){var e=n.data("livesearch");e&&e.search_xhr&&4===e.search_xhr.readyState&&n.trigger("livesearch:reveal_results")})}()})(this),instrument_function(function(){$(function(){var e="body#help_copyright";$(document).on("change",e+" form.select_country",function(){$(this).submit()})})})(this),instrument_function(function(){$(function(){var e="body#help_fees";$(e+" form.select_country").on("change",function(){$(this).submit()})})})(this),instrument_function(function(){$(function(){var e=$("body#help_images");e.length&&device_idioms["not-touchable"]&&skrollr.init({forceHeight:!1})})})(this),instrument_function(function(){$(function(){function e(e){e.find(".category_row").slideToggle("fast"),e.find(".default_sort").toggleClass("tablesorter-headerDesc"),e.closest("table").toggleClass("collapsed"),e.find(".arrow").toggleClass("flipped"),e.hasClass("collapsed")?(e.find(".details").text(I18n.t("onloads.views.help.stats.See_Categories")),ga("send","event","Help Stats","Collapsed",e.attr("name"))):(e.find(".details").text(I18n.t("onloads.views.help.stats.Hide_Categories")),ga("send","event","Help Stats","Expanded",e.attr("name")))}function t(e){var t=e.offset(),n=e.closest("table, .explanation").offset(),i=a.width(),r=a.height(),o=parseInt(a.css("padding-right").replace("px",""),10);e.closest(".explanation").length&&(t.left=t.left-50),a.css({position:"absolute",left:t.left-i-(o-1)+90,top:n.top-r-20}),a.find(".nipple").css({left:i+5,top:r+12,position:"absolute"})}function n(){a.fadeIn("fast")}function i(){a.fadeOut("fast")}function r(e,r,o){"undefined"!=typeof o?(a.find(".content").html('<span class="num date">'+r+"</span>"+o),t($(e)),n()):i()}var o=$("#help_stats"),a=$(".bubble");o.length&&($(".toggle_details").click(function(){var t=$(this).closest("table");e(t)}),$("th").click(function(){var t=$(this).closest("table");t.hasClass("collapsed")&&e(t)}),$("td, th").hover(function(){var e=$(this).closest("table").find("th").eq($(this).index()),t=e.data("header-explanation"),n=e.html().replace("<br>"," ");r(this,n,t)}),$(".explanation").hover(function(){var e=$(this),t=e.find("[data-header-explanation]"),n=t.data("header-explanation"),i=e.find("p").text();r(t,i,n)}),$("table, .explanation").mouseleave(function(){i()}))})})(this),instrument_function(function(){$(function(){function e(){$("#account-setup-panel").trigger("project_build:refresh")}$("#account-setup-panel .identity-verification .identity-documents-pending").livequery(function(){$.pollster($(this).attr("data-url"),function(t){var n=t.documents[t.documents.length-1],i=t.user_identity_name,r=n.identity;switch(n.state){case"pending":return!1;case"successful":if(!r)return!1;switch(r.state){case"started":return!1;case"passed":return i?(growl({success:I18n.t("onloads.views.identity_documents.processing_state.Your_identity_documents_have_been_approved")}),e(),!0):!1;case"failed":return growl({error:I18n.t("onloads.views.identity_documents.processing_state.Your_Identity_documents_were_not_approved_We_will_email_you")}),e(),!0}break;case"failed":return growl({error:I18n.t("onloads.views.identity_documents.processing_state.Your_Identity_documents_were_not_approved_We_will_email_you")}),e(),!0}})})})})(this),instrument_function(function(){$(function(){$(document).on("click","#account-setup-panel a.document-form-link",function(e){$.open_remote_modal_dialog($(this).attr("href"),{id:"jumio-modal",class_name:"identity-document",do_not_cache:!0,prevent_close:!0}),e.preventDefault()})})})(this),instrument_function(function(){$(function(){var e=$("#projects_edit");e.length&&(e.on("click",".jumio-modal-close",function(e){e.preventDefault(),$(this).trigger("allow_close.modal_dialog"),$(this).trigger("close.modal_dialog")}),$(document).on("before_close.modal_dialog",".modal_dialog.identity-document",function(){$("#account-setup-panel").trigger("project_build:refresh")}))})})(this),instrument_function(function(){$(function(){var e=$("body.identity_documents");e.length&&$(document).on("click","#identity_documents_thanks a.jumio-modal-close-from-iframe",function(e){e.preventDefault(),window.top.postMessage(JSON.stringify({close_jumio_modal:!0}),"*")})})})(this),instrument_function(function(){$(function(){function e(e){$(e).each(function(){(new Image).src=this})}var t=$(".NS_jobs__why_work_at_kickstarter"),n=640;t.length&&($("span.carousel").hover(function(){var e=$(this).attr("data"),t=$(this).attr("data_caption");if(""!==e){if("video"===e){$(this).closest(".section").find(".video").delay(100).fadeIn(200);try{$(this).closest(".section").find("video")[0].play()}catch(n){}}else $(this).closest(".section").css({"background-image":"url("+e+")","-webkit-background-size":"cover"});$(this).closest(".section").find(".caption").text(""!==t?t:""),$(this).closest(".section").find("h1, p").css({visibility:"hidden"}),$(this).css({visibility:"visible"}),$(this).closest(".section").append('<a href="#close" class="close">'+I18n.t("onloads.views.jobs.why_work_at_kickstarter.Cancel")+"</a>")}},function(){var e=$(this).attr("data"),t=$(this).closest(".section").attr("data_caption");if($(this).closest(".section").css({"background-image":"url("+$(this).closest(".section").attr("data")+")"}),$(this).closest(".section").find("h1, p").css({visibility:""}),$(this).css({visibility:""}),$(this).closest(".section").find(".caption").text(""!==t?t:""),"video"===e){$(this).closest(".section").find(".video").fadeOut(200);try{$(this).closest(".section").find("video")[0].pause()}catch(n){}}$(".close").remove()}),$(document).on("click",".section .close",function(e){$(this).css({"background-image":"url("+$(this).attr("data")+")"}),e.preventDefault()}),$(".gallery_links .next").click(function(){$(".gallery_links ul").offset().left>0&&$(".gallery_links ul").animate({marginLeft:"-720px"},500,"easeOutExpo",function(){$(".gallery_links .prev").removeClass("disabled"),$(".gallery_links .next").addClass("disabled")})}),$(".gallery_links .prev").click(function(){$(".gallery_links ul").offset().left<0&&$(".gallery_links ul").animate({marginLeft:"0px"},500,"easeOutExpo",function(){$(".gallery_links .next").removeClass("disabled"),$(".gallery_links .prev").addClass("disabled")})}),$(document).on("click",".gallery_links li",function(){var e=$(this).attr("data");$(".gallery_links li").removeClass("selected"),$(this).addClass("selected"),$(".galleries .video:not(#"+e+") .video-player").trigger("ksr_video:pause"),$(".galleries").find("#"+e).parent().animate({height:n},600,"easeOutExpo",function(){$(this).find(".gallery").fadeOut(),$(".galleries").find("#"+e).fadeIn(function(){$(this).children(".video-player").ksr_video().trigger("ksr_video:play")}),$.scrollTo($(this).parents(".section").find(".galleries"),{duration:1200,easing:"easeOutExpo"})
})}),$(".galleries .close_link").click(function(e){$(".video-player").trigger("ksr_video:pause"),$(".gallery_links li").removeClass("selected"),$(this).parent().children(".gallery").fadeOut(500,function(){$(this).parent(".galleries").animate({height:"0px"},500,"easeOutExpo")}),e.preventDefault()}),e(["https://d3mlfyygrfdi2i.cloudfront.net/jobs_greatest_city_2_1600.jpg","https://d3mlfyygrfdi2i.cloudfront.net/jobs_its_fun_happy_hours_1600.jpg","https://d3mlfyygrfdi2i.cloudfront.net/jobs_its_fun_beach_1600.jpg","https://d3mlfyygrfdi2i.cloudfront.net/jobs_its_fun_workshops_1600.jpg","https://d3mlfyygrfdi2i.cloudfront.net/jobs_its_fun_movies_1600.jpg","https://d3mlfyygrfdi2i.cloudfront.net/jobs_its_fun_lunch_alt_1600.jpg"]))})})(this),instrument_function(function(){$(function(){var e=$(".js-language-banner"),t="undefined"!=typeof I18n.locale?I18n.locale:void 0;e.length&&(e.find(".js-yes").on("click",function(){write_cookie("dismiss_language_banner","1"),track("Language Banner Yes",{lang:t})}),e.find(".js-no").on("click",function(n){n.preventDefault(),e.addClass("is-hidden"),write_cookie("dismiss_language_banner","1"),track("Language Banner No",{lang:t})}),e.removeClass("is-hidden"),track("Language Banner View",{lang:t}))})})(this),instrument_function(function(){$(function(){var e=".video_player";$(e).livequery(function(){$(this).ksr_video()})})})(this),instrument_function(function(){!function(){function e(e,t){var n=e.add(t);n.siblings().removeClass("current_tab"),n.addClass("current_tab"),$(document).trigger("tab")}function t(e){return"string"!=typeof e?"":e.replace(/.$/,function(e){return"e"===e?"able":e+"able"})}function n(e){return"string"!=typeof e?"":e.replace(/.$/,function(e){return"e"===e?"ed":e+"ed"})}function i(e){if("string"!=typeof e)return"";var t=e.match(/\d+/);return t?t[0]:null}$("body.admin").delegate(".tab","click",function(){var t,n=$(this),i=n.attr("class").match(/tab_\d+/),r=n.find("a");i&&(t=$("."+i[0].replace(/tab/,"pane"))),i&&t.length&&(r.length&&""===$.trim(t.html())?(n.addClass("submitting"),$.ajax({url:r.attr("href")+".js",type:"GET",complete:function(i){n.removeClass("submitting"),t.html(i.responseText),e(n,t)}})):e(n,t),history.pushState(null,null,r.attr("href")))}),$("body.admin").delegate(".tab_label a","click",function(e){e.preventDefault()}),$("body.admin").delegate(".expand, .collapse","click",function(e){e.preventDefault(),$(this).add($(this).siblings(".expand, .collapse, .expandable")).toggle()}),$("body.admin").delegate(".batch_action .select_all","click",function(e){e.preventDefault();var t=$(this),n=t.closest(".batch_action"),i=n.parent(),r=i.find("input.checkbox:not([disabled])");return r.length?void("Select all"===t.text()?(r.prop("checked",!0),t.text("Deselect all")):(r.prop("checked",!1),t.text("Select all"))):void growl({error:"Nothing to select."})}),$("body.admin").delegate(".batch_action input.submit","click",function(e){e.preventDefault();var r=$(this),o=r.closest("form"),a=r.closest(".batch_action"),s=a.parent(),c=s.find("input.checkbox:checked"),l=c.map(function(e,t){return i(t.id)}).get(),u=r.attr("name"),d=o.attr("action"),f=a.data("type"),h=a.data("terse_type"),p=f.replace(/s$/,""),m={},g=s.find(".batch_"+u+"_info").data("confirm_url");if(s.find("input.checkbox:not(checked)").each(function(){$(this).parent().removeClass("highlight")}),!c.length)return void growl({error:"No "+h+" selected to "+u+"."});var v=[];return c.each(function(){$(this).hasClass(t(u))?$(this).parent().removeClass("highlight"):(v.push($(this)),$(this).parent().addClass("highlight"))}),v.length?void growl({error:"You selected "+v.length+" "+formatters.pluralize(h,v.length)+" that cannot be "+n(u)+". Please unselect those and try again."}):(m[f]=l,void $.ajax({url:g,data:m,type:"get"}).done(function(e){$.modal_confirm(function(){$.ajax({type:"PUT",url:d,data:m,success:function(){c.each(function(){var e=$(this);e.attr({checked:!1,disabled:!0}),e.closest("."+p).addClass(n(u)).find(".status").html(n(u))}),growl({success:"Selected "+h+" were "+n(u)})},error:function(){growl({error:"There was a problem "+u+"ing one or more of those "+h+". Please refresh the page and try again."})}})},{title:"Batch "+u,message:e,confirm_text:formatters.capitalize(u)+" "+l.length+" "+formatters.pluralize(h,l.length),cancel_text:"cancel"===u?"never mind":"cancel"})}))}),$(document).on("submit",".zendesk_ticket form",function(e){var t=$(this);t.find(".submit").hide(),t.find(".loading").show(),e.preventDefault(),$.ajax({url:t.attr("action"),type:"POST",data:t.serialize(),dataType:"JSON",success:function(e){var n="https://kickstarter.zendesk.com/tickets/"+e.id,i=$("<a/>");i.attr("href",n),i.text(n),i.addClass("associated_zendesk_ticket right"),t.closest(".modal_dialog").trigger("close"),growl({success:"Ticket sent successfully!"}),$("#send_to_zendesk").append(i)},complete:function(){t.find(".submit").show(),t.find(".loading").hide()}})})}()})(this),instrument_function(function(){$(function(){var e=".ksr_toggle",t=$(e);t.length&&($(e+" a").on("click",function(t){var n=$(this);n.closest(e).find("a").removeClass("selected"),n.addClass("selected"),n.closest(e).find(".bg").css({left:n.position().left}),t.preventDefault()}),$(e+" a.selected").click(),$(e+" .bg").addClass("show"))})})(this),instrument_function(function(){$(function(){function e(e){e=e||$(".mobius"),e.each(function(){var e=$(this).data("mobius");if(e){e.clear_extra_params();for(var t in n)n.hasOwnProperty(t)&&e.add_param(t,n[t])}})}var t=$("body.profile");if(t.length){$("body#users_show").length&&("undefined"!=typeof history.pushState&&history.pushState(null,null,window.location.pathname),$("#animated_pie",t).spriteshow({number:63,play_delay:40,pause_when_behind_by:0,play_once:!0,sprite_orientation:"horizontal"}),$("#animated_pie").on("spriteshow:index",function(e,t){43===t&&($("#category_circle").fadeIn(100),$("#animated_pie").fadeOut(1e3)),0===t&&$(this).fadeOut()}));var n=URI().query(!0);$("#small_circle").on("navigate",function(e,i){t.is("#users_show")?(n=URI(i).query(!0),$.ajax({url:i,type:"get",success:function(e){var t=$(e).find("#main");$("#main").replaceWith(t)}})):window.location=i}),e(),$(".mobius").livequery(function(){e($(this))})}})})(this),instrument_function(function(){$(function(){function e(){function e(e){var n,r=e.responseText;if("string"==typeof r)try{r=JSON.parse(r)}catch(a){}r.project&&(n=Project.find(r.project.id),o=r.poll_interval_override||t(o,n,r.project),n.set(r.project)),i(o)}function t(e,t,n){var i;return t.get("pledged")!==n.pledged||t.get("comments_count")!==n.comments_count?(i=e-Math.ceil((e-s)/2),Math.max(i,s)):(i=e+10,Math.min(i,c))}var i,r=$(this),o=parseInt(r.data("dynamic"),10),a=r.data("poll_url"),s=5,c=60;a&&"number"==typeof o&&!isNaN(o)&&(i=function(t){n[a]=setTimeout(function(){n[a]=$.ajax({global:!1,url:a,complete:e})},1e3*t)})(o)}function t(){var e=n[$(this).data("poll_url")];"number"==typeof e?clearTimeout(e):"function"==typeof e.abort&&e.abort()}$(document).on("project_added_to_curated_page",function(e,t){var n=$("#add_to_curated_page_widget .button-curate");n.addClass("on"),n.attr("href",t.edit_url)}),"undefined"!=typeof current_project&&current_project.on_change("pledged",function(){var e=$("#stats"),t=e[0].className.match(/digits_\d+/),n="digits_"+Math.floor(current_project.get("pledged")).toString().length;t&&t[0]!==n&&e.removeClass(t[0]).addClass(n)}),$(".js-checkout-poller").livequery(function(){var e=$(this),t=$('<span class="spinner" />').spin("ksr","#333");e.append(t),$.pollster(e.data("href"),function(t){return"successful"===t.state?(window.location.reload(),!0):"failed"===t.state?(growl({error:t.state_reason}),e.closest(".notification-message").remove(),!0):void 0},{delay:2500})});var n={};$(".poll[data-dynamic]").livequery(e,t)})})(this),instrument_function(function(){$(function(){function e(e){return e.closest("#preview, .render_mustache").data("data")}function t(e){var t=e.find('input[type="submit"].button');e.addClass("submitting"),t.addClass("button_disabled")}function n(e){var t=e.find('input[type="submit"].button');e.removeClass("submitting"),t.removeClass("button_disabled")}function i(t){var i="messages";"undefined"!=typeof current_project&&(i="project_messages"),t.closest(".modal_dialog").length&&(i="backer_modal"),"backers_show"===$("body").attr("id")&&(i="backer_page"),("backings_show"===$("body").attr("id")||"backings_index"===$("body").attr("id"))&&(i="backings_show"),$.ajax({url:t.attr("action"),type:t.attr("method"),dataType:"json",data:t.serialize()+"&"+$.param({"mp[message_context]":i}),success:function(i){var o=e(t),a=t.closest(r).find("ul.messages");i.errors?_.each(_.keys(i.errors),function(e){growl({error:e+": "+i.errors[e]})}):(a.append(render("messages/_show",i)).trigger("message_sent",o?[o.backing?o.backing.id:void 0,a.children().length]:[]),$(document).trigger("resize")),t.get(0).reset(),n(t)}})}var r=".NS_message_threads__show";$(document).on("click",r+" .pledge_details_link",function(e){$(r).find(".pledge_details").toggleClass("visible"),$(document).trigger("resize"),$(this).toggleClass("selected"),track("Message Info Toggle",{text:$.trim($(this).text())}),e.preventDefault()}),$(r+":visible").livequery(function(){function t(e){$.ajax({url:o.urls.web.read,type:"put"}),$("#thread_"+o.id+", "+r).removeClass("unread"),e&&e.preventDefault()}function n(e){$.ajax({url:o.urls.web.unread,type:"put"}),$("#thread_"+o.id+", "+r).addClass("unread"),e&&e.preventDefault(),track("Message Read Toggle",{toggled_to:"unread"})}var i=$(this),o=e(i);t(),$(r+" .mark_as_unread").on("click",n),$(r+" .mark_as_read").on("click",t)}),$(document).on("submit",r+" form.reply",function(e){var n=$(this),r=n.find('[name="message[body]"]');r.val()?n.is(".submitting")||(t(n),i(n)):growl({error:"Please add a message"}),e.preventDefault()}),$(document).on("focus",r+" form.reply textarea",function(){var e=$(this),t=e.closest("form.reply");t.addClass("replying"),e.removeAttr("placeholder")}),$(document).on("click",r+" .respond_link",function(e){$(r+" form.reply textarea").focus(),track("Message Reply Click"),e.preventDefault()})})})(this),instrument_function(function(e){$(function(){function t(){$("form.term").term_form().on("submit",function(e){e.preventDefault();var t=$(this);l.set_params(t.serialize_without_blank())&&track("Message Inbox Search",{selected_project:$.trim($("#content .projects .title b").text()),term:t.find("input#term").val()})})}function n(e){s=$("#preview"),s.html(render("message_threads/_show",e,"messages/_show")).data("data",e),a=$(o),c=a.find(".messages_container");var t=$("form.reply"),n=$(o).find(".respond_shortcut");$("#message_threads").removeClass("full_width"),setTimeout(function(){$("#preview_container").fadeIn(function(){if(r(),$("#content ul.threads").height()>s.height()&&$("#preview").simple_sticky_bar(),e.messages.length>1){var t=$(o+" ul.messages li:last-child .message");c.scrollTo(t)}})},250),c.scroll(function(){var e=$(this),i=t.position()||{top:0};e.height()-i.top+220<=0?n.removeClass("hidden"):n.addClass("hidden")}).scroll(),track("Message Thread View")}function i(){var e=$(".dropdown a.selected"),t={};e.each(function(){var e=$(this);_.extend(t,URI(e.attr("href")).query(!0))}),l.set_params($.param(t),!0)}function r(){if(s.length){var e,t=s.get(0).offsetTop-$(window).scrollTop(),n=$(window).height(),i=a.find(".backing").height();0>t&&(t=0),e=n-i-t,c.height(e),s.css("margin-bottom",$(window).height()-e-60),a.trigger("shifted"),$(o+" ul.messages").height()>=c.height()?$(o+" .respond").removeClass("hidden"):$(o+" .respond").addClass("hidden")}}if($("#message_threads_index, #message_threads_show").length){var o=".NS_message_threads__show",a=$(o),s=$([]),c=$([]);track("Message Inbox View");var l=new Location($.parseEscapedJSON(e.threads),$("#content"),"message_threads/_index",{url:$("#content").data("message_threads_url"),mobius_on:"message_threads"});l.on_change(function(e){var t=$("#content ul.threads"),n=!(!this.get("params")||!this.get("params.debug"));_.each(e.message_threads||this.get("message_threads"),function(e){n||delete e.debug,e.id&&t.append(render("message_threads/_row",e))})}),l.change(),t(),l.on_change_params(t),$(document).on("change","form.params",function(e){e.preventDefault();var t=$(this);l.set_params(t.serialize_without_blank())}),$(document).on("click","li.thread > a",function(e){var t=$(this),n=t.data("api_url");n&&($.api_ajax({url:oauth_url(n),dataType:"json",success:function(e){$("li.thread").removeClass("selected"),t.closest("li.thread").addClass("selected"),History.pushState({selected_thread:e},null,"undefined"!=typeof current_project?e.urls.web.project_message_thread:e.urls.web.message_thread)}}),e.preventDefault())}),$(window).on("statechange",function(){var e=History.getState().data;e&&"undefined"!=typeof e.selected_thread&&n(e.selected_thread)}),window.selected_thread&&n($.parseEscapedJSON(window.selected_thread)),l.get("params.flag")&&$(".message_"+l.get("params.flag")+" .report-spam a").click(),$(document).on("click","#content .dropdown a",function(e){var t=$(this),n=t.closest(".dropdown"),r=n.closest(".ksr-dropdown");n.find("a").removeClass("selected"),t.addClass("selected"),i(),r.hasClass("projects")?track("Message Inbox Project Filter",{selected_project:$.trim($(this).text())}):r.hasClass("views")&&track("Message Inbox Views Filter",{selected_project:$.trim($("#content .projects .title b").text()),selected_view:$.trim($(this).text())}),e.preventDefault()}),$(document).on("scroll",r),$(document).on("focus",o+" #message_body",function(){c.animate({scrollTop:$("ul.messages").height()+60},1200,"easeOutExpo")}),$(document).add(window).resize(function(){r()}),e.threads=l}})})(this),instrument_function(function(){$(function(){$(document).on("submit","form#new_message",function(e){e.preventDefault();var t=$(this);t.hasClass("disabled")||$.ajax({type:t.attr("method"),url:t.attr("action"),dataType:"json",data:t.serialize(),success:function(e){e.error?t.find("textarea").closest("fieldset").addClass("field_with_errors"):(t.trigger("message_sent"),KsrJSON.parse_response(e,t.closest(".ajax-container")))},complete:function(){t.removeClass("disabled")}})}),History.emulated.pushState&&$("a.messages_nav").on("click",function(e){"/messages"===URI(document.referrer).path()&&(history.back(),e.preventDefault())}),$(document).on("click","#mark_as_spam_dialog a.spam",function(e){e.preventDefault();var t=$(this);$.post($(this).attr("href"),null,null,"json"),$(this).trigger("close.modal_dialog"),growl({success:I18n.t("onloads.views.messages_threads.show.Thanks_well_check_it_out")}),$('a[href^="/messages/'+t.attr("id")+'/report"]').replaceWith(I18n.t("onloads.views.messages_threads.show.Thanks_for_reporting_Well_check_it_out"))})})})(this),instrument_function(function(){!function(e){e(document).on("click",".message .report-spam a",function(t){t.preventDefault();var n=e(this),i=this,r=n.closest(".message"),o=r.clone(),a=e('<p class="flagged_message"><em class="spam_reported"></em></p>');o.find("span.report-spam").remove(),e.modal_confirm(function(){return r.find(".body").before(a),KsrJSON.get(n.data("url"),"post",a.find("em"),i)},{message:o.html(),confirm_text:"Report message as spam",title:"Report this message to Kickstarter"})}),e(document).on("ksr_json:complete",".message .spam_reported",function(t,n){var i=e(this).closest(".message"),r=i.find(".report-spam");r.hide(),200!==n.status||r.is(".admin")||i.find(".body").hide()})}(jQuery)})(this),instrument_function(function(){$(function(){function e(){var e=$(".js-ipad-inner"),n=.81836*s.outerWidth(),i=.86634*s.outerHeight(),r=$(".js-ipad-inner-content"),o=$(".js-ipad-inner-content > div");e.css({width:n,height:i,left:(s.outerWidth()-n)/2,top:(s.outerHeight()-i)/2}),r.css({width:n*o.length}),o.css({width:n,height:i}),t()}function t(){var e=$(".js-iphone-container"),t=$(".js-iphone-frame"),n=$(".js-iphone-inner"),i=$(".js-iphone-inner-content"),r=$(".js-iphone-inner-content > div");e.css($(window).width()<$(".js-device-container").width()+.35*t.outerWidth()?{right:0}:{right:-(.35*t.outerWidth())}),t.css({height:.8141*s.outerHeight(),right:-(.35*t.outerWidth())});var o=.86585*t.outerWidth(),a=.7537*t.outerHeight();n.css({width:o,height:a,left:(t.outerWidth()-o)/2,top:(t.outerHeight()-a)/2}),i.css({width:o*r.length}),r.css({width:o,height:a}),$(".js-iphone-video").css({width:o,height:a})}function n(){$(".js-ipad-inner-content").css({marginLeft:-(100*c)+"%"}),c+=1,c>=$(".js-ipad-inner-content > div").length&&(c=0)}function i(){$(".js-iphone-inner-content").css({marginLeft:-(100*l)+"%"}),l+=1,l>=$(".js-iphone-inner-content > div").length&&(l=0)}function r(){clearInterval(o),o=setInterval(function(){n(),i()},5e3)}var o,a=$(".NS_mobile__universal_app_hero"),s=$(".js-ipad-frame"),c=1,l=1;if(a.length){var u=$(".js-form-message",a),d=!1;$(document).on("submit","#send_mobile_link_form",function(e){e.preventDefault();var t=$(this);d||(d=!0,$.ajax({type:"post",url:"/mobile/send_link",dataType:"json",data:{email_or_phone:t.find("#email_or_phone").val()},success:function(e){e.success?(u.show().removeClass("error").html(e.success),t.remove()):e.error&&u.show().addClass("error").html(e.error)},complete:function(){d=!1}}))}),$(document).on("closed.modal_dialog","#send_mobile_link_dialog",function(e){e.preventDefault(),$("#send_mobile_link_form",a).length||u.html(I18n.t("onloads.views.mobile.universal_app_hero.You_should_already_have_a_link_from_us"))}),device_idioms["not-ios"]&&$(".js-get-the-app-button").on("click",function(e){track("Mobile Promo Reveal Form"),$(".js-get-the-app-button-container").css({marginTop:-$(this).outerHeight()}),setTimeout(function(){$(".js-get-the-app-form-container").find("input[type=text]").focus()},600),e.preventDefault()}),$(document).resize(function(){e()}),setTimeout(function(){e(),a.removeClass("loading")},500),r()}})})(this),instrument_function(function(){$(function(){function e(t){var n=t.data("frame")||0,i=t.data("timeout");t.data("animating")&&(t.find("img").hide(),t.find("img").eq(n).show(),t.data("frame",2>n?n+1:0),i&&clearTimeout(i),i=setTimeout(function(){e(t)},200),t.data("timeout",i))}var t=$("body#newsletters_index");t.length&&t.find("li.newsletter-item").livequery("mouseenter",function(){$(this).data("animating",!0),e($(this))}).livequery("mouseleave",function(){$(this).data("animating",!1)})})})(this),instrument_function(function(){$(function(){var e="ol.admin-notes";$(document).on("submit",e+" form",function(){var e,t=$("#admin-menu .note_count"),n=t.text().match(/^(\d+)/);n&&(e=parseInt(n[1],10),t.text(e+1+" notes"))})})})(this),instrument_function(function(){$(function(){function e(){$(r+" .verification_error").html("").addClass("hide"),$(".field_with_errors").children().unwrap()}function t(){var e=$("#country"),t=e.closest(r),n=t.find("#phone_number");n.attr("placeholder",function(){var t=I18n.countries[e.val().toLowerCase()];return t&&t.phone_example?"Ex: "+t.phone_example:""})}function n(t){if("keypress"===t.type&&t.which!==KEY.ENTER)return!0;var n=$(r+" input.radio[name=verify]:checked").val(),i=$("#phone_number"),o=$(r),a=o.find("#country").val();return"sms"!==n&&"call"!==n?!1:($.ajax({type:"put",url:"/profile/phone_number/send_verification",dataType:"json",data:{method:n,number:i.val(),country:a},success:function(t){e(),_.isUndefined(t.error)?(o.find(".token").val(""),o.find(".highlight strong").html(t.number+".").end().find(".phone_section, .options_section").addClass("hide").end().find(".code_section").removeClass("hide").trigger("shifted").find(".js-sms_show, .js-call_show").addClass("hide").filter(".js-"+n+"_show").removeClass("hide").end().end().end()):(i.wrap('<div class="field_with_errors" />').focus(),o.find(".phone_section .verification_error").html(t.error).removeClass("hide").trigger("shifted"))},beforeSend:function(){o.addClass("loading").trigger("shifted")},complete:function(){o.removeClass("loading").trigger("shifted")}}),void t.preventDefault())}function i(t){if("keypress"!==t.type||t.which===KEY.ENTER){var n=$(this),i=n.closest(r),o=i.find("#token"),a=i.find("#country").val();$.ajax({type:"post",url:"/profile/phone_number/verify",dataType:"json",data:{token:o.val(),country:a},success:function(t){if(e(),_.isUndefined(t.error)){if(!_.isUndefined(t.html)){var n=$(t.html),r=i.closest(".NS-phone_numbers__verify");r.length?(r.replaceWith(n),n.trigger("phone_number:added"),n.trigger("project_edit:check_all_panels_for_completion")):i.trigger("phone_number:added")}}else o.wrap('<div class="field_with_errors" />').focus(),i.find(".code_section .verification_error").html(t.error).removeClass("hide").trigger("shifted")},beforeSend:function(){i.addClass("loading")},complete:function(){i.removeClass("loading")}}),t.preventDefault()}}var r=".NS-phone_numbers__edit";$(document).on("click",r+" #resend_token",function(){$(this).closest(r).find(".code_section").addClass("hide").end().find(".phone_section, .options_section").removeClass("hide").trigger("shifted")}),$(document).on("change",r+" #country",t),$(r).livequery(t),$(document).on("click","#send_verification",n),$(document).on("keypress",r+" #phone_number",n),$(document).on("click",r+" #verify_code",i),$(document).on("keypress",r+" #token",i),$(document).on("click",r+" #change_number",function(e){var t=$(this);$.ajax({type:"get",url:"/profile/phone_number/edit",dataType:"json",success:function(e){_.isUndefined(e.html)||t.closest(r).replaceWith(e.html)}}),e.preventDefault()})})})(this),instrument_function(function(){$(function(){function e(){r.scrollTop()<o.position().top+o.height()-r.height()-a.height()?$(".checkout_actions").addClass("shadow"):$(".checkout_actions").removeClass("shadow")}function t(){var e=$(".backing-amount-includes-shipping"),t=current_checkout.get("shipping_rule");t&&t.cost>0&&n()?e.show():e.hide()}function n(){return current_checkout.get("amount")===current_checkout.get("reward.minimum")+current_checkout.get("shipping_amount")}var i=$(".checkout_actions_wrap"),r=$(window),o=$("#main"),a=$(".checkout_actions_prop");i.length&&(e(),$(window).scroll(function(){e()}),$(window).resize(function(){e()}),$(document).on("shifted",function(){e()}),"undefined"!=typeof current_checkout&&current_checkout.on_change("shipping_rule",function(){t()}))})})(this),instrument_function(function(){$(function(){function e(){i.pledge===i.reward+i.shipping&&current_checkout.set("amount",current_checkout.get("reward.minimum")+current_checkout.get("shipping_amount"))}function t(e,t){var n=e.find(".fx-estimate"),i=n.find("span"),r=parseFloat(n.data("rate"));!isNaN(t)&&!isNaN(r)&&t>0?(i.text(formatters.money("USD",t*r,2)+" USD"),n.css("visibility","visible"),n.addClass("show")):(i.text(null),n.css("visibility","hidden"),n.removeClass("show"))}var n=".pledges__checkout_amount",i={shipping:0,reward:0,pledge:0},r=!0;window.amount_state=i,"undefined"!=typeof current_checkout&&(current_checkout.get("reward")&&(i.pledge=current_checkout.get("amount"),i.reward=current_checkout.get("reward.minimum"),i.shipping=current_checkout.get("shipping_amount")),$(document).on("keyup","input#backing_amount",function(){var e=$(this).val();return""===e&&(e=0),e=parseFloat(e),isNaN(e)?!1:(r=!1,current_checkout.set("amount",e),void(r=!0))}),current_checkout.on_change("shipping_amount",function(){e(),i.shipping=current_checkout.get("shipping_amount")}),current_checkout.on_change("reward",function(){e(),i.reward=current_checkout.get("reward.minimum")}),current_checkout.on_change("amount",function(){var e=current_checkout.get("amount"),t=$("input#backing_amount");isNaN(e)&&(e=0),r&&(t.val(e),t.trigger("change")),$("span.backing-amount").text(formatters.money(current_project.get("currency"),e)),i.pledge=e})),$(".modal_dialog:visible li.pledge_field input.text").livequery(function(){var t=$(this),n=t.closest("form"),i=n.find(".reward.visible"),r=i.data("reward"),o=current_checkout.get("reward");o&&o.id===r.id?e():(current_checkout.set("shipping_amount",0),current_checkout.set("amount",r.minimum),current_checkout.set("reward",r))}),$(n+" input#backing_amount").livequery(function(){var e=$(this);e.on("input cut paste keyup change",function(){t($(n),parseFloat(e.val()))}),t($(n),e.val())})})})(this),instrument_function(function(){$(function(){var e=".pledges__checkout_faqs",t=$(e);t.length&&($(document).on("click",e+" .faq-question a",function(e){var t=$(this).closest(".faq");t.toggleClass("expanded"),track("Toggled Pledge Checkout FAQ",{pledge_faq_question:t.find(".question").text()}),e.preventDefault()}),$("body#pledges_edit").length&&setTimeout(function(){$(".faqs li#change_my_pledge_amount").addClass("expanded"),$(".faqs li#change_my_reward_selection").addClass("expanded"),$(".faqs li#cancel_my_pledge").length&&$(".faqs li#cancel_my_pledge").addClass("expanded")},800))})})(this),instrument_function(function(){$(function(){function e(){var e=parseFloat(current_checkout.get("shipping_amount")),t=$(".reward.selected span.shipping-cost");$("span.shipping-cost").hide(),e>0?(t.show(),t.text("plus "+formatters.money(current_project.get("currency"),e)+" shipping")):t.hide()}var t=$(".pledges__checkout_rewards");t.length&&(t.on("change",".reward input.radio",function(){var e=$(this),n=e.parent().offset().top+e.parent().outerHeight(),i=$(".checkout_actions_wrap").offset().top,r=$(".reward input.radio:checked").closest(".reward"),o=r.data("reward")||current_project.get("rewards")[0];$(".reward",t).removeClass("selected"),$(".reward span.shipping-cost",t).addClass("hide"),r.addClass("selected"),current_checkout.set({reward:o}),$(".checkout_actions").hasClass("animated")||($(".checkout_actions_wrap").sticky_bar({parent:$("body"),attach_to:"bottom"}),$(".checkout_actions").addClass("animated")),n>i&&$(window).scrollTop(window.pageYOffset+n-i)}),$(".reward input.radio:checked").trigger("change"),$(".checkout_rewards .reward:not(.disabled)").mouseenter(function(){$(this).addClass("hovering")}).mouseleave(function(){$(this).removeClass("hovering")}),$(document).on("click",".checkout_rewards .reward:not(.disabled)",function(e){"radio"!==e.target.type&&$(this).children("input.radio").prop("checked",!0).trigger("change")}),"undefined"!=typeof current_checkout&&(current_checkout.on_change("reward",function(){var t=current_checkout.get("reward");t&&t.shipping_enabled&&e()}),current_checkout.on_change("shipping_amount",function(){var t=current_checkout.get("reward");t&&t.shipping_enabled&&e()})))})})(this),instrument_function(function(){$(function(){function e(){return $(s).closest(".modal_dialog:visible").length>0}function t(e,t){var i=e.find("select#backing_location_id");if(c={},t&&t.shipping_enabled){"undefined"==typeof a&&(a=i.clone());var r=a.clone();$(t.shipping_rules).each(function(e,t){c[t.location_id]=t}),r.find('option:not([value=""])').each(n),i.html(r.html()),i.val(current_checkout.get("location_id")),e.css("visibility","visible")}else e.css("visibility","hidden");return i.val(i.val()).trigger("change"),e}function n(){var e,t=$(this),n=t.val(),i=c[n];return i?(e=parseFloat(i.cost),t.text(e>0?t.data("name")+" (+"+formatters.money(current_project.get("currency"),e)+")":t.data(name))):t.remove(),t}function i(e){$(s+" .shipping-location-name").text(e)}function r(){$(s+" .shipping-location-summary").hide(),$(s+" .shipping-location-select").show()}function o(){$(s+" .shipping-location-select").hide(),$(s+" .shipping-location-summary").show()}var a,s=".NS_pledges__checkout_shipping",c={};$(document).on("change",s+" select#backing_location_id",function(){var t=$(this),n=parseInt(t.val(),10),a=c[n];isNaN(n)||current_checkout.set("location_id",n),e()||(""===t.val()||null===t.val()?r():(i(t.find("option:selected").data("name")),o())),current_checkout.set("shipping_rule",a)}),$(document).on("click",s+" a.change-shipping-location",function(e){e.preventDefault(),r()}),$(".modal_dialog:visible "+s).livequery(function(){t($(this),current_checkout.get("reward")),r()}),"undefined"!=typeof current_checkout&&(current_checkout.on_change("reward",function(){e()||t($(s),current_checkout.get("reward"))}),current_checkout.on_change("shipping_rule",function(){var e=current_checkout.get("shipping_rule"),t=e?parseFloat(e.cost):0;current_checkout.set("shipping_amount",t)})),$(s).livequery(function(){e()||t($(this),current_checkout.get("reward"))})})})(this),instrument_function(function(){$(function(){$(".NS_pledges__form #backing_amount").on("blur",function(){current_checkout.set({amount:parseInt($(this).val().replace(/[^0-9\.]/,""),10)})})})})(this),instrument_function(function(){$(function(){$(".NS_pledges__no_ship").livequery(function(){var e=$(this),t=$("form.NS_pledges__form, form.manage_pledge"),n=t.find(".fields_and_submit"),i=t.closest(".modal_dialog"),r=i.data("modal_dialog");e.find("a.override").click(function(e){e.preventDefault(),$(this).trigger("close"),t.data("override",!0),t.removeClass("submitting-non-ajax"),t.find("#backing_location_id").val(null),t.submit()}),e.find("a.button_green").click(function(t){t.preventDefault(),$(this).trigger("close"),r&&(e.hide(),n.show(),i.find("h1").show())})})})})(this),instrument_function(function(){$(function(){var e=$("body#pledges_edit"),t="body#pledges_edit form.manage_pledge",n=$(t),i=$(".radio:checked").attr("id");e.length&&n.length&&($(document).on("submit",t,function(e){var t=$("body#pledges_edit form input.radio:checked"),n=parseFloat(t.attr("alt")),i=parseFloat(current_checkout.get("shipping_amount")),r=t.attr("alt"),o=$("body#pledges_edit form input#backing_amount").val();$("#confirm-adjust-reward-amount").html(0===n?"No reward":"Reward: "+r);var a=Schwamm.FormattingHelpers.money({currency:current_project.get("currency"),value:o,precision:2});$("#confirm-adjust-pledge-amount").html("Pledge: "+a);var s=Schwamm.FormattingHelpers.money({currency:current_project.get("currency"),value:i,precision:2});$("#confirm-adjust-shipping-amount").html(i>0?"Shipping: "+s:"No shipping"),$("#confirm-adjust-pledge").modal_dialog(),e.preventDefault()}),e.on("click",".faq-question a",function(){var e=$(this).closest(".faq");track("Toggled Pledge Edit FAQ",{pledge_faq_question:e.find(".question").text()})}),$(".flash-error").livequery(function(){var e,t=parseInt($(".text#backing_amount").attr("value").replace(/,/,""),10);e="undefined"!=typeof $(".radio:checked").attr("alt")?parseInt($(".radio:checked").attr("alt").replace(/,/,""),10):null,track("Errored Pledge Selection",{pledge_tier_amount:parseInt(e,10),pledge_error_text:$(this).text(),pledge_input_amount:parseInt(t,10)})}),$(document).on("click",".amzn-payments",function(){track("Clicked Amazon Payments Logo")}),$(".pledges__checkout_rewards .checkout_rewards .radio").change("click",function(){var e=$(this).attr("id");i=e}),$(document).on("click","body#pledges_edit .confirm-yes",function(){return n.removeClass("submitting-non-ajax"),$(document).off("submit",t),n.submit(),!1}),$(document).on("click","a.cancel",function(e){e.preventDefault(),$(this).trigger("close.modal_dialog")}),$(document).on("before_close.modal_dialog",function(){n.removeClass("submitting-non-ajax")}))})})(this),instrument_function(function(){$(function(){var e=$("body#pledges_new");e.length&&($("a.show_all_rewards").click(function(e){$(this).parents(".checkout_rewards").find("li:hidden").show(),$(this).parents(".checkout_rewards").removeClass("clicked_reward"),$(this).parents(".show_all").hide(),e.preventDefault(),$(document).trigger("shifted"),track("Expanded Rewards")}),$(".flash-error").livequery(function(){var e,t=parseInt($(".text#backing_amount").attr("value").replace(/[^0-9\.]/,""),10);e="undefined"!=typeof $(".radio:checked").attr("alt")?parseInt($(".radio:checked").attr("alt").replace(/[^0-9\.]/,""),10):null,track("Errored Pledge Selection",{pledge_tier_amount:parseInt(e,10),pledge_error_text:$(this).text(),pledge_input_amount:parseInt(t,10)})}),$(document).on("click",".amzn-payments",function(){track("Clicked Amazon Payments Logo")}),-1!==location.search.indexOf("edit_from_interstitial=shipping")?track("Clicked Edit Shipping",{shipping_enabled:$(".radio:checked").parent().data("shipping_enabled"),project_country:current_project.get("country")}):-1!==location.search.indexOf("edit_from_interstitial=amount")&&track("Clicked Edit Amount",{shipping_enabled:$(".radio:checked").parent().data("shipping_enabled"),project_country:current_project.get("country")}))})})(this),instrument_function(function(){$(function(){var e=".NS_post_likes__button";$(document).on("click",e+" button",function(e){e.preventDefault();var t=$(this).closest("form");$.ajax({url:t.attr("action"),dataType:"json",type:"POST",success:function(e){if(e.modal){var t=$.create_modal_dialog("",e.data);t.data("modal_dialog").open(),"undefined"!=typeof FB&&FB.XFBML.parse(t.find(".modal_dialog_body")[0])}if(e.post){var n=Post.find(e.post.id)||new Post({id:e.post.id});
n.set(e.post)}}})})})})(this),instrument_function(function(){$(function(){var e=".NS_post_likes__namepile";$(document).on("click",e+" a#full_namepile",function(e){e.preventDefault();var t=$(this);$.ajax({url:t.attr("href"),dataType:"json",type:"GET",success:function(e){var n=_.map(e.users,function(e){return render_raw('<a href="{{url}}">{{name}}</a>',e)});n=formatters.to_sentence(n),t.parent().html(n+" like this update.")}})})})})(this),instrument_function(function(){$(function(){var e,t=$("body#posts_edit");t.length&&($(document).on("click",".wym_tools li a",function(){track("Editor Tool Click",{tool_clicked:$(this).attr("title"),context:"post_edit_body"})}),t.find(".notification_toggle a").on("click",function(){t.find(".radio_message").removeClass("visible"),t.find("."+$(this).attr("data-backers")+"_message").addClass("visible")}),t.find(".ksr_toggle a.all_backers").on("click",function(){e=t.find(".select_backers_message input:checkbox:not(:checked)"),e.prop("checked",!0),track("Update Notifications Toggle",{toggled_to:"all_backers"})}),t.find(".ksr_toggle a.select_backers").on("click",function(){e&&e.prop("checked",!1),track("Update Notifications Toggle",{toggled_to:"select_tiers"})}),t.find(".ksr_toggle a.public").on("click",function(){t.find("#post_public").val("1"),track("Update Visibility Toggle",{toggled_to:"anyone"})}),t.find(".ksr_toggle a.private").on("click",function(){t.find("#post_public").val("0"),track("Update Visibility Toggle",{toggled_to:"backers_only"})}),t.find(".email_notifications input.checkbox").on("change",function(){track("Update Tier Notification Change",{toggled_to:$(this).is(":checked")?"checked":"unchecked",selected_reward_id:$(this).data("reward-id"),selected_reward_minimum:$(this).data("reward-minimum")})}))})})(this),instrument_function(function(){$(function(){var e=$(".NS-products__autocomplete"),t=e.find(".product_autocomplete"),n=t.closest(".field"),i=t.data("search-url"),r=t.data("create-url");e.length&&(n.livesearch_selector({url:i,serialize:t,process_data:function(e){return e+"&service="+t.data("service")},process_results:function(e){return _.map(e,function(e){return[e.name,e.service_id,e]})},cancel_copy:""}),n.on("livesearch:selected",e,function(n,i){var o=i[2],a=$('<div class="spinner" />').spin("ksr","#000");o&&$.ajax({method:"POST",url:r,data:{service:t.data("service"),service_id:o.service_id},beforeSend:function(){t.before(a)},complete:function(){a.remove()},success:function(n){e.find("#product_id").val(n.product.id),t.trigger("product:selected",n.product)}})}),n.on("livesearch_selector:unselect",e,function(){n.trigger("product:unselected")}))})})(this),function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(){var e,t,n,i,r,o,a,s,c,l,u,d,f,h,p,m,g,v,_,y,b,w,k,x,j,C,S,T,I,D=[].slice;for(window.Twine={},Twine.shouldDiscardEvent={},i={},d=0,m=null,u=/^[a-z]\w*(\.[a-z]\w*|\[\d+\])*$/i,p=!1,g=null,n=null,Twine.reset=function(e,t){var n,r,o,a,s,c;null==t&&(t=document.documentElement);for(r in i)if(n=null!=(c=i[r])?c.bindings:void 0)for(a=0,s=n.length;s>a;a++)o=n[a],o.teardown&&o.teardown();return i={},m=e,g=t,g.bindingId=d=1,this},Twine.bind=function(e,n){return null==e&&(e=g),null==n&&(n=Twine.context(e)),t(n,e,!0)},Twine.register=function(e){return n?n.push(e):e()},t=function(e,r,o){var a,c,u,f,h,p,g,_,y,b,w,$,k,x,j,C,S;n=[],r.bindingId&&Twine.unbind(r),j=Twine.bindingTypes;for(b in j)a=j[b],(h=r.getAttribute(b))&&(p||(p={bindings:[]}),g=a(r,e,h,p),g&&p.bindings.push(g));for((y=r.getAttribute("context"))&&(_=l(y),"$root"===_[0]&&(e=m,_=_.slice(1)),e=s(e,_)||v(e,_,{})),(p||y||o)&&((null!=p?p:p={}).childContext=e,i[null!=r.bindingId?r.bindingId:r.bindingId=++d]=p),u=n,C=r.children||[],w=0,k=C.length;k>w;w++)f=C[w],t(e,f);for(Twine.count=d,S=u||[],$=0,x=S.length;x>$;$++)(c=S[$])();return n=null,Twine},Twine.refresh=function(){return p?void 0:(p=!0,setTimeout(Twine.refreshImmediately,0))},h=function(e){var t,n,i,r;if(e.bindings)for(r=e.bindings,n=0,i=r.length;i>n;n++)t=r[n],null!=t.refresh&&t.refresh()},Twine.refreshImmediately=function(){var e,t;p=!1;for(t in i)e=i[t],h(e)},Twine.change=function(e,t){var n;return null==t&&(t=!1),n=document.createEvent("HTMLEvents"),n.initEvent("change",t,!0),e.dispatchEvent(n)},Twine.unbind=function(e){var t,n,r,o,a,s,c,l,u,d;if(r=e.bindingId){if(t=null!=(u=i[r])?u.bindings:void 0)for(a=0,c=t.length;c>a;a++)o=t[a],o.teardown&&o.teardown();delete i[r],delete e.bindingId}for(d=e.children||[],s=0,l=d.length;l>s;s++)n=d[s],Twine.unbind(n);return this},Twine.context=function(e){return a(e,!1)},Twine.childContext=function(e){return a(e,!0)},a=function(e,t){for(var n,r,o;e;){if(e===g)return m;if(t||(e=e.parentNode),(r=e.bindingId)&&(n=null!=(o=i[r])?o.childContext:void 0))return n;t&&(e=e.parentNode)}},Twine.contextKey=function(e,t){var n,r,o,a,s;for(a=[],n=function(e){var n,i;for(n in e)if(i=e[n],t===i){a.unshift(n);break}return t=e};e&&e!==g&&(e=e.parentNode);)(o=e.bindingId)&&(r=null!=(s=i[o])?s.childContext:void 0)&&n(r);return e===g&&n(m),a.join(".")},w=function(e){var t,n;return t=e.nodeName.toLowerCase(),"input"===t||"textarea"===t||"select"===t?"checkbox"===(n=e.getAttribute("type"))||"radio"===n?"checked":"value":"textContent"},l=function(e){var t,n,i,r,o,a;for(n=[],a=e.split("."),r=0,o=a.length;o>r;r++)if(e=a[r],-1!==(i=e.indexOf("[")))for(n.push(e.substr(0,i)),e=e.substr(i);-1!==(t=e.indexOf("]"));)n.push(parseInt(e.substr(1,t),10)),e=e.substr(t+1);else n.push(e);return n},s=function(e,t){var n,i,r;for(i=0,r=t.length;r>i;i++)n=t[i],null!=e&&(e=e[n]);return e},v=function(e,t,n){var i,r,o,a,s,c;for(c=t,t=2<=c.length?D.call(c,0,o=c.length-1):(o=0,[]),r=c[o++],a=0,s=t.length;s>a;a++)i=t[a],e=null!=e[i]?e[i]:e[i]={};return e[r]=n},b=function(e){var t,n,i,r;for(i=e.attributes.length,n=0,r="";i>n;)t=e.attributes.item(n),r+=""+t.nodeName+"='"+t.textContent+"'",n+=1;return r},k=function(e,t,n){var i,r;if(c(e)&&(r=l(e)))return"$root"===r[0]?function(e,t){return s(t,r)}:function(e){return s(e,r)};try{return new Function(t,"with($context) { return "+e+" }")}catch(o){throw i=o,"Twine error: Unable to create function on "+n.nodeName+" node with attributes "+b(n)}},c=function(e){return"true"!==e&&"false"!==e&&"null"!==e&&"undefined"!==e&&u.test(e)},o=function(e){var t;return t=document.createEvent("CustomEvent"),t.initCustomEvent("bindings:change",!0,!1,{}),e.dispatchEvent(t)},Twine.bindingTypes={bind:function(e,t,n){var i,r,a,u,d,f,h,p,g,_,y,b;return b=w(e),y=e[b],d=void 0,g=void 0,r="radio"===e.getAttribute("type"),a=k(n,"$context,$root",e),h=function(){var n;return n=a.call(e,t,m),n!==d&&(d=n,n!==e[b])?(e[b]=r?n===e.value:n,o(e)):void 0},c(n)?(p=function(){if(r){if(!e.checked)return;return v(t,u,e.value)}return v(t,u,e[b])},u=l(n),_="textContent"!==b&&"hidden"!==e.type,"$root"===u[0]&&(t=m,u=u.slice(1)),null==y||!_&&""===y||null!=(f=s(t,u))||p(),_&&(i=function(){return s(t,u)!==this[b]?(p(),Twine.refreshImmediately()):void 0},$(e).on("input keyup change",i),g=function(){return $(e).off("input keyup change",i)}),{refresh:h,teardown:g}):{refresh:h}},"bind-show":function(e,t,n){var i,r;return i=k(n,"$context,$root",e),r=void 0,{refresh:function(){var n;return n=!i.call(e,t,m),n!==r?$(e).toggleClass("hide",r=n):void 0}}},"bind-class":function(e,t,n){var i,r;return i=k(n,"$context,$root",e),r={},{refresh:function(){var n,o,a;o=i.call(e,t,m);for(n in o)a=o[n],!r[n]!=!a&&$(e).toggleClass(n,!!a);return r=o}}},define:function(e,t,n){var i,r,o,a;i=k(n,"$context,$root",e),o=i.call(e,t,m);for(r in o)a=o[r],t[r]=a}},_=function(e,t){var n;return n="checked"===e||"disabled"===e||"readOnly"===e,Twine.bindingTypes["bind-"+t]=function(t,i,r){var a,s;return a=k(r,"$context,$root",t),s=void 0,{refresh:function(){var r;return r=a.call(t,i,m),n&&(r=!!r),r!==s?(t[e]=s=r,"checked"===e?o(t):void 0):void 0}}}},T=["placeholder","checked","disabled","href","title","readOnly","src"],x=0,C=T.length;C>x;x++)e=T[x],_(e,e);for(_("innerHTML","unsafe-html"),f=function(e){return("submit"===e.type||"a"===e.currentTarget.nodeName.toLowerCase())&&"1"!==e.currentTarget.getAttribute("allow-default")},y=function(e){return Twine.bindingTypes["bind-event-"+e]=function(t,n,i){var r;return r=function(r,o){var a,s;return a="function"==typeof(s=Twine.shouldDiscardEvent)[e]?s[e](r):void 0,(a||f(r))&&r.preventDefault(),a?void 0:(k(i,"$context,$root,event,data",t).call(t,n,m,r,o),Twine.refreshImmediately())},$(t).on(e,r),{teardown:function(){return $(t).off(e,r)}}}},I=["click","dblclick","mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","submit","dragenter","dragleave","dragover","drop","drag","change","keypress","keydown","keyup","input","error","done","success","fail","blur","focus","load"],j=0,S=I.length;S>j;j++)r=I[j],y(r)},{}]},{},[1]),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports&&"object"==typeof module?module.exports=e:e(jQuery)}(function(e,t){"use strict";function n(t,n,i,r){for(var o=[],a=0;a<t.length;a++){var s=t[a];if(s){var c=tinycolor(s),l=c.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";l+=tinycolor.equals(n,s)?" sp-thumb-active":"";var u=c.toString(r.preferredFormat||"rgb"),d=m?"background-color:"+c.toRgbString():"filter:"+c.toFilter();o.push('<span title="'+u+'" data-color="'+c.toRgbString()+'" class="'+l+'"><span class="sp-thumb-inner" style="'+d+';" /></span>')}else{var f="sp-clear-display";o.push(e("<div />").append(e('<span data-color="" style="background-color:transparent;" class="'+f+'"></span>').attr("title",r.noColorSelectedText)).html())}}return"<div class='sp-cf "+i+"'>"+o.join("")+"</div>"}function i(){for(var e=0;e<h.length;e++)h[e]&&h[e].hide()}function r(t,n){var i=e.extend({},f,t);return i.callbacks={move:l(i.move,n),change:l(i.change,n),show:l(i.show,n),hide:l(i.hide,n),beforeShow:l(i.beforeShow,n)},i}function o(o,s){function l(){if(W.showPaletteOnly&&(W.showPalette=!0),Ot.text(W.showPaletteOnly?W.togglePaletteMoreText:W.togglePaletteLessText),W.palette){dt=W.palette.slice(0),ft=e.isArray(dt[0])?dt:[dt],ht={};for(var t=0;t<ft.length;t++)for(var n=0;n<ft[t].length;n++){var i=tinycolor(ft[t][n]).toRgbString();ht[i]=!0}}wt.toggleClass("sp-flat",U),wt.toggleClass("sp-input-disabled",!W.showInput),wt.toggleClass("sp-alpha-enabled",W.showAlpha),wt.toggleClass("sp-clear-enabled",Jt),wt.toggleClass("sp-buttons-disabled",!W.showButtons),wt.toggleClass("sp-palette-buttons-disabled",!W.togglePaletteOnly),wt.toggleClass("sp-palette-disabled",!W.showPalette),wt.toggleClass("sp-palette-only",W.showPaletteOnly),wt.toggleClass("sp-initial-disabled",!W.showInitial),wt.addClass(W.className).addClass(W.containerClassName),z()}function f(){function t(t){return t.data&&t.data.ignore?(A(e(t.target).closest(".sp-thumb-el").data("color")),M()):(A(e(t.target).closest(".sp-thumb-el").data("color")),M(),F(!0),W.hideAfterPaletteSelect&&D()),!1}if(p&&wt.find("*:not(input)").attr("unselectable","on"),l(),zt&&yt.after(Rt).hide(),Jt||Nt.hide(),U)yt.after(wt).hide();else{var n="parent"===W.appendTo?yt.parent():e(W.appendTo);1!==n.length&&(n=e("body")),n.append(wt)}y(),qt.bind("click.spectrum touchstart.spectrum",function(t){bt||S(),t.stopPropagation(),e(t.target).is("input")||t.preventDefault()}),(yt.is(":disabled")||W.disabled===!0)&&Y(),wt.click(c),Dt.change(C),Dt.bind("paste",function(){setTimeout(C,1)}),Dt.keydown(function(e){13==e.keyCode&&C()}),Pt.text(W.cancelText),Pt.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),E(),D()}),Nt.attr("title",W.clearText),Nt.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),Gt=!0,M(),U&&F(!0)}),Mt.text(W.chooseText),Mt.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),N()&&(F(!0),D())}),Ot.text(W.showPaletteOnly?W.togglePaletteMoreText:W.togglePaletteLessText),Ot.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),W.showPaletteOnly=!W.showPaletteOnly,W.showPaletteOnly||U||wt.css("left","-="+($t.outerWidth(!0)+5)),l()}),u(Tt,function(e,t,n){ut=e/rt,Gt=!1,n.shiftKey&&(ut=Math.round(10*ut)/10),M()},x,j),u(jt,function(e,t){st=parseFloat(t/nt),Gt=!1,W.showAlpha||(ut=1),M()},x,j),u(kt,function(e,t,n){if(n.shiftKey){if(!vt){var i=ct*Z,r=et-lt*et,o=Math.abs(e-i)>Math.abs(t-r);vt=o?"x":"y"}}else vt=null;var a=!vt||"x"===vt,s=!vt||"y"===vt;a&&(ct=parseFloat(e/Z)),s&&(lt=parseFloat((et-t)/et)),Gt=!1,W.showAlpha||(ut=1),M()},x,j),Yt?(A(Yt),O(),Ut=Wt||tinycolor(Yt).format,b(Yt)):O(),U&&T();var i=p?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Et.delegate(".sp-thumb-el",i,t),At.delegate(".sp-thumb-el:nth-child(1)",i,{ignore:!0},t)}function y(){if(G&&window.localStorage){try{var t=window.localStorage[G].split(",#");t.length>1&&(delete window.localStorage[G],e.each(t,function(e,t){b(t)}))}catch(n){}try{pt=window.localStorage[G].split(";")}catch(n){}}}function b(t){if(Q){var n=tinycolor(t).toRgbString();if(!ht[n]&&-1===e.inArray(n,pt))for(pt.push(n);pt.length>mt;)pt.shift();if(G&&window.localStorage)try{window.localStorage[G]=pt.join(";")}catch(i){}}}function w(){var e=[];if(W.showPalette)for(var t=0;t<pt.length;t++){var n=tinycolor(pt[t]).toRgbString();ht[n]||e.push(pt[t])}return e.reverse().slice(0,W.maxSelectionSize)}function $(){var t=P(),i=e.map(ft,function(e,i){return n(e,t,"sp-palette-row sp-palette-row-"+i,W)});y(),pt&&i.push(n(w(),t,"sp-palette-row sp-palette-row-selection",W)),Et.html(i.join(""))}function k(){if(W.showInitial){var e=Bt,t=P();At.html(n([e,t],t,"sp-palette-row-initial",W))}}function x(){(0>=et||0>=Z||0>=nt)&&z(),wt.addClass(gt),vt=null,yt.trigger("dragstart.spectrum",[P()])}function j(){wt.removeClass(gt),yt.trigger("dragstop.spectrum",[P()])}function C(){var e=Dt.val();if(null!==e&&""!==e||!Jt){var t=tinycolor(e);t.isValid()?(A(t),F(!0)):Dt.addClass("sp-validation-error")}else A(null),F(!0)}function S(){X?D():T()}function T(){var t=e.Event("beforeShow.spectrum");return X?void z():(yt.trigger(t,[P()]),void(V.beforeShow(P())===!1||t.isDefaultPrevented()||(i(),X=!0,e(_t).bind("click.spectrum",I),e(window).bind("resize.spectrum",K),Rt.addClass("sp-active"),wt.removeClass("sp-hidden"),z(),O(),Bt=P(),k(),V.show(Bt),yt.trigger("show.spectrum",[Bt]))))}function I(e){2!=e.button&&(Qt?F(!0):E(),D())}function D(){X&&!U&&(X=!1,e(_t).unbind("click.spectrum",I),e(window).unbind("resize.spectrum",K),Rt.removeClass("sp-active"),wt.addClass("sp-hidden"),V.hide(P()),yt.trigger("hide.spectrum",[P()]))}function E(){A(Bt,!0)}function A(e,t){if(tinycolor.equals(e,P()))return void O();var n,i;!e&&Jt?Gt=!0:(Gt=!1,n=tinycolor(e),i=n.toHsv(),st=i.h%360/360,ct=i.s,lt=i.v,ut=i.a),O(),n&&n.isValid()&&!t&&(Ut=Wt||n.getFormat())}function P(e){return e=e||{},Jt&&Gt?null:tinycolor.fromRatio({h:st,s:ct,v:lt,a:Math.round(100*ut)/100},{format:e.format||Ut})}function N(){return!Dt.hasClass("sp-validation-error")}function M(){O(),V.move(P()),yt.trigger("move.spectrum",[P()])}function O(){Dt.removeClass("sp-validation-error"),L();var e=tinycolor.fromRatio({h:st,s:1,v:1});kt.css("background-color",e.toHexString());var t=Ut;1>ut&&(0!==ut||"name"!==t)&&("hex"===t||"hex3"===t||"hex6"===t||"name"===t)&&(t="rgb");var n=P({format:t}),i="";if(Ht.removeClass("sp-clear-display"),Ht.css("background-color","transparent"),!n&&Jt)Ht.addClass("sp-clear-display");else{var r=n.toHexString(),o=n.toRgbString();if(m||1===n.alpha?Ht.css("background-color",o):(Ht.css("background-color","transparent"),Ht.css("filter",n.toFilter())),W.showAlpha){var a=n.toRgb();a.a=0;var s=tinycolor(a).toRgbString(),c="linear-gradient(left, "+s+", "+r+")";p?St.css("filter",tinycolor(s).toFilter({gradientType:1},r)):(St.css("background","-webkit-"+c),St.css("background","-moz-"+c),St.css("background","-ms-"+c),St.css("background","linear-gradient(to right, "+s+", "+r+")"))}i=n.toString(t)}W.showInput&&Dt.val(i),W.showPalette&&$(),k()}function L(){var e=ct,t=lt;if(Jt&&Gt)It.hide(),Ct.hide(),xt.hide();else{It.show(),Ct.show(),xt.show();var n=e*Z,i=et-t*et;n=Math.max(-tt,Math.min(Z-tt,n-tt)),i=Math.max(-tt,Math.min(et-tt,i-tt)),xt.css({top:i+"px",left:n+"px"});var r=ut*rt;It.css({left:r-ot/2+"px"});var o=st*nt;Ct.css({top:o-at+"px"})}}function F(e){var t=P(),n="",i=!tinycolor.equals(t,Bt);t&&(n=t.toString(Ut),b(t)),Lt&&yt.val(n),e&&i&&(V.change(t),yt.trigger("change",[t]))}function z(){Z=kt.width(),et=kt.height(),tt=xt.height(),it=jt.width(),nt=jt.height(),at=Ct.height(),rt=Tt.width(),ot=It.width(),U||(wt.css("position","absolute"),wt.offset(W.offset?W.offset:a(wt,qt))),L(),W.showPalette&&$(),yt.trigger("reflow.spectrum")}function R(){yt.show(),qt.unbind("click.spectrum touchstart.spectrum"),wt.remove(),Rt.remove(),h[Vt.id]=null}function q(n,i){return n===t?e.extend({},W):i===t?W[n]:(W[n]=i,void l())}function H(){bt=!1,yt.attr("disabled",!1),qt.removeClass("sp-disabled")}function Y(){D(),bt=!0,yt.attr("disabled",!0),qt.addClass("sp-disabled")}function B(e){W.offset=e,z()}var W=r(s,o),U=W.flat,Q=W.showSelectionPalette,G=W.localStorageKey,J=W.theme,V=W.callbacks,K=d(z,10),X=!1,Z=0,et=0,tt=0,nt=0,it=0,rt=0,ot=0,at=0,st=0,ct=0,lt=0,ut=1,dt=[],ft=[],ht={},pt=W.selectionPalette.slice(0),mt=W.maxSelectionSize,gt="sp-dragging",vt=null,_t=o.ownerDocument,yt=(_t.body,e(o)),bt=!1,wt=e(_,_t).addClass(J),$t=wt.find(".sp-picker-container"),kt=wt.find(".sp-color"),xt=wt.find(".sp-dragger"),jt=wt.find(".sp-hue"),Ct=wt.find(".sp-slider"),St=wt.find(".sp-alpha-inner"),Tt=wt.find(".sp-alpha"),It=wt.find(".sp-alpha-handle"),Dt=wt.find(".sp-input"),Et=wt.find(".sp-palette"),At=wt.find(".sp-initial"),Pt=wt.find(".sp-cancel"),Nt=wt.find(".sp-clear"),Mt=wt.find(".sp-choose"),Ot=wt.find(".sp-palette-toggle"),Lt=yt.is("input"),Ft=Lt&&g&&"color"===yt.attr("type"),zt=Lt&&!U,Rt=zt?e(v).addClass(J).addClass(W.className).addClass(W.replacerClassName):e([]),qt=zt?Rt:yt,Ht=Rt.find(".sp-preview-inner"),Yt=W.color||Lt&&yt.val(),Bt=!1,Wt=W.preferredFormat,Ut=Wt,Qt=!W.showButtons||W.clickoutFiresChange,Gt=!Yt,Jt=W.allowEmpty&&!Ft;f();var Vt={show:T,hide:D,toggle:S,reflow:z,option:q,enable:H,disable:Y,offset:B,set:function(e){A(e),F()},get:P,destroy:R,container:wt};return Vt.id=h.push(Vt)-1,Vt}function a(t,n){var i=0,r=t.outerWidth(),o=t.outerHeight(),a=n.outerHeight(),s=t[0].ownerDocument,c=s.documentElement,l=c.clientWidth+e(s).scrollLeft(),u=c.clientHeight+e(s).scrollTop(),d=n.offset();return d.top+=a,d.left-=Math.min(d.left,d.left+r>l&&l>r?Math.abs(d.left+r-l):0),d.top-=Math.min(d.top,d.top+o>u&&u>o?Math.abs(o+a-i):i),d}function s(){}function c(e){e.stopPropagation()}function l(e,t){var n=Array.prototype.slice,i=n.call(arguments,2);return function(){return e.apply(t,i.concat(n.call(arguments)))}}function u(t,n,i,r){function o(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function a(e){if(u){if(p&&l.documentMode<9&&!e.button)return c();var i=e.originalEvent&&e.originalEvent.touches,r=i?i[0].pageX:e.pageX,a=i?i[0].pageY:e.pageY,s=Math.max(0,Math.min(r-d.left,h)),g=Math.max(0,Math.min(a-d.top,f));m&&o(e),n.apply(t,[s,g,e])}}function s(n){var r=n.which?3==n.which:2==n.button;r||u||i.apply(t,arguments)!==!1&&(u=!0,f=e(t).height(),h=e(t).width(),d=e(t).offset(),e(l).bind(g),e(l.body).addClass("sp-dragging"),m||a(n),o(n))}function c(){u&&(e(l).unbind(g),e(l.body).removeClass("sp-dragging"),r.apply(t,arguments)),u=!1}n=n||function(){},i=i||function(){},r=r||function(){};var l=document,u=!1,d={},f=0,h=0,m="ontouchstart"in window,g={};g.selectstart=o,g.dragstart=o,g["touchmove mousemove"]=a,g["touchend mouseup"]=c,e(t).bind("touchstart mousedown",s)}function d(e,t,n){var i;return function(){var r=this,o=arguments,a=function(){i=null,e.apply(r,o)};n&&clearTimeout(i),(n||!i)&&(i=setTimeout(a,t))}}var f={beforeShow:s,move:s,change:s,show:s,hide:s,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!1,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},h=[],p=!!/msie/i.exec(window.navigator.userAgent),m=function(){function e(e,t){return!!~(""+e).indexOf(t)}var t=document.createElement("div"),n=t.style;return n.cssText="background-color:rgba(0,0,0,.5)",e(n.backgroundColor,"rgba")||e(n.backgroundColor,"hsla")}(),g=function(){var t=e("<input type='color' value='!' />")[0];return"color"===t.type&&"!"!==t.value}(),v=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),_=function(){var e="";if(p)for(var t=1;6>=t;t++)e+="<div class='sp-"+t+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",e,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),y="spectrum.id";e.fn.spectrum=function(t){if("string"==typeof t){var n=this,i=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=h[e(this).data(y)];if(r){var o=r[t];if(!o)throw new Error("Spectrum: no such method: '"+t+"'");"get"==t?n=r.get():"container"==t?n=r.container:"option"==t?n=r.option.apply(r,i):"destroy"==t?(r.destroy(),e(this).removeData(y)):o.apply(r,i)}}),n}return this.spectrum("destroy").each(function(){var n=e.extend({},t,e(this).data()),i=o(this,n);e(this).data(y,i.id)})},e.fn.spectrum.load=!0,e.fn.spectrum.loadOpts={},e.fn.spectrum.draggable=u,e.fn.spectrum.defaults=f,e.spectrum={},e.spectrum.localization={},e.spectrum.palettes={},e.fn.spectrum.processNativeColorInputs=function(){g||e("input[type=color]").spectrum({preferredFormat:"hex6"})},function(){function e(e){var n={r:0,g:0,b:0},r=1,a=!1,s=!1;return"string"==typeof e&&(e=A(e)),"object"==typeof e&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(n=t(e.r,e.g,e.b),a=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=I(e.s),e.v=I(e.v),n=o(e.h,e.s,e.v),a=!0,s="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=I(e.s),e.l=I(e.l),n=i(e.h,e.s,e.l),a=!0,s="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=$(r),{ok:a,format:e.format||s,r:F(255,z(n.r,0)),g:F(255,z(n.g,0)),b:F(255,z(n.b,0)),a:r}}function t(e,t,n){return{r:255*k(e,255),g:255*k(t,255),b:255*k(n,255)}}function n(e,t,n){e=k(e,255),t=k(t,255),n=k(n,255);var i,r,o=z(e,t,n),a=F(e,t,n),s=(o+a)/2;if(o==a)i=r=0;else{var c=o-a;switch(r=s>.5?c/(2-o-a):c/(o+a),o){case e:i=(t-n)/c+(n>t?6:0);break;case t:i=(n-e)/c+2;break;case n:i=(e-t)/c+4}i/=6}return{h:i,s:r,l:s}}function i(e,t,n){function i(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+(t-e)*(2/3-n)*6:e}var r,o,a;if(e=k(e,360),t=k(t,100),n=k(n,100),0===t)r=o=a=n;else{var s=.5>n?n*(1+t):n+t-n*t,c=2*n-s;r=i(c,s,e+1/3),o=i(c,s,e),a=i(c,s,e-1/3)}return{r:255*r,g:255*o,b:255*a}}function r(e,t,n){e=k(e,255),t=k(t,255),n=k(n,255);var i,r,o=z(e,t,n),a=F(e,t,n),s=o,c=o-a;if(r=0===o?0:c/o,o==a)i=0;else{switch(o){case e:i=(t-n)/c+(n>t?6:0);break;case t:i=(n-e)/c+2;break;case n:i=(e-t)/c+4}i/=6}return{h:i,s:r,v:s}}function o(e,t,n){e=6*k(e,360),t=k(t,100),n=k(n,100);var i=O.floor(e),r=e-i,o=n*(1-t),a=n*(1-r*t),s=n*(1-(1-r)*t),c=i%6,l=[n,a,o,o,s,n][c],u=[s,n,n,a,o,o][c],d=[o,o,s,n,n,a][c];return{r:255*l,g:255*u,b:255*d}}function a(e,t,n,i){var r=[T(L(e).toString(16)),T(L(t).toString(16)),T(L(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function s(e,t,n,i){var r=[T(D(i)),T(L(e).toString(16)),T(L(t).toString(16)),T(L(n).toString(16))];return r.join("")}function c(e,t){t=0===t?0:t||10;var n=q(e).toHsl();return n.s-=t/100,n.s=x(n.s),q(n)}function l(e,t){t=0===t?0:t||10;var n=q(e).toHsl();return n.s+=t/100,n.s=x(n.s),q(n)}function u(e){return q(e).desaturate(100)}function d(e,t){t=0===t?0:t||10;var n=q(e).toHsl();return n.l+=t/100,n.l=x(n.l),q(n)}function f(e,t){t=0===t?0:t||10;var n=q(e).toRgb();return n.r=z(0,F(255,n.r-L(255*-(t/100)))),n.g=z(0,F(255,n.g-L(255*-(t/100)))),n.b=z(0,F(255,n.b-L(255*-(t/100)))),q(n)}function h(e,t){t=0===t?0:t||10;var n=q(e).toHsl();return n.l-=t/100,n.l=x(n.l),q(n)}function p(e,t){var n=q(e).toHsl(),i=(L(n.h)+t)%360;return n.h=0>i?360+i:i,q(n)}function m(e){var t=q(e).toHsl();return t.h=(t.h+180)%360,q(t)}function g(e){var t=q(e).toHsl(),n=t.h;return[q(e),q({h:(n+120)%360,s:t.s,l:t.l}),q({h:(n+240)%360,s:t.s,l:t.l})]}function v(e){var t=q(e).toHsl(),n=t.h;return[q(e),q({h:(n+90)%360,s:t.s,l:t.l}),q({h:(n+180)%360,s:t.s,l:t.l}),q({h:(n+270)%360,s:t.s,l:t.l})]}function _(e){var t=q(e).toHsl(),n=t.h;return[q(e),q({h:(n+72)%360,s:t.s,l:t.l}),q({h:(n+216)%360,s:t.s,l:t.l})]}function y(e,t,n){t=t||6,n=n||30;var i=q(e).toHsl(),r=360/n,o=[q(e)];for(i.h=(i.h-(r*t>>1)+720)%360;--t;)i.h=(i.h+r)%360,o.push(q(i));return o}function b(e,t){t=t||6;for(var n=q(e).toHsv(),i=n.h,r=n.s,o=n.v,a=[],s=1/t;t--;)a.push(q({h:i,s:r,v:o})),o=(o+s)%1;return a}function w(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function $(e){return e=parseFloat(e),(isNaN(e)||0>e||e>1)&&(e=1),e}function k(e,t){C(e)&&(e="100%");var n=S(e);return e=F(t,z(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),O.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function x(e){return F(1,z(0,e))}function j(e){return parseInt(e,16)}function C(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function S(e){return"string"==typeof e&&-1!=e.indexOf("%")}function T(e){return 1==e.length?"0"+e:""+e}function I(e){return 1>=e&&(e=100*e+"%"),e}function D(e){return Math.round(255*parseFloat(e)).toString(16)}function E(e){return j(e)/255}function A(e){e=e.replace(P,"").replace(N,"").toLowerCase();var t=!1;if(H[e])e=H[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=B.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=B.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=B.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=B.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=B.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=B.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=B.hex8.exec(e))?{a:E(n[1]),r:j(n[2]),g:j(n[3]),b:j(n[4]),format:t?"name":"hex8"}:(n=B.hex6.exec(e))?{r:j(n[1]),g:j(n[2]),b:j(n[3]),format:t?"name":"hex"}:(n=B.hex3.exec(e))?{r:j(n[1]+""+n[1]),g:j(n[2]+""+n[2]),b:j(n[3]+""+n[3]),format:t?"name":"hex"}:!1}var P=/^[\s,#]+/,N=/\s+$/,M=0,O=Math,L=O.round,F=O.min,z=O.max,R=O.random,q=function W(t,n){if(t=t?t:"",n=n||{},t instanceof W)return t;if(!(this instanceof W))return new W(t,n);var i=e(t);this._originalInput=t,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=L(100*this._a)/100,this._format=n.format||i.format,this._gradientType=n.gradientType,this._r<1&&(this._r=L(this._r)),this._g<1&&(this._g=L(this._g)),this._b<1&&(this._b=L(this._b)),this._ok=i.ok,this._tc_id=M++};q.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},setAlpha:function(e){return this._a=$(e),this._roundA=L(100*this._a)/100,this},toHsv:function(){var e=r(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=r(this._r,this._g,this._b),t=L(360*e.h),n=L(100*e.s),i=L(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=n(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=n(this._r,this._g,this._b),t=L(360*e.h),i=L(100*e.s),r=L(100*e.l);return 1==this._a?"hsl("+t+", "+i+"%, "+r+"%)":"hsla("+t+", "+i+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return a(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return s(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:L(this._r),g:L(this._g),b:L(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+L(this._r)+", "+L(this._g)+", "+L(this._b)+")":"rgba("+L(this._r)+", "+L(this._g)+", "+L(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:L(100*k(this._r,255))+"%",g:L(100*k(this._g,255))+"%",b:L(100*k(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+L(100*k(this._r,255))+"%, "+L(100*k(this._g,255))+"%, "+L(100*k(this._b,255))+"%)":"rgba("+L(100*k(this._r,255))+"%, "+L(100*k(this._g,255))+"%, "+L(100*k(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:Y[a(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+s(this._r,this._g,this._b,this._a),n=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var r=q(e);n=r.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0,r=!t&&i&&("hex"===e||"hex6"===e||"hex3"===e||"name"===e);return r?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(f,arguments)},darken:function(){return this._applyModification(h,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(u,arguments)},spin:function(){return this._applyModification(p,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(m,arguments)},monochromatic:function(){return this._applyCombination(b,arguments)},splitcomplement:function(){return this._applyCombination(_,arguments)},triad:function(){return this._applyCombination(g,arguments)},tetrad:function(){return this._applyCombination(v,arguments)}},q.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]="a"===i?e[i]:I(e[i]));e=n}return q(e,t)},q.equals=function(e,t){return e&&t?q(e).toRgbString()==q(t).toRgbString():!1},q.random=function(){return q.fromRatio({r:R(),g:R(),b:R()})},q.mix=function(e,t,n){n=0===n?0:n||50;var i,r=q(e).toRgb(),o=q(t).toRgb(),a=n/100,s=2*a-1,c=o.a-r.a;i=s*c==-1?s:(s+c)/(1+s*c),i=(i+1)/2;var l=1-i,u={r:o.r*i+r.r*l,g:o.g*i+r.g*l,b:o.b*i+r.b*l,a:o.a*a+r.a*(1-a)};
return q(u)},q.readability=function(e,t){var n=q(e),i=q(t),r=n.toRgb(),o=i.toRgb(),a=n.getBrightness(),s=i.getBrightness(),c=Math.max(r.r,o.r)-Math.min(r.r,o.r)+Math.max(r.g,o.g)-Math.min(r.g,o.g)+Math.max(r.b,o.b)-Math.min(r.b,o.b);return{brightness:Math.abs(a-s),color:c}},q.isReadable=function(e,t){var n=q.readability(e,t);return n.brightness>125&&n.color>500},q.mostReadable=function(e,t){for(var n=null,i=0,r=!1,o=0;o<t.length;o++){var a=q.readability(e,t[o]),s=a.brightness>125&&a.color>500,c=3*(a.brightness/125)+a.color/500;(s&&!r||s&&r&&c>i||!s&&!r&&c>i)&&(r=s,i=c,n=q(t[o]))}return n};var H=q.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Y=q.hexNames=w(H),B=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+r),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();window.tinycolor=q}(),e(function(){e.fn.spectrum.load&&e.fn.spectrum.processNativeColorInputs()})}),function(){function e(e){var t=document.createRange();t.selectNodeContents(e);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}function t(){var e=window.getSelection();e.removeAllRanges()}var n=["background_color","link_background_color","link_text","link_text_color","link_url","name","blurb","text_color","feature_image_attributes","background_image_attributes"],i=Model.extend();i.on_initialize(function(){this.on_change(function(){this.binder&&this.binder.refresh()})}),i.prototype.setupProfileDirtyWatchers=function(){var e=this,t=this.get("profile");n.forEach(function(n){t.listen(n,function(){e.set("dirty",!0),e.set("hasBeenDirty."+n,!0),e.binder.refresh()})})},i.prototype.$=function(e){return $(e,this.$NS)},i.prototype.setBinder=function(e){this.binder=e},i.prototype.toggleDirty=function(){this.set("dirty",!this.get("dirty"))},i.prototype.hasLink=function(){return Boolean(this.get("profile").get("link_url"))},i.prototype.isImageProcessing=function(){return this.isImageState("feature","processing")||this.isImageState("background","processing")},i.prototype.isImageState=function(e,t){return this.get("images."+e+".state")===t},i.prototype.setImageState=function(e,t){this.set("images."+e+".state",t)},i.prototype.isImageRemoved=function(e){return!this.get("images."+e+".current")},i.prototype.isEditing=function(e){return this.get("activeSection")===e},i.prototype.otherEditing=function(e){var t=this.get("activeSection");return t&&t!==e},i.prototype.canEnterEditing=function(){return this.get("userPasswordVerified")},i.prototype.loginRedirect=function(){window.location=this.get("loginPath")},i.prototype.inlineEditToggle=function(e){this.isEditing(e)?this.inlineEditExit(e):this.inlineEditEnter(e)},i.prototype.inlineEditEnter=function(e){if(!this.canEnterEditing())return void this.loginRedirect();if(!this.isEditing(e)){this.inlineEditExit(),this.set("activeSection",e);var t=this[e+"Enter"];_.isFunction(t)&&t.call(this)}},i.prototype.inlineEditExit=function(e){if(e=e||this.get("activeSection")){this.set("activeSection","");var t=this[e+"Exit"];_.isFunction(t)&&t.call(this)}},i.prototype._enterContentEditable=function(t){var n=this.$(t);n.attr("contentEditable",!0),e(n[0]),setTimeout(function(){return n.focus()},0)},i.prototype._toggleIconTray=function(e){var t=this.$(".js-edit-icon--multiple-options"),n=this.$(e);t.not(n).removeClass("is-open"),n.toggleClass("is-open")},i.prototype.featureImageEnter=function(){this._toggleIconTray(".js-feature-image-edit-tray")},i.prototype.featureImageExit=function(){this._toggleIconTray(".js-feature-image-edit-tray")},i.prototype.themeEnter=function(){this._toggleIconTray(".js-theme-edit-tray")},i.prototype.themeExit=function(){this._toggleIconTray(".js-theme-edit-tray")},i.prototype._exitContentEditable=function(e){this.$(e).attr("contentEditable",!1),t()},i.prototype.blurbEnter=function(){this._enterContentEditable(".edit-profile-blurb")},i.prototype.blurbExit=function(){this._exitContentEditable(".edit-profile-blurb")},i.prototype.nameEnter=function(){this._enterContentEditable(".js-edit-profile-name")},i.prototype.nameExit=function(){this._exitContentEditable(".js-edit-profile-name")},i.prototype.linkEnter=function(){this._enterContentEditable(".js-profile-link")},i.prototype.linkExit=function(){this._exitContentEditable(".js-profile-link")},i.prototype.linkHasBeenDirty=function(){return["link_background_color","link_text","link_text_color","link_url"].some(function(e){return this.get("hasBeenDirty."+e)}.bind(this))},i.prototype.setImage=function(e,t){this.set("images."+e+".current",t)},i.prototype.changeImage=function(e,t){this.setImage(e,t),this.set("images."+e+".state","changed")},i.prototype.addImageVersion=function(e,t,n,i){this.set("images."+e+".versions."+t,{id:n,url:i})},i.prototype.canRevertFeatureImage=function(){return this.isImageRemoved("feature")||this.get("profile").get("show_feature_image")},i.prototype.isPublishing=function(){return"publishing"===this.get("publishState")},i.prototype.publishSuccess=function(e){return e.success?(this.toggleDirty(),this.set("publishState",""),void growl({success:I18n.t("onloads.views.project_profiles.edit.Publish_successful")})):(this.publishFailure(e),!1)},i.prototype.publishFailure=function(e){var t,n=I18n.t("onloads.views.project_profiles.edit.errors.Publish_failure");if(e.state)t=n;else{var i=this._translatePublishErrors(e.errors);t=""+n+": "+i.join(", ")}growl({error:t}),this.set("publishState","error")},i.prototype._translatePublishErrors=function(e){return _.reduce(e,function(e,t,n){switch(n){case"link_url":e.push(I18n.t("onloads.views.project_profiles.edit.errors.Invalid_link_url"));break;default:e.push(""+n+" "+t.join(", "))}return e},[])},i.prototype.publish=function(){this.inlineEditExit(),this.set("publishState","");var e=this.get("profile");e.tryFixValidationErrors();var t=e.validate();if(t.length)return this.publishFailure({errors:t}),!1;var n=$.ajax({url:this.get("profileURL"),method:"PUT",dataType:"json",data:e.data_for_rails()});n.then(this.publishSuccess.bind(this),this.publishFailure.bind(this)),this.set("publishState","publishing")},i.prototype.discard=function(){this.set("dirty",!1),this.replace("hasBeenDirty",{});var e=this.get("images.feature.versions.published"),t=e.url;this.setImage("feature",t),this.setImageState("feature","published");var n=this.get("images.background.versions.published"),i=n.url;this.setImage("background",i),this.setImageState("background","published")},i.prototype.reset=function(){this.set({dirty:!1,hasBeenDirty:{},activeSection:"",publishState:"",images:{feature:{state:"published",current:null,versions:{project:{},published:{}}},background:{state:"published",current:null,versions:{published:{}}}}})},root.ProjectProfileEditController=i}(),define_namespace(".NS_projects__hero_post_funding",function(e){function t(){var e=$.parseEscapedJSON(window.current_project_profile);if(e.feature_image_attributes||(e.feature_image_attributes={}),e.background_image_attributes||(e.background_image_attributes={}),"inactive"!==e.state)return e;e.blurb=current_project.get("blurb"),e.name=current_project.get("name");var t=$(".js-profile-link");return e.link_text=t.text().trim(),e}function n(e,t){var n=$(e.currentTarget);c.set(n.attr("name"),t.toHex())}function i(t,n){e.find(t).css("background-color",n)}function r(){o.find(".js-project-profile-controls__left").css({left:$(".js-expand-creator-nav").outerWidth()+20})}var o=$(".NS_project_profiles__edit");if(o.length){var a={background:"xlarge",feature:"large"},s=t(),c=new CurrentProjectProfile(s);c.setDiscardState(s);var l=new ProjectProfileEditController({profile:c,profileURL:o.data("url"),loginPath:o.data("login-path"),userPasswordVerified:o.data("user-password-verified")});l.reset(),l.setupProfileDirtyWatchers();var u=o.data("projectPhoto");if(l.addImageVersion("feature","project",null,u),c.get("show_feature_image"))if(c.get("feature_image_attributes.id")){var d=o.data("featureImage");l.addImageVersion("feature","published",c.get("feature_image_attributes.id"),d),l.setImage("feature",d)}else l.addImageVersion("feature","published",null,null);else l.addImageVersion("feature","published",null,u),l.setImage("feature",u);if(c.get("background_image_attributes.id")){var f=o.data("backgroundImage");l.addImageVersion("background","published",c.get("background_image_attributes.id"),f),l.setImage("background",f)}else l.addImageVersion("background","published",null,null);l.$NS=e;var h=Twine.reset(l,e.get(0)).bind();h.refresh(),l.setBinder(h),$(window).on("beforeunload.inlineedit",function(){return l.get("dirty")?I18n.t("onloads.views.project_profiles.edit.You_have_unsaved_changes"):void 0}),$(".js-add-link-button").on("click",function(e){c.set("link_url",document.location.toString()),l.inlineEditEnter("link"),e.preventDefault()}),$(".js-remove-link-button").on("click",function(){c.set({link_url:null,link_text:null,link_background_color:null,link_text_color:null}),l.inlineEditExit()}),["feature","background"].forEach(function(t){var n=e.find(".js-inline-edit-"+t+"-image input.file");n.ksr_uploader(),n.on("ksr_uploader:uploaded",function(e,n){var i=n.image_urls[a[t]],r=n.id;c.replace(t+"_image_attributes",{id:r}),l.changeImage(t,i)}),n.on("file_queued",function(){return l.setImageState(t,"processing")})}),e.find(".js-inline-edit-feature-image input.file").on("ksr_uploader:uploaded",function(){return c.set("show_feature_image",!0)}),l.listen("images.feature.current",function(){var t=this.get("images.feature.current");t?e.find(".js-feature-image").attr("src",t):(e.find(".js-feature-image").removeAttr("src"),$(".js-inline-edit-feature-image input.file").val(null))}),l.listen("images.background.current",function(){var t=this.get("images.background.current");t?e.find(".js-profile-background-image").css("backgroundImage",'url("'+t+'")'):(e.find(".js-profile-background-image").css("backgroundImage","none"),$(".js-inline-edit-background-image input.file").val(null))}),[{section:"link",attr:"link_text",selector:".js-profile-link"},{section:"blurb",attr:"blurb",selector:".js-edit-profile-blurb"},{section:"name",attr:"name",selector:".js-edit-profile-name"}].forEach(function(t){var n=t.section,i=t.attr,r=t.selector;e.find(r).on("keyup",function(e){return e.which===KEY.ESC?void l.inlineEditExit(n):void c.set(i,$(this).text())}),c.listen(i,function(){l.isEditing(n)||e.find(r).text(this.get(i))})}),[{section:"link",attr:"link_url",selector:"input[name=link_url]"}].forEach(function(t){var n=t.section,i=t.attr,r=t.selector;e.find(r).on("keyup",function(e){var t=$(e.currentTarget);c.set(i,t.val())}),c.listen(i,function(){l.isEditing(n)||e.find(r).val(this.get(i))})}),$(".js-remove-feature-image").on("click",function(){l.setImageState("feature","changed"),l.setImage("feature",null),c.set("feature_image_attributes._destroy",!0),c.set("show_feature_image",!0)}),$(".js-revert-feature-image").on("click",function(){var e=l.get("images.feature.versions.project"),t=e.url;l.setImageState("feature","project"),l.setImage("feature",t),c.set("feature_image_attributes._destroy",!0),c.set("show_feature_image",!1)}),$(".js-remove-background-image").on("click",function(){l.setImageState("background","changed"),l.setImage("background",null),c.set("background_image_attributes._destroy",!0)});var p=e.find("input[name=link_background_color], input[name=link_text_color], input[name=background_color], input[name=text_color]");p.on("move.spectrum",n),p.on("change.spectrum, dragstop.spectrum",n),$(p).spectrum({showButtons:!1,showInput:!0,flat:!0,preferredFormat:"hex"}),e.find(".js-inline-edit-publish").on("click",function(){if(l.publish(),c.publishSuccess(),l.setImageState("feature","published"),c.get("show_feature_image")){var e=c.get("feature_image_attributes.id");e=e?e:null,l.addImageVersion("feature","published",e,l.get("images.feature.current"))}else l.addImageVersion("feature","published",null,l.get("images.feature.versions.project.url"));l.setImageState("background","published");var t=c.get("background_image_attributes.id");t=t?t:null,l.addImageVersion("background","published",t,l.get("images.background.current"))}),e.find(".js-inline-edit-discard").on("click",function(t){t.stopPropagation(),e.find(".ksr-popover").trigger("ksr_popover:close"),l.inlineEditExit(),c.discard(),l.discard(),p.each(function(e,t){var n=$(t),i=n.prop("name");n.spectrum("set",c.get(i))})}),e.find(".js-tray-control").on("click",function(e){var t=$(this),n=t.siblings(".js-tray");e.preventDefault(),n.slideToggle(200)}),c.listen("link_url",function(){e.find(".js-profile-link").attr("href",this.get("link_url"))}),c.listen("link_background_color",function(){var t=this.get("link_background_color_hex"),n=e.find(".js-profile-link");n.css("background-color",t),i(".js-profile-link-background-color-swatch",t)}),c.listen("link_text_color",function(){var t=this.get("link_text_color_hex"),n=this.get("link_background_color_hex"),r=e.find(".js-profile-link");r.css("cssText","color: "+t+" !important; background-color: "+n),i(".js-profile-link-text-color-swatch",t)}),c.listen("background_color",function(){var e=this.get("background_color_hex");$(".js-profile-hero, .js-profile-background-image").css("background-color",e),i(".js-profile-background-color-swatch",e)}),c.listen("text_color",function(){var t=this.get("text_color_hex");e.add(".js-update-text-color").css("color",t),$(".js-update-border-color").css("background-color",t),i(".js-profile-text-color-swatch",t)}),$(document).resize(function(){r()}),r()}}),instrument_function(function(){$(function(){var e=$("#admin-menu");if(e.length){var t=function(t,n){return $.ajax({url:t,data:{project:{ksr_rating:n}},type:"PUT",dataType:"JSON"}).then(function(){e.find(".rating .ss-star").removeClass("selected"),e.find(".rating .ss-star").slice(0,n).addClass("selected")})};$(document).on("keydown",function(n){if(n.ctrlKey){var i,r;n.which>=49&&n.which<=53&&(i=n.which-48,r=e.find(".rating a")[0].href,t(r,i).then(function(){growl({info:i+"\u2605"})}))}}),e.find(".rating a").on("click",function(e){e.preventDefault(),t(this.href,$(this).data("rating"))})}})})(this),instrument_function(function(){$(function(){var e=$(".NS-projects__admin_keyboard_control");e.length&&$(document).on("keydown",function(t){if(t.ctrlKey){var n=e.find("#project_moderated_state"),i=e.find("form"),r="";switch(t.which){case 65:if("submitted"===current_project.get("state"))return;r="acceptable";break;case 84:r="tolerated";break;default:return}n.val(r),$.ajax({url:i.attr("action"),type:i.attr("method"),dataType:"json",data:i.serialize(),success:function(){growl({info:r})}}),$("#admin-nav-wrap span.moderation_status").text(r.substring(0,3))}})})})(this),instrument_function(function(){$(function(){var e=$(".NS_projects__creator_nav");e.length&&($(".js-expand-creator-nav").on("click",function(e){var t=$("body");t.hasClass("creator_nav_visible")?(t.removeClass("creator_nav_visible"),track("Creator Nav Toggle",{toggled_to:"hidden"})):(t.addClass("creator_nav_visible"),track("Creator Nav Toggle",{toggled_to:"visible"})),e.preventDefault()}),track_links("#creator_nav a.track","Creator Nav Link Click"))})})(this),instrument_function(function(){$(function(){var e=$(".js-could-have-report-project");e.length&&e.on("click","#report-issue-link",function(e){var t=$(this),n=$("#project-issues");e.preventDefault(),t.hide(),n.slideDown()})})})(this),instrument_function(function(){!function(e){e.fn.videoTracksEditor=function(){var t=e(this);t.on("click",".js-add-track",function(t){var n,i=e(t.currentTarget),r=i.closest(".js-subtitles"),o=r.find(".js-language-select"),a=r.find(".js-track-list"),s=o.find("option:selected").val();n=e.ajax({method:"POST",url:i.data("create-track-path"),data:{language:s,captionable_type:i.data("captionable-type"),captionable_id:i.data("captionable-id")},dataType:"json"}),n.success(function(e){a.append(e.html),o.find('option[value="'+s+'"]').prop("disabled",!0),o.ksr_val(o.find("option").not("[disabled]").first().val())}),t.preventDefault()}),t.on("click",".js-captionable--destroy-track",function(t){var n,i=e(t.currentTarget),r=i.closest(".js-subtitles"),o=r.find(".js-language-select"),a=i.data("path");t.preventDefault(),confirm("Are you sure you want to delete this track?")&&(n=e.ajax({method:"DELETE",url:a}),n.success(function(e){var t=i.data("language");e.ok&&(o.find('option[value="'+t+'"]').prop("disabled",!1),i.closest(".js-captionable--track-item").remove())}))})}}(jQuery)})(this),define_namespace(".NS-projects__edit_about",function(e){e.videoTracksEditor()}),instrument_function(function(){$(function(){function e(e){var t=e.val(),n=$(".js-subcategories"),i=n.data("subcategories")[t];n.html(render("projects/_edit_subcategories",{root_id:t,subcategories:i}))}var t=".js-root_category",n=$(t);n.livequery(function(){var t=$(this);e(t),t.prop("disabled",!1)}),$(document).on("change",t,function(){e($(this))}),function(){function e(e){$("#duration_duration, #duration_deadline").each(function(){var n=$(this),i=n.is(":checked");n.is("#duration_duration")?i&&(e||(r=!0,$("#project_duration").focus()),$.browser.msie?$("#project-duration-calendar").hide():$("#project-duration-calendar").slideUp(200),$("#project_deadline").val("")):n.is("#duration_deadline")&&i&&($("#project_duration").val(""),$.browser.msie?$("#project-duration-calendar").show():$("#project-duration-calendar").slideDown(200),t&&$("#project-duration-calendar input.input-calendar-date").val(t._copy_date_with_time(t.selected_date,t.time).toString("yyyy-MM-dd HH:mm:ss")))})}var t,n=$("#project-duration-calendar"),i=n.find("div.calendar"),r=!1;i.livequery(function(){var n,i=$("#project-duration-calendar input.input-calendar-date");$(this).on("calendar_date_picker:date_selected",function(e,t){var n=moment(t).format("YYYY-MM-DD HH:mm:ss Z");i.val(n),i.trigger("change")}),n=""!==i.val()?moment(i.val(),"YYYY-MM-DD HH:mm:ss Z").toDate():moment().add("days",30).toDate(),t=$(this).calendar_date_picker({allow_deselect:!1,previous_month_text:"<",next_month_text:">",time_text:"Time:",selected_date:n}).data("calendar_date_picker"),e(!0)}),$("#the-basics-panel").on("focus","#project_duration",function(){return r?void(r=!1):($("#duration_duration").prop("checked",!0),void e())}),$(document).on("change click","#the-basics-panel .funding-duration input.radio",e),$(document).on("click","#the-basics-panel .funding-duration em.rec",function(){$(this).closest("li").find("input.text").focus()})}()})})(this),instrument_function(function(){$(function(){function e(e){var t=e.siblings(".warning"),n=a.exec(e.val());n?(t.html(I18n.t("onloads.views.projects.edit_rewards.Reward_warning_Please_make_sure_you_are_not_offering",{word:n[0]})),t.slideDown(),t.trigger("shifted")):(t.slideUp(),t.trigger("shifted"))}function t(e){e.find(".js-rest_of_world .js-cost_label").each(function(){var t=$(this),n=!e.find("li.shipping-rule:not(.js-rest_of_world)").filter(function(e,t){return"none"!==$(t).css("display")}).length,i=t.data(n?"alt":"base");i&&t.text(i)})}function n(e){e.find("input.keep_box:checked").each(function(){var t=$(this).closest("li.shipping-rule").find(".js-location_id_input, .js-location_id_select").val();t&&e.find('select.js-location_id_select > option[value="'+t+'"]:not(:selected)').prop("disabled",!0)}),$(e.data("uneditable_shipping_location_ids")).each(function(t,n){e.find('select.js-location_id_select > option[value="'+n+'"]:not(:selected)').prop("disabled",!0);var i=e.find('input.js-location_id_input[value="'+n+'"]').closest("li.shipping-rule");i.find("input.js-cost_input").prop("disabled",!0),i.find(".keep-or-delete").hide()}),t(e)}function i(e){var t=$(".js-clone_which_reward");t.find("option.reward").remove(),$("ol.rewards > li:visible").each(function(e,n){var i=$(this),r=$('<option class="reward">'+current_project.get("currency_symbol")+i.find(".minimum input").val().replace(/[^0-9-.]/g,"")+" \u2014 "+i.find(".description textarea").val().slice(0,8)+"...</option>");r.data("$reward",i),$(n).find("span.reward_num").html(e+1),t.append(r)}),e||t.trigger("change")}var r=".NS-projects__edit_rewards",o=$(r),a=/(?:(%)|\b(raffle|raffled|raffling|coupon|coupons|discount|discounts|discounted|reduced|percent|investor|investors|investment|invested|investments|investing|stake|stakes|sweepstake|sweepstakes|financial|equity|lottery|lotteries|gift certificate|gift card|wine|beer|alcohol|champagne|cocktail|contest|chance|charity|enter|prize|win|drinks|shot|booze|bubbly|pint|price|stock|percentage|knife|axe|knives|blade|charity|prototype|lifetime|life|forever|vacation|holiday|pipe|vaporizer|vape|gun|worth)\b)/i;o.length&&($(".add-reward-action-toggle").click(function(){$(".action-wrap").toggle()}),$(".fields.rewards textarea").each(function(){e($(this))}),$(document).on("keyup paste cut",".fields.rewards textarea",function(){e($(this))}),$("li.reward .summary").livequery(function(){var e=$(this);e.closest(".reward").data("cloned")||e.show().siblings(".backer_rewards_fields").hide()}),$(document).on("change click","li.reward .limit_label input[type=checkbox]",function(){var e=$(this),t=e.parent("label").siblings("input.text");e.is(":checked")?t.closest(".limit").addClass("limit_set").end().focus():t.closest(".limit").removeClass("limit_set").end().val("")}),$(document).on("click","li.reward .sold_out_label",function(e){e.preventDefault();var t=$(this).siblings(".sold_out_checkbox"),n=$(this).closest(".limit"),i=n.find("input.text"),r=n.find(".limit_checkbox");t.is(":checked")?(t.prop("checked",!1),r.prop("checked",!1),i.val("").removeAttr("disabled"),n.removeClass("marked_sold_out limit_set"),track("Reward Sold Out Toggle",{toggled_to:"sold_out"})):(t.prop("checked",!0),i.attr("disabled","disabled"),n.addClass("marked_sold_out"),track("Reward Sold Out Toggle",{toggled_to:"not_sold_out"})),$(this).trigger("dirty")}),$(document).on("click","li.reward .summary .edit",function(){$(this).parents(".summary").hide().siblings(".fields").show().trigger("shifted"),track("Reward Edit")}),$(document).on("nested_attributes_list:added","li.reward",function(){$(this).trigger("shifted").trigger("dirty")}),$(document).on("nested_attributes_list:removed","li.reward",function(){$(this).trigger("shifted").trigger("dirty")}),$(document).on("change","li.reward .js-shipping_preference_select",function(){var e=$(this).val(),t=$(this).closest(".shipping").find("ul.shipping-rules"),i=t.find("li.shipping-rule:not(.template)"),r=i.filter(".js-rest_of_world");switch(e){case"restricted":t.show(),i.show().find(".keep_box").prop("checked",!0),r.hide().find(".keep_box").prop("checked",!1);break;case"unrestricted":t.show(),i.show().find(".keep_box").prop("checked",!0);break;default:t.hide(),i.find(".keep_box").prop("checked",!1)}n(t)}),$(document).on("change",r+" li.shipping-rule > select.js-location_id_select",function(){var e=$(this),t=$(this).closest("li.shipping-rule").find("label.js-cost_label");e.hide(),t.text(e.find("option:selected").text()).show(),n(e.closest("ul.shipping-rules"))}),$(document).on("nested_attributes_list:added","li.shipping-rule",function(){n($(this).closest("ul.shipping-rules"))}),$(document).on("nested_attributes_list:removed","li.shipping-rule",function(){var e=$(this).find(".js-location_id_input, .js-location_id_select").val(),t=$(this).hasClass("js-persisted");e&&$(this).closest("ul.shipping-rules").find('option[value="'+e+'"]').prop("disabled",!1),t||$(this).remove()}),$(document).on("nested_attributes_list:removed","ul",function(){t($(this))}),$("ol.rewards").livequery(function(){i(!0),$("ol.rewards > li.reward:visible").each(function(){n($(this).find("ul.shipping-rules"))})}),$(document).on("change","ol.rewards .minimum input, ol.rewards .description textarea",i),$(document).on("nested_attributes_list:added nested_attributes_list:removed","li.reward",i),$(document).on("click","a.js-clone_reward",function(e){e.preventDefault();var t=$(".js-clone_which_reward"),n=t.children(":selected").data("$reward");if(n){var r,o,a=n.clone_form_template({copy_values:!0,pattern:"-?\\d+"},function(){var e=$(this).closest("li.shipping-rule").get(0);"undefined"!=typeof e&&(("undefined"==typeof r||r!==e)&&(r=e,o=(new Date).getTime()),$(this).attr("for")&&$(this).attr("for").indexOf("_shipping_rules_attributes_")>0&&$(this).attr("for",$(this).attr("for").replace(/_shipping_rules_attributes_-?\d+_/,"_shipping_rules_attributes_"+o+"_")),$(this).attr("id")&&$(this).attr("id").indexOf("_shipping_rules_attributes_")>0&&$(this).attr("id",$(this).attr("id").replace(/_shipping_rules_attributes_-?\d+_/,"_shipping_rules_attributes_"+o+"_")),$(this).attr("name")&&$(this).attr("name").indexOf("[shipping_rules_attributes]")>0&&$(this).attr("name",$(this).attr("name").replace(/\[shipping_rules_attributes\]\[-?\d+\]/,"[shipping_rules_attributes]["+o+"]"))),$(this).attr("name")&&$(this).attr("name").indexOf("[id]")>0&&$(this).val(null)}),s=a.find(".keep-or-delete");s.show(),s.find("a.delete").prop("disabled",!1),s.find(".keep_box").val(0),a.find("ul.shipping-rules").data("backed_locations",[]),a.find(":input").prop("disabled",!1),a.find(".has_backers").removeClass("has_backers"),a.find(".js-has_backers").hide(),a.find(".js-unless_has_backers").show(),a.find("span.num-backers").text("0 backers"),a.find("a.delete").removeAttr("disabled"),a.find("span.sold-out, span.limited").remove(),a.find(".shipping .js-shipping_preference_select option").removeAttr("disabled"),a.find(".shipping a.add-another").removeAttr("disabled").show(),a.find(".shipping label.js-cost_label").removeAttr("disabled"),$("ol.rewards").append(a),i(),a.find(".summary .edit").click(),a.data("cloned",!0)}}))})})(this),instrument_function(function(){$(function(){var e=".NS_projects__edit_submission",t=$(e);t.length&&($(document).on("click",e+" a.reply",function(e){var t=$(".NS_projects__edit_submission .reply_container form");return e.preventDefault(),t.is(":visible")?t.slideUp(300,"easeOutQuad"):t.slideDown(300,"easeOutQuad",function(){$(this).find("textarea").focus()}),!1}),t.find(".button_continue_to_launch").on("click",function(e){e.preventDefault(),$(this).trigger("project_edit:toggle_tab",["launch"])}))})})(this),instrument_function(function(){$(function(){var e=$(".NS_projects__edit_verification_amazon");e.length&&$(document).on("click","ol.verification_steps .status_check a.continue",function(e){e.preventDefault();var t=$("ol.verification_steps li.verify"),n=$(this),i="active closed pending_user_action pending_review invalid_account_state no_status",r=n.text();t.hasClass("loading")||(track("Amazon Verification Status Check",{button_text:n.text()}),$.ajax({type:"get",url:n.attr("href")+".json",dataType:"json",success:function(e){switch(e.amazon_kyc){case"":case"pending_user_action":case"invalid_account_state":t.find(".pending_user_action_msg .same_status").slideDown();break;case"pending_review":t.hasClass("pending_user_action")||t.hasClass("invalid_account_state")||t.find(".pending_review_msg .same_status").slideDown();break;case"active":$("#account-setup-panel").find(".flash-error").remove(),t.closest(".grey-field").removeClass("error"),t.closest(".verification_steps").removeClass("needs_verification")}t.removeClass(i).addClass(e.amazon_kyc).trigger("shifted"),$("#projects_account").trigger("project_edit:update_completion")},beforeSend:function(){t.addClass("loading"),n.html("Verifying...")},complete:function(){t.removeClass("loading"),n.html(r)}}))})})})(this),instrument_function(function(){$(function(){function e(){$("ul.faqs li.faq:not(.deleted) input.position").each(function(e,t){$(t).val(e+1)})}var t="#project_faqs_edit",n=$(t),i=$([]);n.length&&(window.location.pathname.match(/\/faqs$/)&&(window.location.hash="project-faqs"),i=$("#faq-template").children().clone(),n.on("click","form .link_to_new_question",function(){var t=i.clone_form_template();return t.find(".delete").val(0),t.removeClass("hidden").appendTo("#project-faqs ul.faqs"),e(),!1}),n.on("click",".faq .delete",function(e){e.preventDefault();var t=$(this).closest("li.faq");return t.find("input.delete").val(1),t.addClass("deleted").fadeOut("slow"),!1}),$("#project-faqs ul.faqs",n).sortable({containment:"#project_faqs_edit",placeholder:"project-faq-placeholder",handle:".move",axis:"y",tolerance:"pointer",items:"li.faq",start:function(e,t){$(".project-faq-placeholder").css("height",t.item.height()+"px"),t.item.addClass("reordering")},stop:function(e,t){t.item.removeClass("reordering")},update:e}))})})(this),instrument_function(function(){$(function(){function e(e){var t=e.attr("class"),n=e.attr("id"),i=e.data("title");e.modal_dialog({class_name:t,id:n,title:i})}var t=$(".NS_projects__greenlit");if(t.length){var n=$("#feedback_modal"),i=$("#review_modal"),r=n.find("form textarea");t.find(".button_continue_to_launch").click(function(e){e.preventDefault(),$(this).trigger("project_edit:toggle_tab",["launch"])}),t.find(".button_preview").click(function(e){e.preventDefault(),$(this).trigger("project_edit:toggle_tab",["preview"])}),t.find(".button_review").click(function(t){t.preventDefault(),e(i)}),t.find(".button_feedback").click(function(t){t.preventDefault(),e(n)}),r.validates_presence(),$(".NS_projects__greenlit_modal").on("submit","form",function(e){var t=$(this);return e.preventDefault(),t.validate()?void $.ajax({type:"PUT",url:$("#project-edit-nav .finished").data("submit_for_review_url"),data:t.serialize(),success:function(){t.trigger("close"),$("#saving-layer").show(),window.location.reload(!0)}}):!1}),n.on("close.modal_dialog",function(){r.removeClass("errored")})}})})(this),instrument_function(function(){$(function(){function e(){t.find(".video-player").animate({height:n.height(),maxHeight:screen.height},300,"easeOutExpo"),n.css({minHeight:0})
}var t=$(".NS_projects__hero_funding"),n=t.find(".video-player .poster");t.length&&(n.length&&n.height()>0&&e(),$(document).resize(function(){e()}),$(document).on("ksr_popover:opened",function(){track("Project Show Share Sheet")}),$("#project_share.js-disabled").on("click",function(e){growl({error:I18n.t("onloads.views.projects.hero_funding.Sharing_is_disabled_until_your_project_is_launched")}),e.preventDefault()}))})})(this),instrument_function(function(){$(function(){var e=$(".share-container a.facebook");e.click(function(t){window.open(e.attr("href"),"Facebook","width=600px,height=450px"),t.preventDefault()})})})(this),instrument_function(function(){define_namespace(".NS_projects__post_funding_onboarding",function(e){function t(){e.addClass("dismissed"),$("html,body").css("overflow","auto"),$.support.localStorage()&&(localStorage.dismiss_post_funding_onboarding=!0)}$.support.localStorage()&&(localStorage.dismiss_post_funding_onboarding||(e.removeClass("dismissed"),$("html,body").css("overflow","hidden"))),e.find(".js-close").on("click",function(e){t(),e.preventDefault()})})})(this),instrument_function(function(){$(function(){function e(e,n){var o=".js-project-"+n+"-content",s=a.find(o);i(e,n),t(n),a.find(".js-project-content").removeClass("visible").fadeOut(200,function(){window.setTimeout(function(){s.fadeIn()},200)}),$.ajax({url:e,cache:!1,success:function(e){s.html(e),r()}})}function t(e){var t=o.find(".js-load-project-"+e);s.removeClass("current"),t.addClass("current"),n()}function n(){o.find("a.current").length?o.find(".js-selected-indicator").css({left:o.find("a.current").position().left,width:o.find("a.current").outerWidth()}):o.find(".js-selected-indicator").hide()}function i(e,t){window.history&&window.history.replaceState?window.history.replaceState(null,null,e):window.location.hash=t}function r(){window.setTimeout(function(){$.scrollTo(a.position().top-o.outerHeight(),"easeOutExp")},200)}var o=$(".NS_projects__project_nav"),a=$(".NS_projects__content"),s=o.find(".js-load-project-content");o.length&&a.length&&(!function(){var e=window.location.pathname.replace(/\/\d*$/,""),t=_.map(s,function(e){return e.pathname.split("/").pop()});t.push("posts");var n=e.split("/").pop();_.contains(t,n)&&r()}(),s.on("click",function(t){var n=$(this),i=n.attr("data-content"),r=n.attr("href");t.preventDefault(),e(r,i)}),device_idioms["not-touchable"]&&skrollr.init({forceHeight:!1}),$(document).resize(function(){n()}),n())})})(this),instrument_function(function(){$(function(){$(".NS_projects__rewards_list a.pledge").on("click",function(e){if("undefined"!=typeof current_user){var t=current_user.get("id")===current_project.get("creator.id"),n=current_project.get("is_backing");(n||t)&&(e.preventDefault(),e.stopPropagation())}}),$(".NS_projects__rewards_list a.pledge").on("click",function(e){"live"!==current_project.get("state")&&(e.preventDefault(),e.stopPropagation())})})})(this),instrument_function(function(){$(function(){var e=$(".NS_projects__project_share");if(e.length){var t=e.find(".js-facebook-share");$.ajax({url:t.data("facebook-shares-url"),type:"get",dataType:"json",success:function(t){e.find(".facebook .count").text(t.share_count)},error:function(){e.find(".facebook .count").text("0")}}),t.click(function(e){if(e.preventDefault(),track("Project Show Share",{share_type:"facebook"}),"undefined"!=typeof FB){var t=$(this).attr("href");FB.ui({method:"share",href:t,display:"popup"},function(e){e&&"undefined"==typeof e.error_code?(growl({success:I18n.t("onloads.views.projects.share.Facebook_post_was_published")}),track("Project Share",{share_type:"facebook",facebook_post_id:e.post_id})):growl({notice:I18n.t("onloads.views.projects.share.Facebook_post_was_not_published")})})}}),twttr.ready(function(e){e.events.bind("click",function(){track("Project Show Share",{share_type:"twitter"})}),e.events.bind("tweet",function(){track("Project Share",{share_type:"twitter"}),growl({success:I18n.t("onloads.views.projects.share.Your_tweet_was_posted")})})}),$(".js-tumblr-share").on("click",function(e){track("Project Show Share",{share_type:"tumblr"}),e.preventDefault()}),e.find(".js-embed-share").on("click",function(e){track("Project Show Share",{share_type:"embed"}),e.preventDefault()})}})})(this),instrument_function(function(){$(function(){var e=$(".js-could-have-post-media");e.length&&e.on("click",".js-post-media-link",function(e){var t=$(".js-post-media-content"),n=t.find(".js-image"),i=t.find(".js-link");n.html(""),i.text(""),n.append('<img src="'+$(this).data("large-image")+'" />'),i.text($(this).data("post-title")),i.attr("href",$(this).data("post-link")),$("#post_media").modal_dialog(),e.preventDefault()})})})(this),instrument_function(function(){$(function(){function e(e){i.get(0)!==t.get(0)&&t.remove(),i.find(".flash-error").remove(),i.show(),e&&i.prepend('<div class="flash-error">'+e+"</div>"),t=i}var t,n=".projects__verify_identity",i=$([]),r=!1;$(n).livequery(function(){t=$(this).find("form"),t.prop("onsubmit",null),i=t,$(n+" form :input:not(.optional)").validates_presence(),$(n+" #person_national_id").validates_format().validates_luhn_check()}),$(document).on("submit.kba",n+" form",function(n){n.preventDefault();var o=$(this),a=$('<div class="spinner" />').spin("ksr","#fff");o.validate()&&(r||(o.after(a),r=$.ajax({url:o.attr("action"),type:o.attr("method"),data:o.serialize(),dataType:"json",complete:function(){a.remove(),r=!1},error:function(){growl({error:I18n.t("onloads.views.projects.verify_identity.We_apologize_but_it_looks_like_somethings_gone_wrong")})},success:function(r){r.questions?(r.questions.form_url=r.location,r.questions.client_token=o.find("input#client").val(),t=$(render("projects/_verify_identity_questions",r)),i.get(0)===o.get(0)?(o.hide(),o.after(t)):o.replaceWith(t),t.find("div.questions").serialScroll({items:"li.question",lazy:!1,lock:!1,cycle:!1,duration:300,easing:"easeInOutExpo"}).on("notify.serialScroll",function(e,t){var n=$(this).find("li.question").eq(t).outerHeight();$(this).height(n),e.stopPropagation()}).trigger("notify",[0]),t.find("a.next").on("click",function(e){var n=$(this),i=n.closest("li.question");i.find(":checked").length&&(n.is(".submit")?n.submit():t.find("div.questions").trigger("next")),e.preventDefault()}),t.find("a.next:last").each(function(){$(this).text("Submit").addClass("submit"),n.preventDefault()})):r.retry===!1&&r.html?o.closest("#account-setup-panel").html(r.html).trigger("project_edit:update_completion"):e(r.error||"")}})))})})})(this),instrument_function(function(){$(function(){var e=$("#country-select");e.livequery(function(){var t=$(this);t.find("a.button_green").on("click",function(e){t.find("form").submit(),e.preventDefault()}),t.find("select#country").on("change",function(){var n=$(this).val().toLowerCase();t.find(".country").hide(),t.find("."+n).show(),e.removeClass().addClass(n)}).trigger("change")})})})(this),instrument_function(function(){$(function(){var e=$("body#projects_dashboard");e.length&&(!function(){function e(e){var t=a.width(),n=a.height(),i=parseInt(a.css("padding-right").replace("px",""),10);a.css({left:e.pageX-t/2-(i-1),top:e.pageY-n-35}),a.find(".nipple").css({left:t/2+5,top:n+12,position:"absolute"})}function t(){a.fadeIn("fast")}function n(){var n=$("#stats-funding-graph .graph");o=[],r=[{data:funding_graph_data,color:"#00a0ff",points:{show:!0,fill:!0},lines:{show:!0,fill:.35},hoverable:!0,yaxis:1},{data:funding_graph_options.goal_line_data,color:"rgba(43,222,115,1)",points:{show:!1,fill:!1},lines:{show:!0,lineWidth:1},shadowSize:0,hoverable:!1},{data:[0,0],yaxis:2}],o={xaxis:{mode:"time"},yaxis:{min:0,max:funding_graph_options.max_y,tickFormatter:function(e,t){var n=funding_graph_options.currency_symbol+formatters.format_number(e.toFixed(t.tickDecimals),0);return e===funding_graph_options.goal&&(n='<span class="goal_style">'+n+"</span>"),n}},y2axis:{min:0,max:funding_graph_options.percent_y,tickFormatter:function(e,t){var n=formatters.format_number(100*e.toFixed(t.tickDecimals),0)+"%";return 1===e&&(n='<span class="goal_style">'+n+"</span>"),n}},grid:{show:!0,hoverable:!0,tickColor:"rgba(15,33,5,0.3)",borderWidth:.5,borderColor:"#d9d9de",color:"#d9d9de",mouseActiveRadius:15,markings:function(e){var t,n=[],i=e.yaxis.ticks[1].v;for(t=e.yaxis.min;t<e.yaxis.max;t+=2*i)n.push({yaxis:{from:t,to:t+i},color:"#fff"});return n}}},i=$.plot(n,r,o),$("#stats-funding-graph .graph").on("plothover",function(n,i,r){if(r){var o,s,c,l,u,d,f=funding_graph_data[r.dataIndex][3];d=f?f.date_label:null,d&&(u=i,o=funding_graph_data[r.dataIndex][0],s=funding_graph_data[r.dataIndex][1],c=f.backers_count,l=f.percent_raised,a.find(".content").html('<span class="num date">'+d+'</span><span class="num">'+funding_graph_options.currency_symbol+formatters.format_number(s,0)+'</span> raised<br/><span class="num">'+l+'%</span> funded<br/><span class="num">'+formatters.format_number(c,0)+"</span> backers"),e(r),t())}})}if($("#stats-funding-graph .graph_container").length){var i,r,o,a=$("#stats-funding-graph .bubble");!function(){n(),$("#stats-funding-graph .bubble").mouseenter(function(){a.fadeOut("fast")}),$("#stats-funding-graph .graph_container").mouseleave(function(){a.fadeOut("fast")})}()}}(),function(){function e(e){var t=r.width(),n=r.height(),i=parseInt(r.css("padding-right").replace("px",""),10);r.css({left:e.pageX-t/2-(i-1),top:e.pageY-n-35}),r.find(".nipple").css({left:t/2+5,top:n+12,position:"absolute"})}function t(){r.fadeIn("fast")}function n(){r.fadeOut("fast")}if($("#stats-pledge-distribution-graph .graph_container").length){var i,r=$("#stats-pledge-distribution-graph .bubble");!function(){var o,a=[{data:reward_distribution_data,color:"#def7e0"}],s={bars:{show:!0,align:"center"},xaxis:{ticks:reward_distribution_options.tick_labels,autoscaleMargin:.02},yaxis:{min:0},grid:{hoverable:!0,borderWidth:.5,borderColor:"#fff",color:"#d9d9de"}};o=$("#stats-pledge-distribution-graph .graph"),o.off("plothover"),i=$.plot(o,a,s),o.on("plothover",function(n,i,o){var a,s,c,l,u,d,f;o&&(a=o.datapoint[0],s=o.datapoint[1],l=reward_distribution_data[o.dataIndex][3],u=reward_distribution_data[o.dataIndex][4],d=formatters.format_number(Math.round(s/reward_distribution_options.backers_count*100),0),f=formatters.format_number(Math.round(u/reward_distribution_options.money_raised*100),0),1>d&&(d=" < 1"),1>f&&(f=" < 1"),c=0===l?'<span class="num">'+I18n.t("onloads.views.projects.dashboard.No_Reward_Chosen")+"</span>":I18n.t("onloads.views.projects.dashboard.amount_Reward",{amount:funding_graph_options.currency_symbol+l}),r.find(".content").html(c+"<br/>"+I18n.t("onloads.views.projects.dashboard.percent_of_backers",{count:s,formatted_count:formatters.format_number(s,0),percent:d})+"<br/>"+I18n.t("onloads.views.projects.dashboard.percent_of_goal",{amount:funding_graph_options.currency_symbol+formatters.format_number(u,0),percent:f})),e(o),t())}),$("#stats-pledge-distribution-graph .bubble").mouseenter(function(){n()}),$("#stats-pledge-distribution-graph .graph_container").mouseleave(function(){n()})}()}}(jQuery),function(){var e=$("#projects_dashboard #activity").find(".mobius").data("mobius");e.current_page=0,$(document).on("click","#projects_dashboard .activity-filters a",function(t){var n=$(this);n.closest(".activity-filters").find("a").removeClass("current"),n.addClass("current"),$.ajax({type:"get",dataType:"html",url:n.attr("href"),success:function(t){var i=$(t).find(".mobius").children();$("#activity .mobius").html(i).trigger("mobius:loaded_page",[1,i]),e.clear_extra_params(),e.add_param("cat",n.data("filter")),e.current_page=1}}),t.preventDefault()})}(),function(){if($("#stats-referrer-type-pie .graph_container").length){var e={series:{pie:{show:!0,radius:1,label:{radius:.5,formatter:function(e,t){return'<div class="pieLabel">'+e+"<br/><b>"+Math.round(t.percent)+"%</b></div>"}}}},legend:{show:!0,labelBoxBorderColor:"white",labelFormatter:function(e,t){return'<div class="pieLabel" style="color:'+t.color+'" >'+e+": <b>"+Math.round(t.percent)+"%</b></div>"},container:$("#stats-referrer-type-pie .pie_label_container")}},t=[{label:I18n.t("onloads.views.projects.dashboard.via_Kickstarter"),data:parseInt(referrer_type_data.internal,10),color:"#B8DC90"},{label:I18n.t("onloads.views.projects.dashboard.via_External"),data:parseInt(referrer_type_data.external,10),color:"#999"}],n=$("#stats-referrer-type-pie .pledges .graph");$.plot(n,t,e)}}(jQuery),function(){if($("#stats-video .graph_container").length){var e={series:{bars:{show:!0,barWidth:.85,horizontal:!0}},xaxis:{min:0,max:1.05*Math.max(parseInt(video_stats_data.internal_starts,10),parseInt(video_stats_data.external_starts,10)),tickFormatter:function(e){return formatters.format_number(e,0)}},yaxis:{show:!1,min:-.15,max:2},legend:{show:!0,labelBoxBorderColor:"white",noColumns:2,labelFormatter:function(e,t){return'<div class="label_text" style="color:'+t.color+'">'+e+": "+formatters.format_number(t.data[0][0],0)+"</b></div>"},container:$("#stats-video .label_container")},grid:{show:!0,tickColor:"rgba(15,33,5,0.3)",borderWidth:.5,borderColor:"#d9d9de",color:"#d9d9de"}},t=[{label:"Kickstarter",data:[[parseInt(video_stats_data.internal_starts,10),1]],color:"#00a0ff"},{label:"Off-site",data:[[parseInt(video_stats_data.external_starts,10),0]],color:"#ff7d5f"}],n=$("#stats-video .video_plays .graph");$.plot(n,t,e)}}(jQuery))})})(this),!function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return r(n?n:t)},u,u.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t){function n(){}var i=t.exports={};i.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var i=n.shift();i()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=n,i.addListener=n,i.once=n,i.off=n,i.removeListener=n,i.removeAllListeners=n,i.emit=n,i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")}},{}],2:[function(e,t){"use strict";function n(e){function t(e){return null===c?void u.push(e):void o(function(){var t=c?e.onFulfilled:e.onRejected;if(null===t)return void(c?e.resolve:e.reject)(l);var n;try{n=t(l)}catch(i){return void e.reject(i)}e.resolve(n)})}function n(e){try{if(e===d)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void r(t.bind(e),n,a)}c=!0,l=e,s()}catch(i){a(i)}}function a(e){c=!1,l=e,s()}function s(){for(var e=0,n=u.length;n>e;e++)t(u[e]);u=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");var c=null,l=null,u=[],d=this;this.then=function(e,n){return new d.constructor(function(r,o){t(new i(e,n,r,o))})},r(e,n,a)}function i(e,t,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=i}function r(e,t,n){var i=!1;try{e(function(e){i||(i=!0,t(e))},function(e){i||(i=!0,n(e))})}catch(r){if(i)return;i=!0,n(r)}}var o=e("asap");t.exports=n},{asap:4}],3:[function(e,t){"use strict";function n(e){this.then=function(t){return"function"!=typeof t?this:new i(function(n,i){r(function(){try{n(t(e))}catch(r){i(r)}})})}}var i=e("./core.js"),r=e("asap");t.exports=i,n.prototype=i.prototype;var o=new n(!0),a=new n(!1),s=new n(null),c=new n(void 0),l=new n(0),u=new n("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return c;if(e===!0)return o;if(e===!1)return a;if(0===e)return l;if(""===e)return u;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(r){return new i(function(e,t){t(r)})}return new n(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function i(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){i(o,e)},n)}t[o]=a,0===--r&&e(t)}catch(c){n(c)}}if(0===t.length)return e([]);for(var r=t.length,o=0;o<t.length;o++)i(o,t[o])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":2,asap:4}],4:[function(e,t){(function(e){function n(){for(;r.next;){r=r.next;var e=r.task;r.task=void 0;var t=r.domain;t&&(r.domain=void 0,t.enter());try{e()}catch(i){if(c)throw t&&t.exit(),setTimeout(n,0),t&&t.enter(),i;setTimeout(function(){throw i},0)}t&&t.exit()}a=!1}function i(t){o=o.next={task:t,domain:c&&e.domain,next:null},a||(a=!0,s())}var r={task:void 0,next:null},o=r,a=!1,s=void 0,c=!1;if("undefined"!=typeof e&&e.nextTick)c=!0,s=function(){e.nextTick(n)};else if("function"==typeof setImmediate)s="undefined"!=typeof window?setImmediate.bind(window,n):function(){setImmediate(n)};else if("undefined"!=typeof MessageChannel){var l=new MessageChannel;l.port1.onmessage=n,s=function(){l.port2.postMessage(0)}}else s=function(){setTimeout(n,0)};t.exports=i}).call(this,e("_process"))},{_process:1}],5:[function(){"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(){var e=arguments.length?this.then.apply(this,arguments):this;e.then(null,function(e){setTimeout(function(){throw e},0)})})},{}],6:[function(e){e("asap"),"undefined"==typeof Promise&&(Promise=e("./lib/core.js"),e("./lib/es6-extensions.js")),e("./polyfill-done.js")},{"./lib/core.js":2,"./lib/es6-extensions.js":3,"./polyfill-done.js":5,asap:4}]},{},[6]),$(function(){function e(){C=function(){}}function t(e){var t=e.find(":input.required"),n=!0,i=!1;return $("body").is(".rejected, .appealed")&&!e.children().length?!0:(t.each(function(){$(this).val()||(n=!1)}),e.find(".js-asset-upload.required:not(.has_file)").length&&(n=!1),e.is("#the-basics-panel")&&(i=$("#project_goal").val(),i&&i.match(/[1-9]/)||(n=!1)),e.is("#rewards-panel")&&(e.find(".reward .summary").length||(n=!1)),e.is("#account-setup-panel")&&(n=0===e.find(".needs_verification").length),n)}function n(){var e=!0;$("#steps-nav a").each(function(){var n=$(this),i=$(n.attr("href")+"-panel");t(i)?n.addClass("completed").removeClass("errored"):(n.removeClass("completed"),e=!1)}),e?($("#project-edit-nav .submit a").addClass("enabled"),I.length&&D.find("a").removeClass("bg-white border hover-bg-grey-light").addClass("bg-green white")):($("#project-edit-nav .submit a").removeClass("enabled"),D.data("submitted")||D.find("a").removeClass("bg-green white").addClass("bg-white border hover-bg-grey-light"))}function i(){var e=$("#forms .flash-error");return $("#steps-nav a").removeClass("errored"),e.length?(e.find("li").each(function(){track("Project Edit Error",{error_message:$(this).text()})}),e.closest("li.panel").each(function(){var e=$(this).data("panel_id");$('#steps-nav a[href="#'+e+'"]').addClass("errored")}),!0):!1}function r(){return N.find("input.photo, input.video, input.avatar")}function o(){return _.any(r(),function(e){return $(e).data("uploading")})}function a(e){o()?(x.modal_dialog(),x.one("abandon",function(){e(),r().trigger("ksr_file_upload:cancel")})):e()}function s(e){if(e=e||function(){},!$.support.localStorage())return void e();var t,n,i;t=$.parseJSON(localStorage.project_edit_display_rules||"{}"),n=t[current_project.get("id")],_.isUndefined(n)||n===!0?(i=$.open_remote_modal_dialog(URI($("a.rules").data("interrupt")).addQuery("collapsed",!0).suffix("js").toString(),{dataType:"html",class_name:"rules"}),i.$elem.on("closed.modal_dialog",function(){e()}),t[current_project.get("id")]=!1,localStorage.project_edit_display_rules=JSON.stringify(t)):e()}function c(e){window.history&&window.history.replaceState?window.history.replaceState(null,null,e):window.location.replace(e)}function l(t){$(".tools").hasClass("visible")?a(function(){M.modal_dialog(),M.off("saving").one("saving",function(){C=function(){t(),M.off("canceling"),e()}}),M.off("canceling").one("canceling",function(){t(),M.off("canceling"),e()})}):t()}function u(e){var t=k.find("#steps-nav > li:eq("+e+") > a"),n=$("#running-board > .help-panels");t.is(".disabled, .selected")||l(function(){N=$("ol.form-panels li.panel:eq("+e+")"),N.trigger("resize"),$(window).scrollTop()>75&&$(window).scrollTop(60),A.trigger("goto",[e]),$("#project-edit-nav a").removeClass("selected"),t.addClass("selected"),n.height(n.height()),n.children(".panel").hide(),$("#"+N.data("panel_id")+"-help").fadeIn(),n.css("height","auto"),$("#sidebar > .sidebar-help-panels > .panel").hide(),$("#"+N.data("panel_id")+"-sidebar-help").fadeIn(),k.find(".tools").show(),c("#"+N.data("panel_id")),P=e,$("body").removeClass("confirm_preview")})}function d(){var e=S.find("a.selected_last"),t=$("#steps-nav li:has(a.selected_last)").index();0===e.length&&(e=$("#steps-nav li a").first(),t=0),h(e),t>=0?u(t):$("#project-edit-nav a.selected_last").click()}function f(e){l(function(){var t=$(".content-toggle > #"+e),n=$("."+e+" .tab");"launch"===e&&T.addClass("on_continue_nav"),t.is(":visible")?(t.stop().fadeOut(),d()):(t.stop().fadeIn(),k.find(".tools").hide(),$(window).scrollTop()>75&&$(window).scrollTop(60),N.find("textarea.intermediate_editor, textarea.editor").each(function(){var e=$.wymeditors($(this).data("wym_index"));e&&$("object",e._doc).hide()}),n.addClass("selected"))})}function h(e){var t=$("#content-wrap");t.find(".content.tabbed").fadeOut(),e.is(".project_complete")?(t.find("#forms").hide(),t.find("#finished").show()):e.is(".tab")||(t.find("#finished").hide(),t.find("#forms").show())}function p(e){$.each(e,function(e,t){if(t){var n=$("#"+e.replace(/_/g,"-")),i=$(t);n.find("input.photo, input.video, input.avatar, textarea.intermediate_editor").trigger("destroy"),n.find("object").each(function(){swfobject.removeSWF(this.id)}),n.data("original_values",i.serialize()),n.html(i),n.find("form").update_form_cache(),"undefined"!=typeof FB&&window.FB.XFBML&&setTimeout(function(){FB.XFBML.parse(n[0])},j)}}),i()&&u($(".flash-error:first").closest(".panel").index())}function m(){var e=$(".NS_projects__edit_submission").find(".project_message_thread").data("read-messages-path"),t=D.data("greenlit");I.length?(T.addClass("on_continue_nav"),t===!0?(I.addClass("ready_to_go"),track("Project Edit Change Panel",{selected_panel:"submit_or_launch"})):track("Project Edit Change Panel",{selected_panel:"submit"})):(track("Project Edit Change Panel",{selected_panel:"status"}),S.find("a").removeClass("selected").removeClass("selected_last"),S.find(".project_complete").addClass("selected"),e&&$.ajax({type:"put",url:e})),$("#saving-layer").hide(),h(D.find(".project_complete"))}function g(){var e=D.data("poll_url"),t=new Date,n=500,i=10;return"undefined"!=typeof D.data("greenlit")?Promise.resolve():new Promise(function(r){$.pollster(e,function(e){var n=(new Date-t)/1e3;return n>=i?(track("Project Edit Greenlit Timeout"),r(),!0):_.isNull(e.greenlit)?!1:(D.data("greenlit",e.greenlit),r(),!0)},{delay:n})})}function v(){var e=$("#saving-layer"),t=function(){e.hide()};c("#submission"),e.show(),y().then(g).then(m).then(t,t)}function y(){return D.data("submitted")?Promise.resolve():new Promise(function(e,t){var n=D.find("form").attr("action");$.ajax({type:"PUT",url:n,dataType:"json",contentType:"application/json",success:function(n){n.ok?(D.data("submit_for_review_url",n.submit_for_review_url).data("poll_url",n.poll_url).data("submitted","true"),e()):(p(n.panels),t())}})})}function b(){var e=$("#project-edit-nav .preview a").attr("href");e&&$.ajax({type:"get",url:e,dataType:"json",success:function(e){k.find("#preview .project-content").html(e.content),k.find("#preview #project-header").html(e.running_board),k.find("#project-card-preview").html(e.card)}})}function w(e){if(!e.is(".disabled")){var t=e.text();e.addClass("disabled"),$.ajax({url:e.attr("href"),type:"put",dataType:"json",success:function(t){t.share_token?(e.closest("#share_preview_container").removeClass("no_token").addClass("has_token"),$("#sharing_enabled input.url").val(t.url),$(".project_preview_comments").addClass("has_token")):(e.closest("#share_preview_container").removeClass("has_token").addClass("no_token"),$(".project_preview_comments").removeClass("has_token"),$(".NS_comments__comment").length||$(".project_preview_comments").removeClass("has_comments"))},complete:function(){e.removeClass("disabled"),e.text(t)}})}}var k=$("#projects_edit"),x=$("#confirm-abandon-upload"),j=0,C=function(){},S=$("#project-edit-nav"),T=$(".NS_projects__edit_nav"),I=$(".NS_projects__greenlit"),D=S.find(".finished"),E=k.find("#main"),A=E.find(".window"),P=0,N=$("ol.form-panels li.panel:first"),M=$("#confirm-abandon");if(k.length){if($(window).on("project_edit:check_all_panels_for_completion",n),$(window).on("message",function(e){try{var t=JSON.parse(e.originalEvent.data);if(t.close_jumio_modal){var n=$("#jumio-modal");n.trigger("allow_close.modal_dialog"),n.trigger("close.modal_dialog")}}catch(i){}}),M.on("click",".save a",function(e){e.preventDefault(),$(".tools-panels .save a").click(),M.trigger("saving"),M.trigger("close")}),M.on("click",".cancel a",function(e){e.preventDefault(),$(".tools-panels .cancel a").click(),M.trigger("canceling"),M.trigger("close")}),M.on("closed.modal_dialog",function(){M.off("canceling"),M.off("saving")}),x.on("click",".save a",function(e){e.preventDefault(),x.off("abandon"),x.trigger("close")}),x.on("click",".cancel a",function(e){e.preventDefault(),x.trigger("abandon"),x.trigger("close"),track("Project Edit Cancel Upload"),M.on("closed.modal_dialog",function(){M.off("abandon")})}),A.serialScroll({items:"li.panel",lazy:!1,lock:!1,cycle:!1,duration:300,easing:"easeInOutExpo"}),A.on("shifted",function(){$(".form-panels .panel:first").resize()}),$("#main li.panel").livequery(function(){$(this).on("resize",function(){var e=$(window).height()-60-80-$("#running-board-wrap").height();A.height(N.height()>e?N.height():e),$(window).trigger("shifted")})}),$(document).on("project_edit:toggle_tab",function(e,t){var n=$("."+t+" .tab");n.trigger("click")}),T.find("a").click(function(e){e.preventDefault();var t=$(this),n=$("#project-edit-nav a.selected").not(t),i=t.parent("li").index();t.is(".disabled")||(N.find("textarea.intermediate_editor, textarea.editor").each(function(){var e=$.wymeditors($(this).data("wym_index"));e&&$("object",e._doc).show()}),$("#project-edit-nav .tab.selected").removeClass("selected"),$(document).trigger("ksr_video:pause_all_videos"),"#preview"===t.data("for")?(h(t),f("preview"),t.hasClass("selected")&&track("Project Edit Preview")):"#launch"===t.data("for")?(h(t),f("launch"),t.hasClass("selected")&&track("Project Edit Change Panel",{selected_panel:"Launch"})):t.is(".view_project")?l(function(){window.location.href=t.attr("href")}):t.is(".project_complete")?l(v):t.is(".project_build")?(T.removeClass("on_continue_nav"),d()):(h(t),u(i),track("Project Edit Change Panel",{selected_panel:$.trim(t.text())})),T.find("a").removeClass("selected_last"),n.is(".tab")||n.addClass("selected_last").removeClass("selected"))}),$(document).on("click","#rewards-panel .add-another",function(e){e.preventDefault(),track("Project Edit Add Reward Click")}),$(document).on("click","#rewards-panel .js-clone_reward",function(e){e.preventDefault(),track("Project Edit Copy Reward Click")}),$(document).on("click",".banner_stripe_build_transition .account_setup",function(e){e.preventDefault();var t=$("#account-setup-panel").index();u(t),track("Stripe Build Transition Click")}),$(document).on("click",".banner_verified_identity .preview_link",function(e){e.preventDefault(),$("#project-edit-nav .preview a").trigger("click"),$(".NS_projects__creator a.full_bio").trigger("click"),track("Project Edit Verified Identity Banner Click")}),jQuery.fx.off=!0,window.location.hash?("#preview"===window.location.hash&&f("preview"),S.find("a[href="+window.location.hash+"]").click()):$("body").is(".rejected, .appealed")&&S.find("a[href=#submission]").click(),jQuery.fx.off=!1,$("#logo a, a.exit-link, a.rules, a.prototypes_warning").on("click",function(e){if(!e.metaKey&&!e.ctrlKey){e.preventDefault();var t=$(this);l(function(){window.location.href=t.attr("href")})}}),$(document).on("submit","#launch_confirmation > form",function(e){var t=$(this).find("input.confirmation");t.is(":checked")||($(this).removeClass("submitting-non-ajax"),growl({error:I18n.t("onloads.views.projects.edit.Please_accept_Our_Rules")}),e.preventDefault())}),$(document).on("change","#launch_confirmation input.confirmation",function(){var e=$("#launch_confirmation");$(this).is(":checked")?e.find("input[type=submit]").removeClass("disabled"):e.find("input[type=submit]").addClass("disabled")}),root.ksr_before_unload=function(e){l(e)},n(),i()&&u($(".flash-error:first").closest(".panel").index()),function(){function e(e){var t=e.clone();return t.find(".location-search .field-selected").remove(),t}var t=k.find("form"),r={};t.each(function(){var t=$(this);r[t.closest(".panel").data("panel_id")]=e(t)}),$.fn.restore_form=function(){var t,o=$(this),a=o.closest(".panel").data("panel_id"),s=r[a];t=o.find(".js-asset-upload:first"),t.find("input.photo, input.video, input.avatar").trigger("ksr_file_upload:cancel"),t=t.clone(),t.find("object").remove(),s.find(".js-asset-upload:first").replaceWith(t),o.find("input.photo, input.video, input.avatar, textarea.editor").trigger("destroy"),o.replaceWith(s),"undefined"!=typeof FB&&FB.XFBML&&setTimeout(function(){FB.XFBML.parse(s[0])},j),s.trigger("form_restored"),r[a]=e(s),n(),i()},$.fn.update_form_cache=function(){var t=$(this),n=t.closest(".panel").data("panel_id");r[n]=e(t)}}(),$(window).on("project_edit:update_preview",b),$(window).on("wymeditor:video_encoded",b),$(".edit_project input.photo, .edit_project input.video, .edit_project input.avatar").livequery(function(){var e="image",t=$(this),i=t.parent(),r=i.parent(),o=function(){},a={};t.is(".video")&&(e="video",o=function(){b()}),$.extend(a,{type:e,after_encode:o}),t.ksr_uploader(a),t.on("file_added",function(){r.closest(".grey-field").removeClass("error"),"video"===e&&r.addClass("encoding"),r.find("input.photo, input.video, input.avatar").trigger("resize"),b(),n()})}),$(document).on("click","body#projects_edit .js-asset-upload a.remove",function(e){e.preventDefault();var t=$(this).attr("href"),n=$(this).closest(".js-asset-upload");$.ajax({url:t,type:"delete",success:function(){n.removeClass("has_file"),n.find("input.photo, input.video, input.avatar").trigger("ksr_uploader:remove"),n.find("input.photo, input.video, input.avatar").trigger("resize"),b()},error:function(){growl({error:I18n.t("onloads.views.projects.edit.Could_not_delete_this_file")})}})}),$(document).on("click","body#projects_edit .js-asset-upload a.retry_upload",function(e){e.preventDefault();var t=$(this).closest(".js-asset-upload");t.removeClass("has_file encoding"),t.find("input.photo, input.video, input.avatar").trigger("ksr_file_upload:cancel").trigger("resize")}),k.on("submit","form.edit_project",function(t){t.preventDefault();var i=$(this),r=k.find(".tools .save"),o=k.find(".tools li.cancel"),c=$("#saving-layer");i.find(".editor.assets_processing").length||a(function(){r.addClass("disabled").find("a").text(I18n.t("onloads.views.projects.edit.Saving")),o.addClass("disabled"),c.show(),$.ajax({type:i.attr("method"),url:i.attr("action"),dataType:"json",data:i.serialize(),global:!1,success:function(t){var i=r.closest(".tools");if(!_.has(t,"panels"))return void growl({error:I18n.t("onloads.views.projects.edit.Could_not_save")});if(p(t.panels),t.errored)e();else{if("undefined"!=typeof current_user&&current_user.set("name",$("#project_creator_name").val()),i.removeClass("visible"),k.find("#preview .project-content").html(t.content),t.launch&&$("#launch").html(t.launch),k.find("#preview #project-header").html(t.running_board),k.find("#project-card-preview").html(t.card),t.category){var o=parseInt(k.find("#forms").attr("data-category_id"),10),a=t.category.id;o!==a&&track("Project Edit Change Category",{category_before:o,category_after:a}),k.find("#forms").attr("data-category_id",t.category.id),k.find("#category_name_rules").text(t.category.name)
}else k.find("#forms").attr("data-category_id","");C(),s(function(){c.hide()}),n()}},error:function(){i.trigger("ajax_error"),growl({error:I18n.t("onloads.views.projects.edit.Could_not_save")})},complete:function(e){r.removeClass("disabled").find("a").text("Save"),o.removeClass("disabled"),c.hide(),i.trigger("ajax_complete",[e])}})})}),function(){var e=k.find(".tools"),t=e.find(".form-navigator");$(document).on("change keyup cut paste input dirty wym-documentHTMLUpdated","form.edit_project",_.debounce(function(n){var i=$(n.target),r=i.closest("form");_.each(WYMeditor.INSTANCES,function(e){e.update()}),r.serialize()===r.data("original_values")||i.is(".do_not_dirty")&&"dirty"!==n.type||(t.hide(),e.addClass("visible"))},100)),e.on("click",".form-tools .save a",function(e){e.preventDefault(),$("#confirm-abandon").is(":visible")?track("Project Edit Save",{context:"modal"}):track("Project Edit Save",{context:"toolbar"}),$(this).closest("li.save").is(".disabled")||N.find("form").submit()}),e.on("click",".form-tools .cancel a",function(t){t.preventDefault(),a(function(){$("#confirm-abandon").is(":visible")?track("Project Edit Discard Changes",{context:"modal"}):track("Project Edit Discard Changes",{context:"toolbar"}),N.find("form").restore_form(),e.removeClass("visible")})})}(),function(){function e(e){var i;$.each(n,function(n){e.attr("id")===n&&(i=t.find(String(this)),i.text(e.val()))})}var t=k.find("#sidebar"),n={project_name:".project-card .project-title > a",project_blurb:".project-card .project-blurb"};$(window).on("form_restored",function(n){var i=$(n.target),r=i.find(".field.location-search input.text").val();i.closest("#the-basics-panel").length&&(i.find(":input").each(function(){e($(this))}),t.find("ul.project-meta > li > a > span.location-name").text(r))}),$(document).on("keyup input cut paste change","#the-basics-panel form :input",_.debounce(function(t){e($(t.target))},100)),$("#the-basics-panel form .location-search input.text").livequery("livesearch_selector:select",function(e,n){t.find("ul.project-meta > li > a > span.location-name").text(n)}),$("#the-basics-panel form .location-search input.text").livequery("livesearch_selector:unselect",function(){t.find("ul.project-meta > li > a > span.location-name").text("")}),$(document).on("file_added","#the-basics-panel form .project-image",function(e,n){t.find(".project-thumbnail img").attr("src",n.image_src)})}(),$(document).on("click",".panel label.primary.help",function(){var e=$(this).closest(".grey-field").find(".field-help-2");e.is(":visible")?e.slideUp(300,"easeOutQuad",function(){$(this).trigger("shifted")}):e.slideDown(300,"easeOutQuad",function(){$(this).trigger("shifted")})}),$(document).on("click","body#projects_edit #preview a#enable_sharing",function(e){var t=$(this);e.preventDefault(),track("Project Edit Preview Link Toggle",{toggled_to:"enabled"}),w(t)}),$(document).on("click","body#projects_edit #preview a#disable_sharing",function(e){var t=$(this);e.preventDefault(),track("Project Edit Preview Link Toggle",{toggled_to:"disabled"}),w(t)}),$(document).on("click","body#projects_edit #preview #sharing_enabled .url",function(e){this.focus(),this.select(),e.preventDefault(),track("Project Edit Preview Link Select")}),$(document).on("click","body#projects_edit .amazon_token input",function(){$(this).select()}),$(document).on("click","body#projects_edit .description .wym_tools li a",function(){track("Editor Tool Click",{tool_clicked:$(this).attr("title"),context:"project_edit_description"})}),$.support.localStorage()){var O=$(".banner");O.each(function(){var e=$(this).data("banner-name"),t=$(".banner_"+e),n="banner_"+e+"_hide";localStorage.getItem(n)||t.removeClass("hidden"),t.find(".dismiss").click(function(i){i.preventDefault();try{localStorage.setItem(n,!0)}catch(r){}t.fadeOut(function(){t.addClass("hidden")}),track("Project Edit Banner Dismiss",{banner_name:e})})})}$("li.panel").on("project_build:refresh",function(){var e=$(this),t=e.data("refresh_url");$.ajax({type:"get",url:t,dataType:"html",success:function(t){e.html(t)},beforeSend:function(){e.addClass("loading")},complete:function(){e.removeClass("loading")}})}),$("#loading").hide()}}),instrument_function(function(){$(function(){function e(e){var t=$("#tools").find("video").get(0);t&&t.pause(),e.find("video").length&&e.find("video")[0].play()}var t=$("#projects_learn");if(t.length){var n=".categories ul",i=$("#interstitials"),r=0;$(n+" a").on("click",function(e){$(n+" a").addClass("dim"),$(n+" a").removeClass("selected"),$(this).removeClass("dim"),$(this).addClass("selected"),i.find(".category").removeClass("visible"),i.find('[data-name="'+$(this).attr("data-name")+'"]').addClass("visible"),i.find("video")[0].pause(),i.height(i.find('[data-name="'+$(this).attr("data-name")+'"]').height()+161),$("body").is(".touchable")||$(document).scrollTo($(".categories"),800),track("Learn More Project Category Select",{category_name:$(this).text()}),e.preventDefault()}),i.find(".category .close").on("click",function(e){$(n+" a").removeClass("dim selected"),i.find(".category").removeClass("visible"),i.height(0),e.preventDefault()}),$("#tools .right_side").on("cycle-after",function(t,n,i,o){var a=$(o);r>0&&track("Learn More Project Tool Select",{slide_description:a.attr("data-slide-description")}),r+=1,e(a)}),$("#quotes").find(".group .mirror").each(function(){$(this).html($(this).closest(".group").find(".regular").html())}),$("#bottom a.play_button").on("click",function(e){e.preventDefault(),$(this).closest("section").addClass("video_expanded"),$(this).closest("section").find(".video-player").trigger("ksr_video:play")}),$("#bottom .close").on("click",function(e){e.preventDefault(),$(this).closest("section").removeClass("video_expanded"),$(this).closest("section").find(".video-player").trigger("ksr_video:pause")}),$("section#quotes").waypoint(function(){$(this).addClass("loaded")},{offset:150})}})})(this),instrument_function(function(){$(function(){var e=$("#projects_rules"),t=$("#project-edit-nav",e),n=$("#continue input[type=checkbox]",e),i=$("#continue input[type=submit]",e);e.length&&($(".modal_dialog, .modal_dialog .modal_dialog_content, .modal_dialog .modal_dialog_inner").preload_background_image(),t.find("#steps-nav .first a").addClass("selected"),t.find("a").click(function(e){e.preventDefault()}),n.on("change",function(){$(this).is(":checked")?$(this).siblings("label").addClass("selected").removeClass("unselected"):$(this).siblings("label").addClass("unselected").removeClass("selected"),0===n.not(":checked").length?i.removeClass("disabled"):i.addClass("disabled")}),i.on("click",function(){return 0===n.not(":checked").length?($("#saving-layer").show(),!0):("undefined"!=typeof ga&&ga("send","event","Our Rules","Disabled Continue Click",""),!1)}))})})(this),instrument_function(function(e){$(function(){var t="#projects_show",n=$(t);if(n.length){$("#verifying-pledge.modal_dialog .remote_modal_dialog",n).click(function(){$(this).parents("div#verifying-pledge").trigger("close.modal_dialog")}),$(document).on("click",t+" .faq-question a",function(e){e.preventDefault(),$(this).closest(".faq").toggleClass("expanded")}),location.hash&&setTimeout(function(){$(location.hash).find(".faq-question a").click()},500),$("body").is(".touchable")&&(n.on("modal_dialog:opened",function(){$("video").length&&e.Touch&&($("#video-section",n).css("visibility","hidden"),$("video")[0].pause())}),n.on("close.modal_dialog",function(){$("#video-section",n).css("visibility","visible")}));var i=read_cookie("edit_survey_response");i&&$.open_remote_modal_dialog(URI.decode(i),{title:I18n.t("onloads.views.projects.show.Your_survey_response"),remote_modal_dialog_contents_loaded:function(){destroy_cookie("edit_survey_response",URI.parse(window.location.href).path)},dataType:"html",beforeSend:function(e){e.setRequestHeader("Accept","text/javascript, */*")}});var r=1;$(window).resize(function(){r>0&&(track("Window Resize Start"),r-=1)})}})})(this),instrument_function(function(){$(function(){function e(){o.find(".title").text(r.eq(a).text()),o.removeClass(n).addClass("category-id-"+r.eq(a).attr("data-id")),$(".a-an").text("1"===r.eq(a).attr("data-id")?"an":"a"),a+=1,a>=r.length&&(a=0)}function t(){clearInterval(s)}var n,i=$("#projects_start"),r=$("li.category a"),o=$("#category_select"),a=0;if(i.length){$(".category_select_el").on("change",function(){o.addClass("valid"),$("input.text").hasClass("valid")&&o.hasClass("valid")&&($(".project-start-button").removeClass("button_grey"),$(".project-start-button").addClass("button_green"))}),$("input.text").on("blur",function(){var e=$(this);e.val()?e.addClass("valid"):e.removeClass("valid"),$("input.text").hasClass("valid")&&o.hasClass("valid")&&($(".project-start-button").removeClass("button_grey"),$(".project-start-button").addClass("button_green"))}),n=r.map(function(){return"category-id-"+$(this).attr("data-id")}).get().join(" "),$(".rule").on("click",function(e){$(this).siblings(".rule_details").toggleClass("hidden"),e.preventDefault()}),$(".change-country").on("click",function(e){i.find(".country-select").removeClass("hide").addClass("inline-block"),i.find(".country-flag").hide(),i.find(".country-name").hide(),e.preventDefault()}),$("#project_country").on("change",function(){var e=$(this),t=e.val();track("Project Country Changed",{changed_from:e.data("project-country"),changed_to:t}),e.data("project-country",t)}),$(".ksr-popover").find("ul a").on("click",function(e){o.find("select").ksr_val($(this).attr("data-id")),o.find("select").trigger("change"),$(this).closest(".ksr-popover").removeClass("visible"),o.removeClass(n).addClass("category-id-"+$(this).attr("data-id")),$(".a-an").text("1"===$(this).attr("data-id")?"an":"a"),e.preventDefault()}),o.on("click",function(){t()});var s=setInterval(function(){e()},3e3);e()}})})(this),instrument_function(function(){$(function(){var e=$(".refund_checkouts_form");e.length&&(e.on("change","select#refund_checkout_amount",function(){var e=$(this),t=e.closest("li").find(".refund_amount_wrapper"),n=t.find("input#refund_checkout_amount"),i=!1;""===e.val()?(t.addClass("partial"),i=!0):t.removeClass("partial"),n.prop("disabled",!n.is(":visible")),i&&n.focus()}).trigger("change"),-1===$.inArray($("input#refund_checkout_amount").val(),[$("select#refund_checkout_amount").val(),""])&&e.find("select#refund_checkout_amount").val("").trigger("change"))})})(this),instrument_function(function(){$(function(){var e=$("#stored_card_form"),t=e.find(".selected input.card_toggle");e.length&&(t.length||(t=$("input.card_toggle:first")),$(document).on("change click","input.card_toggle",function(e){e.preventDefault();var t=$(this),n=$("input.card_toggle").not(t);n.closest(".payment_option").removeClass("selected"),t.closest(".payment_option").addClass("selected"),"click"===e.type&&setTimeout(function(){t.prop("checked",!0)},0)}),t.prop("checked",!0).trigger("change"))})})(this),instrument_function(function(){$(function(){var e="body.refund_checkouts_new_card #credit_card_form form",t=12e4,n=$("#saving-layer");$("body").append(n),$(document).on("submit",e,function(){n.show(),setTimeout(function(){n.find(".modal_dialog_body").html(I18n.t("onloads.views.refund_checkouts.new_card.Well_this_is_embarassing_Processing_your_pledge")),n.removeClass("spinning")},t)})})})(this),instrument_function(function(){$(function(){function e(e,t){"undefined"!=typeof ga&&ga("send","event","Homepage Events",e,t)}function t(e,t){var n=e;return n.urls.web.project=e.urls.web.project+"?ref="+t,n.baseball_card_size="tall-big",$('<div class="project col col-4 mobile-scroll-row-item">'+render("projects/_baseball_card_tall",n)+"</div>")}var n=$(".NS_site__homepage_social");n.length&&(n.find(".js-slider").each(function(){function i(){a&&$.ajax({url:oauth_url(a),type:"get",dataType:"jsonp",success:function(e){var n=o.find(".project-list");return o.find(".js-slider").removeClass("loading"),e.projects.length?void $.each(e.projects,function(){var e=this;n.append(t(e,"home_social"))}):void o.find(".js-slider").addClass("no-projects")}})}function r(){window.scrollY+1.5*$(window).height()<=o.offset().top||($(window).unbind("scroll",r),e("Social Module","Load"),i(),o.find("p.no-content").hide(),o.find(".js-slider").show())}var o=$(this).closest(n),a=o.data("url");$(window).on("scroll",r)}),$(".facebook_login_wrap .big").click(function(){e("Social Module","Facebook connect")}))})})(this),instrument_function(function(){$(function(){function e(e,t){"undefined"!=typeof ga&&ga("send","event","Homepage Events",e,t)}function t(e,t){i.scrollTo(e,t,{axis:"y",easing:"easeOutExpo"}),i.find(".video-player").trigger("ksr_video:pause"),$("body").is(".touchable")&&(i.find(".project-video").hide(),e.find(".project-video").show()),r.find(".nav li").removeClass("selected").eq(e.index()).addClass("selected"),i.find(".project").removeClass("selected").eq(e.index()).addClass("selected")}var n=$(".NS_site__homepage_staff_picks"),i=$(".js-projects-slider"),r=$(".js-category-nav");n.length&&(r.find(".nav li a.link").click(function(n){e("Category select",$(this).text()),$.browser.msie&&$.browser.version<8||(t(i.find(".project").eq($(this).parent().index()),350),n.preventDefault())}),$.browser.msie&&$.browser.version<8||(i.find(".project").show(),t(i.find(".project.potd"),0)),$(".project-image .video-player").click(function(){$(this).parent().siblings(".project-badge").fadeOut("slow")}),$(document).on("resize",function(){$.browser.msie&&$.browser.version<8||t(i.find(".selected").eq($(this).parent().index()),350)}))})})(this),instrument_function(function(){$(function(){function e(){var e=n.find("video").get(0);n.height(Math.round(.75*($(window).height()-$("#header-wrap").height()))),e&&e.play()}function t(e){var t=n.find(".pager");t.removeClass("light-theme dark-theme"),t.addClass(e.attr("data-theme"))}var n=$(".NS_site__projects_hero");if(n.length){var i=n.find(".slide:first-child");n.find(".slides").on("cycle-after",function(e,n,i,r){var o=$(r);t(o)}),$(document).resize(function(){e()}),$(".js-track-nyt-film").on("click",function(){track("NYT Film Hero Click")}),e(),t(i),n.removeClass("loading")}})})(this),instrument_function(function(){!function(){var e="NS_site__simple_ticket_form";$("."+e).length&&$(document).on("click","#new_zendesk_ticket input:submit",function(e){e.preventDefault();var t=$(this),n=t.closest("form"),i=n.parent();n.is(".submitting")||(n.addClass("submitting"),t.data("original_text",t.val()),t.val(I18n.t("onloads.views.site.Submitting")),$.ajax({type:"POST",data:n.serialize(),url:n.attr("action"),beforeSend:function(){i.find(".success, .error").remove()},complete:function(){n.removeClass("submitting"),t.val(t.data("original_text"))},success:function(){i.html('<h5 class="green">'+I18n.t("onloads.views.site.simple_ticket_form")+"</h5>")},error:function(e){var t=JSON.parse(e.responseText);t=_.map(t,function(e,t){var n={base:"",requester:"email",subject:"question",description:"details"}[t]||t;return _.map(e,function(e){return _.compact([formatters.capitalize(n),e]).join(" ")})}),t=_.compact(t),t=_.flatten(t),i.prepend(render("funnels/_ticket_error",{errors:t}))}}))})}()})(this),instrument_function(function(){$(function(){var e=$("#jobs_index, .NS_jobs__why_work_at_kickstarter");e.length&&($(document).on("click","#openings_small .button",function(){$.scrollTo($($(this).attr("href")),{duration:2e3,easing:"easeOutExpo"})}),$(document).scroll(function(){try{$(window).scrollTop()>660?$("#hero video")[0].pause():$("#hero video")[0].play()}catch(e){}}))})})(this),instrument_function(function(){$(function(){var e=$("body#site_press");e.length&&$(document).on("click",".read_more",function(e){$(".more").toggle(),$(".read_more").toggle(),e.preventDefault()})})})(this),instrument_function(function(){$(function(){var e="body#site_privacy";$(document).on("change",e+" form.select_country",function(){$(this).submit()})})})(this),instrument_function(function(){$(function(){function e(){n.find("video").each(function(){$(window).width()<=$(this).position().left||$(this).position().left+$(this).width()<0?$(this)[0].pause():$(this)[0].play()}),n.find("video:last-child").position().left<=$(window).width()?$("#home_button").fadeIn():$("#home_button").fadeOut()}var t=$("body#site_team"),n=$("#video_header");t.length&&(n.kinetic({maxvelocity:120}),$("#home_button").click(function(){$("#video_header").scrollTo(0,0,{duration:2e3,easing:"easeOutExpo"})}),$(window).resize(function(){e()}),n.scroll(function(){e()}),e())})})(this),instrument_function(function(){$(function(){var e="body#terms_oct2012";$(document).on("change",e+" form.select_country",function(){$(this).submit()})})})(this),instrument_function(function(){$(function(){function e(){var e=i.map(function(){return $(this).width()}).get();i.parent().width(Math.max.apply(Math,e))}function t(){setTimeout(function(){t(),i.addClass("hide"),i.eq(r).removeClass("hide"),r+=1,r>=i.length&&(r=0)},3e3)}var n=$("body#site_what_is_kickstarter"),i=$(".js-category span"),r=1;n.length&&($(window).resize(function(){e()}),t(),e())})})(this),instrument_function(function(){$(function(){function e(){n.cycle($(window).width()<o?"destroy":{autoHeight:0,timeout:0,slides:".project-group",speed:600,fx:"scrollHorz",easing:"easeOutExpo",pager:".dots",next:".next",prev:".previous",log:!1})}var t=$(".NS_spotlight_projects__carousel"),n=t.find(".featured-projects-list"),i=t.find(".next"),r=t.find(".previous"),o=640;t.length&&(n.on("cycle-after cycle-before",function(e,t){1===t.slideNum?(i.addClass("visible"),r.removeClass("visible")):t.slideNum===t.slideCount?(r.addClass("visible"),i.removeClass("visible")):(r.addClass("visible"),i.addClass("visible")),"cycle-after"===e.type&&track("Watch Cycle Featured Projects")}),$(document).resize(function(){e()}),e())})})(this),instrument_function(function(){$(function(){var e=$("body#spotlight_projects_index");if(e.length){var t,n;e.hasClass("spotlight_projects_watch")?(t="Watch",n="iTunes"):(t="Play",n="Steam"),$(".share-link").on("click",function(e){var n=$(window).height()/2-250,i=$(window).width()/2-250;window.open($(this).attr("href"),"name","height=500, width=500, top="+n+", left="+i),track(t+" Page Share"),e.preventDefault()}),track_links("a.service_more",t+" Click "+n+" More Link"),track_links("a.track-service",t+" Click "+n+" Link"),track_links("a.track-official",t+" Click Official Site Link"),$(".published_projects").on("click","a.more",function(e){var t=$(this),n=$(".published_projects"),i=t.attr("href");t.remove(),$.ajax({url:i,method:"GET",data:"format=js",dataType:"html",success:function(e){n.append(e)}}),e.preventDefault()})}})})(this),instrument_function(function(){$(function(){var e=$("body#stories_veronica_mars");!e.length})})(this),instrument_function(function(){$(function(){var e=$(".NS_survey_questions__address");e.length&&(e.find(".country select").change(function(){var t=$(this).closest(".country"),n=t.data("original_country"),i=t.data("original_shipping_amount"),r=$(this).val(),o=$(this).find("option:selected").html(),a=$(this).find("option:selected").data("cost"),s=$("body").attr("id"),c=t.find(".shipping_changed_message"),l=$(".state .select"),u=$(".state .text"),d=$(".state .text_container");l.prop("disabled",!0).addClass("hidden"),u.prop("disabled",!0),d.addClass("hidden"),e.hasClass("is_preview")||(l.hasClass(r)?$.each(l,function(){var e=$(this);e.hasClass(r)&&e.prop("disabled",!1).removeClass("hidden")}):(u.prop("disabled",!1),d.removeClass("hidden")),n&&(a>i?(c.show(),c.find(".cost-difference").html(formatters.money(current_project.get("currency"),a-i)),c.find(".country-name").html(o),track("Survey Address for Backing with Restricted Shipping",{original_country:n,country:r,original_shipping_amount:i,shipping_amount:a,survey_context:s})):c.hide()))}),e.find(".country select").trigger("change"))})})(this),instrument_function(function(){$(function(){var e="body#survey_responses_confirm_address",t=$(e),n=$("input.radio#suggested_address");t.length&&($(document).on("change",e+" .address_col input.radio",function(){var e=$(this);$(this).closest(".addresses").find(".address_col").each(function(){var e=$(this);e.find("input.radio").is(":checked")?e.find("input[type=hidden]").attr("disabled",!1):e.find("input[type=hidden]").attr("disabled",!0)}),"entered_address"===e.attr("id")?track("Address Entered Selected"):"suggested_address"===e.attr("id")&&track("Suggested Address Selected")}),n&&n.click(),track($(".addresses.no_suggestion").length?"Confirm your Address Page":"Select an Address Page"))})})(this),instrument_function(function(){$(function(){var e=$("body#survey_responses_edit_address");e.length&&(e.find(".back").click(function(e){e.preventDefault(),window.history.go(-1)}),track("Edit Address Page"))})})(this),instrument_function(function(){$(function(){var e="body#survey_responses_new",t=$(e),n=t.find("input:hidden#dirty");t.length&&($(document).on("keydown",e+" input:text",function(e){13===e.which&&e.preventDefault()}),$(document).on("focus",e+" .address input:text",function(){$(this).closest(".address").removeClass("hide_overlabels")}),"0"===n.val()?n.val("1"):track("Back to Survey Response Page"),track("Survey Response Page"))})})(this),instrument_function(function(){$(function(){var e=$("body#survey_editability_edit");if(e.length){var t=$("form#disable_survey_editability_form",e),n=$("#send_editable_address_preview",e),i=$("form#enable_survey_editability_form",e),r=t.find("#disable_confirm_text").html(),o=i.find("#enable_confirm_text").html();$("input:text",e).on("keydown",function(e){e.which===KEY.ENTER&&e.preventDefault()}),n.on("click",function(e){e.preventDefault();var t=$(this);t.data("loading")||(t.data("loading",!0),$.post(t.attr("href"),{},function(e,n){"success"===n&&(growl({success:I18n.t("onloads.views.surveys.editability_form.A_preview_has_been_sent_to_your_email_address")}),t.data("loading",!1))})),track("Survey Editability Deadline Preview Sent")}),t.confirm_submit({title:I18n.t("onloads.views.surveys.editability_form.Just_to_confirm"),copy:r,yes_copy:I18n.t("onloads.views.surveys.editability_form.Send_notifications_now"),no_copy:I18n.t("onloads.views.surveys.editability_form.Cancel")}),i.confirm_submit({title:I18n.t("onloads.views.surveys.editability_form.Just_to_confirm"),copy:o,yes_copy:I18n.t("onloads.views.surveys.editability_form.Allow_changes_now"),no_copy:I18n.t("onloads.views.surveys.editability_form.Cancel")})}})})(this),instrument_function(function(){$(function(){function e(){var e=c.find("input.keep_box:checked").closest(".fieldset:not(.template)");s.empty(),e.each(function(){s.append($(this).find("div.preview").children().clone())})}function t(t){var n=$(t),i=n.val(),r=n.closest(".fieldset"),o=r.find(".preview");n.is("#survey_intro")?o.find(".survey_intro").text(i):n.is(".question_choice")?o.find(".choice label").eq(n.closest("li.field").index()).text(i):o.find("li > label").text(i?i:"Question"),e()}function n(e){e.confirm_submit({copy:I18n.t("onloads.views.surveys.form.You_can_only_send_a_survey_once_per_reward_tier_so_make_sure"),title:I18n.t("onloads.views.surveys.form.Please_confirm"),yes_copy:I18n.t("onloads.views.surveys.form.Send_survey_now"),no_copy:I18n.t("onloads.views.surveys.form.Edit_survey"),on_confirm_submit:function(){e.find("#sending").val("1")}})}function i(){l.find(".question:not(.template)").each(function(e){$(this).find(".position").val(e+1)}),e()}function r(){var e=c.find(".add_address_question");l.find(".question.address").is(":visible")?e.hide():e.show()}var o="body#surveys_form",a=$(o);if(a.length){var s=$("#preview",a),c=$("form#survey_form",a),l=$("ul.questions",a),u=$("#saving-layer",a),d={containment:"document",tolerance:"pointer",items:".question.draggable",stop:i};l.sortable(d),a.on("click",".address.question .keep_box.checkbox",function(){$(this).is(":checked")?$(".editability",a).show():$(".editability",a).hide()}),$(".leftcol .textarea:visible, .leftcol .text:visible",a).each(function(){t(this)}),a.on("keyup cut paste",".leftcol .text, .leftcol .textarea",function(){t(this)}),a.on("click","a.add_question",function(e){e.preventDefault();var t=$("ul.questions"),n=$(this).data("template"),o=t.children(".template."+n),a=o.clone_form_template();a.css("display","block"),t.append(a),r(),i(),a.find("input.checkbox:not(.editable_ends_at)").prop("checked",!0),a.find("input.checkbox.editable_ends_at").prop("disabled",!1)}),a.on("click",".add_question_choice",function(t){t.preventDefault();var n=$(this).closest("li.question"),i=n.find("ol.choice_fields"),r=i.find("li:last"),o=r.clone().insertAfter(r),a=n.find(".preview"),s=a.find(".choice").last(),c=s.clone().insertAfter(s),l="";o.find("label.overlabel .count").text(function(e,t){return parseInt(t,10)+1}),o.find(".delete_choice").show().andSelf().find("input").val(l).focus(),c.val(l).find("label").html(l).andSelf().find("input.radio").val(l),e()}),a.on("click",".delete_question",function(e){e.preventDefault();var t=$(this),n=t.closest(".question"),o=n.find(".keep_box.checkbox");o.is(":checked")?o.prop("checked",!1):o.prop("checked",!0),n.hide(),n.find("input.checkbox.editable_ends_at").prop("disabled",!0),r(),i()}),a.on("click",".delete_choice",function(t){t.preventDefault();var n=$(this).closest("li.field"),i=n.closest("li.question"),r=i.find(".preview"),o=n.parent().children();r.find(".choice").eq(n.index()).remove(),n.remove(),o.filter(":visible").each(function(e){$(this).find("label.overlabel .count").text(e+1)}),e()}),a.on("click","#survey_save",function(t){t.preventDefault(),track("Survey Save"),u.show(),$.ajax({url:c.attr("action"),type:c.find('[name="_method"]').val(),data:c.serialize(),complete:function(){u.hide(),e()},success:function(e){var t=$(e.data);$(".modal_dialog").remove(),$("#main_content").replaceWith(t),s=$("#preview",a),c=$("form#survey_form",a),l=$("ul.questions",a),u=$("#saving-layer"),n(c),l.sortable(d)},error:function(){window.location.reload(!0)}})}),a.on("keydown","form#survey_form",function(e){return e.keyCode!==KEY.ENTER||$(e.target).is("textarea")?void 0:(e.preventDefault(),$(o+" #survey_save").trigger("click"),!1)}),n(c)}})})(this),instrument_function(function(){$(function(){var e=$("body#two_factor_authentication_confirm");e.length&&(e.find(".js-resend_code").on("click",function(e){track("Two-factor Authentication Resend Code"),$.ajax({dataType:"json",success:function(e){growl(e)}}),e.preventDefault()}),e.find("#remember").on("change",function(){track("Two-factor Authentication Remember Changed")}))})})(this),instrument_function(function(){$(function(){function e(){$(".NS-phone_numbers__edit").is(":visible")?$(t).find(".js-back:not(.edit-back-button)").hide():$(t).find(".js-back").show()}var t=".NS-two_factor_authentication_new";$(document).on("click",t+" .js-confirmation .js-next",function(e){$(t+" .js-confirmation").addClass("hide"),$(t+" .js-setup").removeClass("hide").trigger("resize"),e.preventDefault()}),$(document).on("click",t+" .js-auth_method .js-next",function(n){var i=$(this),r=i.closest(t),o=r.find(".js-auth_method");"phone"===o.find("input:checked").val()?r.find(".js-devices").show():r.find(".js-qr_code").show(),r.trigger("resize"),e(),o.hide(),n.preventDefault()}),$(document).on("click",t+" .js-qr_code .js-back",function(n){var i=$(this).closest(t);i.find(".js-qr_code").hide(),i.find(".js-auth_method").show(),e(),n.preventDefault()}),$(document).on("click",t+" .js-devices .js-back",function(n){var i=$(this).closest(t);i.find(".js-devices").hide(),i.find(".js-auth_method").show(),e(),n.preventDefault()}),$(document).on("phone_number:added",t,function(){var e=$(this);e.find("form").submit()}),$(document).on("click",t+" a.js-enable_edit_phone",function(n){var i=$(this),r=i.closest(t);r.find(".js-edit_phone").removeClass("hide"),r.find(".js-previous_phone").addClass("hide"),r.find(".js-submit").addClass("hide"),r.trigger("resize"),e(),n.preventDefault()}),$(document).on("submit",t+" form.js-method",function(e){var t=$(this);$.ajax({url:t.attr("action"),type:t.attr("method"),data:t.serialize(),dataType:"json",success:function(e){e.success?window.location.reload(!0):growl(e)}}),e.preventDefault()})})})(this),instrument_function(function(){$(function(){function e(){var e=$('div[id="forgot-password"]');e.removeClass("current"),e.siblings("#login, #verify").addClass("current"),$(".modal_dialog #facebook, .modal_dialog #verify").show()}function t(t){var n=$(t).closest(".current");n.is("#verify")||n.removeClass("current"),$("#login-signup #forgot-password").addClass("current"),$(".modal_dialog #facebook, .modal_dialog #verify").hide(),$(document).one("closed.modal_dialog",e)}$(document).on("click","#login-signup a.switch",function(e){e.preventDefault();var t=$(this).closest(".current");t.removeClass("current"),t.siblings("#login, #signup").addClass("current")}),$(document).on("click","#retry-forgot-password",function(e){var n=this.href,i=$('div[id="forgot-password"]');t(this),$.ajax({url:n,dataType:"html",success:function(e){i=$(e).replaceAll(i),i.addClass("current")}}),e.preventDefault()}),$(document).on("click","#login-signup a.link_to_forgot-password-dialog",function(e){e.preventDefault(),t(this),$(document).on("jGrowl.close_200","form#reset",function(){$(".modal_dialog").trigger("close.modal_dialog")})}),$(document).on("form-submit-notify","#forgot-password #reset",e);var n=$("#user_sessions_new, #users_new");n.length&&($(".current",n).find("input:visible:first").focus(),$("#user_weekly_newsletter").change(function(){var e=$(this);track(e.is(":checked")?"Checked Newsletter":"Unchecked Newsletter")}),$(".fieldset-errors").livequery(function(){if(""!==$.trim($(".fieldset-errors").text())){var e=$(".fieldset-errors h2").text(),t=$(".fieldset-errors li").text();track("Errored User Signup",{error_type:e,error_text:t})}}),$("input",n).focus(function(){$("#login, #signup").removeClass("current"),$(this).closest("#login, #signup").addClass("current")}))})})(this),instrument_function(function(){$(function(){$(document).on("blur","#new_user input#user_email",function(){var e=$(this);e.mailcheck({suggested:function(e,t){var n=$('<div class="mailcheck_suggestion h5 grey-dark mb1">'+I18n.t("onloads.views.users.new.Did_you_mean",{suggestion:t.full})+"</div>");e.siblings(".mailcheck_suggestion").remove(),n.find("a").on("click",function(n){n.preventDefault(),e.val(t.full)}),e.before(n),n.slideDown(),"undefined"!=typeof ga&&ga("send","event","Regular Signup Errors","Invalid domain or TLD detected",e.val())},ignoreTLDs:!0})})})})(this),instrument_function(function(){$(function(){function e(){var e={series:{pie:{show:!0,stroke:{width:2,color:"rgb(230,230,230)"},label:{show:!1}}},grid:{hoverable:!0,clickable:!0},legend:{show:!1}},t=$("#hover_label");$.plot(i,circle_data,e),i.on("plothover",function(e,i,r){if(r){var o,a=r.series.label,s=circle_data[r.seriesIndex].projects_backed;o=s>0?a+' <span id="count">('+s+")</span>":'<span class="empty">'+a+"</span>",t.html(o),t.css({visibility:"visible",top:n.y-t.height()+"px",left:n.x-t.width()/2+"px",padding:"1px 4px"})}}),i.on("mouseout",function(){t.empty(),t.css("visibility","hidden")}),i.on("plotclick",function(e,t,n){if(n){var r=circle_data[n.seriesIndex].path;r&&"string"==typeof r&&i.trigger("navigate",r)}})}var t=$(".NS_users__profile"),n={x:-1,y:-1},i=$("#small_circle");t.length&&($("#profile_tools .share").click(function(e){$("#profile_tools .share_hover").toggle(),e.preventDefault()}),$("a.twitter").click(function(e){window.open($(this).attr("href"),"twTweet","top=100,left=100,width=600px,height=400px,location=no,menubar=no,toolbar=no,scrollbars=yes"),e.preventDefault()}),$("a.facebook").click(function(e){window.open($(this).attr("href"),"fbShare","top=100,left=100,width=640px,height=350px,location=no,menubar=no,toolbar=no,scrollbars=yes"),e.preventDefault()}),$(document).mousemove(function(e){n={x:e.pageX,y:e.pageY}}),e())})})(this),instrument_function(function(){$(function(){var e=$(".NS-users_updates_notifications");e.length&&($("#manage_notifications",e).click(function(t){$(this).hide(),$("ol.projects",e).show(),t.preventDefault()}),$("li",e).delegate("input.checkbox","change",function(){var e=$(this).siblings().filter(".checkbox.mobile");$(this).is(":checked")?e.attr("checked","checked"):e.removeAttr("checked")}))})})(this),instrument_function(function(){$(function(){$(".NS-users-_urls_fields").livequery(function(){var e=$(this),t=$("div.new.template",e);t.on("click","a.add",function(n){n.preventDefault();var i=t.find("input.text"),r=t.clone_form_template(),o=r.find("input.keep_box");return""===i.val()?void r.remove():(r.addClass("field-selected"),r.find("a.add").remove(),r.find("span.value").text(i.val()),i.trigger("dirty"),o.val(0).prop("checked",!0),i.val(""),$("div.urls",e).append(r),void r.trigger("shifted"))
}),e.on("click",".url .remove a",function(e){e.preventDefault();var t=$(this),n=t.closest("div.url"),i=t.siblings(".checkbox");i.prop("checked",!1),n.trigger("dirty"),n.trigger("shifted"),n.hide()}),t.find("input.text").on("keypress",function(e){var n=e.keyCode||e.which;13===n&&(e.preventDefault(),t.find("a.add").click())})})})})(this),instrument_function(function(){$(function(){var e=$("#users_edit_account"),t=!1;e.length&&e.find("a.change_password_toggle").on("click",function(n){n.preventDefault();var i=$("li.change_password",e);t?(i.fadeOut(),i.find("input").prop("disabled",!0),i.find("input").val(""),t=!1):(i.fadeIn(),i.find("input").prop("disabled",!1),i.first().find("input").focus(),t=!0)})})})(this),instrument_function(function(){$(function(){var e=$("body#users_edit_profile");if(e.length){var t=e.find("input.file");t.ksr_uploader()}})})(this),instrument_function(function(){$(function(){var e="#users_watched_projects";$(document).on("click",e+" a.unstar",function(e){e.preventDefault();var t=$(this);$.ajax({url:t.attr("href"),type:"post",dataType:"json",success:function(){var e=t.closest(".project");e.fadeOut(function(){var t=e.closest(".section");t.find(".project:visible").length||t.remove()})}})}),$(document).on("click",e+" a.potd",function(e){e.preventDefault();var t=$(this);$.ajax({url:t.attr("href"),type:"post",dataType:"json",success:function(){window.location.reload()}})})})})(this),instrument_function(function(e){define_namespace(".NS_video_tracks__caption_video",function(){var t=new e.VideoTrack(e.videoTrackJSON);new e.VideoTrackView({model:t,el:"#video_track"}).render()})})(this),instrument_function(function(){$(function(){$(document).on("click","#unwatch a",function(e){var t=$(this);e.preventDefault(),current_project.set("is_starred",!1),$.ajax({url:t.attr("href"),dataType:"json",type:"POST"})})})})(this),instrument_function(function(){$(function(){$(document).on("click","#watch a",function(e){var t=$(this);e.preventDefault(),current_project.set("is_starred",!0),$.ajax({url:t.attr("href"),dataType:"json",type:"POST",success:function(e){if(e.modal){var t=$.create_modal_dialog("",e.data);t.data("modal_dialog").open(),"undefined"!=typeof FB&&FB.XFBML.parse(t.find(".modal_dialog_body")[0]),current_project.set("is_starred",!1)}e.flash&&growl(_.map(e.flash,function(e){return e[e.length-1]}))}})})})})(this),instrument_function(function(){$(function(){$(".widget_show").livequery(function(){function e(e,t){var n=render("widgets/_video_embed_code",{width:e,height:t,path:o});r.find("input#width").val(e),r.find("input#height").val(t),i.find("textarea").val(n)}var t=$(this),n=t.find(".size form"),i=t.find(".video .code"),r=n.find(".custom"),o=i.data("path");e(480,360),n.find("input.radio").on("change",function(){var t=$("input.radio:checked"),r=t.closest("label");n.find("label").removeClass("selected"),r.addClass("selected"),e(r.data("width"),r.data("height")),i.find("textarea").select(),t.is("#widget-size_size-custom")&&r.find("input.text").val("").eq(0).select()}),r.find("input").on("keyup input cut paste",function(t){var n=$(t.target),i=4/3,o=r.find("input#width").val(),a=r.find("input#height").val();n.is("#width")?a=Math.ceil(o/i):o=Math.ceil(a*i),e(o,a)})})})})(this),instrument_function(function(){$(function(){var e=$("body#years_twentytwelve"),t=$("#panel_content");if(e.length){!function(){function e(){$(".panel").width($(window).width()),$(window).width()>570?($(".section").each(function(){var e=$(this);e.width($(window).width()*e.find(".panel").length)}),$("#panels").height($(window).height()),$("body").css({overflow:"hidden"})):$("body").css({overflow:"visible"}),$(".video_big").width($(window).width()),$(".video_big").height($(this).parent(".panel").height());var e=1.77864583333333;$(window).height()*e>$(window).width()?($(".video_big video").height($(window).height()),$(".video_big video").css({width:"auto",position:"absolute",top:"0px","margin-top":"0px",left:"50%","margin-left":-Math.round($(this).height()*e/2)})):($(".video_big video").width($(window).width()),$(".video_big video").css({height:"auto",position:"absolute",left:"0px","margin-left":"0px",top:"50%","margin-top":-Math.round($(this).width()/e/2)}))}var n=0,i=t.find("li.panel").length,r="";track("YiR/2012 Initialize"),t.serialScroll({items:"li.panel",lock:!1,cycle:!1,duration:500,easing:"easeOutExpo"}),t.on("notify.serialScroll",function(e,o){var a=t.find("li.panel").eq(o),s=a.closest(".section").attr("id");r="#"+a.attr("id"),track("YiR/2012 Panel Load",{panel_index:o,panel_name:s}),o>0?$("#arrows .next, #arrows .prev, header, footer").addClass("visible"):$("#arrows .next, #arrows .prev, header, footer").removeClass("visible"),history.pushState&&(o>0?history.pushState({page:o},null,r):history.pushState({page:o},null,URI().hash("")));try{a.find(".video_autoplay").length?(t.find("video")[0].pause(),a.find("video")[0].play(),a.find("video").on("ended",function(){try{$(this)[0].play()}catch(e){}})):t.find("video")[0].pause()}catch(c){}$("header, footer, .next, .prev").removeClass("january february march april may june july august september october november december"),o>0&&$("header, footer, .next, .prev").addClass(s),o===i-1?($("#arrows .next").hide(),$("footer").hide()):0!==o&&($("#arrows .next").show(),$("footer").show()),$("#tile_view").find("li").removeClass("selected"),$("#tile_view").find("li[data-url="+window.location.hash.substring(1)+"]").addClass("selected"),n=o}),$(window).on("hashchange",function(){r!==window.location.hash&&(window.location.hash.length>1&&t.find(window.location.hash).length&&(n=$(window.location.hash).index("li.panel")),t.trigger("notify.serialScroll",[n]))}).trigger("hashchange"),e(),$(window).on("resize",function(){e(),t.trigger("goto",[n])}),$("#arrows .next, #intro .next").on("click",function(e){e.preventDefault(),track("YiR/2012 Next",{keypress:!1}),t.trigger("next")}),$("#arrows .prev").on("click",function(e){e.preventDefault(),track("YiR/2012 Previous",{keypress:!1}),t.trigger("prev")}),$("header h1 a").on("click",function(e){e.preventDefault(),track("YiR/2012 Reset"),t.scrollTo("#intro"),t.trigger("notify.serialScroll",[0]),$("#tile_view_link").find(".ss-grid").removeClass("hide"),$("#tile_view_link").find(".ss-delete").addClass("hide"),$("#content").animate({marginTop:"0px"},800,"easeOutExpo",function(){$("body").css({overflow:"hidden"})})})}(),$(window).on("keydown",function(e){switch(e.keyCode){case KEY.LEFT:track("YiR/2012 Previous",{keypress:!0}),t.trigger("prev"),$(".video.video_flash").is(":visible")&&t.find(".close_video").click();break;case KEY.RIGHT:track("YiR/2012 Next",{keypress:!0}),t.trigger("next"),$(".video.video_flash").is(":visible")&&t.find(".close_video").click();break;case KEY.ESC:t.find(".close_video").click(),e.preventDefault()}});var n=$("#makey_c"),i=$("#makey_d"),r=$("#makey_e"),o=$("#makey_f");$(".makey").on("hover",function(e){e.preventDefault(),track("Makey Makey Hover")}),$("#makey_makey #banana_c").on("hover",function(e){e.preventDefault(),n.trigger("play")}),$("#makey_makey #banana_d").on("hover",function(e){e.preventDefault(),i.trigger("play")}),$("#makey_makey #banana_e").on("hover",function(e){e.preventDefault(),r.trigger("play")}),$("#makey_makey #banana_f").on("hover",function(e){e.preventDefault(),o.trigger("play")}),$("#tile_view_link, #tile_view a").on("click",function(){$("#tile_view_link").find(".ss-grid").is(":visible")?($("#tile_view_link").find(".ss-grid").addClass("hide"),$("#tile_view_link").find(".ss-delete").removeClass("hide")):($("#tile_view_link").find(".ss-grid").removeClass("hide"),$("#tile_view_link").find(".ss-delete").addClass("hide")),"0px"===$("#content").css("marginTop")?(track("YiR/2012 Tile View"),$("#content").animate({marginTop:"-"+$(window).height()},800,"easeOutExpo",function(){$("body").css({overflow:"visible"})})):$("#content").animate({marginTop:"0px"},800,"easeOutExpo",function(){$("body").css({overflow:"hidden"})})}),t.find(".play").on("click touchstart",function(e){var t=$(this).closest(".panel");e.preventDefault(),track("YiR/2012 Video Play",{panel:t.attr("id")}),$("#arrows").fadeOut(),$("header, footer").removeClass("visible"),t.find(".video").fadeIn(),t.find(".container").fadeOut("500",function(){t.find(".video-player").ksr_video().trigger("ksr_video:play")})}),t.find(".close_video").on("click",function(e){e.preventDefault(),$(".video.video_flash").fadeOut("500",function(){$(".panel").find(".container").fadeIn()}),$(window).width()>570&&($("#arrows").fadeIn(),$("header, footer").addClass("visible")),$(".panel").find(".video-player").trigger("ksr_video:pause")}),$("footer").find("#mobile_share").on("click focus",function(){$("footer").toggleClass("share_visible")}),$("#share_url").click(function(){$(this).select()}),$("body").removeClass("loading"),history.pushState||$("header, footer").addClass("visible")}})})(this),instrument_function(function(){$(function(){function e(e){return c+" "+e}function t(e){var t=l.find(".state_tools"),n=t.find(".js-state-control"),i=n.filter("[data-state="+e+"]"),r=t.siblings("select"),o=t.closest("form"),a=i.text();o.find("input.submit").val(a).removeClass("accept reply decline").addClass(a.toLowerCase()),n.removeClass("selected"),i.addClass("selected"),r.val(e)}function n(){var e=f.find(".tickets");$.ajax({type:"GET",dataType:"JSON",url:e.data("url"),success:function(t){e.html(render("admin/zendesk_tickets/_index",t))}})}function i(){function e(e){return!isNaN(parseFloat(e))&&isFinite(e)?(n.find(".searching").show(),n.find(".searching .queued").html("number "+(parseInt(e,10)+1)+" in the search queue"),!1):_.isObject(e)&&""===e.matches?(n.find(".invalid_image").show(),n.find(".searching").hide(),!0):(n.find(".searching").hide(),n.append(render("admin/reverse_image_search/_show",e)),!0)}var t=5e3,n=$(this),i=n.data("search_url");$.pollster(i,e,{delay:t})}function r(){var e=$(this);e.data("initiated")||(e.data("initiated",!0),$(".reverse_image_search li.project_image").each(i))}function o(){var e=$("details.reverse_image_search summary");e.is("[open]")?r.call(e[0]):e.on("click",r)}function a(){var e=$(".js-submission-message"),t=e.data("salutation"),n=e.data("closing"),i=t.length;""===e.val()&&(e.val(t+n),e[0].setSelectionRange(i,i))}function s(e){var t=$(".js-submission-tags"),n=(t.val()+" "+e).split(" ");n=_.compact(_.uniq(n)),t.val(n.join(" "))}var c=".NS-admin_submissions__edit",l=$(c),u="form.moderator",d=$(u),f=$("#admin_panel_wrap");l.length&&($(document).on("click",e("a.change_response"),function(){$(e(".responded_to .moderator_only")).slideToggle()}),$(document).on("click",e("a.claim"),function(e){e.preventDefault(),d.find("select#submission_user_id").val($(this).data("admin_id")),d.submit()}),$(document).on("change",u,function(){$(this).submit()}),$(document).on("submit",u,function(e){var t=$(this),n=t.find(".saving").show();$.ajax({url:t.attr("action"),type:t.attr("method"),data:t.serialize(),dataType:"json",success:function(e){var n=t.find("#next_review_submission_url").val();e.ok?e.moderator_is_me?($(".moderator_only, a.claim, .change_response_container").addClass("me"),$(".moderator_only").show()):($(".moderator_only, a.claim, .change_response_container").removeClass("me"),$(".moderator_only").hide(),n&&(window.location=n)):growl({error:"Moderator change didn't take :-("})},error:function(){growl({error:"Moderator change didn't take :-("})},complete:function(){n.hide()}}),e.preventDefault()}),$(e(".state_tools")).livequery(function(){var e=$(this),n=e.siblings("select"),i=e.find(".js-state-control");i.click(function(e){t($(this).data("state")),e.preventDefault()}),t(n.val())}),$(document).on("keydown",function(e){if(e.ctrlKey){var n=null;if("submitted"!==current_project.get("state"))return;switch(e.which){case 65:n="accepted";break;case 68:n="rejected";break;case 82:n="pending";break;default:return}t(n)}}),f.is(":visible")&&(n(),o()),f.on("opened",o),f.on("opened",n),$(".invalid_image form").on("submit",function(e){e.preventDefault();var t=$(this);$.ajax({url:t.attr("action"),data:t.serialize(),method:"put",global:!1,success:function(){var e=t.closest("li.project_image");e.find(".invalid_image").hide(),e.find(".searching").show(),i.call(e[0])}})}),a(),$(".js-macros-selector").on("change",function(){var e=$(this).find(":selected"),t=e.data("body"),n=e.data("tags"),i=$(".js-submission-message"),r=i.val(),o=i[0].selectionStart,a=i[0].selectionEnd,c="";void 0!==t&&(c=r.substr(0,o)+t+r.substr(a,r.length),i.val(c),$(this).val(null).prop("selected",!0),s(n))}))})})(this),instrument_function(function(){$(function(){var e="form.NS-admin_projects__edit";$(document).on("submit",e,function(e){var t=$(this),n=t.find(".submit");n.val("Saving"),$.ajax({url:t.attr("action"),type:t.attr("method"),dataType:"json",data:t.serialize(),success:function(){n.val("Saved"),setTimeout(function(){n.val("Save")},1e3)}}),$("#admin-nav-wrap span.moderation_status").text($("select",this).val().substring(0,3)),e.preventDefault()}).on("change",e,function(){$(this).submit()})})})(this),instrument_function(function(){$(function(){$(".NS-admin_projects_tags").livequery(function(){function e(e){e.addClass("selected")}function t(e){e.removeClass("selected")}var n,i=$(this);i.find("label").each(function(){var t=$(this);t.find("input.checkbox:checked").length&&e(t)}),i.on("change","input.checkbox",function(){var i=$(this),r=i.closest("label"),o=i.closest("form");i.is(":checked")?e(r):t(r),n&&n.abort(),n=$.ajax({url:o.attr("action"),type:o.attr("method"),dataType:"json",data:o.serialize()})})})})})(this);var jwplayer=function(e){return jwplayer.api?jwplayer.api.selectPlayer(e):void 0},$jw=jwplayer;jwplayer.version="5.7.1896",jwplayer.vid=document.createElement("video"),jwplayer.audio=document.createElement("audio"),jwplayer.source=document.createElement("source"),function(e){function t(t){if(e.utils.exists(t)){var n=t.indexOf("://"),i=t.indexOf("?");return n>0&&(0>i||i>n)}}e.utils=function(){},e.utils.typeOf=function(e){var t=typeof e;return"object"===t&&(e?e instanceof Array&&(t="array"):t="null"),t},e.utils.extend=function(){var t=e.utils.extend.arguments;if(t.length>1){for(var n=1;n<t.length;n++)for(var i in t[n])t[0][i]=t[n][i];return t[0]}return null},e.utils.clone=function(){var t,n=e.utils.clone.arguments;if(1==n.length)switch(e.utils.typeOf(n[0])){case"object":t={};for(var i in n[0])t[i]=e.utils.clone(n[0][i]);break;case"array":t=[];for(var i in n[0])t[i]=e.utils.clone(n[0][i]);break;default:return n[0]}return t},e.utils.extension=function(e){return e?(e=e.substring(e.lastIndexOf("/")+1,e.length),e=e.split("?")[0],e.lastIndexOf(".")>-1?e.substr(e.lastIndexOf(".")+1,e.length).toLowerCase():void 0):""},e.utils.html=function(e,t){e.innerHTML=t},e.utils.wrap=function(e,t){e.parentNode&&e.parentNode.replaceChild(t,e),t.appendChild(e)},e.utils.ajax=function(e,t,n){var i;i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),i.onreadystatechange=function(){4===i.readyState&&(200===i.status?t&&t(i):n&&n(e))};try{i.open("GET",e,!0),i.send(null)}catch(r){n&&n(e)}return i},e.utils.load=function(e,t,n){e.onreadystatechange=function(){4===e.readyState&&(200===e.status?t&&t():n&&n())}},e.utils.find=function(e,t){return e.getElementsByTagName(t)},e.utils.append=function(e,t){e.appendChild(t)},e.utils.isIE=function(){return!1||"undefined"!=typeof window.ActiveXObject},e.utils.isLegacyAndroid=function(){var e=navigator.userAgent.toLowerCase();return null!==e.match(/android 2.[012]/i)},e.utils.isIOS=function(e){"undefined"==typeof e&&(e=/iP(hone|ad|od)/i);var t=navigator.userAgent.toLowerCase();return null!==t.match(e)},e.utils.isIPad=function(){return e.utils.isIOS(/iPad/i)},e.utils.isIPod=function(){return e.utils.isIOS(/iP(hone|od)/i)},e.utils.getFirstPlaylistItemFromConfig=function(e){var t,n={};return t=e.playlist&&e.playlist.length?e.playlist[0]:e,n.file=t.file,n.levels=t.levels,n.streamer=t.streamer,n.playlistfile=t.playlistfile,n.provider=t.provider,n.provider||(n.file&&(n.file.toLowerCase().indexOf("youtube.com")>-1||n.file.toLowerCase().indexOf("youtu.be")>-1)&&(n.provider="youtube"),n.streamer&&0==n.streamer.toLowerCase().indexOf("rtmp://")&&(n.provider="rtmp"),t.type&&(n.provider=t.type.toLowerCase())),"audio"==n.provider&&(n.provider="sound"),n},e.utils.getOuterHTML=function(e){if(e.outerHTML)return e.outerHTML;try{return(new XMLSerializer).serializeToString(e)}catch(t){return""}},e.utils.setOuterHTML=function(e,t){if(e.outerHTML)e.outerHTML=t;else{var n=document.createElement("div");n.innerHTML=t;var i=document.createRange();i.selectNodeContents(n);var r=i.extractContents();e.parentNode.insertBefore(r,e),e.parentNode.removeChild(e)}},e.utils.hasFlash=function(){if("undefined"!=typeof navigator.plugins&&"undefined"!=typeof navigator.plugins["Shockwave Flash"])return!0;if("undefined"!=typeof window.ActiveXObject)try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),!0}catch(e){}return!1},e.utils.getPluginName=function(e){return e.lastIndexOf("/")>=0&&(e=e.substring(e.lastIndexOf("/")+1,e.length)),e.lastIndexOf("-")>=0&&(e=e.substring(0,e.lastIndexOf("-"))),e.lastIndexOf(".swf")>=0&&(e=e.substring(0,e.lastIndexOf(".swf"))),e.lastIndexOf(".js")>=0&&(e=e.substring(0,e.lastIndexOf(".js"))),e},e.utils.getPluginVersion=function(e){return e.lastIndexOf("-")>=0?e.lastIndexOf(".js")>=0?e.substring(e.lastIndexOf("-")+1,e.lastIndexOf(".js")):e.lastIndexOf(".swf")>=0?e.substring(e.lastIndexOf("-")+1,e.lastIndexOf(".swf")):e.substring(e.lastIndexOf("-")+1):""},e.utils.getAbsolutePath=function(n,i){if(e.utils.exists(i)||(i=document.location.href),!e.utils.exists(n))return void 0;if(t(n))return n;var r,o=i.substring(0,i.indexOf("://")+3),a=i.substring(o.length,i.indexOf("/",o.length+1));if(0===n.indexOf("/"))r=n.split("/");else{var s=i.split("?")[0];s=s.substring(o.length+a.length+1,s.lastIndexOf("/")),r=s.split("/").concat(n.split("/"))}for(var c=[],l=0;l<r.length;l++)r[l]&&e.utils.exists(r[l])&&"."!=r[l]&&(".."==r[l]?c.pop():c.push(r[l]));return o+a+"/"+c.join("/")},e.utils.pluginPathType={ABSOLUTE:"ABSOLUTE",RELATIVE:"RELATIVE",CDN:"CDN"},e.utils.getPluginPathType=function(t){if("string"==typeof t){t=t.split("?")[0];var n=t.indexOf("://");if(n>0)return e.utils.pluginPathType.ABSOLUTE;var i=t.indexOf("/"),r=e.utils.extension(t);return!(0>n&&0>i)||r&&isNaN(r)?e.utils.pluginPathType.RELATIVE:e.utils.pluginPathType.CDN}},e.utils.mapEmpty=function(e){for(var t in e)return!1;return!0},e.utils.mapLength=function(e){var t=0;for(var n in e)t++;return t},e.utils.log=function(e,t){"undefined"!=typeof console&&"undefined"!=typeof console.log&&(t?console.log(e,t):console.log(e))},e.utils.css=function(t,n){if(e.utils.exists(t))for(var i in n)try{if("undefined"==typeof n[i])continue;if("number"==typeof n[i]&&"zIndex"!=i&&"opacity"!=i){if(isNaN(n[i]))continue;n[i]=i.match(/color/i)?"#"+e.utils.strings.pad(n[i].toString(16),6):Math.ceil(n[i])+"px"}t.style[i]=n[i]}catch(r){}},e.utils.isYouTube=function(e){return e.indexOf("youtube.com")>-1||e.indexOf("youtu.be")>-1},e.utils.transform=function(e,t){e.style.webkitTransform=t,e.style.MozTransform=t,e.style.OTransform=t},e.utils.stretch=function(t,n,i,r,o,a){if("undefined"!=typeof i&&"undefined"!=typeof r&&"undefined"!=typeof o&&"undefined"!=typeof a){var s=i/o,c=r/a;n.style.overflow="hidden",e.utils.transform(n,"");var l={};switch(t.toUpperCase()){case e.utils.stretching.NONE:l.width=o,l.height=a;break;case e.utils.stretching.UNIFORM:s>c?(l.width=o*c,l.height=a*c):(l.width=o*s,l.height=a*s);break;case e.utils.stretching.FILL:s>c?(l.width=o*s,l.height=a*s):(l.width=o*c,l.height=a*c);break;case e.utils.stretching.EXACTFIT:e.utils.transform(n,["scale(",s,",",c,")"," translate(0px,0px)"].join("")),l.width=o,l.height=a}l.top=(r-l.height)/2,l.left=(i-l.width)/2,e.utils.css(n,l)}},e.utils.stretching={NONE:"NONE",FILL:"FILL",UNIFORM:"UNIFORM",EXACTFIT:"EXACTFIT"},e.utils.deepReplaceKeyName=function(t,n,i){switch(e.utils.typeOf(t)){case"array":for(var r=0;r<t.length;r++)t[r]=e.utils.deepReplaceKeyName(t[r],n,i);break;case"object":for(var o in t){var a=o.replace(new RegExp(n,"g"),i);t[a]=e.utils.deepReplaceKeyName(t[o],n,i),o!=a&&delete t[o]}}return t},e.utils.isInArray=function(e,t){if(!(e&&e instanceof Array))return!1;for(var n=0;n<e.length;n++)if(t===e[n])return!0;return!1},e.utils.exists=function(e){switch(typeof e){case"string":return e.length>0;case"object":return null!==e;case"undefined":return!1}return!0},e.utils.empty=function(e){if("function"==typeof e.hasChildNodes)for(;e.hasChildNodes();)e.removeChild(e.firstChild)},e.utils.parseDimension=function(e){return"string"==typeof e?""===e?0:e.lastIndexOf("%")>-1?e:parseInt(e.replace("px",""),10):e},e.utils.getDimensions=function(t){return t&&t.style?{x:e.utils.parseDimension(t.style.left),y:e.utils.parseDimension(t.style.top),width:e.utils.parseDimension(t.style.width),height:e.utils.parseDimension(t.style.height)}:{}},e.utils.timeFormat=function(e){return str="00:00",e>0&&(str=Math.floor(e/60)<10?"0"+Math.floor(e/60)+":":Math.floor(e/60)+":",str+=Math.floor(e%60)<10?"0"+Math.floor(e%60):Math.floor(e%60)),str}}(jwplayer),function(e){e.events=function(){},e.events.COMPLETE="COMPLETE",e.events.ERROR="ERROR"}(jwplayer),function(jwplayer){jwplayer.events.eventdispatcher=function(debug){var _debug=debug,_listeners,_globallisteners;this.resetEventListeners=function(){_listeners={},_globallisteners=[]},this.resetEventListeners(),this.addEventListener=function(type,listener,count){try{jwplayer.utils.exists(_listeners[type])||(_listeners[type]=[]),"string"==typeof listener&&eval("listener = "+listener),_listeners[type].push({listener:listener,count:count})}catch(err){jwplayer.utils.log("error",err)}return!1},this.removeEventListener=function(e,t){if(_listeners[e]){try{for(var n=0;n<_listeners[e].length;n++)if(_listeners[e][n].listener.toString()==t.toString()){_listeners[e].splice(n,1);break}}catch(i){jwplayer.utils.log("error",i)}return!1}},this.addGlobalListener=function(listener,count){try{"string"==typeof listener&&eval("listener = "+listener),_globallisteners.push({listener:listener,count:count})}catch(err){jwplayer.utils.log("error",err)}return!1},this.removeGlobalListener=function(e){if(_globallisteners[type]){try{for(var t=0;t<_globallisteners.length;t++)if(_globallisteners[t].listener.toString()==e.toString()){_globallisteners.splice(t,1);break}}catch(n){jwplayer.utils.log("error",n)}return!1}},this.sendEvent=function(e,t){if(jwplayer.utils.exists(t)||(t={}),_debug&&jwplayer.utils.log(e,t),"undefined"!=typeof _listeners[e])for(var n=0;n<_listeners[e].length;n++){try{_listeners[e][n].listener(t)}catch(i){jwplayer.utils.log("There was an error while handling a listener: "+i.toString(),_listeners[e][n].listener)}_listeners[e][n]&&(1===_listeners[e][n].count?delete _listeners[e][n]:_listeners[e][n].count>0&&(_listeners[e][n].count=_listeners[e][n].count-1))}for(var r=0;r<_globallisteners.length;r++){try{_globallisteners[r].listener(t)}catch(i){jwplayer.utils.log("There was an error while handling a listener: "+i.toString(),_globallisteners[r].listener)}_globallisteners[r]&&(1===_globallisteners[r].count?delete _globallisteners[r]:_globallisteners[r].count>0&&(_globallisteners[r].count=_globallisteners[r].count-1))}}}}(jwplayer),function(e){var t=[];e.api=function(t){function n(e,t){return function(n,i,r,o){if("flash"==e.renderingMode||"html5"==e.renderingMode){var a;i?(p[n]=i,a="jwplayer('"+e.id+"').callback('"+n+"')"):!i&&p[n]&&delete p[n],l.jwDockSetButton(n,a,r,o)}return t}}function i(e){return function(t){var n=t.newstate,i=t.oldstate;if(n==e){var r=s[n];if(r)for(var o=0;o<r.length;o++)"function"==typeof r[o]&&r[o].call(this,{oldstate:i,newstate:n})}}}function r(e,t){return function(n){if(e==n.component){var i=c[e][t];if(i)for(var r=0;r<i.length;r++)"function"==typeof i[r]&&i[r].call(this,n)}}}function o(t,n){var i=e.utils.extend({},n);t!=e.api.events.JWPLAYER_FULLSCREEN||i.fullscreen?"object"==typeof i.data&&(i=e.utils.extend(i,i.data),delete i.data):(i.fullscreen="true"==i.message?!0:!1,delete i.message);var r=["position","duration","offset"];for(var o in r)i[r[o]]&&(i[r[o]]=Math.round(1e3*i[r[o]])/1e3);return i}this.container=t,this.id=t.id;var a={},s={},c={},l=void 0,u=!1,d=[],f=e.utils.getOuterHTML(t),h={},p={};return this.getBuffer=function(){return this.callInternal("jwGetBuffer")},this.getContainer=function(){return this.container},this.getPlugin=function(t){var i=this,r={};return"dock"==t?e.utils.extend(r,{setButton:n(i,r),show:function(){return i.callInternal("jwDockShow"),r},hide:function(){return i.callInternal("jwDockHide"),r},onShow:function(t){return i.componentListener("dock",e.api.events.JWPLAYER_COMPONENT_SHOW,t),r},onHide:function(t){return i.componentListener("dock",e.api.events.JWPLAYER_COMPONENT_HIDE,t),r}}):"controlbar"==t?e.utils.extend(r,{show:function(){return i.callInternal("jwControlbarShow"),r},hide:function(){return i.callInternal("jwControlbarHide"),r},onShow:function(t){return i.componentListener("controlbar",e.api.events.JWPLAYER_COMPONENT_SHOW,t),r},onHide:function(t){return i.componentListener("controlbar",e.api.events.JWPLAYER_COMPONENT_HIDE,t),r}}):"display"==t?e.utils.extend(r,{show:function(){return i.callInternal("jwDisplayShow"),r},hide:function(){return i.callInternal("jwDisplayHide"),r},onShow:function(t){return i.componentListener("display",e.api.events.JWPLAYER_COMPONENT_SHOW,t),r},onHide:function(t){return i.componentListener("display",e.api.events.JWPLAYER_COMPONENT_HIDE,t),r}}):this.plugins[t]},this.callback=function(e){return p[e]?p[e]():void 0},this.getDuration=function(){return this.callInternal("jwGetDuration")},this.getFullscreen=function(){return this.callInternal("jwGetFullscreen")},this.getHeight=function(){return this.callInternal("jwGetHeight")},this.getLockState=function(){return this.callInternal("jwGetLockState")},this.getMeta=function(){return this.getItemMeta()},this.getMute=function(){return this.callInternal("jwGetMute")},this.getPlaylist=function(){var t=this.callInternal("jwGetPlaylist");"flash"==this.renderingMode&&e.utils.deepReplaceKeyName(t,"__dot__",".");for(var n=0;n<t.length;n++)e.utils.exists(t[n].index)||(t[n].index=n);return t},this.getPlaylistItem=function(t){return e.utils.exists(t)||(t=this.getCurrentItem()),this.getPlaylist()[t]},this.getPosition=function(){return this.callInternal("jwGetPosition")},this.getRenderingMode=function(){return this.renderingMode},this.getState=function(){return this.callInternal("jwGetState")},this.getVolume=function(){return this.callInternal("jwGetVolume")},this.getWidth=function(){return this.callInternal("jwGetWidth")},this.setFullscreen=function(t){return e.utils.exists(t)?this.callInternal("jwSetFullscreen",t):this.callInternal("jwSetFullscreen",!this.callInternal("jwGetFullscreen")),this},this.setMute=function(t){return e.utils.exists(t)?this.callInternal("jwSetMute",t):this.callInternal("jwSetMute",!this.callInternal("jwGetMute")),this},this.lock=function(){return this},this.unlock=function(){return this},this.load=function(e){return this.callInternal("jwLoad",e),this},this.playlistItem=function(e){return this.callInternal("jwPlaylistItem",e),this},this.playlistPrev=function(){return this.callInternal("jwPlaylistPrev"),this},this.playlistNext=function(){return this.callInternal("jwPlaylistNext"),this},this.resize=function(e,t){return"html5"==this.renderingMode?l.jwResize(e,t):(this.container.width=e,this.container.height=t),this},this.play=function(t){return"undefined"==typeof t?(t=this.getState(),this.callInternal(t==e.api.events.state.PLAYING||t==e.api.events.state.BUFFERING?"jwPause":"jwPlay")):this.callInternal("jwPlay",t),this},this.pause=function(t){return"undefined"==typeof t?(t=this.getState(),this.callInternal(t==e.api.events.state.PLAYING||t==e.api.events.state.BUFFERING?"jwPause":"jwPlay")):this.callInternal("jwPause",t),this},this.stop=function(){return this.callInternal("jwStop"),this},this.seek=function(e){return this.callInternal("jwSeek",e),this},this.setVolume=function(e){return this.callInternal("jwSetVolume",e),this},this.onBufferChange=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_BUFFER,t)},this.onBufferFull=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_BUFFER_FULL,t)},this.onError=function(t){return this.eventListener(e.api.events.JWPLAYER_ERROR,t)},this.onFullscreen=function(t){return this.eventListener(e.api.events.JWPLAYER_FULLSCREEN,t)},this.onMeta=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_META,t)},this.onMute=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_MUTE,t)},this.onPlaylist=function(t){return this.eventListener(e.api.events.JWPLAYER_PLAYLIST_LOADED,t)},this.onPlaylistItem=function(t){return this.eventListener(e.api.events.JWPLAYER_PLAYLIST_ITEM,t)},this.onReady=function(t){return this.eventListener(e.api.events.API_READY,t)},this.onResize=function(t){return this.eventListener(e.api.events.JWPLAYER_RESIZE,t)},this.onComplete=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_COMPLETE,t)},this.onSeek=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_SEEK,t)},this.onTime=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_TIME,t)},this.onVolume=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_VOLUME,t)},this.onBuffer=function(t){return this.stateListener(e.api.events.state.BUFFERING,t)},this.onPause=function(t){return this.stateListener(e.api.events.state.PAUSED,t)},this.onPlay=function(t){return this.stateListener(e.api.events.state.PLAYING,t)},this.onIdle=function(t){return this.stateListener(e.api.events.state.IDLE,t)},this.remove=function(){a={},d=[],e.utils.getOuterHTML(this.container)!=f&&e.api.destroyPlayer(this.id,f)},this.setup=function(t){if(e.embed){var n=this.id;this.remove();var i=e(n);return i.config=t,new e.embed(i)}return this},this.registerPlugin=function(t,n,i){e.plugins.registerPlugin(t,n,i)},this.setPlayer=function(e,t){l=e,this.renderingMode=t},this.stateListener=function(t,n){return s[t]||(s[t]=[],this.eventListener(e.api.events.JWPLAYER_PLAYER_STATE,i(t))),s[t].push(n),this},this.componentListener=function(e,t,n){return c[e]||(c[e]={}),c[e][t]||(c[e][t]=[],this.eventListener(t,r(e,t))),c[e][t].push(n),this},this.addInternalListener=function(e,t){e.jwAddEventListener(t,'function(dat) { jwplayer("'+this.id+'").dispatchEvent("'+t+'", dat); }')},this.eventListener=function(e,t){return a[e]||(a[e]=[],l&&u&&this.addInternalListener(l,e)),a[e].push(t),this},this.dispatchEvent=function(e){if(a[e])for(var t=o(e,arguments[1]),n=0;n<a[e].length;n++)"function"==typeof a[e][n]&&a[e][n].call(this,t)},this.callInternal=function(t,n){return u?"undefined"!=typeof l&&"function"==typeof l[t]?e.utils.exists(n)?l[t](n):l[t]():null:void d.push({method:t,parameters:n})},this.playerReady=function(t){u=!0,l||this.setPlayer(document.getElementById(t.id)),this.container=document.getElementById(this.id);for(var n in a)this.addInternalListener(l,n);for(this.eventListener(e.api.events.JWPLAYER_PLAYLIST_ITEM,function(){h={}}),this.eventListener(e.api.events.JWPLAYER_MEDIA_META,function(t){e.utils.extend(h,t.metadata)}),this.dispatchEvent(e.api.events.API_READY);d.length>0;){var i=d.shift();this.callInternal(i.method,i.parameters)}},this.getItemMeta=function(){return h},this.getCurrentItem=function(){return this.callInternal("jwGetPlaylistIndex")},this},e.api.selectPlayer=function(t){var n;if(e.utils.exists(t)||(t=0),t.nodeType?n=t:"string"==typeof t&&(n=document.getElementById(t)),n){var i=e.api.playerById(n.id);return i?i:e.api.addPlayer(new e.api(n))}return"number"==typeof t?e.getPlayers()[t]:null},e.api.events={API_READY:"jwplayerAPIReady",JWPLAYER_READY:"jwplayerReady",JWPLAYER_FULLSCREEN:"jwplayerFullscreen",JWPLAYER_RESIZE:"jwplayerResize",JWPLAYER_ERROR:"jwplayerError",JWPLAYER_COMPONENT_SHOW:"jwplayerComponentShow",JWPLAYER_COMPONENT_HIDE:"jwplayerComponentHide",JWPLAYER_MEDIA_BUFFER:"jwplayerMediaBuffer",JWPLAYER_MEDIA_BUFFER_FULL:"jwplayerMediaBufferFull",JWPLAYER_MEDIA_ERROR:"jwplayerMediaError",JWPLAYER_MEDIA_LOADED:"jwplayerMediaLoaded",JWPLAYER_MEDIA_COMPLETE:"jwplayerMediaComplete",JWPLAYER_MEDIA_SEEK:"jwplayerMediaSeek",JWPLAYER_MEDIA_TIME:"jwplayerMediaTime",JWPLAYER_MEDIA_VOLUME:"jwplayerMediaVolume",JWPLAYER_MEDIA_META:"jwplayerMediaMeta",JWPLAYER_MEDIA_MUTE:"jwplayerMediaMute",JWPLAYER_PLAYER_STATE:"jwplayerPlayerState",JWPLAYER_PLAYLIST_LOADED:"jwplayerPlaylistLoaded",JWPLAYER_PLAYLIST_ITEM:"jwplayerPlaylistItem"},e.api.events.state={BUFFERING:"BUFFERING",IDLE:"IDLE",PAUSED:"PAUSED",PLAYING:"PLAYING"},e.api.playerById=function(e){for(var n=0;n<t.length;n++)if(t[n].id==e)return t[n];return null},e.api.addPlayer=function(e){for(var n=0;n<t.length;n++)if(t[n]==e)return e;
return t.push(e),e},e.api.destroyPlayer=function(n,i){for(var r=-1,o=0;o<t.length;o++)t[o].id!=n||(r=o);if(r>=0){var a=document.getElementById(t[r].id);if(document.getElementById(t[r].id+"_wrapper")&&(a=document.getElementById(t[r].id+"_wrapper")),a)if(i)e.utils.setOuterHTML(a,i);else{var s=document.createElement("div"),c=a.id;a.id.indexOf("_wrapper")==a.id.length-8&&(newID=a.id.substring(0,a.id.length-8)),s.setAttribute("id",c),a.parentNode.replaceChild(s,a)}t.splice(r,1)}return null},e.getPlayers=function(){return t.slice(0)}}(jwplayer);var _userPlayerReady="function"==typeof playerReady?playerReady:void 0;playerReady=function(e){var t=jwplayer.api.playerById(e.id);t?t.playerReady(e):jwplayer.api.selectPlayer(e.id).playerReady(e),_userPlayerReady&&_userPlayerReady.call(this,e)},instrument_function(function(){!function(){function e(e,t){if("undefined"!=typeof e){var n="internal";$("body").is(".widget")&&(n="external"),$.ajax({url:e,type:"post",data:{event_type:t,location:n}})}}function t(e){return $("body").is(".widget")||e.closest("#projects_show").length?"Project":e.closest(".school").length?"School":e.closest(".NS_site__homepage_staff_picks").length?"Homepage Editorial":e.closest("#projects_start").length?"Start Project":e.closest("body.posts").length?"Project Post":e.closest("#projects_edit").length?"Project Edit":e.closest("#jobs_index").length?"Jobs Page":e.closest(".activity").length?"Activity":"Other"}$(document).on("ksr_video:playing",function(n,i){var r=$(n.target),o=t(r),a=r.data("ksr_video"),s=a.current_position(),c=r.closest(".video-player").attr("data-video-tracker-url"),l=r.attr("data-video-name");i?(e(c,"start"),track(o+" Video Start",{video_name:l})):track(o+" Video Resume",{position:s,video_name:l})}).on("ksr_video:paused",function(e){var n=$(e.target),i=n.data("ksr_video"),r=t(n),o=i.current_position(),a=n.attr("data-video-name");track(r+" Video Pause",{position:o,video_name:a})}).on("ksr_video:ended",function(n){var i=$(n.target),r=i.data("ksr_video"),o=t(i),a=r.duration(),s=i.closest(".video-player").attr("data-video-tracker-url"),c=i.attr("data-video-name");e(s,"complete"),track(o+" Video Complete",{duration:a,video_name:c})})}()})(this),instrument_function(function(){window.benchmark&&window.performance.mark("end_base.js_eval")})(this);